(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[530],{17271:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W});var a=n(96156),o=n(28481),r=n(92950),l=n.n(r),i=n(45237),s=n(45697),c=n.n(s),u=n(334),m=n(99166),d=n(33739),p=n(86350),A=n(48716),b=n(39173),g=n(62410),y=n(56455),f=n(18213),E=n(89421),k=n(40839),_=n(91264),h=n(84224),v=n(76200),C=n(50289),S=n(8286),R=n(96597),x=n(42392),Z=n(66650),I=n(3454),j=n(94184),B=n.n(j);n(9774),x.Z.registerLanguage("yaml",Z.Z);var D=function(e){var t=e.systemId,n=e.playbookRunSystemDetails,o=B()("ins-c-job-output",(0,a.Z)({},"ins-c-job-output__finished","running"!==n.status));return l().createElement(l().Fragment,null,l().createElement(k.Title,{headingLevel:"h4",size:"xl",className:"ins-c-job-output__title"},"Playbook log"),t&&t===n.system_id?l().createElement(l().Fragment,null,l().createElement(x.Z,{language:"yaml",showLineNumbers:!0,style:I.Z,className:o},n&&n.console||""),"running"===n.status&&l().createElement("div",{className:"ins-l-playbook-running"},l().createElement(k.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):l().createElement(y.Z,{size:"lg"}))};D.propTypes={systemId:c().string,status:c().string,console:c().string,playbookRunSystemDetails:c().shape({system_id:c().string,status:c().string,console:c().string})},D.defaultProps={playbookRunSystemDetails:{}};const P=(0,i.connect)((function(e){return{playbookRunSystemDetails:e.playbookRunSystemDetails}}))(D);var w=n(40742);n(60884);const N=function(){return l().createElement(l().Fragment,null,l().createElement(A.Z,null,l().createElement(k.Breadcrumb,null,l().createElement(k.BreadcrumbItem,null,l().createElement(y.Z,{size:"lg"})),l().createElement(k.BreadcrumbItem,null,l().createElement(y.Z,{size:"lg"})),l().createElement(k.BreadcrumbItem,{isActive:!0},l().createElement(y.Z,{size:"lg"}))),l().createElement(k.Stack,{hasGutter:!0},l().createElement(k.StackItem,null,l().createElement(b.Z,{title:l().createElement(y.Z,{size:"lg"})})),l().createElement(k.StackItem,null,l().createElement(k.Split,{hasGutter:!0},l().createElement(k.SplitItem,null,l().createElement(v.Z,{className:"ins-c-playbookSummary__settings",title:"Run on"},l().createElement(y.Z,{size:"lg"}))),l().createElement(k.SplitItem,null,l().createElement(v.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},l().createElement(y.Z,{size:"lg"}))),l().createElement(k.SplitItem,null,l().createElement(v.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},l().createElement(y.Z,{size:"lg"}))))))),l().createElement(p.Z,null,l().createElement(k.Stack,{hasGutter:!0},l().createElement(k.Card,null,l().createElement(k.CardHeader,{className:"ins-m-card__header-bold"},l().createElement(k.Button,null,"Download playbook")),l().createElement(k.CardBody,null,l().createElement(w.Z,null))))))};n(77562);var O=function(e){var t=e.name;return l().createElement(k.Bullseye,null,l().createElement(k.EmptyState,null,l().createElement(k.EmptyStateIcon,{className:"ins-c-remediations-failure",icon:_.ExclamationCircleIcon}),l().createElement(k.Title,{headingLevel:"h5",size:"lg"},"Run failed"),l().createElement(k.EmptyStateBody,null,"Playbook failed to run on ",t,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),l().createElement(k.Button,{variant:"link"},"Learn more")))};O.propTypes={name:c().string};const T=O;var z,L=n(22163),F=(n(82598),n(83966)),G=n(30319);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var V=function(e){var t=e.match.params,n=t.executor_id,i=t.run_id,s=t.id,c=e.remediation,C=e.playbookRun,x=e.playbookRunSystems,Z=e.playbookRunSystemDetails,I=e.getPlaybookRun,j=e.getPlaybookRunSystems,B=e.getPlaybookRunSystemDetails,D=e.onCollapseInventory,w=e.loadRemediation,O=(0,r.useState)({}),V=(0,o.Z)(O,2),W=V[0],H=V[1],q=(0,r.useState)([]),J=(0,o.Z)(q,2),K=J[0],M=J[1],Q=(0,r.useState)(""),U=(0,o.Z)(Q,2),X=U[0],$=U[1],ee=(0,r.useState)(1),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],oe=(0,r.useState)(50),re=(0,o.Z)(oe,2),le=re[0],ie=re[1],se=(0,r.useState)(),ce=(0,o.Z)(se,2),ue=ce[0],me=ce[1],de=(0,r.useState)(!1),pe=(0,o.Z)(de,2),Ae=pe[0],be=pe[1],ge=(0,r.useState)(),ye=(0,o.Z)(ge,2),fe=ye[0],Ee=ye[1],ke=(0,r.useRef)(null),_e=(0,L.T)({id:"default"}),he=function(e){ke&&ke.current&&(j(s,i,n,e.per_page,e.per_page*(e.page-1)),ae(e.page),ie(e.per_page),ke.current.onRefreshData(e))};(0,r.useEffect)((function(){return w(s),I(s,i),Ee((function(){return(0,m.Z)(j,500)})),function(){z&&clearInterval(z)}}),[]),(0,r.useEffect)((function(){C&&C.data&&H(C.data.executors.find((function(e){return e.executor_id===n}))||{}),"pending"!==x.status&&j(s,i,n,le,le*(ne-1),X)}),[C]),(0,r.useEffect)((function(){Ae||I(s,i),"running"!==(0,R.fb)(Z.status)&&z&&clearInterval(z),be(!1)}),[Z.status]),(0,r.useEffect)((function(){M((function(){return x.data.map((function(e){var t=e.system_id;return{id:t,display_name:e.system_name,status:e.status,isOpen:ue===t,children:l().createElement(P,{systemId:t})}}))}))}),[x]);var ve,Ce=function(e){return l().createElement(p.Z,null,l().createElement(k.Stack,{hasGutter:!0},l().createElement(k.Card,{className:"ins-c-card__playbook-log"},l().createElement(k.CardBody,null,l().createElement(d.Z,{ref:ke,onLoad:function(e){var t=e.INVENTORY_ACTION_TYPES,n=e.mergeWithEntities;return(0,G.z2)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n(h.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:t,renderStatus:function(e){return l().createElement("div",{className:"ins-c-remediations-status-bar"},(0,R.Nv)((0,R.fb)(e)))},urlBuilder:_e})())))},items:"pending"!==x.status?K:[],isLoaded:"pending"!==x.status,onRefresh:he,page:ne,total:x.meta.total,perPage:le,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===e?function(e,t,n,a){var o=a.id;be(!0),n?(me(o),z&&clearInterval(z),B(c.id,i,o),z=setInterval((function(){return B(c.id,i,o)}),5e3)):(me(void 0),clearInterval(z)),D(n,o)}:function(e,t,n,a){var o=a.id;be(!0),n?(me(o),B(c.id,i,o)):me(void 0),clearInterval(z),D(n,o)}},l().createElement(k.Toolbar,null,l().createElement(k.ToolbarContent,null,l().createElement(k.ToolbarItem,null,l().createElement(f.Z,{items:[{value:"display_name",label:"Name",filterValues:{placeholder:"Filter by name",type:E.Yu.text,value:X,onChange:function(e,t){$(t),ae(1),fe(s,i,n,le,0,t)}}}]})),l().createElement(k.ToolbarItem,null,l().createElement(k.Button,{variant:"secondary",onClick:function(){return(0,S.rN)(c.id)}},"Download playbook")))))))))},Se=(0,r.useContext)(F.B);return c&&W&&C&&C.data?l().createElement(l().Fragment,null,l().createElement(A.Z,null,l().createElement(k.Breadcrumb,null,l().createElement(k.BreadcrumbItem,null,l().createElement(u.Link,{to:"/"}," Remediations ")),l().createElement(k.BreadcrumbItem,null,l().createElement(u.Link,{to:"/".concat(c.id)}," ",c.name," ")),l().createElement(k.BreadcrumbItem,null,l().createElement(u.Link,{to:"/".concat(c.id,"/").concat(i)},l().createElement(g.Z,{type:"exact",date:C.data.created_at}))),l().createElement(k.BreadcrumbItem,{isActive:!0}," ",W.executor_name," ")),l().createElement(k.Stack,{hasGutter:!0},l().createElement(k.StackItem,null,l().createElement(b.Z,{title:"Running"===(0,R.fb)(W.status)?l().createElement(l().Fragment,null,l().createElement(_.InProgressIcon,{className:"ins-c-remediations-running","aria-label":"connection status"}),W.executor_name):W.executor_name})),l().createElement(k.StackItem,null,l().createElement(k.Split,{hasGutter:!0},l().createElement(k.SplitItem,null,l().createElement(v.Z,{className:"ins-c-playbookSummary__settings",title:"Run status"},W.status?l().createElement(R.kf,{executorStatus:W.status,counts:W.counts,permission:Se}):l().createElement(y.Z,{size:"lg"}))),l().createElement(k.SplitItem,null,l().createElement(v.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},"".concat(C.data.created_by.first_name," ").concat(C.data.created_by.last_name))),l().createElement(k.SplitItem,null,l().createElement(v.Z,{className:"ins-c-playbookSummary__settings",title:"Run on"},l().createElement(g.Z,{type:"exact",date:C.data.created_at}))))))),{running:Ce(ve=(0,R.fb)(W.status)),success:Ce(ve),failure:Ce(ve),canceled:Ce(ve),epicFailure:l().createElement(p.Z,null,l().createElement(k.Stack,{hasGutter:!0},l().createElement(k.Card,null,l().createElement(k.CardHeader,{className:"ins-m-card__header-bold"},l().createElement(k.Button,{variant:"secondary",onClick:function(){return(0,S.rN)(c.id)}},"Download playbook")),l().createElement(k.CardBody,null,l().createElement(T,{name:W.executor_name})))))}[(0,R.fb)(ve)]):l().createElement(N,null)};V.propTypes={match:c().object,remediation:c().object,playbookRun:c().object,playbookRunSystems:c().object,playbookRunSystemDetails:c().object,getPlaybookRun:c().func,getPlaybookRunSystems:c().func,getPlaybookRunSystemDetails:c().func,onCollapseInventory:c().func,loadRemediation:c().func},V.defaultProps={remediation:{}};const W=(0,i.connect)((function(e){var t=e.playbookRuns,n=e.playbookRun,a=e.playbookRunSystems,o=e.playbookRunSystemDetails,r=e.selectedRemediation;return{playbookRuns:t.data,playbookRun:n,playbookRunSystemDetails:o,playbookRunSystems:a,remediation:r.remediation}}),(function(e){return{getPlaybookRuns:function(t){return e((0,C.getPlaybookRuns)(t))},getPlaybookRun:function(t,n){return e((0,C.getPlaybookRun)(t,n))},getPlaybookRunSystems:function(t,n,a,o,r,l){return e((0,C.getPlaybookRunSystems)(t,n,a,o,r,l))},getPlaybookRunSystemDetails:function(t,n,a){return e((0,C.getPlaybookRunSystemDetails)(t,n,a))},onCollapseInventory:function(t,n){return e((0,C.expandInventoryTable)(n,t))},loadRemediation:function(t){return e((0,C.loadRemediation)(t))}}}))(V)},32009:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(94015),o=n.n(a),r=n(23645),l=n.n(r)()(o());l.push([e.id,".remediations .ins-c-card__playbook-log .ins-c-primary-toolbar{padding:0}.remediations .ins-c-card__playbook-log .pf-c-toolbar{padding-left:0;padding-right:0}.remediations .ins-c-card__playbook-log .ins-c-tag-count{padding:0}.remediations .ins-c-card__playbook-log .pf-c-data-toolbar__content{padding:0px}","",{version:3,sources:["webpack://./src/components/ExecutorDetails.scss"],names:[],mappings:"AACA,+DAAA,SAAA,CAAA,sDAAA,cAAA,CAAA,eAAA,CAAA,yDAAA,SAAA,CAAA,oEAAA,WAAA",sourcesContent:[".remediations{\n.ins-c-card__playbook-log .ins-c-primary-toolbar{padding:0}.ins-c-card__playbook-log .pf-c-toolbar{padding-left:0;padding-right:0}.ins-c-card__playbook-log .ins-c-tag-count{padding:0}.ins-c-card__playbook-log .pf-c-data-toolbar__content{padding:0px}\n}"],sourceRoot:""}]);const i=l},19671:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(94015),o=n.n(a),r=n(23645),l=n.n(r)()(o());l.push([e.id,".remediations .ins-c-job-output__title{padding-bottom:var(--pf-global--spacer--lg)}.remediations .ins-c-job-output{max-height:500px;padding:0 !important;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:solid solid none solid;white-space:pre-wrap}.remediations .ins-c-job-output code:first-of-type{padding:8px;border-right:2px solid var(--pf-global--Color--light-300);margin-right:8px}.remediations .ins-c-job-output code:nth-of-type(2){position:relative;top:8px;white-space:pre-wrap}.remediations .ins-c-job-output__finished{border-bottom:2px solid var(--pf-global--Color--light-300)}.remediations .ins-l-playbook-running{background:#f0f0f0;padding:15px;display:flex;justify-content:center;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:none solid solid solid}","",{version:3,sources:["webpack://./src/components/SystemDetails.scss"],names:[],mappings:"AACA,uCAAA,2CAAA,CAAA,gCAAA,gBAAA,CAAA,oBAAA,CAAA,+CAAA,CAAA,gBAAA,CAAA,mCAAA,CAAA,oBAAA,CAAA,mDAAA,WAAA,CAAA,yDAAA,CAAA,gBAAA,CAAA,oDAAA,iBAAA,CAAA,OAAA,CAAA,oBAAA,CAAA,0CAAA,0DAAA,CAAA,sCAAA,kBAAA,CAAA,YAAA,CAAA,YAAA,CAAA,sBAAA,CAAA,+CAAA,CAAA,gBAAA,CAAA,mCAAA",sourcesContent:[".remediations{\n.ins-c-job-output__title{padding-bottom:var(--pf-global--spacer--lg)}.ins-c-job-output{max-height:500px;padding:0 !important;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:solid solid none solid;white-space:pre-wrap}.ins-c-job-output code:first-of-type{padding:8px;border-right:2px solid var(--pf-global--Color--light-300);margin-right:8px}.ins-c-job-output code:nth-of-type(2){position:relative;top:8px;white-space:pre-wrap}.ins-c-job-output__finished{border-bottom:2px solid var(--pf-global--Color--light-300)}.ins-l-playbook-running{background:#f0f0f0;padding:15px;display:flex;justify-content:center;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:none solid solid solid}\n}"],sourceRoot:""}]);const i=l},82598:(e,t,n)=>{"use strict";var a=n(93379),o=n.n(a),r=n(32009),l=o()(r.default,{insert:"head",singleton:!1});if(!r.default.locals||e.hot.invalidate){var i=r.default.locals;e.hot.accept(32009,(t=>{r=n(32009),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,r.default.locals)?(i=r.default.locals,l(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),r.default.locals},9774:(e,t,n)=>{"use strict";var a=n(93379),o=n.n(a),r=n(19671),l=o()(r.default,{insert:"head",singleton:!1});if(!r.default.locals||e.hot.invalidate){var i=r.default.locals;e.hot.accept(19671,(t=>{r=n(19671),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,r.default.locals)?(i=r.default.locals,l(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),r.default.locals}}]);
//# sourceMappingURL=../sourcemaps/ExecutorDetails.96ea02fddcbb728ae590.js.map