"use strict";(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[1390],{68452:(e,t,n)=>{function r(e){return e.split(":")[0]}function a(e){switch(r(e.id)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function i(e){var t=e.display_name,n=e.hostname,r=e.id;return t||n||r}function o(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{PW:()=>o,Pz:()=>r,_f:()=>i,lN:()=>a})},22163:(e,t,n)=>{n.d(t,{Gd:()=>s,T:()=>o,Tj:()=>l});var r=n(54998),a=n.n(r),i=n(68452);function o(e){var t=function(e){var t=e.id;switch((0,i.Pz)(t)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=s("inventory").toString();return function(e){return"".concat(n,"/").concat(e,"?appName=").concat(t)}}function l(e){var t=e.split(":");switch(t[0]){case"advisor":return s(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return s(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return s(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function s(e){switch(e){case"advisor":return a()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return a()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return a()(document.baseURI).segment("insights").segment("compliance");case"inventory":return a()(document.baseURI).segment((t=window.location.pathname.split("/"),"preview"===t[1]?t[2]:t[1])).segment("inventory");case"patch-advisory":return a()(document.baseURI).segment("insights").segment("patch");default:throw new Error("Unknown app: ".concat(e))}var t}},76200:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(87462),a=n(4942),i=n(45987),o=n(10756),l=n.n(o),s=n(45697),c=n.n(s),u=n(93967),m=n.n(u),d=["title","className","children","isBold","hasGutter","needsPointer"],p=function(e){var t=e.title,n=e.className,o=e.children,s=e.isBold,c=e.hasGutter,u=e.needsPointer,p=(0,i.Z)(e,d),f=m()("rem-c-description-list__description",(0,a.Z)({},"rem-c-description-list__description--bold",s),(0,a.Z)({},"rem-c-description-list__description--withGutter",c),(0,a.Z)({},"rem-c-description-list__description--needsPointer",u)),b=m()(n,"rem-c-description-list");return l().createElement("dl",(0,r.Z)({className:b},p),l().createElement("dt",{className:"rem-c-description-list__title"},l().createElement("b",null,t)),l().createElement("dd",{className:f}," ",o," "))};const f=p;p.propTypes={title:c().string,children:c().any,isBold:c().bool,className:c().string,hasGutter:c().bool,needsPointer:c().bool}},22797:(e,t,n)=>{n.d(t,{Gx:()=>f,M1:()=>p,VA:()=>b,um:()=>d});var r=n(45987),a=n(15861),i=n(4942),o=n(93433),l=n(64687),s=n.n(l),c=["page"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){var n=e.id;return null==t?void 0:t.has(n)}))?e.length>0:e.some((function(e){var n=e.id;return null==t?void 0:t.has(n)}))&&null},p=function(e){var t;return(null==e||null===(t=e.issues)||void 0===t?void 0:t.reduce((function(e,t){var n;return null==t||null===(n=t.systems)||void 0===n||n.forEach((function(n){var r,a=e.find((function(e){var t=e.id;return n.id===t})),i={id:t.id,resolution:t.resolution,description:t.description};a?(a.issues=[].concat((0,o.Z)(a.issues),[m(m({},i),{},{resolved:a.resolved})]),a.rebootRequired=a.issues.some((function(e){var t=e.resolution;return null==t?void 0:t.needs_reboot}))):e.push(m(m({},n),{},{issues:[m(m({},i),{},{resolved:n.resolved})],rebootRequired:null==t||null===(r=t.resolution)||void 0===r?void 0:r.needs_reboot}))})),e}),[]))||[]},f=function(){var e=(0,a.Z)(s().mark((function e(){var t,n,a,i,o,l,u,d,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1?p[1]:void 0,a=p.length>2?p[2]:void 0,i=(t=p.length>0&&void 0!==p[0]?p[0]:{}).page,o=void 0===i?0:i,l=(0,r.Z)(t,c),u=n.filter((function(e){var t,n=e.display_name;return null===(t=l.filters)||void 0===t||!t.hostnameOrId||n.includes(l.filters.hostnameOrId)})),e.next=7,a(u.slice((o-1)*l.per_page,o*l.per_page).map((function(e){return e.id})),m(m({},l),{},{hasItems:!0}),!0);case 7:return d=e.sent,e.abrupt("return",m(m({},d),{},{page:o,results:d.results.map((function(e){return m(m({},u.find((function(t){return t.id===e.id}))),e)})),total:u.length}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(t){return e.find((function(e){return e.key===t.key}))||t}))}},62785:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Gt});var r=n(4942),a=n(29439),i=n(10756),o=n.n(i),l=n(92397),s=n(98773),c=n(62012),u=n(45697),m=n.n(u),d=n(28216),p=n(50289),f=n(73725),b=n(87462),E=n(94654),v=n.n(E),g=n(75472),y=n.n(g),h=n(26318),S=n(2311),R=n(35981),k=n(49004),Z=n(58027),O=n(83045),w=n(65550),x=n(29144),I=n(68452),C=n(22163),_=n(15861),T=n(64687),P=n.n(T),j=n(15671),D=n(43144),N=n(82963),B=n(61120),q=n(97326),A=n(60136),F=n(25729),L=n(35664);function z(e,t,n){return t=(0,B.Z)(t),(0,N.Z)(e,G()?Reflect.construct(t,n||[],(0,B.Z)(e).constructor):t.apply(e,n))}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}var V=function(e){function t(e){var n;return(0,j.Z)(this,t),n=z(this,t,[e]),(0,r.Z)((0,q.Z)(n),"onRadioChange",(function(e){n.setState({selected:e})})),(0,r.Z)((0,q.Z)(n),"getSelectedResolution",(function(){return n.state.selected})),n.issue=e.issue,n.state={selected:e.issue.resolution,resolutions:!1},n}var n;return(0,A.Z)(t,e),(0,D.Z)(t,[{key:"componentDidMount",value:(n=(0,_.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getResolutions(this.issue.id);case 2:t=e.sent,this.setState({resolutions:t.value});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e,t=this,n=this.state,r=n.resolutions,a=n.selected;return e=r?o().createElement(o().Fragment,null,o().createElement(h.StackItem,null,o().createElement(h.Form,null,r.resolutions.map((function(e){return o().createElement("div",{className:"ins-c-resolution-option",key:e.id},o().createElement(h.Radio,{label:o().createElement(h.Stack,{className:"ins-c-resolution-choice__details"},o().createElement(h.StackItem,null,e.description),e.needs_reboot&&o().createElement(h.StackItem,null,o().createElement(F.Z,{red:!0}))),"aria-label":e.description,id:e.id,name:"radio",defaultChecked:e.id===a.id,onChange:function(){return t.onRadioChange(e)}}))}))))):o().createElement(o().Fragment,null,o().createElement(h.StackItem,null,o().createElement(L.Z,null)),o().createElement(h.StackItem,null,o().createElement(L.Z,null)),o().createElement(h.StackItem,null,o().createElement(L.Z,null))),o().createElement(h.Stack,{hasGutter:!0},o().createElement(h.StackItem,null,o().createElement("div",null,"Select resolution for this action.")),o().createElement(h.StackItem,null,o().createElement(h.Split,{hasGutter:!0},o().createElement(h.SplitItem,null,o().createElement(h.Label,null,"Action")),o().createElement(h.SplitItem,{isFilled:!0},o().createElement("h1",{className:"ins-m-text__bold"},this.issue.description)))),e)}}]),t}(i.Component);V.propTypes={issue:m().object.isRequired,getResolutions:m().func.isRequired};const M=V;var U=function(e){var t=e.remediation,n=e.issue,r=e.onResolutionSelected,l=e.getResolutions,s=(0,i.useState)(!1),c=(0,a.Z)(s,2),u=c[0],m=c[1],d=(0,i.useRef)();return o().createElement(o().Fragment,null,o().createElement("a",{onClick:function(){return m(!0)}},"Edit"),u&&o().createElement(h.Modal,{variant:h.ModalVariant.medium,className:"rem-c-resolution-modal",isOpen:u,onClose:function(){return m(!1)},title:"Edit resolution",actions:[o().createElement(h.Button,{key:"confirm",variant:"primary",onClick:function(e){var a;m(!1);var i=null===(a=d.current)||void 0===a?void 0:a.getSelectedResolution();e&&n.resolution.id!==i.id&&r(t.id,n.id,i.id)}},"Save"),o().createElement(h.Button,{key:"cancel",variant:"secondary",onClick:function(){return m(!1)}},"Cancel")]},o().createElement(M,{key:"ResolutionStep",issue:n,ref:d,getResolutions:l})))};U.propTypes={remediation:m().object.isRequired,issue:m().object.isRequired,onResolutionSelected:m().func.isRequired,getResolutions:m().func.isRequired};const W=U;var Y=(0,d.connect)((function(e){return e}),(function(e){return{onResolutionSelected:(t=(0,_.Z)(P().mark((function t(n,r,a){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,p.patchRemediationIssue)(n,r,a));case 2:e((0,p.refreshRemediation)(n));case 3:case"end":return t.stop()}}),t)}))),function(e,n,r){return t.apply(this,arguments)}),getResolutions:function(t){return e((0,p.getResolutions)(t))}};var t}))(W),K=n(58610);function H(e,t,n){return t=(0,B.Z)(t),(0,N.Z)(e,$()?Reflect.construct(t,n||[],(0,B.Z)(e).constructor):t.apply(e,n))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}var J=function(e){function t(){var e;(0,j.Z)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=H(this,t,[].concat(a)),(0,r.Z)((0,q.Z)(e),"state",{dialogOpen:!1}),(0,r.Z)((0,q.Z)(e),"onButtonClicked",(function(){e.setState({dialogOpen:!0})})),(0,r.Z)((0,q.Z)(e),"onDialogClose",(function(t){e.setState({dialogOpen:!1}),t&&e.props.onDelete()})),e}return(0,A.Z)(t,e),(0,D.Z)(t,[{key:"render",value:function(){var e=this.state.dialogOpen;return o().createElement(o().Fragment,null,o().createElement(h.Button,{onClick:this.onButtonClicked,isDisabled:this.props.isDisabled,variant:this.props.variant},this.props.label),e&&o().createElement(K.Z,{title:this.props.dialogTitle,confirmText:this.props.dialogConfirmationText,text:this.props.dialogMessage,onClose:this.onDialogClose}))}}]),t}(i.Component);J.propTypes={label:m().string,dialogTitle:m().string,dialogMessage:m().string,dialogConfirmationText:m().string,isDisabled:m().bool,onDelete:m().func.isRequired,variant:m().string},J.defaultProps={label:"Delete",variant:"link"};const Q=J;(0,d.connect)((function(e,t){var n=t.remediations;return{dialogMessage:"You will not be able to recover ".concat(n.length>1?"these remediations":"this remediation")}}),(function(e,t){var n,r=t.remediations;return{onDelete:(n=(0,_.Z)(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return e((0,p.deleteRemediation)(t))})));case 2:e((0,p.loadRemediations)());case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}}))(Q);var X=(0,d.connect)((function(e,t){var n=t.issues;return{label:"Remove action".concat(n.length>1?"s":""),dialogTitle:"Remove action".concat(n.length>1?"s":""),dialogConfirmationText:"Remove action".concat(n.length>1?"s":"")}}),(function(e,t){var n,r=t.remediation,a=t.issues,i=t.afterDelete,o=t.isBeta;return{onDelete:(n=(0,_.Z)(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(a.map((function(t){return e((0,p.deleteRemediationIssue)(r.id,t))})));case 2:o&&e((0,p.loadRemediationStatus)(r.id)),i();case 4:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}}))(Q),ee=n(42908),te=n(67336),ne=n(63652),re=n(18213),ae=n(87123),ie=n(81730),oe=n(79332),le=n(30120),se=n(41435);function ce(e){var t=e.remediation,n=e.issue,r=e.system,l=e.onDelete,s=(0,i.useState)(!1),c=(0,a.Z)(s,2),u=c[0],m=c[1],d=(0,i.useState)(!1),p=(0,a.Z)(d,2),f=p[0],b=p[1];return o().createElement(o().Fragment,null,o().createElement(K.Z,{isOpen:f,text:"This playbook will not address ".concat(n.description," on ").concat((0,I._f)(r)),onClose:function(e){b(!1),e&&l(t.id,n.id,r.id),(0,x.q)({title:"Removed systems from ".concat(t.name),description:"",variant:"success",dismissable:!0,autoDismiss:!0})}}),o().createElement(oe.L,{onSelect:function(e){return e},toggle:o().createElement(le.a,{onToggle:function(){return m((function(e){return!e}))}}),isOpen:u,position:se.ir.right,isPlain:!0},o().createElement(h.Button,{onClick:function(){return b(!0)},variant:"link"},"Remove system")))}ce.propTypes={remediation:m().object.isRequired,issue:m().object.isRequired,system:m().object.isRequired,onDelete:m().func.isRequired};const ue=(0,d.connect)(null,(function(e){return{onDelete:function(t,n,r){return e((0,p.deleteRemediationIssueSystem)(t,n,r))}}}))(ce);var me=function(e){var t=e.icon,n=e.text;return o().createElement("div",{className:"rem-c-icon-inline"},t,o().createElement("span",{className:"rem-c-icon-inline__text"},n))};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}me.propTypes={icon:m().node.isRequired,text:m().string.isRequired};var fe=function(e){var t=e.isOpen,n=e.onClose,r=e.issue,l=e.remediation,s=e.onDelete,c=(0,i.useState)(!1),u=(0,a.Z)(c,2),m=u[0],d=u[1],p=(0,i.useState)({}),f=(0,a.Z)(p,2),b=f[0],E=f[1],v=(0,i.useState)({}),g=(0,a.Z)(v,2),S=g[0],R=g[1],k=(0,i.useState)(1),Z=(0,a.Z)(k,2),O=Z[0],x=Z[1],_=(0,i.useState)(50),T=(0,a.Z)(_,2),P=T[0],j=T[1],D=(0,i.useState)(""),N=(0,a.Z)(D,2),B=N[0],q=N[1],A=(0,i.useRef)(null),F=(0,i.useRef)((0,C.T)(r)).current;(0,i.useEffect)((function(){var e={};r.systems.map((function(t){e[t.id]=!0===t.resolved?o().createElement(me,{icon:o().createElement(ee.CheckIcon,null),text:"Remediated"}):o().createElement(me,{icon:o().createElement(ee.TimesIcon,null),text:"Not remediated"})})),R(e)}),[]);var L=function(e,t){return function(n){return o().createElement(ue,{remediation:e,issue:t,system:n})}},z=function(e){return S[e]};return o().createElement(o().Fragment,null,o().createElement(h.Modal,{className:"remediations",variant:h.ModalVariant.large,title:"System".concat(r.systems.length>1?"s":""," for action"),isOpen:t,onClose:n,isFooterLeftAligned:!0},o().createElement("b",null,"Action:")," ",r.description,o().createElement("div",{className:"rem-c-toolbar__filter"},o().createElement(ne.Z,{onLoad:function(e){var t=e.mergeWithEntities,n=e.INVENTORY_ACTION_TYPES;return(0,te.JH)().register(pe({},t(ie.Z.inventoryEntitiesReducer({INVENTORY_ACTION_TYPES:n,detailDropdown:L(l,r),urlBuilder:F,generateStatus:z})())))},ref:A,items:y()(r.systems.filter((function(e){return(0,I._f)(e).includes(B)})),[function(e){return(0,I._f)(e)},function(e){return e.id}]),onRefresh:function(e){A&&A.current&&(x(e.page),j(e.per_page),A.current.onRefreshData(pe({timestamp:Date.now()},e)))},page:O,total:r.systems.length,perPage:P,hasCheckbox:!1,actions:[{title:" Remove system",onClick:function(e,t,n){E(n),d(!0)}}]},o().createElement(w.Z,null,o().createElement(h.ToolbarGroup,null,o().createElement(h.ToolbarItem,null,o().createElement(re.Z,{items:[{value:"display_name",label:"Name",type:ae.Yu.text,filterValues:{placeholder:"Search by name",value:B,onChange:function(e,t){return q(t)}}}]}))))))),o().createElement(K.Z,{isOpen:m,text:"Removing the system ".concat((0,I._f)(b)," from the action ").concat(r.description,"\n                    will remove this system’s remediation from the playbook."),onClose:function(e){d(!1),e&&s(l.id,r.id,b.id)}}))};fe.propTypes={isOpen:m().bool,onClose:m().func,issue:m().object,remediation:m().object,onDelete:m().func};var be=function(e){var t=e.issue,n=e.remediation,r=e.title,l=(0,i.useState)(!1),s=(0,a.Z)(l,2),c=s[0],u=s[1],m=(0,d.useDispatch)();return o().createElement(o().Fragment,null,o().createElement("a",{onClick:function(){return u(!0)}},r),o().createElement(fe,{isOpen:c,onClose:function(){return u(!1)},issue:t,remediation:n,onDelete:function(e,t,n){return m((0,p.deleteRemediationIssueSystem)(e,t,n))}}))};be.propTypes={issue:m().object.isRequired,remediation:m().object.isRequired,title:m().string.isRequired};var Ee=n(11178),ve="true"===localStorage.getItem("remediations:debug")?{perPageOptions:[1,2,3,4,5,10,15,20,25,50,100,200].map((function(e){return{title:"".concat(e),value:e}}))}:{},ge=n(66655),ye=function(e){return o().createElement(h.Bullseye,{className:"pf-u-pt-2xl"},o().createElement(h.EmptyState,null,!0===e.filtered?o().createElement(h.Title,{size:"lg",headingLevel:"h5"},"No actions found"):o().createElement(h.Title,{size:"lg",headingLevel:"h5"},"This playbook is empty"),o().createElement(h.EmptyStateBody,null,"To add an action, select issues identified in",o().createElement("br",null),o().createElement("a",{href:(0,C.Gd)("advisor").toString()},"Recommendations"),", ",o().createElement("a",{href:(0,C.Gd)("compliance").toString()},"Compliance")," or ",o().createElement("a",{href:(0,C.Gd)("vulnerabilities").toString()},"Vulnerability"),"  and select",o().createElement("br",null),o().createElement("strong",null,"Remediate with Ansible."))))};ye.propTypes={filtered:m().bool.isRequired};var he=n(55140);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t){var n=(0,C.Tj)(t.id);return t.resolutions_available<=1?n?o().createElement(o().Fragment,null,o().createElement("span",null,o().createElement("a",{href:n},t.description),o().createElement("br",null),t.resolution.description)):t.resolution.description:n?o().createElement(o().Fragment,null,o().createElement("span",null,o().createElement("a",{href:n},t.description),o().createElement("br",null),t.resolution.description,o().createElement("br",null),o().createElement(Y,{issue:t,remediation:e}))):o().createElement(o().Fragment,null,t.resolution.description,o().createElement("br",null),o().createElement(Y,{issue:t,remediation:e}))}function Ze(e,t,n){return o().createElement(be,{key:e.id,remediation:t,issue:e,title:n})}function Oe(e){var t=0;return e.systems.map((function(e){e.resolved&&t++})),t}var we=[null,function(e){return e.description},null,function(e){return e.resolution.needs_reboot},function(e){return e.systems.length},function(e){return(0,I.lN)(e)}];function xe(e){var t,n,r=(0,Ee.h0)(),l=(0,Ee.sk)(1,"asc"),s=(0,Ee.L0)(),c=(0,Ee.v9)(),u=(0,i.useContext)(ge.B),m=(0,i.useState)(""),d=(0,a.Z)(m,2),p=d[0],f=d[1],E=(0,i.useState)(0),g=(0,a.Z)(E,2),C=(g[0],g[1],(0,he.Z)());(0,i.useEffect)((function(){s.setValue(p)}),[p]),l.onChange(r.reset),s.onChange(r.reset);var _,T=e.remediation.issues.filter((function(e){return(0,I.PW)(e.description,s.value.trim())})),P=y()(T,[we[l.sortBy]],[l.sortDir]).slice(r.offset,r.offset+r.pageSize),j=v()(P,(_=e.remediation,function(e){var t;return[{isOpen:!1,id:e.id,cells:[{title:ke(_,e)},{title:(t=e.resolution.needs_reboot,o().createElement("span",null,t?"Required":"Not required"))},{title:Ze(e,_,"".concat(e.systems.length))},{title:(0,I.lN)(e),props:{className:"rem-m-nowrap"}},{title:Ze(e,_,"".concat(Oe(e),"/").concat(e.systems.length," remediated"))}]}]}));c.register(j);var D=c.getSelectedIds(),N={filters:p.length?[{category:"Action",chips:[{name:p}]}]:[],onDelete:function(){f(""),s.setValue("")}},B=function(e){return null==e?void 0:e.filter((function(e){return!0===e.selected}))};return o().createElement("div",{className:"test"},o().createElement(O.Z,{filterConfig:{items:[{label:"Search actions",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Search",value:p,onChange:function(e,t){f(t)}}}]},bulkSelect:{isDisabled:!j,items:[{title:"Select none (0)",onClick:function(){c.props.onSelect("none")}},j.length>0?{title:"Select page (".concat(null==j?void 0:j.length,")"),onClick:function(){0===B(j).length?c.props.onSelect("page",!0,0):j.length===B(j).length?c.props.onSelect("page",!1,0):c.props.onSelect("page",!0,0)}}:{},j.length>0?{title:"Select all (".concat(null==e||null===(t=e.remediation)||void 0===t?void 0:t.issues.length,")"),onClick:function(){var t;c.register(null==e?void 0:e.remediation.issues),(null==D?void 0:D.length)<(null==e||null===(t=e.remediation)||void 0===t?void 0:t.issues.length)?c.props.onSelect("page",!0,0):c.props.onSelect("page",!1,0)}}:{}],checked:D.length&&T.length>D.length?null:D.length,count:D.length,onSelect:function(){0===B(j).length?c.props.onSelect("page",!0,0):c.props.onSelect("page",!1,0)}},actionsConfig:{actions:[o().createElement(X,{key:e.remediation.id,variant:"secondary",isDisabled:!D.length,remediation:e.remediation,issues:D,afterDelete:function(){(0,x.q)({title:"Removed ".concat(D.length," actions from ").concat(e.remediation.name),description:"",variant:"success",dismissable:!0,autoDismiss:!0}),c.reset},isBeta:null==C||null===(n=C.isBeta)||void 0===n?void 0:n.call(C)})]},pagination:Re(Re({},r.props),{},{itemCount:T.length}),activeFiltersConfig:N}),j.length>0?o().createElement(R.i,(0,b.Z)({variant:S.TableVariant.compact,"aria-label":"Actions",canSelectAll:!1,className:"ins-c-remediation-details-table",cells:[{title:"Actions",transforms:[S.sortable]},{title:"Reboot required",transforms:[S.sortable]},{title:"Systems",transforms:[S.sortable]},{title:"Type",transforms:[S.sortable]},{title:"Status",transforms:[S.sortable]}],rows:j},l.props,u.permissions.write&&Re({},c.props)),o().createElement(k.x,null),o().createElement(Z.R,c.tbodyProps)):s.value?o().createElement(ye,{filtered:!0}):o().createElement(ye,{filtered:!1}),j.length>0&&o().createElement(w.Z,{isFooter:!0},o().createElement(h.Pagination,(0,b.Z)({variant:"bottom",dropDirection:"up",itemCount:T.length},r.props,ve))))}xe.propTypes={remediation:m().object.isRequired,status:m().object.isRequired};const Ie=xe;var Ce=n(57283),_e=n.n(Ce),Te=n(18546),Pe=n(77431),je=function(e){var t,n=e.isOpen,r=e.selected,a=e.onConfirm,i=e.onClose,l=e.remediationName;return o().createElement(h.Modal,{variant:h.ModalVariant.medium,title:"Remove selected systems from ".concat(l),isOpen:n,onClose:i,appendTo:document.getElementsByClassName("remediations")[0],actions:[o().createElement(h.Button,{key:"remove-confirm",variant:"danger",onClick:a,ouiaId:"confirm-delete"},"Remove"),o().createElement(h.Button,{key:"remove-cancel",variant:"link",onClick:i},"Cancel")]},o().createElement(h.Split,{hasGutter:!0},o().createElement(h.SplitItem,null,o().createElement(h.Icon,{size:"xl",className:"ins-m-alert",status:"warning"},o().createElement(ee.ExclamationTriangleIcon,null))),o().createElement(h.SplitItem,{isFilled:!0},o().createElement(h.Stack,{hasGutter:!0},o().createElement(h.StackItem,null,"This action will remove"," ",1===r.length?o().createElement("span",null,o().createElement("b",null," ",null===(t=r[0])||void 0===t?void 0:t.display_name," ")," system"):o().createElement("span",null,o().createElement("b",null," ",r.length," ")," systems")," ","from ",o().createElement("b",null,l)," Remediation."),o().createElement(h.StackItem,null,"Removing ",(0,Pe._6)(r.length,"system")," from this Remediation will remove it from all associated issues in"," ",o().createElement("b",null,l)," Remediation. Be careful as you can end up with Remediation without any systems.")))))};je.propTypes={selected:m().arrayOf(m().shape({id:m().string,display_name:m().string})).isRequired,remediationName:m().string.isRequired,isOpen:m().bool.isRequired,onConfirm:m().func.isRequired,onClose:m().func.isRequired};const De=je;var Ne=n(22797),Be=function(e){var t=e.rebootRequired;return o().createElement(i.Fragment,null,o().createElement("span",null,t?"Required":"Not required"))};Be.propTypes={rebootRequired:m().bool};const qe=Be;var Ae=n(89734),Fe=n.n(Ae),Le={advisor:"Advisor recommendation",vulnerabilities:"Vulnerability","patch-advisory":"Patch advisory"},ze=function(e){var t=e.issues,n=e.display_name,r=(0,i.useState)({index:0,direction:"asc"}),l=(0,a.Z)(r,2),s=l[0],c=l[1],u=(0,i.useState)(),m=(0,a.Z)(u,2),d=m[0],p=m[1],f=Fe()(t,(function(e){return(t=e,[t.description,t.resolution.needs_reboot,null==Le?void 0:Le[t.id.split(":")[0]],t.resolved])[s.index];var t}));return o().createElement(i.Fragment,null,o().createElement(h.Button,{variant:"link",isInline:!0,onClick:function(){return p(!0)}},t.length),o().createElement(h.Modal,{variant:h.ModalVariant.medium,title:"Actions for system ".concat(n),isOpen:d,onClose:function(){return p(!1)}},o().createElement(R.i,{variant:"compact","aria-label":"Issues table for ".concat(n),rows:("asc"===s.direction?f:f.reverse()).map((function(e){return[{title:o().createElement(i.Fragment,null,o().createElement("div",null,o().createElement("a",{href:(0,C.Tj)(e.id)},e.description)),o().createElement("div",null,e.resolution.description))},{title:o().createElement(i.Fragment,null,o().createElement(qe,{rebootRequired:e.resolution.needs_reboot}))},(null==Le?void 0:Le[e.id.split(":")[0]])||"Unknown",{title:o().createElement(i.Fragment,null,e.resolved?o().createElement(ee.CheckIcon,null):o().createElement(ee.TimesIcon,null)," ",e.resolved?"Remediated":"Not remediated")}]})),cells:[{title:"Action",transforms:[S.sortable]},{title:"Reboot required",transforms:[S.sortable,(0,S.cellWidth)(20)]},{title:"Type",transforms:[S.sortable,(0,S.cellWidth)(15)]},{title:"Status",transforms:[S.sortable,(0,S.cellWidth)(20)]}],sortBy:s,onSort:function(e,t,n){return c({index:t,direction:n})}},o().createElement(k.x,null),o().createElement(Z.R,null))))};ze.propTypes={issues:m().arrayOf(m().shape()),display_name:m().string};const Ge=ze,Ve=[{key:"display_name"},{key:"tags"},{key:"system_profile"},{key:"issues",title:"Issues",renderFunc:function(e,t,n){var r=n.display_name;return o().createElement(Ge,{issues:e,display_name:r})},props:{width:15,isStatic:!0}},{key:"rebootRequired",title:"Reboot required",renderFunc:function(e){return o().createElement(qe,{rebootRequired:e})},props:{width:15,isStatic:!0}}];function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=function(e){var t=e.remediation,n=e.registry,r=e.refreshRemediation,l=(0,i.useState)(!1),s=(0,a.Z)(l,2),c=s[0],u=s[1],m=(0,i.useRef)(),f=(0,i.useRef)((function(){})),b=(0,i.useRef)(void 0),E=(0,d.useDispatch)(),v=(0,d.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.selected)||new Map})),g=(0,d.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.loaded})),y=(0,d.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.rows})),S=function(e){return null==e?void 0:e.filter((function(e){return!0===e.selected}))},R=function(e){switch(e){case"none":case"deselect all":m.current.map((function(e){return E((0,p.selectEntity)(e.id,!1))}));break;case"page":E((0,p.selectEntity)(0,!0));break;case"deselect page":y.map((function(){return E((0,p.selectEntity)(0,!1))}));break;case"all":m.current.map((function(e){return E((0,p.selectEntity)(e.id,!0))}))}};return(0,i.useEffect)((function(){m.current=(0,Ne.M1)(t)}),[t.id]),o().createElement(ne.Z,{variant:"compact",showTags:!0,noDetail:!0,hideFilters:{all:!0,name:!1},tableProps:{canSelectAll:!1},columns:function(e){return(0,Ne.VA)(e,Ve)},bulkSelect:{isDisabled:!y,count:v?v.size:0,items:[{title:"Select none (0)",onClick:function(){return R("none")}},Ue({},g&&y&&y.length>0?{title:"Select page (".concat(y.length,")"),onClick:function(){v?S(y).length===y.length?R("deselect page"):m.current.length>v.size?R("page"):R("deselect page"):R("page")}}:{}),Ue({},g&&y&&y.length>0?{title:"Select all (".concat(m.current.length,")"),onClick:function(){(0,Ne.um)(m.current,v)?R("deselect all"):R("all")}}:{})],checked:(0,Ne.um)(m.current,v),onSelect:function(){S(y).length===y.length?R("deselect page"):R("page")}},getEntities:function(){var e=(0,_.Z)(P().mark((function e(t,n){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Ne.Gx)(n,m.current,f.current));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onLoad:function(e){var t,r=e.INVENTORY_ACTION_TYPES,a=e.mergeWithEntities,i=e.api;f.current=null==i?void 0:i.getEntities,null==n||null===(t=n.register)||void 0===t||t.call(n,Ue({},a((0,ie.L)(r))))},actions:[{title:"Remove system",onClick:function(e,n,r){var a=r.id,i=r.display_name;b.current={id:a,display_name:i,issues:t.issues.filter((function(e){return e.systems.find((function(e){return e.id===a}))}))},u(!0)}}]},g&&o().createElement(h.Button,{variant:"secondary",onClick:function(){return u(!0)},isDisabled:0===v.size},"Remove system"),o().createElement(De,{isOpen:c,onConfirm:function(){(0,_.Z)(P().mark((function e(){var n,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.size>0?Array.from(v,(function(e){return(0,a.Z)(e,2)[1]})):[Ue({},b.current)],i=(0,p.deleteSystems)(n,t),E(i),e.next=5,i.payload;case 5:r();case 6:case"end":return e.stop()}}),e)})))(),b.current=void 0,(0,x.q)({title:"Removed ".concat(v.size," ").concat(v.size>1?"systems":"system"," from playbook"),description:"",variant:"success",dismissable:!0,autoDismiss:!0}),u(!1)},selected:v.size>0?Array.from(v,(function(e){return(0,a.Z)(e,2)[1]})):[b.current],onClose:function(){b.current=void 0,u(!1)},remediationName:t.name}))},Ye=function(e){var t=(0,d.useDispatch)(),n=(0,i.useState)(),r=(0,a.Z)(n,2),l=r[0],s=r[1];return(0,i.useEffect)((function(){s(new Te.ZP({selected:new Map},[_e()]))}),[]),l?o().createElement(d.Provider,{store:l.store},o().createElement(We,(0,b.Z)({registry:l,refreshRemediation:function(){return t((0,p.loadRemediation)(e.remediation.id))}},e))):o().createElement(i.Fragment,null)};Ye.propTypes={remediation:m().shape({id:m().string,issues:m().arrayOf(m().shape({systems:m().arrayOf(m().shape({id:m().string,display_name:m().string,resolved:m().bool}))}))})},We.propTypes=Ue(Ue({},Ye.propTypes),{},{registry:m().shape({register:m().func}),refreshRemediation:m().func});const Ke=Ye;var He=n(93433),$e=n(62410);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=function(e){var t=e.remediation,n=e.playbookRuns,r=(0,i.useState)([]),s=(0,a.Z)(r,2),c=s[0],u=s[1],m=(0,i.useContext)(ge.B);return(0,i.useEffect)((function(){n&&n.length&&u((function(){return function(e){return e.reduce((function(e,n,r){return[].concat((0,He.Z)(e),[{isOpen:!1,cells:[{title:o().createElement(l.Z,{to:"/".concat(t.id,"/").concat(n.id)},o().createElement($e.Z,{type:"exact",date:n.created_at})),cellFormatters:[S.expandable]},n.created_by.last_name?"".concat(n.created_by.first_name," ").concat(n.created_by.last_name):"".concat(n.created_by.username),{title:o().createElement(Pe.kf,{executorStatus:(0,Pe.fb)(n.status),counts:n.executors.reduce((function(e,t){return{pending:e.pending+t.counts.pending,running:e.running+t.counts.running,success:e.success+t.counts.success,failure:e.failure+t.counts.failure,canceled:e.canceled+t.counts.canceled,acked:e.acked+t.counts.acked}}),{pending:0,running:0,success:0,failure:0,canceled:0,acked:0}),hasCancel:!0,remediationName:t.name,remediationId:t.id,playbookId:n.id,permission:m})}]},{parent:2*r,fullWidth:!0,cells:[{title:o().createElement(R.i,{"aria-label":"Compact expandable table",cells:["Connection","Systems","Playbook run status"],rows:n.executors.map((function(e){return{cells:[{title:o().createElement(l.Z,{to:"/".concat(t.id,"/").concat(n.id,"/").concat(e.executor_id)},e.executor_name)},e.system_count,{title:o().createElement(Pe.kf,{executorStatus:(0,Pe.fb)(e.status),counts:e.counts,permission:m})}]}}))},o().createElement(k.x,null),o().createElement(Z.R,null))}]}])}),[])}(n)}))}),[n]),o().createElement(R.i,{className:"rem-c-activity-table","aria-label":"Collapsible table",onCollapse:function(e,t,n){var r=(0,He.Z)(c);r[t]=Qe(Qe({},r[t]),{},{isOpen:n}),u(r)},rows:c,cells:["Run on","Run by","Status"]},o().createElement(k.x,null),o().createElement(Z.R,null))};Xe.propTypes={remediation:m().object,playbookRuns:m().array};const et=Xe;function tt(e){var t=(0,i.useState)(e.value||""),n=(0,a.Z)(t,2),r=n[0],l=n[1],s=(0,i.useState)(!0),c=(0,a.Z)(s,2),u=c[0],m=c[1],d=e.title,p=e.onCancel,f=e.onSubmit,b=e.ariaLabel,E=e.className;return o().createElement(h.Modal,{title:d,isOpen:!0,onClose:function(e){return p(e)},actions:[o().createElement(h.Button,{key:"confirm",variant:"primary",onClick:function(){return f(r)},isDisabled:!u,ouiaId:"save"},"Save"),o().createElement(h.Button,{key:"cancel",variant:"secondary",onClick:p,ouiaId:"cancel"},"Cancel")],variant:h.ModalVariant.small,className:E},o().createElement(h.FormGroup,{fieldId:"remediation-name",helperTextInvalid:"Playbook name has to contain alphanumeric characters",isValid:u},o().createElement(h.TextInput,{value:r,type:"text",onChange:function(t,n){return function(t){l(t),e.pattern&&m(e.pattern.test(t))}(n)},"aria-label":b||"input text",autoFocus:!0,isValid:u})))}tt.propTypes={title:m().string.isRequired,onCancel:m().func,onSubmit:m().func,ariaLabel:m().string,value:m().string,className:m().string,pattern:m().instanceOf(RegExp)};var nt=/^$|^.*[\w\d]+.*$/;function rt(e){var t=e.remediation,n=e.onRename,r=e.onDelete,l=(0,i.useState)(!1),c=(0,a.Z)(l,2),u=c[0],m=c[1],d=(0,i.useState)(!1),p=(0,a.Z)(d,2),f=p[0],b=p[1],E=(0,i.useState)(!1),v=(0,a.Z)(E,2),g=v[0],y=v[1],S=(0,i.useContext)(ge.B),R=(0,s.Z)();return o().createElement(o().Fragment,null,f&&o().createElement(tt,{title:"Edit playbook name",ariaLabel:"Playbook name",value:t.name,onCancel:function(){return b(!1)},onSubmit:function(e){b(!1),n(t.id,e),(0,x.q)({title:"Updated playbook name to ".concat(e),description:"",variant:"success",dismissable:!0,autoDismiss:!0})},pattern:nt}),o().createElement(K.Z,{isOpen:g,title:"Remove playbook?",text:"You will not be able to recover this Playbook",confirmText:"Remove playbook",onClose:function(e){y(!1),e&&(r(t.id),(0,x.q)({title:"Deleted playbook ".concat(t.name),variant:"success",dismissable:!0,autoDismiss:!0}),R("/"))}}),S.permissions.write&&o().createElement(oe.L,{onSelect:function(e){return e},toggle:o().createElement(le.a,{onToggle:function(){return m((function(e){return!e}))}}),isOpen:u,position:se.ir.right,isPlain:!0},o().createElement(h.Button,{onClick:function(){return b(!0)},variant:"link"},"Rename"),o().createElement(h.Button,{className:"rem-c-button__danger-link",onClick:function(){return y(!0)},variant:"link",isDanger:!0},"Delete")))}rt.propTypes={remediation:m().object.isRequired,onRename:m().func.isRequired,onDelete:m().func.isRequired};const at=(0,d.connect)(null,(function(e){return{onRename:function(t,n){n||(n="Unnamed Playbook"),e((0,p.patchRemediation)(t,{name:n}))},onDelete:function(t){return e((0,p.deleteRemediation)(t))}}}))(rt);var it=n(95274),ot=function(e){var t=e.isLoading,n=e.isDisabled,r=e.disabledStateText,l=e.data,s=e.getConnectionStatus,c=e.remediationId,u=e.remediationName,m=e.issueCount,d=e.runRemediation,p=e.etag,f=e.remediationStatus,b=e.setEtag,E=(0,i.useState)(!1),v=(0,a.Z)(E,2),g=v[0],y=v[1],S=(0,i.useState)(!1),R=(0,a.Z)(S,2),k=R[0],Z=R[1];return(0,i.useEffect)((function(){"changed"===f?(s(c),Z(!0)):"fulfilled"===f&&y(!1)}),[f]),o().createElement(o().Fragment,null,n?o().createElement(h.Tooltip,{content:r,position:"auto"},o().createElement(h.Button,{isAriaDisabled:!0},"Execute playbook")):o().createElement(h.Button,{"data-testid":"execute-button-enabled",onClick:function(){y(!0),s(c)}},"Execute playbook"),g&&o().createElement(it.l,{isOpen:g,onClose:function(){Z(!1),y(!1)},showRefresh:k,remediationId:c,remediationName:u,data:l,etag:p,isLoading:t,issueCount:m,runRemediation:d,setEtag:b}))};ot.propTypes={isLoading:m().bool,data:m().array,getConnectionStatus:m().func,runRemediation:m().func,remediationId:m().string,remediationName:m().string,remediationStatus:m().string,issueCount:m().number,etag:m().string,setEtag:m().func,isDisabled:m().bool,disabledStateText:m().string},ot.defaultProps={data:[],isDisabled:!1};const lt=ot;var st=(0,d.connect)((function(e){var t=e.connectionStatus,n=t.data,r=t.status,a=t.etag,i=e.selectedRemediation,o=e.runRemediation,l=e.sources,s=e.executable;return{data:n,isLoading:"fulfilled"!==r,issueCount:i.remediation.issues.length,etag:a,remediationStatus:o.status,sources:l,executable:s}}),(function(e){return{getConnectionStatus:function(t){e((0,p.getConnectionStatus)(t))},runRemediation:function(t,n,r){e((0,p.runRemediation)(t,n,r)).then((function(){return e((0,p.getPlaybookRuns)(t))}))},setEtag:function(t){e((0,p.setEtag)(t))},getEndpoint:function(t){e((0,p.getEndpoint)(t))},checkExecutable:function(t){e((0,p.checkExecutable)(t))}}}))(lt),ct=n(83215),ut=n(45987),mt=["onClose"],dt=function(e){var t=e.onClose,n=(0,ut.Z)(e,mt);return o().createElement(h.Alert,(0,b.Z)({variant:"info",isInline:!0,title:"Put Insights into action",actionClose:o().createElement(h.AlertActionCloseButton,{onClose:t,"data-testid":"upselBanner-close"})},n),o().createElement(h.Stack,{hasGutter:!0},o().createElement(h.StackItem,null,"Enable push-button remediation across your hybrid cloud environment with Red Hat Satellite."),o().createElement(h.StackItem,null,o().createElement("a",{href:"https://www.redhat.com/en/technologies/management/satellite"},"Learn more"))))};const pt=dt;dt.propTypes={onClose:m().func},dt.defaultProps={onClose:function(){}};const ft=function(){return o().createElement(h.Bullseye,null,o().createElement(h.EmptyState,null,o().createElement(h.EmptyStateHeader,{titleText:"Get more with Find it Fix it capabilities",icon:o().createElement(h.EmptyStateIcon,{icon:ee.CloudIcon}),headingLevel:"h5"}),o().createElement(h.EmptyStateBody,null,"Upgrade to Red Hat Satellite to remediate all your systems, across regions and geographies directly from Red Hat Insights."),o().createElement(h.EmptyStateFooter,null,o().createElement(h.Button,{variant:"link",component:"a",ouiaId:"learn_more",href:"https://www.redhat.com/en/technologies/management/satellite"},"Learn more"))))};var bt=n(78762),Et=n(40742),vt=n(89376),gt=n(39173),yt=n(14748),ht=n(39467),St=n(85998),Rt=n(65146),kt=n(71070);const Zt=function(){var e=o().createElement(i.Fragment,null,o().createElement(h.ToolbarItem,null,o().createElement(oe.L,{toggle:o().createElement(St.Z,{isDisabled:!0,splitButtonItems:[o().createElement(Rt.o,{id:"skeleton-dropdown",key:"skeleton-dropdown","aria-label":"Loading Select all"})],id:"skeleton-dropdown-toggle"})})),o().createElement(h.ToolbarItem,null,o().createElement(h.InputGroup,null,o().createElement(h.InputGroupItem,{isFill:!0},o().createElement(h.TextInput,{value:"Search",isDisabled:!0,name:"skeleton-search",id:"skeleton-search",type:"search","aria-label":"search loading"})),o().createElement(h.InputGroupItem,null,o().createElement(h.Button,{isDisabled:!0,variant:"control","aria-label":"search button for search input"},o().createElement(kt.ZP,null))))),o().createElement(h.ToolbarItem,null,o().createElement(h.Button,{isDisabled:!0,variant:"primary"},"Remove action")));return o().createElement(h.Toolbar,{id:"skeleton-toolbar"},o().createElement(h.ToolbarContent,null," ",e," "))},Ot=function(){return o().createElement(h.Tabs,{activeKey:0,className:"ins-s-tabs"},o().createElement(h.Tab,{eventKey:0,title:o().createElement(h.TabTitleText,null,"Actions")}),o().createElement(h.Tab,{eventKey:1,title:o().createElement(h.TabTitleText,null,"Systems")}),o().createElement(h.Tab,{eventKey:2,title:o().createElement(h.TabTitleText,null,"Activity")}))};var wt=n(9677),xt=n(10310),It=n(76200);const Ct=function(){return o().createElement(o().Fragment,null,o().createElement(vt.Z,{className:"rem-c-page-details__header"},o().createElement(h.Breadcrumb,null,o().createElement(h.BreadcrumbItem,null,o().createElement(l.Z,{to:"/"}," Remediations ")),o().createElement(h.BreadcrumbItem,{isActive:!0},o().createElement(L.Z,{size:"lg"}))),o().createElement(h.Level,{className:"rem-l-level"},o().createElement(h.LevelItem,null,o().createElement(gt.Z,{className:"rem-s-page-header",title:o().createElement(o().Fragment,null,o().createElement(L.Z,{size:"md"}))})),o().createElement(h.LevelItem,null,o().createElement(h.Split,{hasGutter:!0},o().createElement(h.SplitItem,null,o().createElement(h.Button,{isDisabled:!0,variant:"link"},"Download playbook")),o().createElement(h.SplitItem,null,o().createElement(oe.L,{toggle:o().createElement(le.a,{isDisabled:!0}),isOpen:!1,isPlain:!0}))))),o().createElement(_t,null)),o().createElement(yt.ZP,null,o().createElement(h.Stack,{hasGutter:!0},o().createElement(h.StackItem,{className:"ins-c-playbookSummary__tabs"},o().createElement(Ot,null),o().createElement(Zt,null),o().createElement(Et.Z,null)))))};var _t=function(){return o().createElement(h.Split,null,o().createElement(h.SplitItem,null,o().createElement(wt.z,{ariaDesc:"Resolved issues count",ariaTitle:"Resolved issues chart",constrainToVisibleArea:!0,data:{x:"Resolved",y:1},labels:function(e){var t=e.datum;return t.x?"".concat(t.x,": ").concat(t.y,"%"):null},title:"Loading",subTitle:"Issues resolved",subTitleComponent:o().createElement(xt.D,{y:102}),thresholds:[{value:100,color:"#3E8635"}],height:175,width:175,padding:{bottom:20,left:0,right:20,top:20}})),o().createElement(h.SplitItem,{className:"ins-c-remediation-summary__body"},o().createElement(h.Stack,{hasGutter:!0},o().createElement(h.StackItem,null,o().createElement(h.Split,null,o().createElement(h.SplitItem,null,o().createElement(h.Flex,null,o().createElement(h.FlexItem,{spacer:{default:"spacer-lg"}},o().createElement(It.Z,{title:"Total systems"},o().createElement(L.Z,{size:"md"}))))),o().createElement(h.SplitItem,null,o().createElement(h.Flex,null,o().createElement(h.FlexItem,{spacer:{default:"spacer-lg"}},o().createElement(It.Z,{title:"Latest activity"},o().createElement(L.Z,{size:"md"}))))))),o().createElement(h.StackItem,null,o().createElement(h.Flex,null,o().createElement(h.FlexItem,{spacer:{default:"spacer-lg"}},o().createElement(It.Z,{title:"Autoreboot"},o().createElement(L.Z,{size:"md"}))))))))};const Tt=function(){return o().createElement(R.i,{"aria-label":"No activity",cells:["Run on","Run by","Status"],ouiaId:"activity-table",rows:[{cells:[{title:o().createElement(h.EmptyState,{className:"rem-c-activity-table__empty"},o().createElement(h.EmptyStateHeader,{titleText:"No activity",headingLevel:"h5"}),o().createElement(h.EmptyStateBody,null,"Execute this playbook to see a history and summary of the activity.")),props:{colSpan:3}}]}]},o().createElement(k.x,null),o().createElement(Z.R,null))};var Pt=n(10170),jt=n(93967),Dt=n.n(jt);function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bt=function(e){var t,n,r,a,i=e.remediation,s=e.playbookRuns,c=e.switchAutoReboot,u=e.context,m=function(e){c(i.id,e)},d=function(e){return o().createElement("div",null,o().createElement(ee.OffIcon,null),o().createElement("b",{className:"ins-c-remediation-summary__reboot--disabled".concat(e?"--warning":"")},"Off"),e&&o().createElement(o().Fragment,null,o().createElement(ee.ExclamationTriangleIcon,{className:"ins-c-remediation-summary__reboot--required--icon"}),o().createElement("b",{className:"ins-c-remediation-summary__reboot--required"},(t=function(){var e,t=0,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(i.issues);try{for(n.s();!(e=n.n()).done;)e.value.resolution.needs_reboot&&t++}catch(e){n.e(e)}finally{n.f()}return t}(),"".concat(t," issue").concat(1===t?"":"s"," require").concat(1===t?"s":""," reboot to remediate")))),u.permissions.write&&o().createElement(h.Button,{variant:"link",onClick:function(){return m(!i.auto_reboot)}},"Turn on"));var t},p=function(e,t){return e?o().createElement("div",null,o().createElement(ee.CheckCircleIcon,{className:"rem-c-success"}),o().createElement("b",{className:"ins-c-remediation-summary__reboot--enabled"}," Enabled "),u.permissions.write&&o().createElement(h.Button,{variant:"link",onClick:function(){return m(!i.auto_reboot)}},"Turn off")):d(t)},f=i.stats,b=f.systemsWithReboot+f.systemsWithoutReboot,E=(t=i.issues,n=0,t.map((function(e){return e.systems.every((function(e){return e.resolved}))&&n++})),n);return o().createElement(h.Split,null,o().createElement(h.SplitItem,null,o().createElement(wt.z,{ariaDesc:"Resolved issues count",ariaTitle:"Resolved issues chart",constrainToVisibleArea:!0,data:{x:"Resolved",y:E/i.issues.length*100},labels:function(e){var t=e.data;return t.x?"".concat(t.x,": ").concat(t.y,"%"):null},title:"".concat(E,"/").concat(i.issues.length),subTitle:"Issues resolved",subTitleComponent:o().createElement(xt.D,{y:102}),thresholds:[{value:100,color:"#3E8635"}],height:175,width:175,padding:{bottom:20,left:0,right:20,top:20}})),o().createElement(h.SplitItem,{className:"ins-c-remediation-summary__body"},o().createElement(h.Stack,{hasGutter:!0},o().createElement(h.StackItem,null,o().createElement(h.Split,null,o().createElement(h.SplitItem,null,o().createElement(h.Flex,null,o().createElement(h.FlexItem,{spacer:{default:"spacer-lg"}},o().createElement(It.Z,{title:"Total systems"},(a="system",1===(r=b)?"".concat(r," ").concat(a):"".concat(r," ").concat(a,"s")))))),o().createElement(h.SplitItem,null,o().createElement(h.Flex,null,s&&function(e){if(e.length){var t=e[0];return o().createElement(h.FlexItem,{spacer:{default:"spacer-xl"}},o().createElement(It.Z,{needsPointer:!0,className:"rem-c-description-list-latest-activity",title:"Latest activity"},o().createElement(Pe.kf,{executorStatus:t.status,counts:t.executors.reduce((function(e,t){return{pending:e.pending+t.counts.pending,running:e.running+t.counts.running,success:e.success+t.counts.success,failure:e.failure+t.counts.failure,canceled:e.canceled+t.counts.canceled,acked:e.acked+t.counts.acked}}),{pending:0,running:0,success:0,failure:0,canceled:0,acked:0}),permission:{}}),o().createElement("span",{className:"rem-c-description-list-latest-activity__date"},o().createElement($e.Z,{type:"relative",date:t.updated_at})),o().createElement(l.Z,{to:"/".concat(t.remediation_id,"/").concat(t.id)},"View")))}}(s))))),o().createElement(h.StackItem,null,function(e){return o().createElement(It.Z,{className:"rem-c-playbookSummary__settings",title:"Autoreboot"},o().createElement(h.Flex,null,o().createElement(h.FlexItem,{className:Dt()("ins-c-reboot-status",{"ins-c-reboot-status__enabled":e.auto_reboot&&e.needs_reboot},{"ins-c-reboot-status__disabled":!e.auto_reboot}),spacer:{default:"spacer-xl"}},p(e.auto_reboot,e.needs_reboot))))}(i)))))};Bt.propTypes={remediation:m().object.isRequired,playbookRuns:m().array,switchAutoReboot:m().func.isRequired,context:m().object.isRequired};var qt=n(33366),At=n(28962).API_BASE;function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zt=function(e){var t=e.selectedRemediation,n=e.selectedRemediationStatus,r=e.loadRemediation,u=e.loadRemediationStatus,m=e.switchAutoReboot,d=e.playbookRuns,p=e.getPlaybookRuns,b=e.checkExecutable,E=e.executable,v=(0,he.Z)(),g=(0,s.Z)(),y=(0,c.useParams)().id,S=(0,c.useSearchParams)(),R=(0,a.Z)(S,2),k=R[0],Z=R[1],O=v.isFedramp,w=v.isBeta,I=v.isOrgAdmin,C=void 0===I?function(){return!1}:I,T=(0,i.useContext)(ge.B),j=(0,i.useState)("dismissed"!==localStorage.getItem("remediations:bannerStatus")),D=(0,a.Z)(j,2),N=D[0],B=D[1],q=(0,i.useState)("dismissed"!==localStorage.getItem("remediations:receptorBannerStatus")),A=(0,a.Z)(q,2),F=A[0],L=A[1],z=(0,i.useMemo)((function(){return T.permissions.execute?E?"Unable to execute playbook.":"Your account must be entitled to Satellite to execute playbooks.":C()?"Executing the playbook requires having the remediations:remediation:execute permission which is included in the Remediations administrator role. Manage your roles in User access.":"Executing the playbook requires having the remediations:remediation:execute permission which is included in the Remediations administrator role. Contact your Organization Administrator for access."}),[v]);(0,i.useEffect)((function(){r(y).catch((function(e){if(!e||!e.response||404!==e.response.status)throw e;g("/")})),null!=w&&w()&&u(y),b(y)}),[]),(0,i.useEffect)((function(){p(y)}),[p]),(0,i.useEffect)((function(){if(d&&d.length&&"running"===(0,Pe.fb)(d[0].status)){var e=setInterval((function(){return p(y)}),1e4);return function(){clearInterval(e)}}}),[d]);var G=t.status,V=t.remediation,M=function(e){var t=(0,qt.Vk)(),n=(0,i.useState)(),r=(0,a.Z)(n,2),o=r[0],l=r[1],s=(0,i.useRef)(!1);return(0,i.useEffect)((function(){s.current=!0;var n=function(){var n=(0,_.Z)(P().mark((function n(){var r,a;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e,!n.t0){n.next=6;break}return n.next=5,t.get("".concat(At,"/remediations/").concat(e.id,"/connection_status"));case 5:n.t0=n.sent;case 6:a=n.t0,s.current&&l("connected"===(null===(r=a.data)||void 0===r?void 0:r[0].connection_status)),n.next=13;break;case 10:n.prev=10,n.t1=n.catch(0),console.error(n.t1);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){s.current=!1}}),[e]),o}(V);return(0,i.useEffect)((function(){V&&v.updateDocumentTitle("".concat(V.name," - Remediations | Red Hat Insights"))}),[v,V]),"fulfilled"!==G&&"rejected"!==G?o().createElement(Ct,null):"rejected"===G?o().createElement(ht.Z,null):"fulfilled"===G?!1===T.permissions.read?o().createElement(bt.Z,null):o().createElement("div",{className:"page__remediation-details"},o().createElement(vt.Z,null,o().createElement(h.Breadcrumb,null,o().createElement(h.BreadcrumbItem,null,o().createElement(l.Z,{to:"/"}," Remediations ")),o().createElement(h.BreadcrumbItem,{isActive:!0}," ",V.name," ")),o().createElement(h.Level,{className:"rem-l-level"},o().createElement(h.LevelItem,null,o().createElement(gt.Z,{title:V.name})),o().createElement(h.LevelItem,null,o().createElement(h.Split,{hasGutter:!0},o().createElement(h.SplitItem,null,o().createElement(st,{isDisabled:!M||!T.permissions.execute||!E||O,disabledStateText:z,remediationId:V.id,remediationName:V.name})),o().createElement(h.SplitItem,null,o().createElement(h.Button,{isDisabled:!V.issues.length,variant:"secondary",onClick:function(){(0,f.rN)(V.id),(0,x.q)({title:"Preparing playbook for download.",description:"Once complete, your download will start automatically.",variant:"info",dismissable:!0,autoDismiss:!0})}},"Download playbook")),o().createElement(h.SplitItem,null,o().createElement(at,{remediation:V}))))),o().createElement(Bt,{remediation:V,playbookRuns:d,switchAutoReboot:m,context:T})),o().createElement(yt.ZP,null,o().createElement(h.Stack,{hasGutter:!0},!E&&N&&o().createElement(h.StackItem,null,o().createElement(pt,{onClose:function(){return B(!1),void localStorage.setItem("remediations:bannerStatus","dismissed")}})),E&&F&&o().createElement(h.StackItem,null,o().createElement(Pt.Z,{onClose:function(){return L(!1),void localStorage.setItem("remediations:receptorBannerStatus","dismissed")}})),o().createElement(h.StackItem,{className:"ins-c-playbookSummary__tabs"},o().createElement(h.Tabs,{activeKey:k.get("activeTab")||"issues",onSelect:function(e,t){return Z(Lt(Lt({},Object.fromEntries(k)),{},{activeTab:t}))}},o().createElement(h.Tab,{eventKey:"issues",title:"Actions"},o().createElement(Ie,{remediation:V,status:n})),o().createElement(h.Tab,{eventKey:"systems",title:"Systems"},o().createElement(Ke,{remediation:V})),o().createElement(h.Tab,{eventKey:"activity",title:"Activity"},function(e,t,n){return e?Array.isArray(t)&&t.length?o().createElement(et,{remediation:n,playbookRuns:t}):Array.isArray(t)&&!t.length?o().createElement(Tt,null):o().createElement(Et.Z,null):o().createElement(ft,null)}(E,d,V))))))):void 0};zt.propTypes={selectedRemediation:m().object,selectedRemediationStatus:m().object,loadRemediation:m().func.isRequired,loadRemediationStatus:m().func.isRequired,switchAutoReboot:m().func.isRequired,deleteRemediation:m().func.isRequired,executePlaybookBanner:m().shape({isVisible:m().bool}),addNotification:m().func.isRequired,playbookRuns:m().array,getPlaybookRuns:m().func,checkExecutable:m().func,executable:m().object};const Gt=(0,d.connect)((function(e){var t=e.selectedRemediation,n=e.selectedRemediationStatus,r=e.executePlaybookBanner,a=e.playbookRuns,i=e.executable;return{selectedRemediation:t,selectedRemediationStatus:n,executePlaybookBanner:r,playbookRuns:a.data,remediation:t.remediation,executable:i}}),(function(e){return{loadRemediation:function(t){return e(p.loadRemediation(t))},loadRemediationStatus:function(t){return e(p.loadRemediationStatus(t))},switchAutoReboot:function(t,n){return e(p.patchRemediation(t,{auto_reboot:n}))},deleteRemediation:function(t){return e(p.deleteRemediation(t))},addNotification:function(t){return e((0,ct.wN)(t))},getPlaybookRuns:function(t){return e(p.getPlaybookRuns(t))},checkExecutable:function(t){return e(p.checkExecutable(t))}}}))(zt)},40742:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(87462),a=n(15671),i=n(43144),o=n(82963),l=n(61120),s=n(60136),c=n(10756),u=n.n(c),m=n(2311),d=n(35981),p=n(49004),f=n(35664),b=n(65550),E=n(97481),v=n(58247);function g(e,t,n){return t=(0,l.Z)(t),(0,o.Z)(e,y()?Reflect.construct(t,n||[],(0,l.Z)(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}const h=function(e){function t(e){var n;return(0,a.Z)(this,t),(n=g(this,t,[e])).state={columns:[{title:u().createElement(f.Z,{size:"xs"})},{title:u().createElement(f.Z,{size:"sm"})},{title:u().createElement(f.Z,{size:"sm"})},{title:u().createElement(f.Z,{size:"md"})},{title:u().createElement(f.Z,{size:"sm"})}],rows:[[{title:u().createElement(f.Z,{size:"md"})},{title:u().createElement(f.Z,{size:"xs"})},{title:u().createElement(f.Z,{size:"xs"})},{title:u().createElement(f.Z,{size:"md"})},{title:u().createElement(f.Z,{size:"md"})}]]},n}return(0,s.Z)(t,e),(0,i.Z)(t,[{key:"render",value:function(){var e=this.state,t=e.columns,n=e.rows;return u().createElement(c.Fragment,null,u().createElement(d.i,(0,r.Z)({cells:t,rows:n,"aria-label":"Loading",variant:m.TableVariant.compact},this.props),u().createElement(p.x,null)),u().createElement(v.Z,{centered:!0},u().createElement(E.Z,null)),u().createElement(b.Z,{isFooter:!0,className:"rem-c-skeleton-table__footer rem-m-align-right"},u().createElement(f.Z,{size:"sm"})))}}]),t}(u().Component)}}]);
//# sourceMappingURL=../sourcemaps/RemediationDetails.b7ea7ff461e02a43e1b743df9fa84cb1.js.map