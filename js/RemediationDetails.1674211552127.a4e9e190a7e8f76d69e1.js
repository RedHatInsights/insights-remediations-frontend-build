"use strict";(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[1390],{68452:(e,t,n)=>{function r(e){return e.split(":")[0]}function a(e){switch(r(e.id)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function i(e){var t=e.display_name,n=e.hostname,r=e.id;return t||n||r}function o(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{Pz:()=>r,lN:()=>a,_f:()=>i,PW:()=>o})},22163:(e,t,n)=>{n.d(t,{T:()=>o,Tj:()=>l,Gd:()=>s});var r=n(54998),a=n.n(r),i=n(68452);function o(e){var t=function(e){var t=e.id;switch((0,i.Pz)(t)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=s("inventory").toString();return function(e){return"".concat(n,"/").concat(e,"?appName=").concat(t)}}function l(e){var t=e.split(":");switch(t[0]){case"advisor":return s(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return s(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return s(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function s(e){switch(e){case"advisor":return a()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return a()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return a()(document.baseURI).segment("insights").segment("compliance");case"inventory":return a()(document.baseURI).segment((t=window.location.pathname.split("/"),"beta"===t[1]?t[2]:t[1])).segment("inventory");case"patch-advisory":return a()(document.baseURI).segment("insights").segment("patch");default:throw new Error("Unknown app: ".concat(e))}var t}},76200:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(87462),a=n(4942),i=n(45987),o=n(92950),l=n.n(o),s=n(45697),c=n.n(s),u=n(94184),m=n.n(u),d=["title","className","children","isBold","hasGutter","needsPointer"],p=function(e){var t=e.title,n=e.className,o=e.children,s=e.isBold,c=e.hasGutter,u=e.needsPointer,p=(0,i.Z)(e,d),f=m()("rem-c-description-list__description",(0,a.Z)({},"rem-c-description-list__description--bold",s),(0,a.Z)({},"rem-c-description-list__description--withGutter",c),(0,a.Z)({},"rem-c-description-list__description--needsPointer",u)),b=m()(n,"rem-c-description-list");return l().createElement("dl",(0,r.Z)({className:b},p),l().createElement("dt",{className:"rem-c-description-list__title"},l().createElement("b",null,t)),l().createElement("dd",{className:f}," ",o," "))};const f=p;p.propTypes={title:c().string,children:c().any,isBold:c().bool,className:c().string,hasGutter:c().bool,needsPointer:c().bool}},22797:(e,t,n)=>{n.d(t,{um:()=>d,M1:()=>p,Gx:()=>f,VA:()=>b});var r=n(45987),a=n(15861),i=n(4942),o=n(93433),l=n(87757),s=n.n(l),c=["page"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){var n=e.id;return null==t?void 0:t.has(n)}))?e.length>0:e.some((function(e){var n=e.id;return null==t?void 0:t.has(n)}))&&null},p=function(e){var t;return(null==e||null===(t=e.issues)||void 0===t?void 0:t.reduce((function(e,t){var n;return null==t||null===(n=t.systems)||void 0===n||n.forEach((function(n){var r,a=e.find((function(e){var t=e.id;return n.id===t})),i={id:t.id,resolution:t.resolution,description:t.description};a?(a.issues=[].concat((0,o.Z)(a.issues),[m(m({},i),{},{resolved:a.resolved})]),a.rebootRequired=a.issues.some((function(e){var t=e.resolution;return null==t?void 0:t.needs_reboot}))):e.push(m(m({},n),{},{issues:[m(m({},i),{},{resolved:n.resolved})],rebootRequired:null==t||null===(r=t.resolution)||void 0===r?void 0:r.needs_reboot}))})),e}),[]))||[]},f=function(){var e=(0,a.Z)(s().mark((function e(){var t,n,a,i,o,l,u,d,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=p.length>1?p[1]:void 0,a=p.length>2?p[2]:void 0,i=t.page,o=void 0===i?0:i,l=(0,r.Z)(t,c),u=n.filter((function(e){var t,n=e.display_name;return null===(t=l.filters)||void 0===t||!t.hostnameOrId||n.includes(l.filters.hostnameOrId)})),e.next=7,a(u.slice((o-1)*l.per_page,o*l.per_page).map((function(e){return e.id})),m(m({},l),{},{hasItems:!0}),!0);case 7:return d=e.sent,e.abrupt("return",m(m({},d),{},{page:o,results:d.results.map((function(e){return m(m({},u.find((function(t){return t.id===e.id}))),e)})),total:u.length}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((function(t){return e.find((function(e){return e.key===t.key}))||t}))}},9823:(e,t,n)=>{n.r(t),n.d(t,{default:()=>wt});var r=n(29439),a=n(92950),i=n.n(a),o=n(334),l=n(45697),s=n.n(l),c=n(28216),u=n(50289),m=n(73725),d=n(87462),p=n(4942),f=n(94654),b=n.n(f),v=n(75472),E=n.n(v),g=n(14938),y=n(17855),h=n(83045),R=n(65550),S=n(31939),k=n(68452),Z=n(22163),w=n(15861),O=n(87757),T=n.n(O),x=n(15671),C=n(43144),I=n(97326),_=n(60136),P=n(82963),A=n(61120),D=n(25729),j=n(35664);var N=function(e){(0,_.Z)(o,e);var t,n,r,a=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,A.Z)(n);if(r){var a=(0,A.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,P.Z)(this,e)});function o(e){var t;return(0,x.Z)(this,o),t=a.call(this,e),(0,p.Z)((0,I.Z)(t),"onRadioChange",(function(e){t.setState({selected:e})})),(0,p.Z)((0,I.Z)(t),"getSelectedResolution",(function(){return t.state.selected})),t.issue=e.issue,t.state={selected:e.issue.resolution,resolutions:!1},t}return(0,C.Z)(o,[{key:"componentDidMount",value:(t=(0,w.Z)(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getResolutions(this.issue.id);case 2:t=e.sent,this.setState({resolutions:t.value});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this,n=this.state,r=n.resolutions,a=n.selected;return e=r?i().createElement(i().Fragment,null,i().createElement(g.StackItem,null,i().createElement(g.Form,null,r.resolutions.map((function(e){return i().createElement("div",{className:"ins-c-resolution-option",key:e.id},i().createElement(g.Radio,{label:i().createElement(g.Stack,{className:"ins-c-resolution-choice__details"},i().createElement(g.StackItem,null,e.description),e.needs_reboot&&i().createElement(g.StackItem,null,i().createElement(D.Z,{red:!0}))),"aria-label":e.description,id:e.id,name:"radio",defaultChecked:e.id===a.id,onChange:function(){return t.onRadioChange(e)}}))}))))):i().createElement(i().Fragment,null,i().createElement(g.StackItem,null,i().createElement(j.Z,null)),i().createElement(g.StackItem,null,i().createElement(j.Z,null)),i().createElement(g.StackItem,null,i().createElement(j.Z,null))),i().createElement(g.Stack,{hasGutter:!0},i().createElement(g.StackItem,null,i().createElement("div",null,"Select resolution for this action.")),i().createElement(g.StackItem,null,i().createElement(g.Split,{hasGutter:!0},i().createElement(g.SplitItem,null,i().createElement(g.Label,null,"Action")),i().createElement(g.SplitItem,{isFilled:!0},i().createElement("h1",{className:"ins-m-text__bold"},this.issue.description)))),e)}}]),o}(a.Component);N.propTypes={issue:s().object.isRequired,getResolutions:s().func.isRequired};const B=N;var q=function(e){var t=e.remediation,n=e.issue,o=e.onResolutionSelected,l=e.getResolutions,s=(0,a.useState)(!1),c=(0,r.Z)(s,2),u=c[0],m=c[1],d=(0,a.useRef)();return i().createElement(i().Fragment,null,i().createElement("a",{onClick:function(){return m(!0)}},"Edit"),u&&i().createElement(g.Modal,{variant:g.ModalVariant.medium,className:"rem-c-resolution-modal",isOpen:u,onClose:function(){return m(!1)},title:"Edit resolution",actions:[i().createElement(g.Button,{key:"confirm",variant:"primary",onClick:function(e){var r;m(!1);var a=null===(r=d.current)||void 0===r?void 0:r.getSelectedResolution();e&&n.resolution.id!==a.id&&o(t.id,n.id,a.id)}},"Save"),i().createElement(g.Button,{key:"cancel",variant:"secondary",onClick:function(){return m(!1)}},"Cancel")]},i().createElement(B,{key:"ResolutionStep",issue:n,ref:d,getResolutions:l})))};q.propTypes={remediation:s().object.isRequired,issue:s().object.isRequired,onResolutionSelected:s().func.isRequired,getResolutions:s().func.isRequired};const F=q;var L=(0,c.connect)((function(e){return e}),(function(e){return{onResolutionSelected:(t=(0,w.Z)(T().mark((function t(n,r,a){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,u.patchRemediationIssue)(n,r,a));case 2:e((0,u.refreshRemediation)(n));case 3:case"end":return t.stop()}}),t)}))),function(e,n,r){return t.apply(this,arguments)}),getResolutions:function(t){return e((0,u.getResolutions)(t))}};var t}))(F),z=n(28962),G=n(58610);var V=function(e){(0,_.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,A.Z)(t);if(n){var a=(0,A.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,P.Z)(this,e)});function a(){var e;(0,x.Z)(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,p.Z)((0,I.Z)(e),"state",{dialogOpen:!1}),(0,p.Z)((0,I.Z)(e),"onButtonClicked",(function(){e.setState({dialogOpen:!0})})),(0,p.Z)((0,I.Z)(e),"onDialogClose",(function(t){e.setState({dialogOpen:!1}),t&&e.props.onDelete()})),e}return(0,C.Z)(a,[{key:"render",value:function(){var e=this.state.dialogOpen;return i().createElement(i().Fragment,null,i().createElement(g.Button,{onClick:this.onButtonClicked,isDisabled:this.props.isDisabled,variant:this.props.variant},this.props.label),e&&i().createElement(G.Z,{title:this.props.dialogTitle,confirmText:this.props.dialogConfirmationText,text:this.props.dialogMessage,onClose:this.onDialogClose}))}}]),a}(a.Component);V.propTypes={label:s().string,dialogTitle:s().string,dialogMessage:s().string,dialogConfirmationText:s().string,isDisabled:s().bool,onDelete:s().func.isRequired,variant:s().string},V.defaultProps={label:"Delete",variant:"link"};const M=V;(0,o.withRouter)((0,c.connect)((function(e,t){var n=t.remediations;return{dialogMessage:"You will not be able to recover ".concat(n.length>1?"these remediations":"this remediation")}}),(function(e,t){var n,r=t.remediations;return{onDelete:(n=(0,w.Z)(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return e((0,u.deleteRemediation)(t))})));case 2:e((0,u.loadRemediations)());case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}}))(M));var U=(0,o.withRouter)((0,c.connect)((function(e,t){var n=t.issues;return{label:"Remove action".concat(n.length>1?"s":""),dialogTitle:"Remove action".concat(n.length>1?"s":""),dialogConfirmationText:"Remove action".concat(n.length>1?"s":"")}}),(function(e,t){var n,r=t.remediation,a=t.issues,i=t.afterDelete;return{onDelete:(n=(0,w.Z)(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(a.map((function(t){return e((0,u.deleteRemediationIssue)(r.id,t))})));case 2:z.hN&&e((0,u.loadRemediationStatus)(r.id)),i();case 4:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}}))(M)),H=n(52017),K=n(67336),Y=n(81321),W=n(18213),$=n(83237),J=n(81730);function Q(e){var t=e.remediation,n=e.issue,o=e.system,l=e.onDelete,s=e.setActiveAlert,c=(0,a.useState)(!1),u=(0,r.Z)(c,2),m=u[0],d=u[1],p=(0,a.useState)(!1),f=(0,r.Z)(p,2),b=f[0],v=f[1];return i().createElement(i().Fragment,null,i().createElement(G.Z,{isOpen:b,text:"This playbook will not address ".concat(n.description," on ").concat((0,k._f)(o)),onClose:function(e){v(!1),e&&l(t.id,n.id,o.id),s({key:(0,S.l)(),title:"Removed systems from ".concat(t.name),description:"",variant:"success"})}}),i().createElement(g.Dropdown,{onSelect:function(e){return e},toggle:i().createElement(g.KebabToggle,{onToggle:function(){return d((function(e){return!e}))}}),isOpen:m,position:g.DropdownPosition.right,isPlain:!0},i().createElement(g.Button,{onClick:function(){return v(!0)},variant:"link"},"Remove system")))}Q.propTypes={remediation:s().object.isRequired,issue:s().object.isRequired,system:s().object.isRequired,onDelete:s().func.isRequired,setActiveAlert:s().func};const X=(0,o.withRouter)((0,c.connect)(null,(function(e){return{onDelete:function(t,n,r){return e((0,u.deleteRemediationIssueSystem)(t,n,r))}}}))(Q));var ee=function(e){var t=e.icon,n=e.text;return i().createElement("div",{className:"rem-c-icon-inline"},t,i().createElement("span",{className:"rem-c-icon-inline__text"},n))};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ee.propTypes={icon:s().node.isRequired,text:s().string.isRequired};var ne=function(e){var t=e.isOpen,n=e.onClose,o=e.issue,l=e.remediation,s=e.onDelete,c=(0,a.useState)(!1),u=(0,r.Z)(c,2),m=u[0],d=u[1],f=(0,a.useState)({}),b=(0,r.Z)(f,2),v=b[0],y=b[1],h=(0,a.useState)({}),S=(0,r.Z)(h,2),w=S[0],O=S[1],T=(0,a.useState)(1),x=(0,r.Z)(T,2),C=x[0],I=x[1],_=(0,a.useState)(50),P=(0,r.Z)(_,2),A=P[0],D=P[1],j=(0,a.useState)(""),N=(0,r.Z)(j,2),B=N[0],q=N[1],F=(0,a.useRef)(null),L=(0,a.useRef)((0,Z.T)(o)).current;(0,a.useEffect)((function(){var e={};o.systems.map((function(t){e[t.id]=!0===t.resolved?i().createElement(ee,{icon:i().createElement(H.CheckIcon,null),text:"Remediated"}):i().createElement(ee,{icon:i().createElement(H.TimesIcon,null),text:"Not remediated"})})),O(e)}),[]);var z=function(e,t){return function(n){return i().createElement(X,{remediation:e,issue:t,system:n})}},V=function(e){return w[e]};return i().createElement(i().Fragment,null,i().createElement(g.Modal,{className:"remediations",variant:g.ModalVariant.large,title:"System".concat(o.systems.length>1?"s":""," for action ").concat(o.description),isOpen:t,onClose:n,isFooterLeftAligned:!0},i().createElement("div",{className:"rem-c-toolbar__filter"},i().createElement(Y.Z,{onLoad:function(e){var t=e.mergeWithEntities,n=e.INVENTORY_ACTION_TYPES;return(0,K.JH)().register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t(J.Z.inventoryEntitiesReducer({INVENTORY_ACTION_TYPES:n,detailDropdown:z(l,o),urlBuilder:L,generateStatus:V})())))},ref:F,items:E()(o.systems.filter((function(e){return(0,k._f)(e).includes(B)})),[function(e){return(0,k._f)(e)},function(e){return e.id}]),onRefresh:function(e){F&&F.current&&(I(e.page),D(e.per_page),F.current.onRefreshData(e))},page:C,total:o.systems.length,perPage:A,hasCheckbox:!1,actions:[{title:" Remove system",onClick:function(e,t,n){y(n),d(!0)}}]},i().createElement(R.Z,null,i().createElement(g.ToolbarGroup,null,i().createElement(g.ToolbarItem,null,i().createElement(W.Z,{items:[{value:"display_name",label:"Name",filterValues:{placeholder:"Search by name",type:$.Y.text,value:B,onChange:function(e,t){return q(t)}}}]}))))))),i().createElement(G.Z,{isOpen:m,text:"Removing the system ".concat((0,k._f)(v)," from the action ").concat(o.description,"\n                    will remove this system’s remediation from the playbook."),onClose:function(e){d(!1),e&&s(l.id,o.id,v.id)}}))};ne.propTypes={isOpen:s().bool,onClose:s().func,issue:s().object,remediation:s().object,onDelete:s().func};var re=function(e){var t=e.issue,n=e.remediation,o=e.title,l=(0,a.useState)(!1),s=(0,r.Z)(l,2),m=s[0],d=s[1],p=(0,c.useDispatch)();return i().createElement(i().Fragment,null,i().createElement("a",{onClick:function(){return d(!0)}},o),i().createElement(ne,{isOpen:m,onClose:function(){return d(!1)},issue:t,remediation:n,onDelete:function(e,t,n){return p((0,u.deleteRemediationIssueSystem)(e,t,n))}}))};re.propTypes={issue:s().object.isRequired,remediation:s().object.isRequired,title:s().string.isRequired};var ae=n(11178),ie="true"===localStorage.getItem("remediations:debug")?{perPageOptions:[1,2,3,4,5,10,15,20,25,50,100,200].map((function(e){return{title:"".concat(e),value:e}}))}:{},oe=n(57869),le=function(e){return i().createElement(g.Bullseye,{className:"pf-u-pt-2xl"},i().createElement(g.EmptyState,null,!0===e.filtered?i().createElement(g.Title,{size:"lg",headingLevel:"h5"},"No actions found"):i().createElement(g.Title,{size:"lg",headingLevel:"h5"},"This playbook is empty"),i().createElement(g.EmptyStateBody,null,"To add an action, select issues identified in",i().createElement("br",null),i().createElement("a",{href:(0,Z.Gd)("advisor").toString()},"Recommendations"),", ",i().createElement("a",{href:(0,Z.Gd)("compliance").toString()},"Compliance")," or ",i().createElement("a",{href:(0,Z.Gd)("vulnerabilities").toString()},"Vulnerability"),"  and select",i().createElement("br",null),i().createElement("strong",null,"Remediate with Ansible."))))};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t){var n=(0,Z.Tj)(t.id);return t.resolutions_available<=1?n?i().createElement(i().Fragment,null,i().createElement("span",null,i().createElement("a",{href:n},t.description),i().createElement("br",null),t.resolution.description)):t.resolution.description:n?i().createElement(i().Fragment,null,i().createElement("span",null,i().createElement("a",{href:n},t.description),i().createElement("br",null),t.resolution.description,i().createElement("br",null),i().createElement(L,{issue:t,remediation:e}))):i().createElement(i().Fragment,null,t.resolution.description,i().createElement("br",null),i().createElement(L,{issue:t,remediation:e}))}function me(e,t,n){return i().createElement(re,{key:e.id,remediation:t,issue:e,title:n})}function de(e){var t=0;return e.systems.map((function(e){e.resolved&&t++})),t}le.propTypes={filtered:s().bool.isRequired};var pe=[null,function(e){return e.description},null,function(e){return e.resolution.needs_reboot},function(e){return e.systems.length},function(e){return(0,k.lN)(e)}];function fe(e){var t,n=(0,ae.h0)(),o=(0,ae.sk)(1,"asc"),l=(0,ae.L0)(),s=(0,ae.v9)(),c=e.setActiveAlert,u=(0,a.useContext)(oe.B),m=(0,a.useState)(""),p=(0,r.Z)(m,2),f=p[0],v=p[1],Z=(0,a.useState)(0),w=(0,r.Z)(Z,2);w[0],w[1],(0,a.useEffect)((function(){l.setValue(f)}),[f]),o.onChange(n.reset),l.onChange(n.reset);var O,T=e.remediation.issues.filter((function(e){return(0,k.PW)(e.description,l.value.trim())})),x=E()(T,[pe[o.sortBy]],[o.sortDir]).slice(n.offset,n.offset+n.pageSize),C=b()(x,(O=e.remediation,function(e){var t;return[{isOpen:!1,id:e.id,cells:[{title:ue(O,e)},{title:(t=e.resolution.needs_reboot,i().createElement("span",null,t?"Required":"Not required"))},{title:me(e,O,"".concat(e.systems.length))},{title:(0,k.lN)(e),props:{className:"rem-m-nowrap"}},{title:me(e,O,"".concat(de(e),"/").concat(e.systems.length," remediated"))}]}]}));s.register(C);var I=s.getSelectedIds(),_={filters:f.length?[{category:"Action",chips:[{name:f}]}]:[],onDelete:function(){v(""),l.setValue("")}},P=function(e){return null==e?void 0:e.filter((function(e){return!0===e.selected}))};return i().createElement("div",{className:"test"},i().createElement(h.Z,{filterConfig:{items:[{label:"Search actions",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Search",value:f,onChange:function(e,t){v(t)}}}]},bulkSelect:{isDisabled:!C,items:[{title:"Select none (0)",onClick:function(){s.props.onSelect("none")}},C.length>0?{title:"Select page (".concat(null==C?void 0:C.length,")"),onClick:function(){0===P(C).length?s.props.onSelect("page",!0,0):C.length===P(C).length?s.props.onSelect("page",!1,0):s.props.onSelect("page",!0,0)}}:{},C.length>0?{title:"Select all (".concat(null==e||null===(t=e.remediation)||void 0===t?void 0:t.issues.length,")"),onClick:function(){var t;s.register(null==e?void 0:e.remediation.issues),(null==I?void 0:I.length)<(null==e||null===(t=e.remediation)||void 0===t?void 0:t.issues.length)?s.props.onSelect("page",!0,0):s.props.onSelect("page",!1,0)}}:{}],checked:I.length&&T.length>I.length?null:I.length,count:I.length,onSelect:function(){0===P(C).length?s.props.onSelect("page",!0,0):s.props.onSelect("page",!1,0)}},actionsConfig:{actions:[i().createElement(U,{key:e.remediation.id,variant:"secondary",isDisabled:!I.length,remediation:e.remediation,issues:I,afterDelete:function(){c({key:(0,S.l)(),title:"Removed ".concat(I.length," actions from ").concat(e.remediation.name),description:"",variant:"success"}),s.reset}})]},pagination:ce(ce({},n.props),{},{itemCount:T.length}),activeFiltersConfig:_}),C.length>0?i().createElement(y.Table,(0,d.Z)({variant:y.TableVariant.compact,"aria-label":"Actions",canSelectAll:!1,className:"ins-c-remediation-details-table",cells:[{title:"Actions",transforms:[y.sortable]},{title:"Reboot required",transforms:[y.sortable]},{title:"Systems",transforms:[y.sortable]},{title:"Type",transforms:[y.sortable]},{title:"Status",transforms:[y.sortable]}],rows:C},o.props,u.permissions.write&&ce({},s.props)),i().createElement(y.TableHeader,null),i().createElement(y.TableBody,s.tbodyProps)):l.value?i().createElement(le,{filtered:!0}):i().createElement(le,{filtered:!1}),C.length>0&&i().createElement(R.Z,{isFooter:!0},i().createElement(g.Pagination,(0,d.Z)({variant:"bottom",dropDirection:"up",itemCount:T.length},n.props,ie))))}fe.propTypes={remediation:s().object.isRequired,status:s().object.isRequired,setActiveAlert:s().func};const be=fe;var ve=n(57283),Ee=n.n(ve),ge=n(18546),ye=n(77431),he=function(e){var t,n=e.isOpen,r=e.selected,a=e.onConfirm,o=e.onClose,l=e.remediationName;return i().createElement(g.Modal,{variant:g.ModalVariant.medium,title:"Remove selected systems from ".concat(l),isOpen:n,onClose:o,appendTo:document.getElementsByClassName("remediations")[0],actions:[i().createElement(g.Button,{key:"remove-confirm",variant:"danger",onClick:a,ouiaId:"confirm-delete"},"Remove"),i().createElement(g.Button,{key:"remove-cancel",variant:"link",onClick:o},"Cancel")]},i().createElement(g.Split,{hasGutter:!0},i().createElement(g.SplitItem,null,i().createElement(H.ExclamationTriangleIcon,{size:"xl",className:"ins-m-alert"})),i().createElement(g.SplitItem,{isFilled:!0},i().createElement(g.Stack,{hasGutter:!0},i().createElement(g.StackItem,null,"This action will remove"," ",1===r.length?i().createElement("span",null,i().createElement("b",null," ",null===(t=r[0])||void 0===t?void 0:t.display_name," ")," system"):i().createElement("span",null,i().createElement("b",null," ",r.length," ")," systems")," ","from ",i().createElement("b",null,l)," Remediation."),i().createElement(g.StackItem,null,"Removing ",(0,ye._6)(r.length,"system")," from this Remediation will remove it from all associated issues in"," ",i().createElement("b",null,l)," Remediation. Be careful as you can end up with Remediation without any systems.")))))};he.propTypes={selected:s().arrayOf(s().shape({id:s().string,display_name:s().string})).isRequired,remediationName:s().string.isRequired,isOpen:s().bool.isRequired,onConfirm:s().func.isRequired,onClose:s().func.isRequired};const Re=he;var Se=n(22797),ke=function(e){var t=e.rebootRequired;return i().createElement(a.Fragment,null,i().createElement("span",null,t?"Required":"Not required"))};ke.propTypes={rebootRequired:s().bool};const Ze=ke;var we=n(89734),Oe=n.n(we),Te={advisor:"Advisor recommendation",vulnerabilities:"Vulnerability","patch-advisory":"Patch advisory"},xe=function(e){var t=e.issues,n=e.status,o=e.display_name,l=(0,a.useState)({index:0,direction:"asc"}),s=(0,r.Z)(l,2),c=s[0],u=s[1],m=(0,a.useState)(),d=(0,r.Z)(m,2),p=d[0],f=d[1],b=n?H.CheckIcon:H.TimesIcon,v=Oe()(t,(function(e){return(t=e,[t.description,t.resolution.needs_reboot,null==Te?void 0:Te[t.id.split(":")[0]],t.resolved])[c.index];var t}));return i().createElement(a.Fragment,null,i().createElement(g.Button,{variant:"link",isInline:!0,onClick:function(){return f(!0)}},t.length),i().createElement(g.Modal,{variant:g.ModalVariant.medium,title:"Actions for system ".concat(o),isOpen:p,onClose:function(){return f(!1)}},i().createElement(y.Table,{variant:"compact","aria-label":"Issues table for ".concat(o),rows:("asc"===c.direction?v:v.reverse()).map((function(e){return[{title:i().createElement(a.Fragment,null,i().createElement("div",null,i().createElement("a",{variant:"link",isInline:!0,href:(0,Z.Tj)(e.id)},e.description)),i().createElement("div",null,e.resolution.description))},{title:i().createElement(a.Fragment,null,i().createElement(Ze,{rebootRequired:e.resolution.needs_reboot}))},(null==Te?void 0:Te[e.id.split(":")[0]])||"Unknown",{title:i().createElement(a.Fragment,null,i().createElement(b,null)," ",e.resolved?"Remediated":"Not remediated")}]})),cells:[{title:"Action",transforms:[y.sortable]},{title:"Reboot required",transforms:[y.sortable,(0,y.cellWidth)(20)]},{title:"Type",transforms:[y.sortable,(0,y.cellWidth)(15)]},{title:"Status",transforms:[y.sortable,(0,y.cellWidth)(20)]}],sortBy:c,onSort:function(e,t,n){return u({index:t,direction:n})}},i().createElement(y.TableHeader,null),i().createElement(y.TableBody,null))))};xe.propTypes={issues:s().arrayOf(s().shape()),rebootRequired:s().bool,status:s().bool,display_name:s().string};const Ce=xe,Ie=[{key:"display_name"},{key:"tags"},{key:"system_profile"},{key:"issues",title:"Issues",renderFunc:function(e,t,n){var r=n.display_name;return i().createElement(Ce,{issues:e,id:t,display_name:r})},props:{width:15,isStatic:!0}},{key:"rebootRequired",title:"Reboot required",renderFunc:function(e){return i().createElement(Ze,{rebootRequired:e})},props:{width:15,isStatic:!0}}];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(e){var t=e.remediation,n=e.registry,o=e.refreshRemediation,l=e.setActiveAlert,s=(0,a.useState)(!1),m=(0,r.Z)(s,2),d=m[0],p=m[1],f=(0,a.useRef)(),b=(0,a.useRef)((function(){})),v=(0,a.useRef)(void 0),E=(0,c.useDispatch)(),y=(0,c.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.selected)||new Map})),h=(0,c.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.loaded})),R=(0,c.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.rows})),k=function(e){return null==e?void 0:e.filter((function(e){return!0===e.selected}))},Z=function(e){switch(e){case"none":case"deselect all":f.current.map((function(e){return E((0,u.selectEntity)(e.id,!1))}));break;case"page":E((0,u.selectEntity)(0,!0));break;case"deselect page":R.map((function(){return E((0,u.selectEntity)(0,!1))}));break;case"all":f.current.map((function(e){return E((0,u.selectEntity)(e.id,!0))}))}};return(0,a.useEffect)((function(){f.current=(0,Se.M1)(t)}),[t.id]),i().createElement(Y.Z,{variant:"compact",showTags:!0,noDetail:!0,hideFilters:{all:!0,name:!1},tableProps:{canSelectAll:!1},columns:function(e){return(0,Se.VA)(e,Ie)},bulkSelect:{isDisabled:!R,count:y?y.size:0,items:[{title:"Select none (0)",onClick:function(){return Z("none")}},Pe({},h&&R&&R.length>0?{title:"Select page (".concat(R.length,")"),onClick:function(){y?k(R).length===R.length?Z("deselect page"):f.current.length>y.size?Z("page"):Z("deselect page"):Z("page")}}:{}),Pe({},h&&R&&R.length>0?{title:"Select all (".concat(f.current.length,")"),onClick:function(){(0,Se.um)(f.current,y)?Z("deselect all"):Z("all")}}:{})],checked:(0,Se.um)(f.current,y),onSelect:function(){k(R).length===R.length?Z("deselect page"):Z("page")}},getEntities:function(){var e=(0,w.Z)(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Se.Gx)(n,f.current,b.current));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onLoad:function(e){var t,r=e.INVENTORY_ACTION_TYPES,a=e.mergeWithEntities,i=e.api;b.current=null==i?void 0:i.getEntities,null==n||null===(t=n.register)||void 0===t||t.call(n,Pe({},a((0,J.L)(r))))},actions:[{title:"Remove system",onClick:function(e,n,r){var a=r.id,i=r.display_name;v.current={id:a,display_name:i,issues:t.issues.filter((function(e){return e.systems.find((function(e){return e.id===a}))}))},p(!0)}}]},h&&i().createElement(g.Button,{variant:"secondary",onClick:function(){return p(!0)},isDisabled:0===y.size},"Remove system"),i().createElement(Re,{isOpen:d,onConfirm:function(){(0,w.Z)(T().mark((function e(){var n,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.size>0?Array.from(y,(function(e){return(0,r.Z)(e,2)[1]})):[Pe({},v.current)],a=(0,u.deleteSystems)(n,t),E(a),e.next=5,a.payload;case 5:o();case 6:case"end":return e.stop()}}),e)})))(),v.current=void 0,l({key:(0,S.l)(),title:"Removed ".concat(y.size," ").concat(y.size>1?"systems":"system"," from playbook"),description:"",variant:"success"}),p(!1)},selected:y.size>0?Array.from(y,(function(e){return(0,r.Z)(e,2)[1]})):[v.current],onClose:function(){v.current=void 0,p(!1)},remediationName:t.name}))},De=function(e){var t=(0,c.useDispatch)(),n=(0,a.useState)(),o=(0,r.Z)(n,2),l=o[0],s=o[1];return(0,a.useEffect)((function(){s(new ge.ZP({selected:new Map},[Ee()]))}),[]),l?i().createElement(c.Provider,{store:l.store},i().createElement(Ae,(0,d.Z)({registry:l,refreshRemediation:function(){return t((0,u.loadRemediation)(e.remediation.id))},setActiveAlert:e.setActiveAlert},e))):i().createElement(a.Fragment,null)};De.propTypes={remediation:s().shape({id:s().string,issues:s().arrayOf(s().shape({systems:s().arrayOf(s().shape({id:s().string,display_name:s().string,resolved:s().bool}))}))})},Ae.propTypes=Pe(Pe({},De.propTypes),{},{registry:s().shape({register:s().func}),refreshRemediation:s().func,setActiveAlert:s().func});const je=De;var Ne=n(93433),Be=n(62410);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(e){var t=e.remediation,n=e.playbookRuns,l=(0,a.useState)([]),s=(0,r.Z)(l,2),c=s[0],u=s[1],m=(0,a.useContext)(oe.B);return(0,a.useEffect)((function(){n&&n.length&&u((function(){return function(e){return e.reduce((function(e,n,r){return[].concat((0,Ne.Z)(e),[{isOpen:!1,cells:[{title:i().createElement(o.Link,{to:"/".concat(t.id,"/").concat(n.id)},i().createElement(Be.Z,{type:"exact",date:n.created_at})),cellFormatters:[y.expandable]},"".concat(n.created_by.first_name," ").concat(n.created_by.last_name),{title:i().createElement(ye.kf,{executorStatus:(0,ye.fb)(n.status),counts:n.executors.reduce((function(e,t){return{pending:e.pending+t.counts.pending,running:e.running+t.counts.running,success:e.success+t.counts.success,failure:e.failure+t.counts.failure,canceled:e.canceled+t.counts.canceled,acked:e.acked+t.counts.acked}}),{pending:0,running:0,success:0,failure:0,canceled:0,acked:0}),hasCancel:!0,remediationName:t.name,remediationId:t.id,playbookId:n.id,permission:m})}]},{parent:2*r,fullWidth:!0,cells:[{title:i().createElement(y.Table,{"aria-label":"Compact expandable table",cells:["Connection","Systems","Playbook run status"],rows:n.executors.map((function(e){return{cells:[{title:i().createElement(o.Link,{to:"/".concat(t.id,"/").concat(n.id,"/").concat(e.executor_id)},e.executor_name)},e.system_count,{title:i().createElement(ye.kf,{executorStatus:(0,ye.fb)(e.status),counts:e.counts,permission:m})}]}}))},i().createElement(y.TableHeader,null),i().createElement(y.TableBody,null))}]}])}),[])}(n)}))}),[n]),i().createElement(y.Table,{className:"rem-c-activity-table","aria-label":"Collapsible table",onCollapse:function(e,t,n){var r=(0,Ne.Z)(c);r[t]=Fe(Fe({},r[t]),{},{isOpen:n}),u(r)},rows:c,cells:["Run on","Run by","Status"]},i().createElement(y.TableHeader,null),i().createElement(y.TableBody,null))};Le.propTypes={remediation:s().object,playbookRuns:s().array};const ze=Le;function Ge(e){var t=(0,a.useState)(e.value||""),n=(0,r.Z)(t,2),o=n[0],l=n[1],s=(0,a.useState)(!0),c=(0,r.Z)(s,2),u=c[0],m=c[1],d=e.title,p=e.onCancel,f=e.onSubmit,b=e.ariaLabel,v=e.className;return i().createElement(g.Modal,{title:d,isOpen:!0,onClose:function(e){return p(e)},actions:[i().createElement(g.Button,{key:"confirm",variant:"primary",onClick:function(){return f(o)},isDisabled:!u,ouiaId:"save"},"Save"),i().createElement(g.Button,{key:"cancel",variant:"secondary",onClick:p,ouiaId:"cancel"},"Cancel")],variant:g.ModalVariant.small,className:v},i().createElement(g.FormGroup,{fieldId:"remediation-name",helperTextInvalid:"Playbook name has to contain alphanumeric characters",isValid:u},i().createElement(g.TextInput,{value:o,type:"text",onChange:function(t){l(t),e.pattern&&m(e.pattern.test(t))},"aria-label":b||"input text",autoFocus:!0,isValid:u})))}Ge.propTypes={title:s().string.isRequired,onCancel:s().func,onSubmit:s().func,ariaLabel:s().string,value:s().string,className:s().string,pattern:s().instanceOf(RegExp)};var Ve=/^$|^.*[\w\d]+.*$/;function Me(e){var t=e.remediation,n=e.onRename,o=e.onDelete,l=e.setActiveAlert,s=(0,a.useState)(!1),c=(0,r.Z)(s,2),u=c[0],m=c[1],d=(0,a.useState)(!1),p=(0,r.Z)(d,2),f=p[0],b=p[1],v=(0,a.useState)(!1),E=(0,r.Z)(v,2),y=E[0],h=E[1],R=(0,a.useContext)(oe.B);return i().createElement(i().Fragment,null,f&&i().createElement(Ge,{title:"Edit playbook name",ariaLabel:"Playbook name",value:t.name,onCancel:function(){return b(!1)},onSubmit:function(e){b(!1),n(t.id,e),l({key:(0,S.l)(),title:"Updated playbook name to ".concat(e),description:"",variant:"success"})},pattern:Ve}),i().createElement(G.Z,{isOpen:y,title:"Remove playbook?",text:"You will not be able to recover this Playbook",confirmText:"Remove playbook",onClose:function(e){h(!1),e&&(o(t.id),l({key:(0,S.l)(),title:"Deleted playbook ".concat(t.name),variant:"success"}))}}),R.permissions.write&&i().createElement(g.Dropdown,{onSelect:function(e){return e},toggle:i().createElement(g.KebabToggle,{onToggle:function(){return m((function(e){return!e}))}}),isOpen:u,position:g.DropdownPosition.right,isPlain:!0},i().createElement(g.Button,{onClick:function(){return b(!0)},variant:"link"},"Rename"),i().createElement(g.Button,{className:" rem-c-button__danger-link",onClick:function(){return h(!0)},variant:"link"},"Delete")))}Me.propTypes={remediation:s().object.isRequired,onRename:s().func.isRequired,onDelete:s().func.isRequired,setActiveAlert:s().func};const Ue=(0,o.withRouter)((0,c.connect)(null,(function(e,t){var n,r=t.history;return{onRename:function(t,n){n||(n="Unnamed Playbook"),e((0,u.patchRemediation)(t,{name:n}))},onDelete:(n=(0,w.Z)(T().mark((function t(n){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,u.deleteRemediation)(n));case 2:r.push("/");case 3:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)})}}))(Me));var He=n(95274),Ke=function(e){var t=e.isLoading,n=e.isDisabled,o=e.disabledStateText,l=e.data,s=e.getConnectionStatus,c=e.remediationId,u=e.remediationName,m=e.issueCount,d=e.runRemediation,p=e.etag,f=e.remediationStatus,b=e.setEtag,v=e.setActiveAlert,E=(0,a.useState)(!1),y=(0,r.Z)(E,2),h=y[0],R=y[1],S=(0,a.useState)(!1),k=(0,r.Z)(S,2),Z=k[0],w=k[1];return(0,a.useEffect)((function(){"changed"===f?(s(c),w(!0)):"fulfilled"===f&&R(!1)}),[f]),i().createElement(i().Fragment,null,n?i().createElement(g.Tooltip,{content:o,position:"auto"},i().createElement(g.Button,{isAriaDisabled:!0},"Execute playbook")):i().createElement(g.Button,{onClick:function(){R(!0),s(c)}},"Execute playbook"),h&&i().createElement(He.l,{isOpen:h,onClose:function(){w(!1),R(!1)},showRefresh:Z,remediationId:c,remediationName:u,data:l,etag:p,isLoading:t,issueCount:m,runRemediation:d,setEtag:b,setActiveAlert:v}))};Ke.propTypes={isLoading:s().bool,data:s().array,getConnectionStatus:s().func,runRemediation:s().func,remediationId:s().string,remediationName:s().string,remediationStatus:s().string,issueCount:s().number,etag:s().string,setEtag:s().func,isDisabled:s().bool,disabledStateText:s().string,setActiveAlert:s().func},Ke.defaultProps={data:[],isDisabled:!1};const Ye=Ke;var We=(0,o.withRouter)((0,c.connect)((function(e){var t=e.connectionStatus,n=t.data,r=t.status,a=t.etag,i=e.selectedRemediation,o=e.runRemediation,l=e.sources,s=e.executable;return{data:n,isLoading:"fulfilled"!==r,issueCount:i.remediation.issues.length,etag:a,remediationStatus:o.status,sources:l,executable:s}}),(function(e){return{getConnectionStatus:function(t){e((0,u.getConnectionStatus)(t))},runRemediation:function(t,n,r){e((0,u.runRemediation)(t,n,r)).then((function(){return e((0,u.getPlaybookRuns)(t))}))},setEtag:function(t){e((0,u.setEtag)(t))},getEndpoint:function(t){e((0,u.getEndpoint)(t))},checkExecutable:function(t){e((0,u.checkExecutable)(t))}}}))(Ye)),$e=n(83215),Je=n(55140),Qe=n(45987),Xe=["onClose"],et=function(e){var t=e.onClose,n=(0,Qe.Z)(e,Xe);return i().createElement(g.Alert,(0,d.Z)({variant:"info",isInline:!0,title:"Put Insights into action",actionClose:i().createElement(g.AlertActionCloseButton,{onClose:t})},n),i().createElement(g.Stack,{hasGutter:!0},i().createElement(g.StackItem,null,"Enable push-button remediation across your hybrid cloud environment with Red Hat Smart Management."),i().createElement(g.StackItem,null,i().createElement("a",{href:"https://www.redhat.com/en/technologies/management/smart-management"},"Learn more"))))};const tt=et;et.propTypes={onClose:s().func},et.defaultProps={onClose:function(){}};const nt=function(){return i().createElement(g.Bullseye,null,i().createElement(g.EmptyState,null,i().createElement(g.EmptyStateIcon,{icon:H.CloudIcon}),i().createElement(g.Title,{headingLevel:"h5",size:"lg"},"Get more with Find it Fix it capabilities"),i().createElement(g.EmptyStateBody,null,"Upgrade to Red Hat Smart Management to remediate all your systems, across regions and geographies directly from Red Hat Insights."),i().createElement(g.Button,{variant:"link",component:"a",ouiaId:"learn_more",href:"https://www.redhat.com/en/technologies/management/smart-management"},"Learn more")))};var rt=n(78762),at=n(40742),it=n(80123),ot=n(39173),lt=n(14748),st=n(56700),ct=n(71070);const ut=function(){var e=i().createElement(a.Fragment,null,i().createElement(g.ToolbarItem,null,i().createElement(g.Dropdown,{toggle:i().createElement(g.DropdownToggle,{isDisabled:!0,splitButtonItems:[i().createElement(g.DropdownToggleCheckbox,{id:"skeleton-dropdown",key:"skeleton-dropdown","aria-label":"Loading Select all"})],id:"skeleton-dropdown-toggle"})})),i().createElement(g.ToolbarItem,null,i().createElement(g.InputGroup,null,i().createElement(g.TextInput,{value:"Search",isDisabled:!0,name:"skeleton-search",id:"skeleton-search",type:"search","aria-label":"search loading"}),i().createElement(g.Button,{isDisabled:!0,variant:"control","aria-label":"search button for search input"},i().createElement(ct.ZP,null)))),i().createElement(g.ToolbarItem,null,i().createElement(g.Button,{isDisabled:!0,variant:"primary"},"Remove action")));return i().createElement(g.Toolbar,{id:"skeleton-toolbar"},i().createElement(g.ToolbarContent,null," ",e," "))},mt=function(){return i().createElement(g.Tabs,{activeKey:0,className:"ins-s-tabs"},i().createElement(g.Tab,{eventKey:0,title:i().createElement(g.TabTitleText,null,"Actions")}),i().createElement(g.Tab,{eventKey:1,title:i().createElement(g.TabTitleText,null,"Systems")}),i().createElement(g.Tab,{eventKey:2,title:i().createElement(g.TabTitleText,null,"Activity")}))};var dt=n(86626),pt=n(10310),ft=n(76200);const bt=function(){return i().createElement(i().Fragment,null,i().createElement(it.Z,{className:"rem-c-page-details__header"},i().createElement(g.Breadcrumb,null,i().createElement(g.BreadcrumbItem,null,i().createElement(o.Link,{to:"/"}," Remediations ")),i().createElement(g.BreadcrumbItem,{isActive:!0},i().createElement(j.Z,{size:"lg"}))),i().createElement(g.Level,{className:"rem-l-level"},i().createElement(g.LevelItem,null,i().createElement(ot.Z,{className:"rem-s-page-header",title:i().createElement(i().Fragment,null,i().createElement(j.Z,{size:"md"}))})),i().createElement(g.LevelItem,null,i().createElement(g.Split,{hasGutter:!0},i().createElement(g.SplitItem,null,i().createElement(g.Button,{isDisabled:!0,variant:"link"},"Download playbook")),i().createElement(g.SplitItem,null,i().createElement(g.Dropdown,{toggle:i().createElement(g.KebabToggle,{isDisabled:!0}),isOpen:!1,isPlain:!0}))))),i().createElement(vt,null)),i().createElement(lt.Z,null,i().createElement(g.Stack,{hasGutter:!0},i().createElement(g.StackItem,{className:"ins-c-playbookSummary__tabs"},i().createElement(mt,null),i().createElement(ut,null),i().createElement(at.Z,null)))))};var vt=function(){return i().createElement(g.Split,null,i().createElement(g.SplitItem,null,i().createElement(dt.ze,{ariaDesc:"Resolved issues count",ariaTitle:"Resolved issues chart",constrainToVisibleArea:!0,data:{x:"Resolved",y:1},labels:function(e){var t=e.datum;return t.x?"".concat(t.x,": ").concat(t.y,"%"):null},title:"Loading",subTitle:"Issues resolved",subTitleComponent:i().createElement(pt.Df,{y:102}),thresholds:[{value:100,color:"#3E8635"}],height:175,width:175,padding:{bottom:20,left:0,right:20,top:20}})),i().createElement(g.SplitItem,{className:"ins-c-remediation-summary__body"},i().createElement(g.Stack,{hasGutter:!0},i().createElement(g.StackItem,null,i().createElement(g.Split,null,i().createElement(g.SplitItem,null,i().createElement(g.Flex,null,i().createElement(g.FlexItem,{spacer:{default:"spacer-lg"}},i().createElement(ft.Z,{title:"Total systems"},i().createElement(j.Z,{size:"md"}))))),i().createElement(g.SplitItem,null,i().createElement(g.Flex,null,i().createElement(g.FlexItem,{spacer:{default:"spacer-lg"}},i().createElement(ft.Z,{title:"Latest activity"},i().createElement(j.Z,{size:"md"}))))))),i().createElement(g.StackItem,null,i().createElement(g.Flex,null,i().createElement(g.FlexItem,{spacer:{default:"spacer-lg"}},i().createElement(ft.Z,{title:"Autoreboot"},i().createElement(j.Z,{size:"md"}))))))))};const Et=function(){return i().createElement(y.Table,{"aria-label":"No activity",cells:["Run on","Run by","Status"],ouiaId:"activity-table",rows:[{cells:[{title:i().createElement(g.EmptyState,{className:"rem-c-activity-table__empty"},i().createElement(g.Title,{headingLevel:"h5",size:"lg"},"No activity"),i().createElement(g.EmptyStateBody,null,"Execute this playbook to see a history and summary of the activity.")),props:{colSpan:3}}]}]},i().createElement(y.TableHeader,null),i().createElement(y.TableBody,null))};var gt=n(10170),yt=n(94184),ht=n.n(yt);function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var St=function(e){var t,n,r,a,l=e.remediation,s=e.playbookRuns,c=e.switchAutoReboot,u=e.context,m=function(e){c(l.id,e)},d=function(e){return i().createElement("div",null,i().createElement(H.OffIcon,null),i().createElement("b",{className:"ins-c-remediation-summary__reboot--disabled".concat(e?"--warning":"")},"Off"),e&&i().createElement(i().Fragment,null,i().createElement(H.ExclamationTriangleIcon,{className:"ins-c-remediation-summary__reboot--required--icon"}),i().createElement("b",{className:"ins-c-remediation-summary__reboot--required"},(t=function(){var e,t=0,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(l.issues);try{for(n.s();!(e=n.n()).done;)e.value.resolution.needs_reboot&&t++}catch(e){n.e(e)}finally{n.f()}return t}(),"".concat(t," issue").concat(1===t?"":"s"," require").concat(1===t?"s":""," reboot to remediate")))),u.permissions.write&&i().createElement(g.Button,{variant:"link",onClick:function(){return m(!l.auto_reboot)}},"Turn on"));var t},p=function(e,t){return e?i().createElement("div",null,i().createElement(H.CheckCircleIcon,{className:"rem-c-success"}),i().createElement("b",{className:"ins-c-remediation-summary__reboot--enabled"}," Enabled "),u.permissions.write&&i().createElement(g.Button,{variant:"link",onClick:function(){return m(!l.auto_reboot)}},"Turn off")):d(t)},f=l.stats,b=f.systemsWithReboot+f.systemsWithoutReboot,v=(t=l.issues,n=0,t.map((function(e){return e.systems.every((function(e){return e.resolved}))&&n++})),n);return i().createElement(g.Split,null,i().createElement(g.SplitItem,null,i().createElement(dt.ze,{ariaDesc:"Resolved issues count",ariaTitle:"Resolved issues chart",constrainToVisibleArea:!0,data:{x:"Resolved",y:v/l.issues.length*100},labels:function(e){var t=e.data;return t.x?"".concat(t.x,": ").concat(t.y,"%"):null},title:"".concat(v,"/").concat(l.issues.length),subTitle:"Issues resolved",subTitleComponent:i().createElement(pt.Df,{y:102}),thresholds:[{value:100,color:"#3E8635"}],height:175,width:175,padding:{bottom:20,left:0,right:20,top:20}})),i().createElement(g.SplitItem,{className:"ins-c-remediation-summary__body"},i().createElement(g.Stack,{hasGutter:!0},i().createElement(g.StackItem,null,i().createElement(g.Split,null,i().createElement(g.SplitItem,null,i().createElement(g.Flex,null,i().createElement(g.FlexItem,{spacer:{default:"spacer-lg"}},i().createElement(ft.Z,{title:"Total systems"},(a="system",1===(r=b)?"".concat(r," ").concat(a):"".concat(r," ").concat(a,"s")))))),i().createElement(g.SplitItem,null,i().createElement(g.Flex,null,s&&function(e){if(e.length){var t=e[0];return i().createElement(g.FlexItem,{spacer:{default:"spacer-xl"}},i().createElement(ft.Z,{needsPointer:!0,className:"rem-c-description-list-latest-activity",title:"Latest activity"},i().createElement(ye.kf,{executorStatus:t.status,counts:t.executors.reduce((function(e,t){return{pending:e.pending+t.counts.pending,running:e.running+t.counts.running,success:e.success+t.counts.success,failure:e.failure+t.counts.failure,canceled:e.canceled+t.counts.canceled,acked:e.acked+t.counts.acked}}),{pending:0,running:0,success:0,failure:0,canceled:0,acked:0}),permission:{}}),i().createElement("span",{className:"rem-c-description-list-latest-activity__date"},i().createElement(Be.Z,{type:"relative",date:t.updated_at})),i().createElement(o.Link,{to:"/".concat(t.remediation_id,"/").concat(t.id)},"View")))}}(s))))),i().createElement(g.StackItem,null,function(e){return i().createElement(ft.Z,{className:"rem-c-playbookSummary__settings",title:"Autoreboot"},i().createElement(g.Flex,null,i().createElement(g.FlexItem,{className:ht()("ins-c-reboot-status",{"ins-c-reboot-status__enabled":e.auto_reboot&&e.needs_reboot},{"ins-c-reboot-status__disabled":!e.auto_reboot}),spacer:{default:"spacer-xl"}},p(e.auto_reboot,e.needs_reboot))))}(l)))))};St.propTypes={remediation:s().object.isRequired,playbookRuns:s().array,switchAutoReboot:s().func.isRequired,context:s().object.isRequired};var kt=["issues","systems","activity"],Zt=function(e){var t=e.match,n=e.location,l=e.selectedRemediation,s=e.selectedRemediationStatus,c=e.history,u=e.loadRemediation,d=e.loadRemediationStatus,p=e.switchAutoReboot,f=e.playbookRuns,b=e.getPlaybookRuns,v=e.checkExecutable,E=e.executable,y=t.params.id,h=(0,a.useState)("dismissed"!==localStorage.getItem("remediations:bannerStatus")),R=(0,r.Z)(h,2),k=R[0],Z=R[1],w=(0,a.useState)("dismissed"!==localStorage.getItem("remediations:receptorBannerStatus")),O=(0,r.Z)(w,2),T=O[0],x=O[1],C=(0,a.useState)(0),I=(0,r.Z)(C,2),_=I[0],P=I[1],A=(0,a.useState)({key:"",title:"",description:"",variant:""}),D=(0,r.Z)(A,2),j=D[0],N=D[1],B=(0,a.useContext)(oe.B),q=(0,Je.Z)().isFedramp;(0,a.useEffect)((function(){u(y).catch((function(e){if(!e||!e.response||404!==e.response.status)throw e;c.push("/")}));var e=kt.findIndex((function(e){return e===n.search.split("?")[1]}));P(-1!==e?e:0),c.push("?".concat(kt[-1!==e?e:0])),z.hN&&d(y),v(y)}),[]),(0,a.useEffect)((function(){b(y)}),[b]),(0,a.useEffect)((function(){if(f&&f.length&&"running"===(0,ye.fb)(f[0].status)){var e=setInterval((function(){return b(y)}),1e4);return function(){clearInterval(e)}}}),[f]);var F=l.status,L=l.remediation;return L&&(document.title="".concat(L.name," | Remediations | Red Hat Insights")),"fulfilled"!==F&&"rejected"!==F?i().createElement(bt,null):"rejected"===F?i().createElement(st.Z,null):"fulfilled"===F?!1===B.permissions.read?i().createElement(rt.Z,null):i().createElement("div",{className:"page__remediation-details"},i().createElement(it.Z,null,j.title&&i().createElement(S.Z,{key:j.key,title:j.title,description:j.description,variant:j.variant}),i().createElement(g.Breadcrumb,null,i().createElement(g.BreadcrumbItem,null,i().createElement(o.Link,{to:"/"}," Remediations ")),i().createElement(g.BreadcrumbItem,{isActive:!0}," ",L.name," ")),i().createElement(g.Level,{className:"rem-l-level"},i().createElement(g.LevelItem,null,i().createElement(ot.Z,{title:L.name})),i().createElement(g.LevelItem,null,i().createElement(g.Split,{hasGutter:!0},i().createElement(g.SplitItem,null,i().createElement(We,{isDisabled:!B.permissions.execute||!E||q,disabledStateText:B.permissions.execute?E?"Unable to execute playbook.":"Your account must be entitled to Smart Management to execute playbooks.":"You do not have the required execute permissions to perform this action.",remediationId:L.id,remediationName:L.name,setActiveAlert:N})),i().createElement(g.SplitItem,null,i().createElement(g.Button,{isDisabled:!L.issues.length,variant:"secondary",onClick:function(){(0,m.rN)(L.id),N({key:(0,S.l)(),title:"Preparing playbook for download.",description:"Once complete, your download will start automatically.",variant:"info"})}},"Download playbook")),i().createElement(g.SplitItem,null,i().createElement(Ue,{remediation:L,setActiveAlert:N}))))),i().createElement(St,{remediation:L,playbookRuns:f,switchAutoReboot:p,context:B})),i().createElement(lt.Z,null,i().createElement(g.Stack,{hasGutter:!0},!E&&k&&i().createElement(g.StackItem,null,i().createElement(tt,{onClose:function(){return Z(!1),void localStorage.setItem("remediations:bannerStatus","dismissed")}})),E&&T&&i().createElement(g.StackItem,null,i().createElement(gt.Z,{onClose:function(){return x(!1),void localStorage.setItem("remediations:receptorBannerStatus","dismissed")}})),i().createElement(g.StackItem,{className:"ins-c-playbookSummary__tabs"},i().createElement(g.Tabs,{activeKey:_,onSelect:function(e,t){P(t),c.push("?".concat(kt[t]))}},i().createElement(g.Tab,{eventKey:0,title:"Actions"},i().createElement(be,{remediation:L,status:s,setActiveAlert:N})),i().createElement(g.Tab,{eventKey:1,title:"Systems"},i().createElement(je,{remediation:L,setActiveAlert:N})),i().createElement(g.Tab,{eventKey:2,title:"Activity"},function(e,t,n){return e?Array.isArray(t)&&t.length?i().createElement(ze,{remediation:n,playbookRuns:t}):Array.isArray(t)&&!t.length?i().createElement(Et,null):i().createElement(at.Z,null):i().createElement(nt,null)}(E,f,L))))))):void 0};Zt.propTypes={match:s().shape({params:s().shape({id:s().string.isRequired})}).isRequired,location:s().object,selectedRemediation:s().object,selectedRemediationStatus:s().object,history:s().object.isRequired,loadRemediation:s().func.isRequired,loadRemediationStatus:s().func.isRequired,switchAutoReboot:s().func.isRequired,deleteRemediation:s().func.isRequired,executePlaybookBanner:s().shape({isVisible:s().bool}),addNotification:s().func.isRequired,playbookRuns:s().array,getPlaybookRuns:s().func,checkExecutable:s().func};const wt=(0,o.withRouter)((0,c.connect)((function(e){var t=e.selectedRemediation,n=e.selectedRemediationStatus,r=e.executePlaybookBanner,a=e.playbookRuns,i=e.executable;return{selectedRemediation:t,selectedRemediationStatus:n,executePlaybookBanner:r,playbookRuns:a.data,remediation:t.remediation,executable:i}}),(function(e){return{loadRemediation:function(t){return e(u.loadRemediation(t))},loadRemediationStatus:function(t){return e(u.loadRemediationStatus(t))},switchAutoReboot:function(t,n){return e(u.patchRemediation(t,{auto_reboot:n}))},deleteRemediation:function(t){return e(u.deleteRemediation(t))},addNotification:function(t){return e((0,$e.wN)(t))},getPlaybookRuns:function(t){return e(u.getPlaybookRuns(t))},checkExecutable:function(t){return e(u.checkExecutable(t))}}}))(Zt))},40742:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(87462),a=n(15671),i=n(43144),o=n(60136),l=n(82963),s=n(61120),c=n(92950),u=n.n(c),m=n(17855),d=n(35664),p=n(65550),f=n(97481),b=n(58247);const v=function(e){(0,o.Z)(E,e);var t,n,v=(t=E,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function E(e){var t;return(0,a.Z)(this,E),(t=v.call(this,e)).state={columns:[{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"sm"})},{title:u().createElement(d.Z,{size:"sm"})},{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"sm"})}],rows:[[{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"md"})}]]},t}return(0,i.Z)(E,[{key:"render",value:function(){var e=this.state,t=e.columns,n=e.rows;return u().createElement(c.Fragment,null,u().createElement(m.Table,(0,r.Z)({cells:t,rows:n,"aria-label":"Loading",variant:m.TableVariant.compact},this.props),u().createElement(m.TableHeader,null)),u().createElement(b.Z,{centered:!0},u().createElement(f.Z,null)),u().createElement(p.Z,{isFooter:!0,className:"rem-c-skeleton-table__footer rem-m-align-right"},u().createElement(d.Z,{size:"sm"})))}}]),E}(u().Component)}}]);
//# sourceMappingURL=../sourcemaps/RemediationDetails.c568de48201c71416437cf2847705f60.js.map