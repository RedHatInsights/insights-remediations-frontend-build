"use strict";(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[1390],{77832:(e,t,n)=>{function a(e){return e.split(":")[0]}function l({id:e}){switch(a(e)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function s({display_name:e,hostname:t,id:n}){return e||t||n}function i(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{PW:()=>i,Pz:()=>a,_f:()=>s,lN:()=>l})},18293:(e,t,n)=>{n.d(t,{Gd:()=>o,T:()=>i,Tj:()=>r});var a=n(54998),l=n.n(a),s=n(77832);function i(e){const t=function({id:e}){switch((0,s.Pz)(e)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=o("inventory").toString();return e=>`${n}/${e}?appName=${t}`}function r(e){const t=e.split(":");switch(t[0]){case"advisor":return o(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return o(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return o(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function o(e){switch(e){case"advisor":return l()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return l()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return l()(document.baseURI).segment("insights").segment("compliance");case"inventory":return l()(document.baseURI).segment(function(){const e=window.location.pathname.split("/");return"preview"===e[1]?e[2]:e[1]}()).segment("inventory");case"patch-advisory":return l()(document.baseURI).segment("insights").segment("patch");default:throw new Error(`Unknown app: ${e}`)}}},76400:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(10756),l=n.n(a),s=n(45697),i=n.n(s),r=n(93967),o=n.n(r);const c=({title:e,className:t,children:n,isBold:a,hasGutter:s,needsPointer:i,...r})=>{const c=o()("rem-c-description-list__description",{"rem-c-description-list__description--bold":a},{"rem-c-description-list__description--withGutter":s},{"rem-c-description-list__description--needsPointer":i}),m=o()(t,"rem-c-description-list");return l().createElement("dl",{className:m,...r},l().createElement("dt",{className:"rem-c-description-list__title"},l().createElement("b",null,e)),l().createElement("dd",{className:c}," ",n," "))},m=c;c.propTypes={title:i().string,children:i().any,isBold:i().bool,className:i().string,hasGutter:i().bool,needsPointer:i().bool}},68175:(e,t,n)=>{n.d(t,{Gx:()=>s,M1:()=>l,VA:()=>i,um:()=>a});const a=(e=[],t)=>e.every((({id:e})=>t?.has(e)))?e.length>0:e.some((({id:e})=>t?.has(e)))&&null,l=e=>e?.issues?.reduce(((e,t)=>(t?.systems?.forEach((n=>{const a=e.find((({id:e})=>n.id===e)),l={id:t.id,resolution:t.resolution,description:t.description};a?(a.issues=[...a.issues,{...l,resolved:a.resolved}],a.rebootRequired=a.issues.some((({resolution:e})=>e?.needs_reboot))):e.push({...n,issues:[{...l,resolved:n.resolved}],rebootRequired:t?.resolution?.needs_reboot})})),e)),[])||[],s=async({page:e=0,...t}={},n,a)=>{const l=n.filter((({display_name:e})=>!t.filters?.hostnameOrId||e.includes(t.filters.hostnameOrId))),s=await a(l.slice((e-1)*t.per_page,e*t.per_page).map((({id:e})=>e)),{...t,hasItems:!0},!0);return{...s,page:e,results:s.results.map((e=>({...l.find((({id:t})=>t===e.id)),...e}))),total:l.length}},i=(e=[],t=[])=>t.map((t=>e.find((e=>e.key===t.key))||t))},8121:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ut});var a=n(10756),l=n.n(a),s=n(92397),i=n(98773),r=n(88208),o=n(45697),c=n.n(o),m=n(28216),u=n(34413),d=n(33626),p=n(94654),E=n.n(p),g=n(75472),b=n.n(g),h=n(61869),y=n(75863),f=n(7732),v=n(43416),S=n(49004),R=n(58027),k=n(96087),C=n(15433),_=n(75998),x=n(77832),I=n(18293),T=n(31593),w=n(28685),N=n(79194),Z=n(87282),D=n(14832),q=n(29684),B=n(40667),$=n(24224),F=n(32819);class A extends a.Component{constructor(e){super(e),this.issue=e.issue,this.state={selected:e.issue.resolution,resolutions:!1}}onRadioChange=e=>{this.setState({selected:e})};async componentDidMount(){const e=await this.props.getResolutions(this.issue.id);this.setState({resolutions:e.value})}getSelectedResolution=()=>this.state.selected;render(){const{resolutions:e,selected:t}=this.state;let n;return n=e?l().createElement(l().Fragment,null,l().createElement(B.StackItem,null,l().createElement(N.Form,null,e.resolutions.map((e=>l().createElement("div",{className:"ins-c-resolution-option",key:e.id},l().createElement(D.Radio,{label:l().createElement(B.Stack,{className:"ins-c-resolution-choice__details"},l().createElement(B.StackItem,null,e.description),e.needs_reboot&&l().createElement(B.StackItem,null,l().createElement($.Z,{red:!0}))),"aria-label":e.description,id:e.id,name:"radio",defaultChecked:e.id===t.id,onChange:()=>this.onRadioChange(e)}))))))):l().createElement(l().Fragment,null,l().createElement(B.StackItem,null,l().createElement(F.Z,null)),l().createElement(B.StackItem,null,l().createElement(F.Z,null)),l().createElement(B.StackItem,null,l().createElement(F.Z,null))),l().createElement(B.Stack,{hasGutter:!0},l().createElement(B.StackItem,null,l().createElement("div",null,"Select resolution for this action.")),l().createElement(B.StackItem,null,l().createElement(q.Split,{hasGutter:!0},l().createElement(q.SplitItem,null,l().createElement(Z.Label,null,"Action")),l().createElement(q.SplitItem,{isFilled:!0},l().createElement("h1",{className:"ins-m-text__bold"},this.issue.description)))),n)}}A.propTypes={issue:c().object.isRequired,getResolutions:c().func.isRequired};const P=A,O=({remediation:e,issue:t,onResolutionSelected:n,getResolutions:s})=>{const[i,r]=(0,a.useState)(!1),o=(0,a.useRef)();return l().createElement(l().Fragment,null,l().createElement("a",{onClick:()=>r(!0)},"Edit"),i&&l().createElement(w.Modal,{variant:w.ModalVariant.medium,className:"rem-c-resolution-modal",isOpen:i,onClose:()=>r(!1),title:"Edit resolution",actions:[l().createElement(T.Button,{key:"confirm",variant:"primary",onClick:a=>{r(!1);const l=o.current?.getSelectedResolution();a&&t.resolution.id!==l.id&&n(e.id,t.id,l.id)}},"Save"),l().createElement(T.Button,{key:"cancel",variant:"secondary",onClick:()=>r(!1)},"Cancel")]},l().createElement(P,{key:"ResolutionStep",issue:t,ref:o,getResolutions:s})))};O.propTypes={remediation:c().object.isRequired,issue:c().object.isRequired,onResolutionSelected:c().func.isRequired,getResolutions:c().func.isRequired};const L=O,z=(0,m.connect)((e=>e),(e=>({onResolutionSelected:async(t,n,a)=>{await e((0,u.ok)(t,n,a)),e((0,u.hU)(t))},getResolutions:t=>e((0,u.MR)(t))})))(L);var G=n(37903);class j extends a.Component{state={dialogOpen:!1};onButtonClicked=()=>{this.setState({dialogOpen:!0})};onDialogClose=e=>{this.setState({dialogOpen:!1}),e&&this.props.onDelete()};render(){const{dialogOpen:e}=this.state;return l().createElement(l().Fragment,null,l().createElement(T.Button,{onClick:this.onButtonClicked,isDisabled:this.props.isDisabled,variant:this.props.variant},this.props.label),e&&l().createElement(G.Z,{title:this.props.dialogTitle,confirmText:this.props.dialogConfirmationText,text:this.props.dialogMessage,onClose:this.onDialogClose}))}}j.propTypes={label:c().string,dialogTitle:c().string,dialogMessage:c().string,dialogConfirmationText:c().string,isDisabled:c().bool,onDelete:c().func.isRequired,variant:c().string},j.defaultProps={label:"Delete",variant:"link"};const V=j,M=((0,m.connect)(((e,{remediations:t})=>({dialogMessage:"You will not be able to recover "+(t.length>1?"these remediations":"this remediation")})),((e,{remediations:t})=>({onDelete:async()=>{await Promise.all(t.map((t=>e((0,u.YW)(t))))),e((0,u.ch)())}})))(V),(0,m.connect)(((e,{issues:t})=>({label:"Remove action"+(t.length>1?"s":""),dialogTitle:"Remove action"+(t.length>1?"s":""),dialogConfirmationText:"Remove action"+(t.length>1?"s":"")})),((e,{remediation:t,issues:n,afterDelete:a,isBeta:l})=>({onDelete:async()=>{await Promise.all(n.map((n=>e((0,u.Kn)(t.id,n))))),l&&e((0,u.uz)(t.id)),a()}})))(V));var U=n(42247),Y=n.n(U),W=n(80212),K=n.n(W),H=n(49231),J=n(67336),Q=n(63652),X=n(18213),ee=n(87123),te=n(881),ne=n(79332),ae=n(30120),le=n(41435);function se({remediation:e,issue:t,system:n,onDelete:s}){const[i,r]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1);return l().createElement(l().Fragment,null,l().createElement(G.Z,{isOpen:o,text:`This playbook will not address ${t.description} on ${(0,x._f)(n)}`,onClose:a=>{c(!1),a&&s(e.id,t.id,n.id),(0,_.q)({title:`Removed systems from ${e.name}`,description:"",variant:"success",dismissable:!0,autoDismiss:!0})}}),l().createElement(ne.L,{onSelect:e=>e,toggle:l().createElement(ae.a,{onToggle:()=>r((e=>!e))}),isOpen:i,position:le.ir.right,isPlain:!0},l().createElement(T.Button,{onClick:()=>c(!0),variant:"link"},"Remove system")))}se.propTypes={remediation:c().object.isRequired,issue:c().object.isRequired,system:c().object.isRequired,onDelete:c().func.isRequired};const ie=(0,m.connect)(null,(e=>({onDelete:(t,n,a)=>e((0,u.$A)(t,n,a))})))(se),re=({icon:e,text:t})=>l().createElement("div",{className:"rem-c-icon-inline"},e,l().createElement("span",{className:"rem-c-icon-inline__text"},t));re.propTypes={icon:c().node.isRequired,text:c().string.isRequired};const oe=({isOpen:e,onClose:t,issue:n,remediation:s,onDelete:i})=>{const[r,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)({}),[u,d]=(0,a.useState)({}),[p,E]=(0,a.useState)(1),[g,h]=(0,a.useState)(50),[y,f]=(0,a.useState)(""),v=(0,a.useRef)(null),{current:S}=(0,a.useRef)((0,I.T)(n));(0,a.useEffect)((()=>{const e={};n.systems.map((t=>{e[t.id]=!0===t.resolved?l().createElement(re,{icon:l().createElement(Y(),null),text:"Remediated"}):l().createElement(re,{icon:l().createElement(K(),null),text:"Not remediated"})})),d(e)}),[]);const R=(e,t)=>n=>l().createElement(ie,{remediation:e,issue:t,system:n}),k=e=>u[e];return l().createElement(l().Fragment,null,l().createElement(w.Modal,{className:"remediations",variant:w.ModalVariant.large,title:`System${n.systems.length>1?"s":""} for action`,isOpen:e,onClose:t,isFooterLeftAligned:!0},l().createElement("b",null,"Action:")," ",n.description,l().createElement("div",{className:"rem-c-toolbar__filter"},l().createElement(Q.Z,{onLoad:({mergeWithEntities:e,INVENTORY_ACTION_TYPES:t})=>(0,J.JH)().register({...e(te.Z.inventoryEntitiesReducer({INVENTORY_ACTION_TYPES:t,detailDropdown:R(s,n),urlBuilder:S,generateStatus:k})())}),ref:v,items:b()(n.systems.filter((e=>(0,x._f)(e).includes(y))),[e=>(0,x._f)(e),e=>e.id]),onRefresh:e=>{v&&v.current&&(E(e.page),h(e.per_page),v.current.onRefreshData({timestamp:Date.now(),...e}))},page:p,total:n.systems.length,perPage:g,hasCheckbox:!1,actions:[{title:" Remove system",onClick:(e,t,n)=>{m(n),o(!0)}}]},l().createElement(C.Z,null,l().createElement(H.ToolbarGroup,null,l().createElement(H.ToolbarItem,null,l().createElement(X.Z,{items:[{value:"display_name",label:"Name",type:ee.Yu.text,filterValues:{placeholder:"Search by name",value:y,onChange:(e,t)=>f(t)}}]}))))))),l().createElement(G.Z,{isOpen:r,text:`Removing the system ${(0,x._f)(c)} from the action ${n.description}\n                    will remove this system’s remediation from the playbook.`,onClose:e=>{o(!1),e&&i(s.id,n.id,c.id)}}))};oe.propTypes={isOpen:c().bool,onClose:c().func,issue:c().object,remediation:c().object,onDelete:c().func};const ce=({issue:e,remediation:t,title:n})=>{const[s,i]=(0,a.useState)(!1),r=(0,m.useDispatch)();return l().createElement(l().Fragment,null,l().createElement("a",{onClick:()=>i(!0)},n),l().createElement(oe,{isOpen:s,onClose:()=>i(!1),issue:e,remediation:t,onDelete:(e,t,n)=>r((0,u.$A)(e,t,n))}))};ce.propTypes={issue:c().object.isRequired,remediation:c().object.isRequired,title:c().string.isRequired};var me=n(38318);const ue="true"===localStorage.getItem("remediations:debug")?{perPageOptions:[1,2,3,4,5,10,15,20,25,50,100,200].map((e=>({title:`${e}`,value:e})))}:{};var de=n(95726),pe=n(45791),Ee=n(4252),ge=n(13193);const be=e=>l().createElement(pe.Bullseye,{className:"pf-u-pt-2xl"},l().createElement(Ee.EmptyState,null,!0===e.filtered?l().createElement(ge.Title,{size:"lg",headingLevel:"h5"},"No actions found"):l().createElement(ge.Title,{size:"lg",headingLevel:"h5"},"This playbook is empty"),l().createElement(Ee.EmptyStateBody,null,"To add an action, select issues identified in",l().createElement("br",null),l().createElement("a",{href:(0,I.Gd)("advisor").toString()},"Recommendations"),", ",l().createElement("a",{href:(0,I.Gd)("compliance").toString()},"Compliance")," or ",l().createElement("a",{href:(0,I.Gd)("vulnerabilities").toString()},"Vulnerability"),"  and select",l().createElement("br",null),l().createElement("strong",null,"Remediate with Ansible."))));be.propTypes={filtered:c().bool.isRequired};var he=n(55140);function ye(e,t){const n=(0,I.Tj)(t.id);return t.resolutions_available<=1?n?l().createElement(l().Fragment,null,l().createElement("span",null,l().createElement("a",{href:n},t.description),l().createElement("br",null),t.resolution.description)):t.resolution.description:n?l().createElement(l().Fragment,null,l().createElement("span",null,l().createElement("a",{href:n},t.description),l().createElement("br",null),t.resolution.description,l().createElement("br",null),l().createElement(z,{issue:t,remediation:e}))):l().createElement(l().Fragment,null,t.resolution.description,l().createElement("br",null),l().createElement(z,{issue:t,remediation:e}))}function fe(e,t,n){return l().createElement(ce,{key:e.id,remediation:t,issue:e,title:n})}function ve(e){let t=0;return e.systems.map((e=>{e.resolved&&t++})),t}const Se=[null,e=>e.description,null,e=>e.resolution.needs_reboot,e=>e.systems.length,e=>(0,x.lN)(e)];function Re(e){const t=(0,me.h0)(),n=(0,me.sk)(1,"asc"),s=(0,me.L0)(),i=(0,me.v9)(),r=(0,a.useContext)(de.B),[o,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(0),d=(0,he.Z)();(0,a.useEffect)((()=>{s.setValue(o)}),[o]),n.onChange(t.reset),s.onChange(t.reset);const p=e.remediation.issues.filter((e=>(0,x.PW)(e.description,s.value.trim()))),g=b()(p,[Se[n.sortBy]],[n.sortDir]).slice(t.offset,t.offset+t.pageSize),I=E()(g,(T=e.remediation,e=>{var t;return[{isOpen:!1,id:e.id,cells:[{title:ye(T,e)},{title:(t=e.resolution.needs_reboot,l().createElement("span",null,t?"Required":"Not required"))},{title:fe(e,T,`${e.systems.length}`)},{title:(0,x.lN)(e),props:{className:"rem-m-nowrap"}},{title:fe(e,T,`${ve(e)}/${e.systems.length} remediated`)}]}]}));var T;i.register(I);const w=i.getSelectedIds(),N={filters:o.length?[{category:"Action",chips:[{name:o}]}]:[],onDelete:()=>{c(""),s.setValue("")}},Z=e=>e?.filter((e=>!0===e.selected));return l().createElement("div",{className:"test"},l().createElement(k.Z,{filterConfig:{items:[{label:"Search actions",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Search",value:o,onChange:(e,t)=>{c(t)}}}]},bulkSelect:{isDisabled:!I,items:[{title:"Select none (0)",onClick:()=>{i.props.onSelect("none")}},I.length>0?{title:`Select page (${I?.length})`,onClick:()=>{0===Z(I).length?i.props.onSelect("page",!0,0):I.length===Z(I).length?i.props.onSelect("page",!1,0):i.props.onSelect("page",!0,0)}}:{},I.length>0?{title:`Select all (${e?.remediation?.issues.length})`,onClick:()=>{i.register(e?.remediation.issues),w?.length<e?.remediation?.issues.length?i.props.onSelect("page",!0,0):i.props.onSelect("page",!1,0)}}:{}],checked:w.length&&p.length>w.length?null:w.length,count:w.length,onSelect:()=>{0===Z(I).length?i.props.onSelect("page",!0,0):i.props.onSelect("page",!1,0)}},actionsConfig:{actions:[l().createElement(M,{key:e.remediation.id,variant:"secondary",isDisabled:!w.length,remediation:e.remediation,issues:w,afterDelete:()=>{(0,_.q)({title:`Removed ${w.length} actions from ${e.remediation.name}`,description:"",variant:"success",dismissable:!0,autoDismiss:!0}),i.reset},isBeta:d?.isBeta?.()})]},pagination:{...t.props,itemCount:p.length},activeFiltersConfig:N}),I.length>0?l().createElement(v.i,{variant:y.B.compact,"aria-label":"Actions",canSelectAll:!1,className:"ins-c-remediation-details-table",cells:[{title:"Actions",transforms:[f.p]},{title:"Reboot required",transforms:[f.p]},{title:"Systems",transforms:[f.p]},{title:"Type",transforms:[f.p]},{title:"Status",transforms:[f.p]}],rows:I,...n.props,...r.permissions.write&&{...i.props}},l().createElement(S.x,null),l().createElement(R.R,{...i.tbodyProps})):s.value?l().createElement(be,{filtered:!0}):l().createElement(be,{filtered:!1}),I.length>0&&l().createElement(C.Z,{isFooter:!0},l().createElement(h.Pagination,{variant:"bottom",dropDirection:"up",itemCount:p.length,...t.props,...ue})))}Re.propTypes={remediation:c().object.isRequired,status:c().object.isRequired};const ke=Re;var Ce=n(57283),_e=n.n(Ce),xe=n(18546),Ie=n(62703),Te=n(29738),we=n.n(Te),Ne=n(15848);const Ze=({isOpen:e,selected:t,onConfirm:n,onClose:a,remediationName:s})=>l().createElement(w.Modal,{variant:w.ModalVariant.medium,title:`Remove selected systems from ${s}`,isOpen:e,onClose:a,appendTo:document.getElementsByClassName("remediations")[0],actions:[l().createElement(T.Button,{key:"remove-confirm",variant:"danger",onClick:n,ouiaId:"confirm-delete"},"Remove"),l().createElement(T.Button,{key:"remove-cancel",variant:"link",onClick:a},"Cancel")]},l().createElement(q.Split,{hasGutter:!0},l().createElement(q.SplitItem,null,l().createElement(Ie.Icon,{size:"xl",className:"ins-m-alert",status:"warning"},l().createElement(we(),null))),l().createElement(q.SplitItem,{isFilled:!0},l().createElement(B.Stack,{hasGutter:!0},l().createElement(B.StackItem,null,"This action will remove"," ",1===t.length?l().createElement("span",null,l().createElement("b",null," ",t[0]?.display_name," ")," system"):l().createElement("span",null,l().createElement("b",null," ",t.length," ")," systems")," ","from ",l().createElement("b",null,s)," Remediation."),l().createElement(B.StackItem,null,"Removing ",(0,Ne._6)(t.length,"system")," from this Remediation will remove it from all associated issues in"," ",l().createElement("b",null,s)," Remediation. Be careful as you can end up with Remediation without any systems.")))));Ze.propTypes={selected:c().arrayOf(c().shape({id:c().string,display_name:c().string})).isRequired,remediationName:c().string.isRequired,isOpen:c().bool.isRequired,onConfirm:c().func.isRequired,onClose:c().func.isRequired};const De=Ze;var qe=n(68175),Be=n(1082);const $e=({rebootRequired:e})=>l().createElement(a.Fragment,null,l().createElement("span",null,e?"Required":"Not required"));$e.propTypes={rebootRequired:c().bool};const Fe=$e;var Ae=n(89734),Pe=n.n(Ae);const Oe={advisor:"Advisor recommendation",vulnerabilities:"Vulnerability","patch-advisory":"Patch advisory"},Le=({issues:e,display_name:t})=>{const[n,s]=(0,a.useState)({index:0,direction:"asc"}),[i,r]=(0,a.useState)(),o=Pe()(e,(e=>{return(t=e,[t.description,t.resolution.needs_reboot,Oe?.[t.id.split(":")[0]],t.resolved])[n.index];var t}));return l().createElement(a.Fragment,null,l().createElement(T.Button,{variant:"link",isInline:!0,onClick:()=>r(!0)},e.length),l().createElement(w.Modal,{variant:w.ModalVariant.medium,title:`Actions for system ${t}`,isOpen:i,onClose:()=>r(!1)},l().createElement(v.i,{variant:"compact","aria-label":`Issues table for ${t}`,rows:("asc"===n.direction?o:o.reverse()).map((e=>[{title:l().createElement(a.Fragment,null,l().createElement("div",null,l().createElement("a",{href:(0,I.Tj)(e.id)},e.description)),l().createElement("div",null,e.resolution.description))},{title:l().createElement(a.Fragment,null,l().createElement(Fe,{rebootRequired:e.resolution.needs_reboot}))},Oe?.[e.id.split(":")[0]]||"Unknown",{title:l().createElement(a.Fragment,null,e.resolved?l().createElement(Y(),null):l().createElement(K(),null)," ",e.resolved?"Remediated":"Not remediated")}])),cells:[{title:"Action",transforms:[f.p]},{title:"Reboot required",transforms:[f.p,(0,Be.d)(20)]},{title:"Type",transforms:[f.p,(0,Be.d)(15)]},{title:"Status",transforms:[f.p,(0,Be.d)(20)]}],sortBy:n,onSort:(e,t,n)=>s({index:t,direction:n})},l().createElement(S.x,null),l().createElement(R.R,null))))};Le.propTypes={issues:c().arrayOf(c().shape()),display_name:c().string};const ze=Le,Ge=[{key:"display_name"},{key:"tags"},{key:"system_profile"},{key:"issues",title:"Issues",renderFunc:(e,t,{display_name:n})=>l().createElement(ze,{issues:e,display_name:n}),props:{width:15,isStatic:!0}},{key:"rebootRequired",title:"Reboot required",renderFunc:e=>l().createElement(Fe,{rebootRequired:e}),props:{width:15,isStatic:!0}}],je=({remediation:e,registry:t,refreshRemediation:n})=>{const[s,i]=(0,a.useState)(!1),r=(0,a.useRef)(),o=(0,a.useRef)((()=>{})),c=(0,a.useRef)(void 0),d=(0,m.useDispatch)(),p=(0,m.useSelector)((({entities:e})=>e?.selected||new Map)),E=(0,m.useSelector)((({entities:e})=>e?.loaded)),g=(0,m.useSelector)((({entities:e})=>e?.rows)),b=e=>e?.filter((e=>!0===e.selected)),h=e=>{switch(e){case"none":case"deselect all":r.current.map((e=>d((0,u.CL)(e.id,!1))));break;case"page":d((0,u.CL)(0,!0));break;case"deselect page":g.map((()=>d((0,u.CL)(0,!1))));break;case"all":r.current.map((e=>d((0,u.CL)(e.id,!0))))}};return(0,a.useEffect)((()=>{r.current=(0,qe.M1)(e)}),[e.id]),l().createElement(Q.Z,{variant:"compact",showTags:!0,noDetail:!0,hideFilters:{all:!0,name:!1},tableProps:{canSelectAll:!1},columns:e=>(0,qe.VA)(e,Ge),bulkSelect:{isDisabled:!g,count:p?p.size:0,items:[{title:"Select none (0)",onClick:()=>h("none")},{...E&&g&&g.length>0?{title:`Select page (${g.length})`,onClick:()=>{p?b(g).length===g.length?h("deselect page"):r.current.length>p.size?h("page"):h("deselect page"):h("page")}}:{}},{...E&&g&&g.length>0?{title:`Select all (${r.current.length})`,onClick:()=>{(0,qe.um)(r.current,p)?h("deselect all"):h("all")}}:{}}],checked:(0,qe.um)(r.current,p),onSelect:()=>{b(g).length===g.length?h("deselect page"):h("page")}},getEntities:async(e,t)=>(0,qe.Gx)(t,r.current,o.current),onLoad:({INVENTORY_ACTION_TYPES:e,mergeWithEntities:n,api:a})=>{o.current=a?.getEntities,t?.register?.({...n((0,te.L)(e))})},actions:[{title:"Remove system",onClick:(t,n,{id:a,display_name:l})=>{c.current={id:a,display_name:l,issues:e.issues.filter((e=>e.systems.find((({id:e})=>e===a))))},i(!0)}}]},E&&l().createElement(T.Button,{variant:"secondary",onClick:()=>i(!0),isDisabled:0===p.size},"Remove system"),l().createElement(De,{isOpen:s,onConfirm:()=>{(async()=>{const t=p.size>0?Array.from(p,(([,e])=>e)):[{...c.current}],a=(0,u.Ph)(t,e);d(a),await a.payload,n()})(),c.current=void 0,(0,_.q)({title:`Removed ${p.size} ${p.size>1?"systems":"system"} from playbook`,description:"",variant:"success",dismissable:!0,autoDismiss:!0}),i(!1)},selected:p.size>0?Array.from(p,(([,e])=>e)):[c.current],onClose:()=>{c.current=void 0,i(!1)},remediationName:e.name}))},Ve=e=>{const t=(0,m.useDispatch)(),[n,s]=(0,a.useState)();return(0,a.useEffect)((()=>{s(new xe.ZP({selected:new Map},[_e()]))}),[]),n?l().createElement(m.Provider,{store:n.store},l().createElement(je,{registry:n,refreshRemediation:()=>t((0,u.d5)(e.remediation.id)),...e})):l().createElement(a.Fragment,null)};Ve.propTypes={remediation:c().shape({id:c().string,issues:c().arrayOf(c().shape({systems:c().arrayOf(c().shape({id:c().string,display_name:c().string,resolved:c().bool}))}))})},je.propTypes={...Ve.propTypes,registry:c().shape({register:c().func}),refreshRemediation:c().func};const Me=Ve;var Ue=n(5756),Ye=n(62410);const We=({remediation:e,playbookRuns:t})=>{const[n,i]=(0,a.useState)([]),r=(0,a.useContext)(de.B);return(0,a.useEffect)((()=>{t&&t.length&&i((()=>(t=>t.reduce(((t,n,a)=>[...t,{isOpen:!1,cells:[{title:l().createElement(s.Z,{to:`/${e.id}/${n.id}`},l().createElement(Ye.Z,{type:"exact",date:n.created_at})),cellFormatters:[Ue.zW]},n.created_by.last_name?`${n.created_by.first_name} ${n.created_by.last_name}`:`${n.created_by.username}`,{title:l().createElement(Ne.kf,{executorStatus:(0,Ne.fb)(n.status),counts:n.executors.reduce(((e,t)=>({pending:e.pending+t.counts.pending,running:e.running+t.counts.running,success:e.success+t.counts.success,failure:e.failure+t.counts.failure,canceled:e.canceled+t.counts.canceled,acked:e.acked+t.counts.acked})),{pending:0,running:0,success:0,failure:0,canceled:0,acked:0}),hasCancel:!0,remediationName:e.name,remediationId:e.id,playbookId:n.id,permission:r})}]},{parent:2*a,fullWidth:!0,cells:[{title:l().createElement(v.i,{"aria-label":"Compact expandable table",cells:["Connection","Systems","Playbook run status"],rows:n.executors.map((t=>({cells:[{title:l().createElement(s.Z,{to:`/${e.id}/${n.id}/${t.executor_id}`},t.executor_name)},t.system_count,{title:l().createElement(Ne.kf,{executorStatus:(0,Ne.fb)(t.status),counts:t.counts,permission:r})}]})))},l().createElement(S.x,null),l().createElement(R.R,null))}]}]),[]))(t)))}),[t]),l().createElement(v.i,{className:"rem-c-activity-table","aria-label":"Collapsible table",onCollapse:(e,t,a)=>{const l=[...n];l[t]={...l[t],isOpen:a},i(l)},rows:n,cells:["Run on","Run by","Status"]},l().createElement(S.x,null),l().createElement(R.R,null))};We.propTypes={remediation:c().object,playbookRuns:c().array};const Ke=We;var He=n(26438);function Je(e){const[t,n]=(0,a.useState)(e.value||""),[s,i]=(0,a.useState)(!0),{title:r,onCancel:o,onSubmit:c,ariaLabel:m,className:u}=e;return l().createElement(w.Modal,{title:r,isOpen:!0,onClose:e=>o(e),actions:[l().createElement(T.Button,{key:"confirm",variant:"primary",onClick:()=>c(t),isDisabled:!s,ouiaId:"save"},"Save"),l().createElement(T.Button,{key:"cancel",variant:"secondary",onClick:o,ouiaId:"cancel"},"Cancel")],variant:w.ModalVariant.small,className:u},l().createElement(N.FormGroup,{fieldId:"remediation-name",helperTextInvalid:"Playbook name has to contain alphanumeric characters",isValid:s},l().createElement(He.TextInput,{value:t,type:"text",onChange:(t,a)=>function(t){n(t),e.pattern&&i(e.pattern.test(t))}(a),"aria-label":m||"input text",autoFocus:!0,isValid:s})))}Je.propTypes={title:c().string.isRequired,onCancel:c().func,onSubmit:c().func,ariaLabel:c().string,value:c().string,className:c().string,pattern:c().instanceOf(RegExp)};const Qe=/^$|^.*[\w\d]+.*$/;function Xe({remediation:e,onRename:t,onDelete:n}){const[s,r]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),d=(0,a.useContext)(de.B),p=(0,i.Z)();return l().createElement(l().Fragment,null,o&&l().createElement(Je,{title:"Edit playbook name",ariaLabel:"Playbook name",value:e.name,onCancel:()=>c(!1),onSubmit:n=>{c(!1),t(e.id,n),(0,_.q)({title:`Updated playbook name to ${n}`,description:"",variant:"success",dismissable:!0,autoDismiss:!0})},pattern:Qe}),l().createElement(G.Z,{isOpen:m,title:"Remove playbook?",text:"You will not be able to recover this Playbook",confirmText:"Remove playbook",onClose:t=>{u(!1),t&&(n(e.id),(0,_.q)({title:`Deleted playbook ${e.name}`,variant:"success",dismissable:!0,autoDismiss:!0}),p("/"))}}),d.permissions.write&&l().createElement(ne.L,{onSelect:e=>e,toggle:l().createElement(ae.a,{onToggle:()=>r((e=>!e))}),isOpen:s,position:le.ir.right,isPlain:!0},l().createElement(T.Button,{onClick:()=>c(!0),variant:"link"},"Rename"),l().createElement(T.Button,{className:"rem-c-button__danger-link",onClick:()=>u(!0),variant:"link",isDanger:!0},"Delete")))}Xe.propTypes={remediation:c().object.isRequired,onRename:c().func.isRequired,onDelete:c().func.isRequired};const et=(0,m.connect)(null,(e=>({onRename:(t,n)=>{n||(n="Unnamed Playbook"),e((0,u.o6)(t,{name:n}))},onDelete:t=>e((0,u.YW)(t))})))(Xe);var tt=n(80595),nt=n(60278);const at=({isLoading:e,isDisabled:t,disabledStateText:n,data:s,getConnectionStatus:i,remediationId:r,remediationName:o,issueCount:c,runRemediation:m,etag:u,remediationStatus:d,setEtag:p})=>{const[E,g]=(0,a.useState)(!1),[b,h]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{"changed"===d?(i(r),h(!0)):"fulfilled"===d&&g(!1)}),[d]),l().createElement(l().Fragment,null,t?l().createElement(tt.Tooltip,{content:n,position:"auto"},l().createElement(T.Button,{isAriaDisabled:!0},"Execute playbook")):l().createElement(T.Button,{"data-testid":"execute-button-enabled",onClick:()=>{g(!0),i(r)}},"Execute playbook"),E&&l().createElement(nt.l,{isOpen:E,onClose:()=>{h(!1),g(!1)},showRefresh:b,remediationId:r,remediationName:o,data:s,etag:u,isLoading:e,issueCount:c,runRemediation:m,setEtag:p}))};at.propTypes={isLoading:c().bool,data:c().array,getConnectionStatus:c().func,runRemediation:c().func,remediationId:c().string,remediationName:c().string,remediationStatus:c().string,issueCount:c().number,etag:c().string,setEtag:c().func,isDisabled:c().bool,disabledStateText:c().string},at.defaultProps={data:[],isDisabled:!1};const lt=at,st=(0,m.connect)((({connectionStatus:{data:e,status:t,etag:n},selectedRemediation:a,runRemediation:l,sources:s,executable:i})=>({data:e,isLoading:"fulfilled"!==t,issueCount:a.remediation.issues.length,etag:n,remediationStatus:l.status,sources:s,executable:i})),(e=>({getConnectionStatus:t=>{e((0,u.Zp)(t))},runRemediation:(t,n,a)=>{e((0,u.JW)(t,n,a)).then((()=>e((0,u.Is)(t))))},setEtag:t=>{e((0,u.Fo)(t))},getEndpoint:t=>{e((0,u.O3)(t))},checkExecutable:t=>{e((0,u.lh)(t))}})))(lt);var it=n(83215),rt=n(13996);const ot=({onClose:e,...t})=>l().createElement(rt.Alert,{variant:"info",isInline:!0,title:"Put Insights into action",actionClose:l().createElement(rt.AlertActionCloseButton,{onClose:e,"data-testid":"upselBanner-close"}),...t},l().createElement(B.Stack,{hasGutter:!0},l().createElement(B.StackItem,null,"Enable push-button remediation across your hybrid cloud environment with Red Hat Satellite."),l().createElement(B.StackItem,null,l().createElement("a",{href:"https://www.redhat.com/en/technologies/management/satellite"},"Learn more")))),ct=ot;ot.propTypes={onClose:c().func},ot.defaultProps={onClose:()=>{}};var mt=n(98871),ut=n.n(mt);const dt=()=>l().createElement(pe.Bullseye,null,l().createElement(Ee.EmptyState,null,l().createElement(Ee.EmptyStateHeader,{titleText:"Get more with Find it Fix it capabilities",icon:l().createElement(Ee.EmptyStateIcon,{icon:ut()}),headingLevel:"h5"}),l().createElement(Ee.EmptyStateBody,null,"Upgrade to Red Hat Satellite to remediate all your systems, across regions and geographies directly from Red Hat Insights."),l().createElement(Ee.EmptyStateFooter,null,l().createElement(T.Button,{variant:"link",component:"a",ouiaId:"learn_more",href:"https://www.redhat.com/en/technologies/management/satellite"},"Learn more"))));var pt=n(76744),Et=n(2648),gt=n(63456),bt=n(39173),ht=n(99087),yt=n(39467),ft=n(64596),vt=n(53774),St=n(48211),Rt=n(69409),kt=n(85998),Ct=n(65146),_t=n(71070);const xt=()=>{const e=l().createElement(a.Fragment,null,l().createElement(H.ToolbarItem,null,l().createElement(ne.L,{toggle:l().createElement(kt.Z,{isDisabled:!0,splitButtonItems:[l().createElement(Ct.o,{id:"skeleton-dropdown",key:"skeleton-dropdown","aria-label":"Loading Select all"})],id:"skeleton-dropdown-toggle"})})),l().createElement(H.ToolbarItem,null,l().createElement(Rt.InputGroup,null,l().createElement(Rt.InputGroupItem,{isFill:!0},l().createElement(He.TextInput,{value:"Search",isDisabled:!0,name:"skeleton-search",id:"skeleton-search",type:"search","aria-label":"search loading"})),l().createElement(Rt.InputGroupItem,null,l().createElement(T.Button,{isDisabled:!0,variant:"control","aria-label":"search button for search input"},l().createElement(_t.ZP,null))))),l().createElement(H.ToolbarItem,null,l().createElement(T.Button,{isDisabled:!0,variant:"primary"},"Remove action")));return l().createElement(H.Toolbar,{id:"skeleton-toolbar"},l().createElement(H.ToolbarContent,null," ",e," "))},It=()=>l().createElement(St.Tabs,{activeKey:0,className:"ins-s-tabs"},l().createElement(St.Tab,{eventKey:0,title:l().createElement(St.TabTitleText,null,"Actions")}),l().createElement(St.Tab,{eventKey:1,title:l().createElement(St.TabTitleText,null,"Systems")}),l().createElement(St.Tab,{eventKey:2,title:l().createElement(St.TabTitleText,null,"Activity")}));var Tt=n(77457),wt=n(9677),Nt=n(10310),Zt=n(76400);const Dt=()=>l().createElement(l().Fragment,null,l().createElement(gt.Z,{className:"rem-c-page-details__header"},l().createElement(vt.Breadcrumb,null,l().createElement(vt.BreadcrumbItem,null,l().createElement(s.Z,{to:"/"}," Remediations ")),l().createElement(vt.BreadcrumbItem,{isActive:!0},l().createElement(F.Z,{size:"lg"}))),l().createElement(ft.Level,{className:"rem-l-level"},l().createElement(ft.LevelItem,null,l().createElement(bt.Z,{className:"rem-s-page-header",title:l().createElement(l().Fragment,null,l().createElement(F.Z,{size:"md"}))})),l().createElement(ft.LevelItem,null,l().createElement(q.Split,{hasGutter:!0},l().createElement(q.SplitItem,null,l().createElement(T.Button,{isDisabled:!0,variant:"link"},"Download playbook")),l().createElement(q.SplitItem,null,l().createElement(ne.L,{toggle:l().createElement(ae.a,{isDisabled:!0}),isOpen:!1,isPlain:!0}))))),l().createElement(qt,null)),l().createElement(ht.ZP,null,l().createElement(B.Stack,{hasGutter:!0},l().createElement(B.StackItem,{className:"ins-c-playbookSummary__tabs"},l().createElement(It,null),l().createElement(xt,null),l().createElement(Et.Z,null))))),qt=()=>l().createElement(q.Split,null,l().createElement(q.SplitItem,null,l().createElement(wt.z,{ariaDesc:"Resolved issues count",ariaTitle:"Resolved issues chart",constrainToVisibleArea:!0,data:{x:"Resolved",y:1},labels:({datum:e})=>e.x?`${e.x}: ${e.y}%`:null,title:"Loading",subTitle:"Issues resolved",subTitleComponent:l().createElement(Nt.D,{y:102}),thresholds:[{value:100,color:"#3E8635"}],height:175,width:175,padding:{bottom:20,left:0,right:20,top:20}})),l().createElement(q.SplitItem,{className:"ins-c-remediation-summary__body"},l().createElement(B.Stack,{hasGutter:!0},l().createElement(B.StackItem,null,l().createElement(q.Split,null,l().createElement(q.SplitItem,null,l().createElement(Tt.Flex,null,l().createElement(Tt.FlexItem,{spacer:{default:"spacer-lg"}},l().createElement(Zt.Z,{title:"Total systems"},l().createElement(F.Z,{size:"md"}))))),l().createElement(q.SplitItem,null,l().createElement(Tt.Flex,null,l().createElement(Tt.FlexItem,{spacer:{default:"spacer-lg"}},l().createElement(Zt.Z,{title:"Latest activity"},l().createElement(F.Z,{size:"md"}))))))),l().createElement(B.StackItem,null,l().createElement(Tt.Flex,null,l().createElement(Tt.FlexItem,{spacer:{default:"spacer-lg"}},l().createElement(Zt.Z,{title:"Autoreboot"},l().createElement(F.Z,{size:"md"})))))))),Bt=()=>l().createElement(v.i,{"aria-label":"No activity",cells:["Run on","Run by","Status"],ouiaId:"activity-table",rows:[{cells:[{title:l().createElement(Ee.EmptyState,{className:"rem-c-activity-table__empty"},l().createElement(Ee.EmptyStateHeader,{titleText:"No activity",headingLevel:"h5"}),l().createElement(Ee.EmptyStateBody,null,"Execute this playbook to see a history and summary of the activity.")),props:{colSpan:3}}]}]},l().createElement(S.x,null),l().createElement(R.R,null));var $t=n(82494),Ft=n(44278),At=n.n(Ft),Pt=n(71916),Ot=n.n(Pt),Lt=n(93967),zt=n.n(Lt);const Gt=({remediation:e,playbookRuns:t,switchAutoReboot:n,context:a})=>{const i=t=>{n(e.id,t)},r=(t,n)=>{return t?l().createElement("div",null,l().createElement(At(),{className:"rem-c-success"}),l().createElement("b",{className:"ins-c-remediation-summary__reboot--enabled"}," Enabled "),a.permissions.write&&l().createElement(T.Button,{variant:"link",onClick:()=>i(!e.auto_reboot)},"Turn off")):(s=n,l().createElement("div",null,l().createElement(Ot(),null),l().createElement("b",{className:"ins-c-remediation-summary__reboot--disabled"+(s?"--warning":"")},"Off"),s&&l().createElement(l().Fragment,null,l().createElement(we(),{className:"ins-c-remediation-summary__reboot--required--icon"}),l().createElement("b",{className:"ins-c-remediation-summary__reboot--required"},`${r=(()=>{let t=0;for(const n of e.issues)n.resolution.needs_reboot&&t++;return t})()} issue${1===r?"":"s"} require${1===r?"s":""} reboot to remediate`)),a.permissions.write&&l().createElement(T.Button,{variant:"link",onClick:()=>i(!e.auto_reboot)},"Turn on")));var s,r},{stats:o}=e,c=o.systemsWithReboot+o.systemsWithoutReboot,m=(e=>{let t=0;return e.map((e=>e.systems.every((e=>e.resolved))&&t++)),t})(e.issues);return l().createElement(q.Split,null,l().createElement(q.SplitItem,null,l().createElement(wt.z,{ariaDesc:"Resolved issues count",ariaTitle:"Resolved issues chart",constrainToVisibleArea:!0,data:{x:"Resolved",y:m/e.issues.length*100},labels:({data:e})=>e.x?`${e.x}: ${e.y}%`:null,title:`${m}/${e.issues.length}`,subTitle:"Issues resolved",subTitleComponent:l().createElement(Nt.D,{y:102}),thresholds:[{value:100,color:"#3E8635"}],height:175,width:175,padding:{bottom:20,left:0,right:20,top:20}})),l().createElement(q.SplitItem,{className:"ins-c-remediation-summary__body"},l().createElement(B.Stack,{hasGutter:!0},l().createElement(B.StackItem,null,l().createElement(q.Split,null,l().createElement(q.SplitItem,null,l().createElement(Tt.Flex,null,l().createElement(Tt.FlexItem,{spacer:{default:"spacer-lg"}},l().createElement(Zt.Z,{title:"Total systems"},(d="system",1===(u=c)?`${u} ${d}`:`${u} ${d}s`))))),l().createElement(q.SplitItem,null,l().createElement(Tt.Flex,null,t&&(e=>{if(e.length){const t=e[0];return l().createElement(Tt.FlexItem,{spacer:{default:"spacer-xl"}},l().createElement(Zt.Z,{needsPointer:!0,className:"rem-c-description-list-latest-activity",title:"Latest activity"},l().createElement(Ne.kf,{executorStatus:t.status,counts:t.executors.reduce(((e,t)=>({pending:e.pending+t.counts.pending,running:e.running+t.counts.running,success:e.success+t.counts.success,failure:e.failure+t.counts.failure,canceled:e.canceled+t.counts.canceled,acked:e.acked+t.counts.acked})),{pending:0,running:0,success:0,failure:0,canceled:0,acked:0}),permission:{}}),l().createElement("span",{className:"rem-c-description-list-latest-activity__date"},l().createElement(Ye.Z,{type:"relative",date:t.updated_at})),l().createElement(s.Z,{to:`/${t.remediation_id}/${t.id}`},"View")))}})(t))))),l().createElement(B.StackItem,null,(e=>l().createElement(Zt.Z,{className:"rem-c-playbookSummary__settings",title:"Autoreboot"},l().createElement(Tt.Flex,null,l().createElement(Tt.FlexItem,{className:zt()("ins-c-reboot-status",{"ins-c-reboot-status__enabled":e.auto_reboot&&e.needs_reboot},{"ins-c-reboot-status__disabled":!e.auto_reboot}),spacer:{default:"spacer-xl"}},r(e.auto_reboot,e.needs_reboot)))))(e)))));var u,d};Gt.propTypes={remediation:c().object.isRequired,playbookRuns:c().array,switchAutoReboot:c().func.isRequired,context:c().object.isRequired};var jt=n(33366);const{API_BASE:Vt}=n(93940),Mt=({selectedRemediation:e,selectedRemediationStatus:t,loadRemediation:n,loadRemediationStatus:o,switchAutoReboot:c,playbookRuns:m,getPlaybookRuns:u,checkExecutable:p,executable:E})=>{const g=(0,he.Z)(),b=(0,i.Z)(),{id:h}=(0,r.useParams)(),[y,f]=(0,r.useSearchParams)(),{isFedramp:v,isBeta:S,isOrgAdmin:R=(()=>!1)}=g,k=(0,a.useContext)(de.B),[C,x]=(0,a.useState)("dismissed"!==localStorage.getItem("remediations:bannerStatus")),[I,w]=(0,a.useState)("dismissed"!==localStorage.getItem("remediations:receptorBannerStatus")),N=(0,a.useMemo)((()=>k.permissions.execute?E?"Unable to execute playbook.":"Your account must be entitled to Satellite to execute playbooks.":R()?"Executing the playbook requires having the remediations:remediation:execute permission which is included in the Remediations administrator role. Manage your roles in User access.":"Executing the playbook requires having the remediations:remediation:execute permission which is included in the Remediations administrator role. Contact your Organization Administrator for access."),[g]);(0,a.useEffect)((()=>{n(h).catch((e=>{if(!e||!e.response||404!==e.response.status)throw e;b("/")})),S?.()&&o(h),p(h)}),[]),(0,a.useEffect)((()=>{u(h)}),[u]),(0,a.useEffect)((()=>{if(m&&m.length&&"running"===(0,Ne.fb)(m[0].status)){const e=setInterval((()=>u(h)),1e4);return()=>{clearInterval(e)}}}),[m]);const{status:Z,remediation:D}=e,$=(e=>{const t=(0,jt.Vk)(),[n,l]=(0,a.useState)(),s=(0,a.useRef)(!1);return(0,a.useEffect)((()=>(s.current=!0,(async()=>{try{const n=e&&await t.get(`${Vt}/remediations/${e.id}/connection_status`);s.current&&l("connected"===n.data?.[0].connection_status)}catch(e){console.error(e)}})(),()=>{s.current=!1})),[e]),n})(D);return(0,a.useEffect)((()=>{D&&g.updateDocumentTitle(`${D.name} - Remediations | Red Hat Insights`)}),[g,D]),"fulfilled"!==Z&&"rejected"!==Z?l().createElement(Dt,null):"rejected"===Z?l().createElement(yt.Z,null):"fulfilled"===Z?!1===k.permissions.read?l().createElement(pt.Z,null):l().createElement("div",{className:"page__remediation-details"},l().createElement(gt.Z,null,l().createElement(vt.Breadcrumb,null,l().createElement(vt.BreadcrumbItem,null,l().createElement(s.Z,{to:"/"}," Remediations ")),l().createElement(vt.BreadcrumbItem,{isActive:!0}," ",D.name," ")),l().createElement(ft.Level,{className:"rem-l-level"},l().createElement(ft.LevelItem,null,l().createElement(bt.Z,{title:D.name})),l().createElement(ft.LevelItem,null,l().createElement(q.Split,{hasGutter:!0},l().createElement(q.SplitItem,null,l().createElement(st,{isDisabled:!$||!k.permissions.execute||!E||v,disabledStateText:N,remediationId:D.id,remediationName:D.name})),l().createElement(q.SplitItem,null,l().createElement(T.Button,{isDisabled:!D.issues.length,variant:"secondary",onClick:()=>{(0,d.rN)(D.id),(0,_.q)({title:"Preparing playbook for download.",description:"Once complete, your download will start automatically.",variant:"info",dismissable:!0,autoDismiss:!0})}},"Download playbook")),l().createElement(q.SplitItem,null,l().createElement(et,{remediation:D}))))),l().createElement(Gt,{remediation:D,playbookRuns:m,switchAutoReboot:c,context:k})),l().createElement(ht.ZP,null,l().createElement(B.Stack,{hasGutter:!0},!E&&C&&l().createElement(B.StackItem,null,l().createElement(ct,{onClose:()=>(x(!1),void localStorage.setItem("remediations:bannerStatus","dismissed"))})),E&&I&&l().createElement(B.StackItem,null,l().createElement($t.Z,{onClose:()=>(w(!1),void localStorage.setItem("remediations:receptorBannerStatus","dismissed"))})),l().createElement(B.StackItem,{className:"ins-c-playbookSummary__tabs"},l().createElement(St.Tabs,{activeKey:y.get("activeTab")||"issues",onSelect:(e,t)=>f({...Object.fromEntries(y),activeTab:t})},l().createElement(St.Tab,{eventKey:"issues",title:"Actions"},l().createElement(ke,{remediation:D,status:t})),l().createElement(St.Tab,{eventKey:"systems",title:"Systems"},l().createElement(Me,{remediation:D})),l().createElement(St.Tab,{eventKey:"activity",title:"Activity"},((e,t,n)=>e?Array.isArray(t)&&t.length?l().createElement(Ke,{remediation:n,playbookRuns:t}):Array.isArray(t)&&!t.length?l().createElement(Bt,null):l().createElement(Et.Z,null):l().createElement(dt,null))(E,m,D))))))):void 0};Mt.propTypes={selectedRemediation:c().object,selectedRemediationStatus:c().object,loadRemediation:c().func.isRequired,loadRemediationStatus:c().func.isRequired,switchAutoReboot:c().func.isRequired,deleteRemediation:c().func.isRequired,executePlaybookBanner:c().shape({isVisible:c().bool}),addNotification:c().func.isRequired,playbookRuns:c().array,getPlaybookRuns:c().func,checkExecutable:c().func,executable:c().object};const Ut=(0,m.connect)((({selectedRemediation:e,selectedRemediationStatus:t,executePlaybookBanner:n,playbookRuns:a,executable:l})=>({selectedRemediation:e,selectedRemediationStatus:t,executePlaybookBanner:n,playbookRuns:a.data,remediation:e.remediation,executable:l})),(e=>({loadRemediation:t=>e(u.d5(t)),loadRemediationStatus:t=>e(u.uz(t)),switchAutoReboot:(t,n)=>e(u.o6(t,{auto_reboot:n})),deleteRemediation:t=>e(u.YW(t)),addNotification:t=>e((0,it.wN)(t)),getPlaybookRuns:t=>e(u.Is(t)),checkExecutable:t=>e(u.lh(t))})))(Mt)},2648:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(10756),l=n.n(a),s=n(75863),i=n(43416),r=n(49004),o=n(32819),c=n(15433),m=n(87694),u=n(82814);class d extends l().Component{constructor(e){super(e),this.state={columns:[{title:l().createElement(o.Z,{size:"xs"})},{title:l().createElement(o.Z,{size:"sm"})},{title:l().createElement(o.Z,{size:"sm"})},{title:l().createElement(o.Z,{size:"md"})},{title:l().createElement(o.Z,{size:"sm"})}],rows:[[{title:l().createElement(o.Z,{size:"md"})},{title:l().createElement(o.Z,{size:"xs"})},{title:l().createElement(o.Z,{size:"xs"})},{title:l().createElement(o.Z,{size:"md"})},{title:l().createElement(o.Z,{size:"md"})}]]}}render(){const{columns:e,rows:t}=this.state;return l().createElement(a.Fragment,null,l().createElement(i.i,{cells:e,rows:t,"aria-label":"Loading",variant:s.B.compact,...this.props},l().createElement(r.x,null)),l().createElement(u.Z,{centered:!0},l().createElement(m.Z,null)),l().createElement(c.Z,{isFooter:!0,className:"rem-c-skeleton-table__footer rem-m-align-right"},l().createElement(o.Z,{size:"sm"})))}}const p=d}}]);
//# sourceMappingURL=../sourcemaps/RemediationDetails.728d1b7caf14a5bc8b3c3963279f2944.js.map