(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[7773,5467,9477],{86507:(e,t,n)=>{"use strict";n.d(t,{kC:()=>E,FH:()=>O,Ej:()=>w,mT:()=>S,Tx:()=>k,BA:()=>T,yu:()=>P,m0:()=>j,vF:()=>Z,Vf:()=>R,ko:()=>I,Zp:()=>C,QU:()=>D,B3:()=>_,Y4:()=>x,_6:()=>N,TE:()=>A,ar:()=>F,uG:()=>L,ec:()=>q,SG:()=>Y,C1:()=>V,Kq:()=>M,u9:()=>H,W3:()=>z,P9:()=>W});var r=n(15861),o=n(45987),i=n(4942),a=n(93433),s=n(87757),c=n.n(s),l=n(92950),u=n.n(l),d=n(14938),m=n(73725),p=(n(87185),n(18446),n(39133)),f=n(334),y=n(47285),v=["id"],h=["id"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){return"".concat(e.charAt(0).toUpperCase()+e.slice(1))}var O="remediations:remediation:write",w="auto-reboot",S="select-playbook",k="selected-resolutions",T="manual-resolution",P="existing-playbook-selected",j="existing-playbook",Z="systems",R="resolutions",I="issues-multiple",C="toggle-bulk-select",D=function(){return"beta"===window.location.pathname.split("/")[1]?"beta/":""},_=function(e){return"".concat("".concat(document.baseURI.replace("beta/","")).concat(D())).concat(window.location.pathname.split("/").filter((function(e){return"beta"!==e&&e.length>0})).shift(),"/remediations").concat(e?"/".concat(e):"")},x=function(e){return(0,a.Z)(new Set(e))},N=function(e,t,n){return 1!==e?n||t+"s":t},A=function(e,t,n,r){return function(e,t){return(0,a.Z)(e).sort((function(e,n){var r=Object.keys(e)[t.index-1];return(e[r]>n[r]?1:e[r]<n[r]?-1:0)*("desc"===t.direction?-1:1)}))}(e,t).reduce((function(e,t,o){var i,s;return[].concat((0,a.Z)(e),[{isOpen:!1,cells:[{title:t.action},{title:u().createElement(l.Fragment,{key:"".concat(o,"-description")},u().createElement("p",{key:"".concat(o,"-resolution")},t.resolution),n&&t.alternate>0&&u().createElement("p",{key:"".concat(o,"-alternate")},t.alternate," alternate"," ",N(t.alternate,"resolution")))},{title:t.needsReboot?u().createElement("div",null,"Required"):u().createElement("div",null,"Not required")},{title:(null===(i=t.systems)||void 0===i?void 0:i.length)||0,props:{isOpen:!1}}]}],(0,a.Z)((null===(s=t.systems)||void 0===s?void 0:s.length)>0?[{parent:2*o,fullWidth:!0,allSystemsNamed:r.filter((function(e){return t.systems.includes(e.id)})),allSystems:t.systems,cells:[{title:u().createElement(d.Bullseye,null,u().createElement(d.Spinner,null)),props:{colSpan:5,className:"pf-m-no-padding"}}]}]:[]))}),[])},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u().createElement(f.BrowserRouter,null,u().createElement(y.M,{allSystemsNamed:e,allSystems:t,disabledColumns:["updated"]}))},F=function(e,t,n,r,o){var i=(0,a.Z)(r);r[t].isOpen=n,i[t+1].cells=[{title:B(r[t+1].allSystemsNamed,r[t+1].allSystems)}],o(i)},L=function(e,t){var n,r=(null===(n=t[R].find((function(t){return t.id===e})))||void 0===n?void 0:n.resolutions)||[];if(t[T]&&e in t[k])return r.filter((function(n){return n.id===t[k][e]}));if(t[P]){var o,i,a=null===(o=t[j])||void 0===o||null===(i=o.issues)||void 0===i?void 0:i.find((function(t){return t.id===e}));if(a)return r.filter((function(e){return e.id===a.resolution.id}))}return r},q=function(e,t,n,r){var o=1;r({percent:o});var i=t.issues.map((function(t){var n,r,o,i,s,c,l=t.id,u=(null===(n=e[j])||void 0===n||null===(r=n.issues)||void 0===r||null===(o=r.find((function(e){return e.id===l})))||void 0===o||null===(i=o.systems)||void 0===i?void 0:i.map((function(e){return e.id})))||[];return{id:l,resolution:null===(s=L(l,e))||void 0===s||null===(c=s[0])||void 0===c?void 0:c.id,systems:x([].concat((0,a.Z)(e[P]?[]:u),(0,a.Z)(e[Z][l]||[])))}})).filter((function(e){return e.systems.length>0})),s=setInterval((function(){o<99&&r({percent:++o})}),(i.length+Object.keys(e[Z]).length)/10),c={issues:i,systems:[]},l=(e[j]||{}).id,d=e[P];(d&&m.o6(l,{add:c,auto_reboot:e[w]},n)||m.GZ({name:e[S],add:c,auto_reboot:e[w]},n)).then((function(n){var o,i=n.id;r({id:i,percent:100}),null==t||null===(o=t.onRemediationCreated)||void 0===o||o.call(t,{remediation:{id:i,name},getNotification:function(){return function(e,t,n){var r=n?"created":"updated";return{variant:"success",title:"Playbook ".concat(r),description:u().createElement("span",null,"You have successfully ",r," ",u().createElement("a",{href:_(e)},t),"."),dismissable:!0}}(i,e[S],!d)}})})).catch((function(){r({failed:!0})})).finally((function(){return clearInterval(s)}))},G=function(e,t){var n=!t.payload;return n||(e.selected=x([].concat((0,a.Z)(e.selected),(0,a.Z)(e.rows.map((function(e){return e.id})))))),b(b({},e),{},{selected:n?[]:e.selected,rows:e.rows.map((function(e){return b(b({id:e.id},(0,o.Z)(e,h)),{},{selected:!n})}))})},U=function(e,t,n){return Array.isArray(e)?e.sort((function(e,r){return(e[t]>r[t]?1:-1)*("asc"===n?1:-1)})):[]},Y=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,o,i,s,l,u,d,m,p,f,y=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=y.length>1&&void 0!==y[1]?y[1]:[],s=y.length>2&&void 0!==y[2]?y[2]:[],l=y.length>3?y[3]:void 0,u=i.includes(t.orderBy),t.orderBy=u?t.orderBy:void 0,t.orderDirection=u?null===(n=t.orderDirection)||void 0===n?void 0:n.toLowerCase():void 0,s=U(s,"name",t.orderDirection),d=null==t||null===(r=t.filters)||void 0===r||null===(o=r.hostnameOrId)||void 0===o?void 0:o.toLowerCase(),m=d?s.reduce((function(e,t){return[].concat((0,a.Z)(e),(0,a.Z)(t.name.toLowerCase().includes(d)?[t.id]:[]))}),[]):s.map((function(e){return e.id})),!((p=m.slice((t.page-1)*t.per_page,t.page*t.per_page)).length>0)){e.next=16;break}return e.next=13,l(p,b(b({},t),{},{hasItems:!0,page:1}),!0);case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0={};case 17:return f=e.t0,e.abrupt("return",b(b({},b(b({},f),{},{results:U(f.results,"display_name",t.orderDirection)})),{},{total:m.length,page:t.page,per_page:t.per_page,orderBy:t.orderBy,orderDirection:t.orderDirection,sortBy:{key:t.orderBy,direction:t.orderDirection}}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e,t){return(0,a.Z)(new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))},M=function(e,t){var n,r=t.LOAD_ENTITIES_FULFILLED;return(0,p.applyReducerHash)((n={SELECT_ENTITY:function(e,t){return function(e,t){var n=t.payload,r=e.selected||[];if(n.selected)r=[].concat((0,a.Z)(r),(0,a.Z)(0===n.id?e.rows.map((function(e){return e.id})):[n.id]));else if(0===n.id){var o=e.rows.map((function(e){return e.id}));r=r.filter((function(e){return!o.includes(e)}))}else r=-1===n.id?[]:r.filter((function(e){return e!==n.id}));return b(b({},e),{},{selected:r})}(e,t)}},(0,i.Z)(n,r,(function(t,n){var r=n.payload;return function(e,t,n){var r=e.selected||[];return e.selected||(r=t||e.rows.map((function(e){return e.id}))),b(b({},e),{},{selected:r,rows:U(e.rows.map((function(e){var t,n=e.id;return b(b({id:n},(0,o.Z)(e,v)),{},{selected:!(null===(t=r)||void 0===t||!t.includes(n))})})),"display_name",(null==n?void 0:n.direction)||"asc"),sortBy:n})}(t,e,{key:r.orderBy,direction:r.orderDirection})})),(0,i.Z)(n,C,G),n))},H=function(e){var t,n;return(null==e||null===(t=e.split("|"))||void 0===t||null===(n=t.slice(-1))||void 0===n?void 0:n[0])||e},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(r){var o,i=(null===(o=n.find((function(e){return e.id===r.id})))||void 0===o?void 0:o.resolutions)||[],s=(null==i?void 0:i[0])||{},c=s.description,l=s.needs_reboot;return{action:e.find((function(e){return e.id===r.id})).description,resolution:c,needsReboot:l,systems:x([].concat((0,a.Z)(r.systems||[]),(0,a.Z)(t))),id:r.id,alternate:(null==i?void 0:i.length)-1}})).filter((function(e){return e.alternate>0}))},W=function(e,t){var n=e.split(":"),r=t.split(":");return n.length===r.length&&n.every((function(e,t){return e===r[t]||"*"===e||"*"===r[t]}))}},73725:(e,t,n)=>{"use strict";n.d(t,{GZ:()=>Y,yc:()=>L,rN:()=>B,yY:()=>I,kd:()=>F,NH:()=>H,uQ:()=>R,lK:()=>M,mY:()=>z,o6:()=>V,V_:()=>x,_5:()=>N,YI:()=>A});var r=n(4942),o=n(15861),i=n(15671),a=n(60136),s=n(82963),c=n(61120),l=n(72407),u=n(87757),d=n.n(u),m=n(28962),p=n(11521),f=n.n(p),y=n(67450),v=n(64517);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){(0,a.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function o(e){var t;return(0,i.Z)(this,o),(t=r.call(this,"Error communicating with the server")).description=e,t}return o}((0,l.Z)(Error));function E(e){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:if(401!==t.status){e.next=5;break}return window.insights.chrome.auth.logout(),e.abrupt("return");case 5:if(!t.headers.get("content-type").includes("application/json")){e.next=20;break}return n=!1,e.prev=7,e.next=10,t.json();case 10:n=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(7);case 15:if(!n.errors||!n.errors.length){e.next=20;break}if(!(r=n.errors[0]).details||!r.details.name){e.next=19;break}throw new b("".concat(r.title," (").concat(r.details.name,")"));case 19:throw new b(r.title);case 20:throw new b("Unexpected response code ".concat(t.status));case 21:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function w(e){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if((n=t.headers.get("content-type")).includes("application/json")){e.next=5;break}throw new b("Unexpected response type (".concat(n,") returned"));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=g({credentials:"same-origin",method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"},arguments.length>4&&void 0!==arguments[4]?arguments[4]:{});return n&&(r.headers=n),t&&(r.body=JSON.stringify(t)),fetch(e,r)}(e.toString()).then(E).then(w)}var T=n(54998),P=n.n(T);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){return k(function(){for(var e=P()(m.Sg).segment("remediations"),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.segment(t)})),e}(e,"status"))};function I(){return k("/api/inventory/v1/hosts")}var C=function(e){(0,a.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function o(e){var t;return(0,i.Z)(this,o),(t=r.call(this,"Error communicating with the server")).description=e,t}return o}((0,l.Z)(Error));function D(){return D=(0,o.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var _=f().create();_.interceptors.request.use((function(e){return D.apply(this,arguments)})),_.interceptors.response.use((function(e){return e.data?Z(Z({},e.data),{},{etag:e.headers.etag}):e})),_.interceptors.response.use(null,(function(e){if(e){if(e.response&&401===e.response.status)return window.insights.chrome.auth.logout(),!1;throw e}})),_.interceptors.response.use(null,(function(e){if(e){if(e.response&&e.response.data&&e.response.data.errors&&e.response.data.errors.length){var t=e.response.data.errors[0];if(t.details&&t.details.name)throw new C("".concat(t.title," (").concat(t.details.name,")"));throw new C(t.title)}throw e}}));var x=new y.RemediationsApi(void 0,m.Sg,_),N=new y.ResolutionsApi(void 0,m.Sg,_),A=new v.DefaultApi(void 0,m.vW,_);function B(e){return new Promise((function(t,n){var r=e.length>1?(new y.RemediationsApiAxiosParamCreator).downloadPlaybooks(e).then((function(e){return window.open(m.Sg+e.url)})):(new y.RemediationsApiAxiosParamCreator).getRemediationPlaybook(e[0]).then((function(e){return window.open(m.Sg+e.url)}));if(!r)return n();var o=setInterval((function(){r.closed&&(clearInterval(o),t())}),500)}))}function F(){return k("".concat(window.location.origin,"/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]"))}function L(e,t){return Promise.all(e.flatMap((function(e){return e.issues.map((function(n){return x.deleteRemediationIssueSystem(t.id,n.id,e.id)}))})))}function q(e){if(!e.ok){var t=new Error("Unexpected response code ".concat(e.status));throw t.statusCode=e.status,t}return e}function G(e){return q(e),e.json()}var U=Object.freeze({"Content-Type":"application/json; charset=utf-8"});function Y(e){var t=new(P())(m.Sg).segment("remediations").toString();return fetch(t,{headers:U,method:"POST",credentials:"include",body:JSON.stringify(e)}).then(G)}function V(e,t){var n=new(P())(m.Sg).segment("remediations").segment(e).toString();return fetch(n,{headers:U,credentials:"include",method:"PATCH",body:JSON.stringify(t)}).then(q)}function M(){var e=new(P())(m.Sg).segment("remediations").query({limit:200}).toString();return fetch(e,{credentials:"include"}).then(G)}function H(e){var t=new(P())(m.Sg).segment("remediations").segment(e).toString();return fetch(t,{credentials:"include"}).then(G)}function z(e){var t=new(P())(m.Sg).segment("resolutions").toString();return fetch(t,{headers:U,credentials:"include",method:"POST",body:JSON.stringify({issues:e})}).then(G)}},28962:(e,t,n)=>{"use strict";var r,o;n.d(t,{Sg:()=>i,vW:()=>a,hN:()=>s});var i="/api/remediations/v1",a="/api/sources/v2.0",s=null===(r=insights)||void 0===r||null===(o=r.chrome)||void 0===o?void 0:o.isBeta},58061:(e,t,n)=>{"use strict";n.d(t,{aI:()=>c,ET:()=>l,mg:()=>u,JY:()=>d});var r=n(93433),o=n(24350),i=n.n(o),a=n(94654),s=n.n(a)()(["LOAD_REMEDIATIONS","CREATE_REMEDIATIONS","LOAD_REMEDIATION","LOAD_REMEDIATION_STATUS","REFRESH_REMEDIATION","PATCH_REMEDIATION","DELETE_REMEDIATION","DELETE_REMEDIATION_ISSUE","DELETE_REMEDIATION_ISSUE_SYSTEM","PATCH_REMEDIATION_ISSUE","GET_RESOLUTIONS","GET_CONNECTION_STATUS","RUN_REMEDIATION","EXECUTE_PLAYBOOK_BANNER","RUN_REMEDIATION","GET_PLAYBOOK_RUNS","GET_PLAYBOOK_RUN","GET_PLAYBOOK_RUN_SYSTEMS","GET_PLAYBOOK_RUN_SYSTEM_DETAILS","CANCEL_PLAYBOOK_RUNS","GET_ENDPOINT","CHECK_EXECUTABLE"],(function(e){return[e,"".concat(e,"_PENDING"),"".concat(e,"_FULFILLED"),"".concat(e,"_REJECTED")]})),c=i()([].concat((0,r.Z)(s),["SET_ETAG","EXPAND_INVENTORY_TABLE","SELECT_ENTITY"]),(function(e){return e})),l=500,u="FETCH_SELECTED_HOSTS",d="FETCH_RESOLUTIONS"},87938:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ve});var r=n(87462),o=n(71002),i=n(29439),a=n(93433),s=n(4942),c=n(92950),l=n.n(c),u=n(45697),d=n.n(u),m=n(89863),p=new(n(68004).HostsApi)(void 0,"/api/inventory/v1",m.ZP);function f(e,t){var n=t.page,r=t.perPage;return p.apiHostGetHostById(e,void 0,r,n)}var y,v=n(58061),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:v.mg,payload:f(e,t)}},g=n(15861),b=n(87757),E=n.n(b),O=n(73725),w=n(68718),S=n.n(w),k=function(){var e=(0,g.Z)(E().mark((function e(t){var n,r,o,a,s;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.mY(t.map((function(e){return e.id})));case 3:return n=e.sent,r=S()(n,(function(e,t,n){var r=(0,i.Z)(e,2),o=r[0],a=r[1];return t?o.push(t):a.push("Issue ".concat(n," does not have Ansible support")),[o,a]}),[[],[]]),o=(0,i.Z)(r,2),a=o[0],s=o[1],e.abrupt("return",{resolutions:a,warnings:s});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{errors:["Error obtaining resolution information. Please try again later."]});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=n(14494),P=n(57283),j=n.n(P),Z=n(18546);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={isLoading:!1,hosts:[]};const D=(y={},(0,s.Z)(y,"".concat(v.mg,"_FULFILLED"),(function(e,t){var n=t.payload;return I(I({},e),{},{hosts:[].concat((0,a.Z)(e.hosts),(0,a.Z)(n.results||[])),isLoading:!1})})),(0,s.Z)(y,"".concat(v.mg,"_PENDING"),(function(e){return I(I({},e),{},{isLoading:!0})})),y);var _=n(39133),x=n(24350),N=n.n(x),A=n(86758),B=n(67850),F=n(96354),L=n(64124),q=n(86507),G=[{name:q.mT,component:"select-playbook",validate:[{type:L.Z.PATTERN,pattern:/^$|^.*[\w\d]+.*$/},{type:L.Z.REQUIRED}]},{name:q.yu,component:F.Z.TEXT_FIELD,hideField:!0},{name:q.m0,component:F.Z.TEXT_FIELD,hideField:!0},{name:q.Vf,component:F.Z.TEXT_FIELD,hideField:!0}],U=[{name:q.BA,component:"review-actions"}];var Y=n(26854),V=n(14938),M=n(39532),H=n(41693),z=n(48880),W=n(35664),K=n(52017),J=n(3428),X=function(e){var t=e.resolutionsCount;return(0,H.Z)(e).input.valid=!1,l().createElement(V.EmptyState,{variant:V.EmptyStateVariant.small,"data-component-ouia-id":"wizard-fetch-error"},l().createElement(V.EmptyStateIcon,{color:J.ZP.value,icon:K.ExclamationCircleIcon}),l().createElement(V.Title,{headingLevel:"h4",size:"lg"},"Unexpected error"),l().createElement(V.EmptyStateBody,null,"Please try again later."," ",0!==t&&l().createElement("div",null,"Hint: No resolutions for selected issues.")))};X.propTypes={resolutionsCount:d().number};const Q=X;var $=n(29521),ee=n.n($),te=n(18446),ne=n.n(te),re=function(e){var t=e.issues,n=e.systems,r=e.allSystems,o=(0,H.Z)(e).input,s=(0,z.default)(),u=s.getState().values,d=(0,c.useState)(),m=(0,i.Z)(d,2),p=m[0],f=m[1],y=(0,c.useState)(u[q.yu]),v=(0,i.Z)(y,2),h=v[0],b=v[1],w=(0,c.useState)(u[q.yu]?"":o.value),S=(0,i.Z)(w,2),k=S[0],P=S[1],j=(0,c.useState)(u[q.m0]),Z=(0,i.Z)(j,2),R=Z[0],I=Z[1],C=(0,c.useState)(!1),D=(0,i.Z)(C,2),_=D[0],x=D[1],N=(0,T.useSelector)((function(e){var t=e.resolutionsReducer;return(null==t?void 0:t.errors)||[]}),T.shallowEqual),A=(0,T.useSelector)((function(e){var t=e.resolutionsReducer;return(null==t?void 0:t.warnings)||[]}),T.shallowEqual),B=(0,T.useSelector)((function(e){var t=e.resolutionsReducer;return(null==t?void 0:t.resolutions)||[]}),T.shallowEqual),F=(0,T.useSelector)((function(e){var t=e.resolutionsReducer;return null==t?void 0:t.isLoading}));return(0,c.useEffect)((function(){function e(){return e=(0,g.Z)(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.lK();case 2:t=e.sent,n=t.data,f(n);case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,c.useEffect)((function(){var e;(null===(e=ee()(B,u[q.Vf],ne()))||void 0===e?void 0:e.length)>0&&(s.change(q.Vf,B),s.change(q.ko,(0,q.W3)(t,n,B)))})),N.length<=0?l().createElement(V.Stack,{hasGutter:!0,"data-component-ouia-id":"wizard-select-playbook"},l().createElement(V.StackItem,null,0!==A.length&&l().createElement(V.StackItem,null,l().createElement(V.Alert,{variant:"warning",isInline:!0,title:l().createElement(V.Text,null,"There ",(0,q._6)(A.length,"was","were")," ",l().createElement(V.Popover,{"aria-label":"Resolution error popover",bodyContent:l().createElement(c.Fragment,null,A.map((function(e,t){return l().createElement("div",{key:t},e)})))},l().createElement("b",null,l().createElement(V.Button,{variant:"link",isInline:!0},A.length)," ",(0,q._6)(A.length,"error")))," ","while fetching resolutions for your issues!"," ")})),l().createElement(V.TextContent,null,l().createElement(V.Text,null,"You selected"," ",l().createElement("b",null,"".concat(r.length," ").concat((0,q._6)(r.length,"system"))," "),"to remediate with Ansible, which in total includes"," ",l().createElement("b",null,"".concat(null==t?void 0:t.length," ").concat((0,q._6)(null==t?void 0:t.length,"issue"))," "),(null==t?void 0:t.length)===B.length||F?"which":l().createElement(c.Fragment,null,"of which ",l().createElement("b",null,B.length," "))," ","can be remediated by Ansible."))),l().createElement(V.StackItem,null,l().createElement(V.Grid,{hasGutter:!0},l().createElement(V.GridItem,{sm:12,md:6,lg:4},l().createElement(V.Radio,{label:p?"Add to existing playbook (".concat(p.length,")"):"Add to existing playbook","aria-label":"Add to existing playbook",id:"existing",name:"radio",isDisabled:!p||!p.length,defaultChecked:h,onChange:function(){b(!0),s.change(q.yu,!0),o.onChange((null==R?void 0:R.name)||""),s.change(q.m0,R)}})),l().createElement(V.GridItem,{sm:12,md:6,lg:4},p&&!_?l().createElement(V.FormSelect,{onChange:function(e){x(!0),O.NH(e).then((function(e){I(e),x(!1),h&&o.onChange(e.name),h&&s.change(q.m0,e)}))},value:(null==R?void 0:R.id)||"","aria-label":"Select an existing playbook"},null!=p&&p.length?[l().createElement(V.FormSelectOption,{key:"select-playbook-placeholder",value:"",label:"Select playbook",isDisabled:!0})].concat((0,a.Z)(p.map((function(e){var t=e.id,n=e.name;return l().createElement(V.FormSelectOption,{key:t,value:t,label:n})})))):l().createElement(V.FormSelectOption,{key:"empty",value:"empty",label:"No existing playbooks"})):l().createElement(W.Z,{size:W.i.lg})))),l().createElement(V.StackItem,null,l().createElement(V.Grid,{hasGutter:!0},l().createElement(V.GridItem,{sm:12,md:6,lg:4},l().createElement(V.Radio,{label:"Create new playbook","aria-label":"Create new playbook",id:"new",name:"radio",defaultChecked:!h,onChange:function(){b(!1),s.change(q.yu,!1),o.onChange(k),s.change(q.m0,void 0)}})),l().createElement(V.GridItem,{sm:12,md:6,lg:4},l().createElement(V.FormGroup,{fieldId:"remediation-name"},l().createElement(V.TextInput,{type:"text",value:k,onChange:function(e){P(e),h||o.onChange(e)},"aria-label":"Name your playbook",autoFocus:!0})))))):l().createElement(Q,null)};re.propTypes={issues:d().arrayOf(d().shape({description:d().string,id:d().string})).isRequired,systems:d().arrayOf(d().string).isRequired,allSystems:d().arrayOf(d().string).isRequired};const oe=re;var ie=n(45987),ae=n(334),se=n(47285),ce=["issues","systems","allSystems","registry"];function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t,n=e.issues,r=e.systems,o=e.allSystems,i=e.registry,u=(0,ie.Z)(e,ce),d=(0,T.useDispatch)(),m=(0,H.Z)(u).input,p=null===(t=(0,z.default)().getState().errors)||void 0===t?void 0:t.systems,f=(0,T.useSelector)((function(e){var t=e.entities;return((null==t?void 0:t.rows)||[]).length})),y=(0,T.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.selected)||[]})),v=(0,T.useSelector)((function(e){var t=e.entities;return null==t?void 0:t.loaded})),h=(0,T.useSelector)((function(e){var t=e.hostReducer.hosts;return(null==t?void 0:t.map((function(e){return{id:e.id,name:e.display_name}})))||[]}));(0,c.useEffect)((function(){var e=null==n?void 0:n.reduce((function(e,t){var n=(0,q.Y4)([].concat((0,a.Z)(r),(0,a.Z)(t.systems||[]))).filter((function(e){return null==y?void 0:y.includes(e)}));return ue(ue({},e),n.length>0?(0,s.Z)({},t.id,n):{})}),{});ne()(m.value,e)||m.onChange(e)}),[y]);var g=function(e){d({type:q.Zp,payload:e})};return l().createElement(V.Stack,{hasGutter:!0,"data-component-ouia-id":"wizard-review-systems"},l().createElement(V.StackItem,null,l().createElement(V.TextContent,null,l().createElement(V.Text,null,"Review and optionally exclude systems from your selection."))),l().createElement(V.StackItem,null,l().createElement(ae.BrowserRouter,null,l().createElement(se.Z,{registry:i,allSystemsNamed:h,allSystems:o,hasCheckbox:!0,bulkSelect:{id:"select-systems",count:y.length,items:[{title:"Select none (0)",onClick:function(){return g(!1)}}].concat((0,a.Z)(v&&f>0?[{title:"Select page (".concat(f,")"),onClick:function(){return g(!0)}}]:[])),checked:y.length>0,onSelect:function(e){return g(e)}},onSelectRows:!0}))),p&&v&&l().createElement(V.StackItem,null,l().createElement(K.ExclamationCircleIcon,{className:"ins-c-remediations-error pf-u-mr-sm"}),l().createElement("span",{className:"ins-c-remediations-error"},p)))};de.propTypes={issues:d().arrayOf(d().shape({description:d().string,id:d().string})).isRequired,systems:d().arrayOf(d().string).isRequired,allSystems:d().arrayOf(d().string).isRequired,registry:d().instanceOf(Z.ZP).isRequired};const me=de;var pe=n(17855);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t=(0,z.default)().getState().values,n=e.issues.filter((function(e){return Object.keys(t[q.vF]).includes(e.id)})),r=(0,H.Z)(e).input,o=(0,c.useState)({index:void 0,direction:void 0}),a=(0,i.Z)(o,2),s=a[0],u=a[1],d=(0,T.useSelector)((function(e){var t=e.hostReducer.hosts;return(null==t?void 0:t.map((function(e){return{id:e.id,name:e.display_name}})))||[]})),m=(t[q.yu]?t[q.ko].filter((function(e){return!t[q.m0].issues.some((function(t){return t.id===e.id}))})):t[q.ko]).map((function(e){return ye(ye({},e),{},{systems:t[q.vF][e.id]})})).filter((function(e){var t;return(null==e||null===(t=e.systems)||void 0===t?void 0:t.length)>0})),p=(0,c.useState)((0,q.TE)(m,s,!0,d)),f=(0,i.Z)(p,2),y=f[0],v=f[1];return(0,c.useEffect)((function(){v((0,q.TE)(m,s,!0,d))}),[s]),l().createElement(V.Stack,{hasGutter:!0,"data-component-ouia-id":"wizard-review-actions"},l().createElement(V.StackItem,null,l().createElement(V.TextContent,null,l().createElement(V.Text,null,"You have selected"," ",l().createElement("b",null,"".concat(n.length," ").concat((0,q._6)(n.length,"item")))," to remediate."," ",l().createElement("b",null,m.length," of"," ","".concat(n.length," ").concat((0,q._6)(n.length,"item"))),1!==m.length?" allow":" allows"," for you to chose from multiple resolution steps."))),l().createElement(V.StackItem,null,l().createElement(V.Radio,{label:"Review and/or change the resolution steps for ".concat(1!==m.length?"these":"this","\n                         ").concat(m.length," ").concat((0,q._6)(m.length,"action"),"."),id:"change",name:"radio",isChecked:r.value,onChange:function(){return r.onChange(!0)}}),n.length-m.length>0&&l().createElement(V.Text,{className:"rem-c-choose-actions-description"},"The ".concat(n.length-m.length," other selected ").concat((0,q._6)(n.length-m.length,"issue")," \n                    ").concat(n.length-m.length!=1?"do":"does"," not have multiple resolution options."))),l().createElement(pe.Table,{"aria-label":"Actions",className:"ins-c-remediation-summary-table",variant:pe.TableVariant.compact,onCollapse:function(e,t,n){return(0,q.ar)(e,t,n,y,v)},cells:[{title:"Action",transforms:[pe.sortable]},{title:"Resolution",transforms:[pe.sortable]},{title:"Reboot required",transforms:[pe.sortable]},{title:"Systems",transforms:[pe.sortable],cellFormatters:[pe.expandable]}],rows:y,onSort:function(e,t,n){return u({index:t,direction:n})},sortBy:s},l().createElement(pe.TableHeader,{noWrap:!0}),l().createElement(pe.TableBody,null)),l().createElement(V.StackItem,null,l().createElement(V.Radio,{label:"Accept all recommended resolution steps for all actions",id:"accept",name:"radio",isChecked:!r.value,onChange:function(){return r.onChange(!1)}}),l().createElement(V.Text,{className:"rem-c-choose-actions-description"},"You may modify reboot status to manual reboot in the next step, or from the playbook.")))};ve.propTypes={issues:d().arrayOf(d().shape({description:d().string,id:d().string})).isRequired};const he=ve;var ge=n(45578),be=n.n(ge);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=function(e){var t,n=e.issue,r=(0,z.default)(),o=r.getState().values[q.Vf],i=r.getState().values[q.vF][n.id]||[],a=(null===(t=o.find((function(e){return e.id===n.id})))||void 0===t?void 0:t.resolutions)||[],u=be()(a,"id"),d=ee()(a,u,ne());return l().createElement(V.Stack,{hasGutter:!0,"data-component-ouia-id":"wizard-issue-resolution"},l().createElement(V.StackItem,null,l().createElement(V.Title,{headingLevel:"h2"},"Choose action: ".concat((0,q.u9)(n.id)))),l().createElement(V.StackItem,null,d.length>0&&l().createElement(V.StackItem,{className:"pf-u-mb-sm"},l().createElement(V.Alert,{variant:"warning",isInline:!0,title:l().createElement(V.Text,null,"There ",(0,q._6)(d.length,"was","were")," ",l().createElement(V.Popover,{"aria-label":"Resolution duplicates popover",bodyContent:l().createElement(c.Fragment,null,d.map((function(e,t){return l().createElement("div",{key:t},e.description)})))},l().createElement("b",null,l().createElement(V.Button,{variant:"link",isInline:!0},d.length)," ",(0,q._6)(d.length,"resolution")))," ","removed due to duplication")})),l().createElement(V.TextContent,null,l().createElement(V.Text,null,"Review the possible resolution steps and select which to add to your playbook."),l().createElement(V.Text,{className:"ins-c-remediations-action-description"},n.action),l().createElement(V.Text,{className:"ins-c-remediations-action-description"},"Resolution affects ".concat(i.length," ").concat((0,q._6)(i.length,"system"))))),l().createElement(V.StackItem,null,l().createElement("div",{className:"ins-c-resolution-container"},u.map((function(e,t){return l().createElement("div",{className:"ins-c-resolution-option",sm:12,md:6,lg:4,xl:3,key:e.id},l().createElement(V.Tile,{onClick:function(){return r.change(q.Tx,Oe(Oe({},r.getState().values[q.Tx]),{},(0,s.Z)({},n.id,e.id)))},isSelected:r.getState().values[q.Tx][n.id]?r.getState().values[q.Tx][n.id]===e.id:0===t,title:e.description},l().createElement(V.TextContent,{className:"pf-u-pt-sm"},l().createElement(V.Text,{className:"pf-u-mb-sm ins-c-playbook-description"},'Resolution from "',n.id.split(/:|\|/)[1],'"'),l().createElement("div",{className:"ins-c-reboot-required"},l().createElement(V.Text,{component:"span"},e.needs_reboot?"Reboot required":l().createElement("span",null,"Reboot ",l().createElement("b",null,"not")," required"))))))})))))};we.propTypes={issue:d().shape({id:d().string,action:d().string,alternate:d().number,systems:d().arrayOf(d().string)}).isRequired};const Se=we;function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=function(e){var t=(0,z.default)(),n=t.getState().values[q.m0],r=t.getState().values[q.yu],o=t.getState().values[q.vF],a=Te(Te({},e),{},{data:Te(Te({},e.data),{},{issues:e.data.issues.filter((function(e){var t;return(null===(t=o[e.id])||void 0===t?void 0:t.length)>0}))})}),s=a.data,u=a.issuesById,d=(0,H.Z)(e).input,m=(0,c.useState)({index:void 0,direction:void 0}),p=(0,i.Z)(m,2),f=p[0],y=p[1],v=(0,T.useSelector)((function(e){var t=e.hostReducer.hosts;return(null==t?void 0:t.map((function(e){return{id:e.id,name:e.display_name}})))||[]})),h=s.issues.map((function(e){var n=(0,q.uG)(e.id,t.getState().values),r=(null==n?void 0:n[0])||{},i=r.description,a=r.needs_reboot;return{action:u[e.id].description,resolution:i,needsReboot:a,systems:o[e.id]}}));(0,c.useEffect)((function(){d.onChange(""!==d.value?d.value:r&&n.auto_reboot||h.some((function(e){return e.needsReboot})))}),[]);var g=(0,c.useState)((0,q.TE)(h,f,!1,v)),b=(0,i.Z)(g,2),E=b[0],O=b[1];return(0,c.useEffect)((function(){O((0,q.TE)(h,f,!1,v))}),[f]),l().createElement(V.Stack,{hasGutter:!0,"data-component-ouia-id":"wizard-review"},l().createElement(V.StackItem,null,l().createElement(V.TextContent,null,l().createElement(V.Text,null,"Issues listed below will be added to the playbook"," ",l().createElement("b",null,t.getState().values[q.mT]),"."))),h.some((function(e){return e.needsReboot}))&&l().createElement(V.StackItem,null,l().createElement(V.TextContent,null,l().createElement(V.Text,{className:"ins-c-playbook-reboot-required"},l().createElement(K.ExclamationTriangleIcon,null)," A system reboot is required to remediate selected issues"))),l().createElement(V.StackItem,null,l().createElement(V.TextContent,null,l().createElement(V.Text,null,"The playbook ",l().createElement("b",null,t.getState().values[q.mT]),d.value?" does":l().createElement("span",{className:"ins-c-remediation-danger-text"}," does not")," ","auto reboot systems."))),l().createElement(V.StackItem,null,l().createElement(V.Button,{variant:"link",isInline:!0,onClick:function(){return d.onChange(!d.value)}},"Turn ",d.value?"off":"on"," autoreboot")),l().createElement(pe.Table,{"aria-label":"Actions",className:"ins-c-remediation-summary-table",variant:pe.TableVariant.compact,cells:[{title:"Action",transforms:[pe.sortable]},{title:"Resolution",transforms:[pe.sortable]},{title:"Reboot required",transforms:[pe.sortable]},{title:"Systems",transforms:[pe.sortable],cellFormatters:[pe.expandable]}],rows:E,onSort:function(e,t,n){return y({index:t,direction:n})},onCollapse:function(e,t,n){return(0,q.ar)(e,t,n,E,O)},sortBy:f},l().createElement(pe.TableHeader,{noWrap:!0}),l().createElement(pe.TableBody,null)))};Pe.propTypes={data:d().shape({issues:d().array,systems:d().array,onRemediationCreated:d().func}).isRequired,issuesById:d().shape((0,s.Z)({},d().string,d().shape({id:d().string,description:d().string}))).isRequired};const je=Pe;var Ze;function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={isLoading:!1,resolutions:void 0};const De=(Ze={},(0,s.Z)(Ze,"".concat(v.JY,"_FULFILLED"),(function(e,t){var n=t.payload;return Ie(Ie(Ie({},e),n),{},{isLoading:!1})})),(0,s.Z)(Ze,"".concat(v.JY,"_PENDING"),(function(e){return Ie(Ie({},e),{},{isLoading:!0})})),Ze);var _e=n(48273),xe=function(e){var t,n,r=e.percent,o=e.failed;return 100===r?(n="Completed",t=_e.ProgressVariant.success):o?(n="Error",t=_e.ProgressVariant.danger):(n="In progress",t=_e.ProgressVariant.info),l().createElement(_e.Progress,{id:"finished-create-remediation",value:r,title:n,variant:t})};xe.propTypes={percent:d().number,failed:d().bool};const Ne=xe;var Ae,Be=function(e){var t=e.onClose,n=e.setOpen,r=e.submitRemediation,o=e.setState,i=e.state,a={percent:i.percent,failed:i.failed,systems:(0,q.Y4)(Object.values(i.formValues[q.vF]).flat()),issues:Object.keys(i.formValues[q.vF]),playbook:{name:i.formValues[q.mT],id:i.id}},s=a.percent,c=a.failed,u=a.systems,d=a.issues,m=a.playbook;return l().createElement(V.EmptyState,{variant:V.EmptyStateVariant.large,"data-component-ouia-id":"wizard-progress"},l().createElement(V.EmptyStateIcon,{className:"pf-u-mb-lg pf-u-mt-sm",color:c?"var(--pf-global--danger-color--100)":100===s?"var(--pf-global--success-color--100)":void 0,icon:c?K.ExclamationCircleIcon:100===s?K.CheckCircleIcon:K.InProgressIcon}),l().createElement(V.Title,{headingLevel:"h1",size:"lg"},c?"Error: Unable to add items to playbook":100===s?"Items added to playbook":"Adding items to the playbook"),l().createElement(V.EmptyStateBody,{className:"pf-c-progress-bar pf-u-mt-md"},l().createElement(Ne,{percent:s,failed:c})),(c||100===s)&&l().createElement(V.EmptyStateBody,{className:"pf-c-progress-message"},c?"Please try again.":l().createElement("div",null,"".concat(d.length," ").concat((0,q._6)(d.length,"action")," affecting \n                        ").concat(u.length," ").concat((0,q._6)(u.length,"system")," \n                        ").concat(d.length>1?"were":"was"," added to the playbook "),l().createElement("a",{href:(0,q.B3)(m.id)},m.name),".")),100===s&&l().createElement(V.EmptyStateBody,{className:"pf-c-progress-message-description pf-u-mb-md"},"You can remediate these systems directly from Insights by enabling",l().createElement(V.Button,{className:"pf-u-py-0 pf-u-px-xs",variant:"link",ouiaId:"CloudConnectorButton",icon:l().createElement(K.ExternalLinkAltIcon,null),iconPosition:"right",isSmall:!0,onClick:function(){return window.location.href="".concat(window.location.origin,"/").concat((0,q.QU)(),"settings/connector")}},"Cloud Connector"),"on eligible systems."),c&&l().createElement(V.Button,{className:"pf-u-mt-md pf-u-mb-sm",variant:"primary",ouiaId:"TryAgainButton",onClick:function(){o({failed:!1,percent:0}),r(!1)}},"Try again"),100===s&&l().createElement(V.Button,{className:"pf-u-mt-md pf-u-mb-sm",variant:"primary",ouiaId:"ReturnToAppButton",onClick:function(){t(),n(!1)}},"Return to application"),l().createElement(V.EmptyStateSecondaryActions,null,c&&l().createElement(V.Button,{variant:"secondary",ouiaId:"BackToWizardButton",onClick:function(){t()}},"Go back to the wizard"),100===s&&l().createElement(V.Button,{variant:"link",component:"a",ouiaId:"OpenPlaybookButton",href:(0,q.B3)(m.id),onClick:function(){t(),n(!1)}},"Open playbook ",m.name)))};Be.propTypes={onClose:d().func,setOpen:d().func,submitRemediation:d().func,setState:d().func,state:d().shape({id:d().string,percent:d().number.isRequired,failed:d().bool.isRequired,formValues:d().shape((Ae={},(0,s.Z)(Ae,q.mT,d().string),(0,s.Z)(Ae,q.vF,d().objectOf(d().arrayOf(d().string))),Ae))})};const Fe=Be;function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={submitted:!1,id:void 0,percent:0,failed:!1,formValues:void 0},Ue=function(e,t){switch(t.type){case"schema":return qe(qe({},e),{},{schema:t.payload});case"state":return qe(qe({},e),t.payload);default:throw new Error}},Ye=function(e){var t,n,u,d=e.setOpen,m=e.data,p=e.basePath,f=e.registry,y=(0,c.useRef)((0,q.Y4)(null===(t=m.issues)||void 0===t?void 0:t.reduce((function(e,t){return[].concat((0,a.Z)(e),(0,a.Z)(t.systems||[]))}),(0,a.Z)(m.systems||[])))),g=(0,T.useDispatch)(),b=(0,c.useReducer)(Ue,Ge),E=(0,i.Z)(b,2),O=E[0],w=E[1],S=N()(m.issues,(function(e){return e.id}));(0,c.useEffect)((function(){var e;w({type:"schema",payload:(e=m.issues,{fields:[{component:F.Z.WIZARD,name:"remediations-wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:"Remediate with Ansible",description:"Add actions to an Ansible Playbook",fields:[{name:"playbook",title:"Select playbook",fields:G,nextStep:"systems"},{name:"systems",title:"Review systems",fields:[{name:q.vF,component:"review-systems",validate:[{type:"validate-systems"}]}],nextStep:function(e){return((t=e.values)[q.yu]?t[q.ko].filter((function(e){return!t[q.m0].issues.some((function(n){return n.id===e.id&&Object.keys(t[q.vF]).includes(e.id)}))})):t[q.ko].filter((function(e){return Object.keys(t[q.vF]).includes(e.id)}))).length>0?"actions":"review";var t}},{name:"actions",title:"Review and edit actions",fields:U,nextStep:function(e){return t=e.values,r=t[q.yu]?t[q.ko].filter((function(e){return!t[q.m0].issues.some((function(t){return t.id===e.id}))&&Object.keys(t[q.vF]).includes(e.id)})):t[q.ko].filter((function(e){return Object.keys(t[q.vF]).includes(e.id)})),t[q.BA]?null===(n=r[0])||void 0===n?void 0:n.id:"review";var t,n,r}}].concat((0,a.Z)((null==e?void 0:e.map((function(e){return{name:e.id,title:(0,q.u9)(e.id),showTitle:!1,fields:[{name:e.id,component:"issue-resolution",issue:e},{name:q.Tx,component:F.Z.TEXT_FIELD,hideField:!0}],nextStep:function(t){return function(e,t){var n,r=e[q.yu]?e[q.ko].filter((function(t){return!e[q.m0].issues.some((function(n){return n.id===t.id&&Object.keys(e[q.vF]).includes(t.id)}))})):e[q.ko].filter((function(t){return Object.keys(e[q.vF]).includes(t.id)}));return(null===(n=r.slice(r.findIndex((function(e){return e.id===t.id}))+1,r.length)[0])||void 0===n?void 0:n.id)||"review"}(t.values,e)},substepOf:"Choose actions"}})))||[]),[{name:"review",title:"Remediation review",fields:[{name:q.Ej,component:"review"}]}])}]})}),f.register({hostReducer:(0,_.applyReducerHash)(D,C),resolutionsReducer:(0,_.applyReducerHash)(De,Ce)}),g(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:v.JY,payload:k(e)}}(m.issues)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=50;(0,q.C1)(e,t).forEach((function(e){g(h(e,{page:1,perPage:t}))}))}(y.current)}),[]);var P={"select-playbook":{component:oe,issues:m.issues,systems:m.systems,allSystems:y.current},"review-systems":{component:me,issues:m.issues,systems:m.systems||[],allSystems:y.current,registry:f},"review-actions":{component:he,issues:m.issues},"issue-resolution":{component:Se},review:{component:je,data:m,issuesById:S}},j={"validate-systems":function(){return function(e){return e&&Object.values(e).filter((function(e){return void 0!==(0,o.Z)(e)})).length?void 0:"At least one system must be selected. Actions must be associated to a system to be added to a playbook."}}};return l().createElement(c.Fragment,null,O.schema&&!O.submitted?l().createElement(A.Z,{schema:O.schema,subscription:{values:!0},FormTemplate:function(e){return l().createElement(B.ZP,(0,r.Z)({},e,{showFormControls:!1}))},initialValues:(n={},(0,s.Z)(n,q.Vf,[]),(0,s.Z)(n,q.ko,[]),(0,s.Z)(n,q.vF,{}),(0,s.Z)(n,q.BA,!0),(0,s.Z)(n,q.Tx,{}),(0,s.Z)(n,q.yu,!1),n),componentMapper:qe((u={},(0,s.Z)(u,F.Z.WIZARD,{component:Y.Z,className:"remediations","data-ouia-component-id":"remediation-wizard"}),(0,s.Z)(u,F.Z.TEXT_FIELD,M.Z),u),P),validatorMapper:j,onSubmit:function(e){w({type:"state",payload:{submitted:!0,formValues:e}}),(0,q.ec)(e,m,p,(function(e){return w({type:"state",payload:e})}))},onCancel:function(){return d(!1)}}):null,O.submitted?l().createElement(V.Modal,{isOpen:!0,variant:V.ModalVariant.large,showClose:!1,className:"remediations",hasNoBodyWrapper:!0,"aria-describedby":"wiz-modal-description","aria-labelledby":"wiz-modal-title"},l().createElement(V.Wizard,{className:"remediations",title:"Remediate with Ansible",description:"Add actions to an Ansible Playbook",steps:[{name:"progress",component:l().createElement(Fe,{onClose:function(){w({type:"state",payload:{submitted:!1,id:void 0,failed:!1,formValues:void 0}})},title:"Adding items to the playbook",setOpen:d,submitRemediation:function(){return(0,q.ec)(O.formValues,m,p,(function(e){return w({type:"state",payload:e})}))},setState:function(e){return w({type:"state",payload:e})},state:O}),isFinishedStep:!0}],onClose:function(){w({type:"state",payload:{submitted:!1,id:void 0,failed:!1,formValues:void 0}}),d(!1)}})):null)};Ye.propTypes={setOpen:d().func.isRequired,data:d().shape({issues:d().arrayOf(d().shape({description:d().string,id:d().string})),systems:d().arrayOf(d().string),onRemediationCreated:d().func}).isRequired,basePath:d().string,registry:d().shape({register:d().func}).isRequired};const Ve=function(e){var t=(0,c.useState)(),n=(0,i.Z)(t,2),o=n[0],a=n[1];return(0,c.useEffect)((function(){a((function(){return new Z.ZP({},[j()])}))}),[]),null!=o&&o.store?l().createElement(T.Provider,{store:o.store},l().createElement(Ye,(0,r.Z)({},e,{registry:o}))):null}},47285:(e,t,n)=>{"use strict";n.d(t,{M:()=>O,Z:()=>w});var r=n(87462),o=n(29439),i=n(4942),a=n(93433),s=n(92950),c=n.n(s),l=n(14494),u=n(45697),d=n.n(u),m=n(57283),p=n.n(m),f=n(18546),y=n(93254),v=n.n(y),h=n(86507);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=e.registry,n=e.allSystemsNamed,r=e.allSystems,o=e.hasCheckbox,i=e.disabledColumns,l=e.bulkSelect,u=(0,s.useRef)(null),d=["display_name"];return c().createElement(v(),{hideFilters:{tags:!0,registeredWith:!0,stale:!0},columns:function(e){return e.reduce((function(e,t){return[].concat((0,a.Z)(e),(0,a.Z)(i.includes(t.key)?[]:[b(b({},t),{},{props:b(b({},t.props||{}),{},{isStatic:!d.includes(t.key)})})]))}),[])},noDetail:!0,variant:"compact",hasCheckbox:o,showTags:!0,bulkSelect:l,onRefresh:function(e){return u.current.onRefreshData(e)},ref:u,getEntities:function(e,t,r,o){return(0,h.SG)(t,d,n,o)},onLoad:function(e){var n=e.mergeWithEntities,o=e.INVENTORY_ACTION_TYPES;t.register(n((0,h.Kq)(r,o)))},tableProps:{canSelectAll:!1}})};E.defaultProps={disabledColumns:[],hasCheckbox:!1},E.propTypes={registry:d().instanceOf(f.ZP).isRequired,allSystemsNamed:d().arrayOf(d().shape({id:d().string,name:d().string})).isRequired,allSystems:d().arrayOf(d().string).isRequired,hasCheckbox:d().bool,disabledColumns:d().arrayOf(d().string),bulkSelect:d().object};var O=function(e){var t=(0,s.useState)(),n=(0,o.Z)(t,2),i=n[0],a=n[1];return(0,s.useEffect)((function(){a((function(){return new f.ZP({},[p()])}))}),[]),null!=i&&i.store?c().createElement(l.Provider,{store:i.store},c().createElement("div",{className:"pf-u-pl-lg"},c().createElement(E,(0,r.Z)({},e,{registry:i})))):null};const w=E},45467:()=>{},65088:()=>{}}]);
//# sourceMappingURL=../sourcemaps/7773.d06ad697fa121a7fbe69149b72049605.js.map