"use strict";(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[4026],{86507:(e,t,n)=>{n.d(t,{B3:()=>T,BA:()=>E,C1:()=>U,Ej:()=>w,FH:()=>O,Kq:()=>W,P9:()=>K,QU:()=>N,SG:()=>G,TE:()=>I,Tx:()=>Z,Vf:()=>C,W3:()=>H,Y4:()=>x,Zp:()=>_,_6:()=>B,ar:()=>L,ec:()=>q,kC:()=>h,ko:()=>D,m0:()=>j,mT:()=>k,u9:()=>M,uG:()=>A,vF:()=>P,yu:()=>S});var r=n(15861),i=n(45987),o=n(4942),l=n(93433),s=n(64687),c=n.n(s),a=n(92950),u=n.n(a),d=n(14938),f=n(16075),p=(n(87185),n(18446),n(39133)),v=n(47285),m=["id"],y=["id"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return"".concat(e.charAt(0).toUpperCase()+e.slice(1))}var O="remediations:remediation:write",w="auto-reboot",k="select-playbook",Z="selected-resolutions",E="manual-resolution",S="existing-playbook-selected",j="existing-playbook",P="systems",C="resolutions",D="issues-multiple",_="toggle-bulk-select",N=function(){return"preview"===window.location.pathname.split("/")[1]?"preview/":""},T=function(e){return"".concat("".concat(document.baseURI.replace("preview/","")).concat(N())).concat(window.location.pathname.split("/").filter((function(e){return"preview"!==e&&e.length>0})).shift(),"/remediations").concat(e?"/".concat(e):"")},x=function(e){return(0,l.Z)(new Set(e))},B=function(e,t,n){return 1!==e?n||t+"s":t},I=function(e,t,n,r){return function(e,t){return(0,l.Z)(e).sort((function(e,n){var r=Object.keys(e)[t.index-1];return(e[r]>n[r]?1:e[r]<n[r]?-1:0)*("desc"===t.direction?-1:1)}))}(e,t).reduce((function(e,t,i){var o,s;return[].concat((0,l.Z)(e),[{isOpen:!1,cells:[{title:t.action},{title:u().createElement(a.Fragment,{key:"".concat(i,"-description")},u().createElement("p",{key:"".concat(i,"-resolution")},t.resolution),n&&t.alternate>0&&u().createElement("p",{key:"".concat(i,"-alternate")},t.alternate," alternate"," ",B(t.alternate,"resolution")))},{title:t.needsReboot?u().createElement("div",null,"Required"):u().createElement("div",null,"Not required")},{title:(null===(o=t.systems)||void 0===o?void 0:o.length)||0,props:{isOpen:!1}}]}],(0,l.Z)((null===(s=t.systems)||void 0===s?void 0:s.length)>0?[{parent:2*i,fullWidth:!0,allSystemsNamed:r.filter((function(e){return t.systems.includes(e.id)})),allSystems:t.systems,cells:[{title:u().createElement(d.Bullseye,null,u().createElement(d.Spinner,null)),props:{colSpan:5,className:"pf-m-no-padding"}}]}]:[]))}),[])},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u().createElement(v.M,{allSystemsNamed:e,allSystems:t,disabledColumns:["updated"]})},L=function(e,t,n,r,i){var o=(0,l.Z)(r);r[t].isOpen=n,o[t+1].cells=[{title:R(r[t+1].allSystemsNamed,r[t+1].allSystems)}],i(o)},A=function(e,t){var n,r=(null===(n=t[C].find((function(t){return t.id===e})))||void 0===n?void 0:n.resolutions)||[];if(t[E]&&e in t[Z])return r.filter((function(n){return n.id===t[Z][e]}));if(t[S]){var i,o,l=null===(i=t[j])||void 0===i||null===(o=i.issues)||void 0===o?void 0:o.find((function(t){return t.id===e}));if(l)return r.filter((function(e){return e.id===l.resolution.id}))}return r},q=function(e,t,n,r){var i=1;r({percent:i});var o=t.issues.map((function(t){var n,r,i,o,s,c,a=t.id,u=(null===(n=e[j])||void 0===n||null===(r=n.issues)||void 0===r||null===(i=r.find((function(e){return e.id===a})))||void 0===i||null===(o=i.systems)||void 0===o?void 0:o.map((function(e){return e.id})))||[];return{id:a,resolution:null===(s=A(a,e))||void 0===s||null===(c=s[0])||void 0===c?void 0:c.id,systems:x([].concat((0,l.Z)(e[S]?[]:u),(0,l.Z)(e[P][a]||[])))}})).filter((function(e){return e.systems.length>0})),s=setInterval((function(){i<99&&r({percent:++i})}),(o.length+Object.keys(e[P]).length)/10),c={issues:o,systems:[]},a=(e[j]||{}).id,d=e[S];(d&&f.o6(a,{add:c,auto_reboot:e[w]},n)||f.GZ({name:e[k],add:c,auto_reboot:e[w]},n)).then((function(n){var i,o=n.id;r({id:o,percent:100}),null==t||null===(i=t.onRemediationCreated)||void 0===i||i.call(t,{remediation:{id:o,name},getNotification:function(){return function(e,t,n){var r=n?"created":"updated";return{variant:"success",title:"Playbook ".concat(r),description:u().createElement("span",null,"You have successfully ",r," ",u().createElement("a",{href:T(e)},t),"."),dismissable:!0}}(o,e[k],!d)}})})).catch((function(){r({failed:!0})})).finally((function(){return clearInterval(s)}))},F=function(e,t){var n=!t.payload;return n||(e.selected=x([].concat((0,l.Z)(e.selected),(0,l.Z)(e.rows.map((function(e){return e.id})))))),b(b({},e),{},{selected:n?[]:e.selected,rows:e.rows.map((function(e){return b(b({id:e.id},(0,i.Z)(e,y)),{},{selected:!n})}))})},Y=function(e,t,n){return Array.isArray(e)?e.sort((function(e,r){return(e[t]>r[t]?1:-1)*("asc"===n?1:-1)})):[]},G=function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,i,o,s,a,u,d,f,p,v=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>2&&void 0!==v[2]?v[2]:[],s=v.length>3?v[3]:void 0,a=(v.length>1&&void 0!==v[1]?v[1]:[]).includes(t.orderBy),t.orderBy=a?t.orderBy:void 0,t.orderDirection=a?null===(n=t.orderDirection)||void 0===n?void 0:n.toLowerCase():void 0,o=Y(o,"name",t.orderDirection),u=null==t||null===(r=t.filters)||void 0===r||null===(i=r.hostnameOrId)||void 0===i?void 0:i.toLowerCase(),d=u?o.reduce((function(e,t){return[].concat((0,l.Z)(e),(0,l.Z)(t.name.toLowerCase().includes(u)?[t.id]:[]))}),[]):o.map((function(e){return e.id})),!((f=d.slice((t.page-1)*t.per_page,t.page*t.per_page)).length>0)){e.next=16;break}return e.next=13,s(f,b(b({},t),{},{hasItems:!0,page:1}),!0);case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0={};case 17:return p=e.t0,e.abrupt("return",b(b({},b(b({},p),{},{results:Y(p.results,"display_name",t.orderDirection)})),{},{total:d.length,page:t.page,per_page:t.per_page,orderBy:t.orderBy,orderDirection:t.orderDirection,sortBy:{key:t.orderBy,direction:t.orderDirection}}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e,t){return(0,l.Z)(new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))},W=function(e,t){var n,r=t.LOAD_ENTITIES_FULFILLED;return(0,p.applyReducerHash)((n={SELECT_ENTITY:function(e,t){return function(e,t){var n=t.payload,r=e.selected||[];if(n.selected)r=[].concat((0,l.Z)(r),(0,l.Z)(0===n.id?e.rows.map((function(e){return e.id})):[n.id]));else if(0===n.id){var i=e.rows.map((function(e){return e.id}));r=r.filter((function(e){return!i.includes(e)}))}else r=-1===n.id?[]:r.filter((function(e){return e!==n.id}));return b(b({},e),{},{selected:r})}(e,t)}},(0,o.Z)(n,r,(function(t,n){var r=n.payload;return function(e,t,n){var r=e.selected||[];return e.selected||(r=t||e.rows.map((function(e){return e.id}))),b(b({},e),{},{selected:r,rows:Y(e.rows.map((function(e){var t,n=e.id;return b(b({id:n},(0,i.Z)(e,m)),{},{selected:!(null===(t=r)||void 0===t||!t.includes(n))})})),"display_name",(null==n?void 0:n.direction)||"asc"),sortBy:n})}(t,e,{key:r.orderBy,direction:r.orderDirection})})),(0,o.Z)(n,_,F),n))},M=function(e){var t,n;return(null==e||null===(t=e.split("|"))||void 0===t||null===(n=t.slice(-1))||void 0===n?void 0:n[0])||e},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(r){var i,o=(null===(i=n.find((function(e){return e.id===r.id})))||void 0===i?void 0:i.resolutions)||[],s=(null==o?void 0:o[0])||{},c=s.description,a=s.needs_reboot;return{action:e.find((function(e){return e.id===r.id})).description,resolution:c,needsReboot:a,systems:x([].concat((0,l.Z)(r.systems||[]),(0,l.Z)(t))),id:r.id,alternate:(null==o?void 0:o.length)-1}})).filter((function(e){return e.alternate>0}))},K=function(e,t){var n=e.split(":"),r=t.split(":");return n.length===r.length&&n.every((function(e,t){return e===r[t]||"*"===e||"*"===r[t]}))}},47285:(e,t,n)=>{n.d(t,{M:()=>w,Z:()=>k});var r=n(87462),i=n(29439),o=n(4942),l=n(93433),s=n(92950),c=n.n(s),a=n(28216),u=n(45697),d=n.n(u),f=n(57283),p=n.n(f),v=n(18546),m=n(93254),y=n.n(m),g=n(86507);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=e.registry,n=e.allSystemsNamed,r=e.allSystems,i=e.hasCheckbox,o=e.disabledColumns,a=e.bulkSelect,u=(0,s.useRef)(null),d=["display_name"];return c().createElement(y(),{hideFilters:{tags:!0,registeredWith:!0,stale:!0},columns:function(e){return e.reduce((function(e,t){return[].concat((0,l.Z)(e),(0,l.Z)(o.includes(t.key)?[]:[h(h({},t),{},{props:h(h({},t.props||{}),{},{isStatic:!d.includes(t.key)})})]))}),[])},noDetail:!0,variant:"compact",hasCheckbox:i,showTags:!0,bulkSelect:a,ref:u,getEntities:function(e,t,r,i){return(0,g.SG)(t,d,n,i)},onLoad:function(e){var n=e.mergeWithEntities,i=e.INVENTORY_ACTION_TYPES;t.register(n((0,g.Kq)(r,i)))},tableProps:{canSelectAll:!1}})};O.defaultProps={disabledColumns:[],hasCheckbox:!1},O.propTypes={registry:d().instanceOf(v.ZP).isRequired,allSystemsNamed:d().arrayOf(d().shape({id:d().string,name:d().string})).isRequired,allSystems:d().arrayOf(d().string).isRequired,hasCheckbox:d().bool,disabledColumns:d().arrayOf(d().string),bulkSelect:d().object};var w=function(e){var t=(0,s.useState)(),n=(0,i.Z)(t,2),o=n[0],l=n[1];return(0,s.useEffect)((function(){l((function(){return new v.ZP({},[p()])}))}),[]),null!=o&&o.store?c().createElement(a.Provider,{store:o.store},c().createElement("div",{className:"pf-u-pl-lg"},c().createElement(O,(0,r.Z)({},e,{registry:o})))):null};const k=O}}]);
//# sourceMappingURL=../sourcemaps/4026.03e3d3e21869bbe41906e974039f01b0.js.map