(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[530],{32009:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(94015),o=n.n(a),r=n(23645),l=n.n(r)()(o());l.push([e.id,".remediations .ins-c-card__playbook-log .ins-c-primary-toolbar{padding:0}.remediations .ins-c-card__playbook-log .pf-c-toolbar{padding-left:0;padding-right:0}.remediations .ins-c-card__playbook-log .ins-c-tag-count{padding:0}.remediations .ins-c-card__playbook-log .pf-c-data-toolbar__content{padding:0px}\n","",{version:3,sources:["webpack://./src/components/ExecutorDetails.scss"],names:[],mappings:"AAAA,+DACiD,SAAS,CAD1D,sDACmG,cAAc,CAAC,eAAe,CADjI,yDAC6K,SAAS,CADtL,oEAC6O,WAAW",sourcesContent:[".remediations{\n.ins-c-card__playbook-log .ins-c-primary-toolbar{padding:0}.ins-c-card__playbook-log .pf-c-toolbar{padding-left:0;padding-right:0}.ins-c-card__playbook-log .ins-c-tag-count{padding:0}.ins-c-card__playbook-log .pf-c-data-toolbar__content{padding:0px}\n\n}"],sourceRoot:""}]);const i=l},19671:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(94015),o=n.n(a),r=n(23645),l=n.n(r)()(o());l.push([e.id,".remediations .ins-c-job-output__title{padding-bottom:var(--pf-global--spacer--lg)}.remediations .ins-c-job-output{max-height:500px;padding:0 !important;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:solid solid none solid;white-space:pre-wrap}.remediations .ins-c-job-output code:first-of-type{padding:8px;border-right:2px solid var(--pf-global--Color--light-300);margin-right:8px}.remediations .ins-c-job-output code:nth-of-type(2){position:relative;top:8px;white-space:pre-wrap}.remediations .ins-c-job-output__finished{border-bottom:2px solid var(--pf-global--Color--light-300)}.remediations .ins-l-playbook-running{background:#f0f0f0;padding:15px;display:flex;justify-content:center;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:none solid solid solid}\n","",{version:3,sources:["webpack://./src/components/SystemDetails.scss"],names:[],mappings:"AAAA,uCACyB,2CAA2C,CADpE,gCACuF,gBAAgB,CAAC,oBAAoB,CAAC,+CAA+C,CAAC,gBAAgB,CAAC,mCAAmC,CAAC,oBAAoB,CADtP,mDAC4R,WAAW,CAAC,yDAAyD,CAAC,gBAAgB,CADlX,oDACyZ,iBAAiB,CAAC,OAAO,CAAC,oBAAoB,CADvc,0CACoe,0DAA0D,CAD9hB,sCACujB,kBAAkB,CAAC,YAAY,CAAC,YAAY,CAAC,sBAAsB,CAAC,+CAA+C,CAAC,gBAAgB,CAAC,mCAAmC",sourcesContent:[".remediations{\n.ins-c-job-output__title{padding-bottom:var(--pf-global--spacer--lg)}.ins-c-job-output{max-height:500px;padding:0 !important;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:solid solid none solid;white-space:pre-wrap}.ins-c-job-output code:first-of-type{padding:8px;border-right:2px solid var(--pf-global--Color--light-300);margin-right:8px}.ins-c-job-output code:nth-of-type(2){position:relative;top:8px;white-space:pre-wrap}.ins-c-job-output__finished{border-bottom:2px solid var(--pf-global--Color--light-300)}.ins-l-playbook-running{background:#f0f0f0;padding:15px;display:flex;justify-content:center;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:none solid solid solid}\n\n}"],sourceRoot:""}]);const i=l},7521:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var a=n(59713),o=n.n(a),r=n(63038),l=n.n(r),i=n(77865),s=n.n(i),c=n(87016),u=n(45697),m=n.n(u),d=n(47194),p=n(99166),b=n(33739),g=n(86350),y=n(48716),f=n(39173),A=n(62410),E=n(56455),C=n(18213),k=n(89421),_=n(55056),h=n(59066),v=n(37477),S=n(73251),R=n(37323),x=n(78239),B=n(5756),D=n(38538),I=n(66650),Z=n(3454),j=n(94184),P=n.n(j);n(9774),D.Z.registerLanguage("yaml",I.Z);var w=function(e){var t=e.systemId,n=e.playbookRunSystemDetails,a=P()("ins-c-job-output",o()({},"ins-c-job-output__finished","running"!==n.status));return s().createElement(s().Fragment,null,s().createElement(_.Title,{headingLevel:"h4",size:"xl",className:"ins-c-job-output__title"},"Playbook log"),t&&t===n.system_id?s().createElement(s().Fragment,null,s().createElement(D.Z,{language:"yaml",showLineNumbers:!0,style:Z.Z,className:a},n&&n.console||""),"running"===n.status&&s().createElement("div",{className:"ins-l-playbook-running"},s().createElement(_.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):s().createElement(E.Z,{size:"lg"}))};w.propTypes={systemId:m().string,status:m().string,console:m().string,playbookRunSystemDetails:m().shape({system_id:m().string,status:m().string,console:m().string})},w.defaultProps={playbookRunSystemDetails:{}};const N=(0,c.connect)((function(e){return{playbookRunSystemDetails:e.playbookRunSystemDetails}}))(w);var O=n(43439);n(60884);const T=function(){return s().createElement(s().Fragment,null,s().createElement(y.Z,null,s().createElement(_.Breadcrumb,null,s().createElement(_.BreadcrumbItem,null,s().createElement(E.Z,{size:"lg"})),s().createElement(_.BreadcrumbItem,null,s().createElement(E.Z,{size:"lg"})),s().createElement(_.BreadcrumbItem,{isActive:!0},s().createElement(E.Z,{size:"lg"}))),s().createElement(_.Stack,{hasGutter:!0},s().createElement(_.StackItem,null,s().createElement(f.Z,{title:s().createElement(E.Z,{size:"lg"})})),s().createElement(_.StackItem,null,s().createElement(_.Split,{hasGutter:!0},s().createElement(_.SplitItem,null,s().createElement(S.Z,{className:"ins-c-playbookSummary__settings",title:"Run on"},s().createElement(E.Z,{size:"lg"}))),s().createElement(_.SplitItem,null,s().createElement(S.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},s().createElement(E.Z,{size:"lg"}))),s().createElement(_.SplitItem,null,s().createElement(S.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},s().createElement(E.Z,{size:"lg"}))))))),s().createElement(g.Z,null,s().createElement(_.Stack,{hasGutter:!0},s().createElement(_.Card,null,s().createElement(_.CardHeader,{className:"ins-m-card__header-bold"},s().createElement(_.Button,null,"Download playbook")),s().createElement(_.CardBody,null,s().createElement(O.Z,null))))))};n(77562);var z=function(e){var t=e.name;return s().createElement(_.Bullseye,null,s().createElement(_.EmptyState,null,s().createElement(_.EmptyStateIcon,{className:"ins-c-remediations-failure",icon:h.ExclamationCircleIcon}),s().createElement(_.Title,{headingLevel:"h5",size:"lg"},"Run failed"),s().createElement(_.EmptyStateBody,null,"Playbook failed to run on ",t,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),s().createElement(_.Button,{variant:"link"},"Learn more")))};z.propTypes={name:m().string};const L=z;var Y,F=n(24274),G=(n(82598),n(38881)),W=n(55206);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var H=function(e){var t=e.match.params,n=t.executor_id,a=t.run_id,r=t.id,c=e.remediation,u=e.playbookRun,m=e.playbookRunSystems,R=e.playbookRunSystemDetails,D=e.getPlaybookRun,I=e.getPlaybookRunSystems,Z=e.getPlaybookRunSystemDetails,j=e.onCollapseInventory,P=e.loadRemediation,w=(0,i.useState)({}),O=l()(w,2),z=O[0],H=O[1],K=(0,i.useState)([]),X=l()(K,2),q=X[0],J=X[1],M=(0,i.useState)(""),Q=l()(M,2),U=Q[0],$=Q[1],ee=(0,i.useState)(1),te=l()(ee,2),ne=te[0],ae=te[1],oe=(0,i.useState)(50),re=l()(oe,2),le=re[0],ie=re[1],se=(0,i.useState)(),ce=l()(se,2),ue=ce[0],me=ce[1],de=(0,i.useState)(!1),pe=l()(de,2),be=pe[0],ge=pe[1],ye=(0,i.useState)(),fe=l()(ye,2),Ae=fe[0],Ee=fe[1],Ce=(0,i.useRef)(null),ke=(0,F.T)({id:"default"}),_e=function(e){Ce&&Ce.current&&(I(r,a,n,e.per_page,e.per_page*(e.page-1)),ae(e.page),ie(e.per_page),Ce.current.onRefreshData(e))};(0,i.useEffect)((function(){return P(r),D(r,a),Ee((function(){return(0,p.Z)(I,500)})),function(){Y&&clearInterval(Y)}}),[]),(0,i.useEffect)((function(){u&&u.data&&H(u.data.executors.find((function(e){return e.executor_id===n}))||{}),"pending"!==m.status&&I(r,a,n,le,le*(ne-1),U)}),[u]),(0,i.useEffect)((function(){be||D(r,a),"running"!==(0,B.fb)(R.status)&&Y&&clearInterval(Y),ge(!1)}),[R.status]),(0,i.useEffect)((function(){J((function(){return m.data.map((function(e){var t=e.system_id;return{id:t,display_name:e.system_name,status:e.status,isOpen:ue===t,children:s().createElement(N,{systemId:t})}}))}))}),[m]);var he,ve=function(e){return s().createElement(g.Z,null,s().createElement(_.Stack,{hasGutter:!0},s().createElement(_.Card,{className:"ins-c-card__playbook-log"},s().createElement(_.CardBody,null,s().createElement(b.Z,{ref:Ce,onLoad:function(e){var t=e.INVENTORY_ACTION_TYPES,n=e.mergeWithEntities;return(0,W.z2)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n(v.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:t,renderStatus:function(e){return s().createElement("div",{className:"ins-c-remediations-status-bar"},(0,B.Nv)((0,B.fb)(e)))},urlBuilder:ke})())))},items:"pending"!==m.status?q:[],isLoaded:"pending"!==m.status,onRefresh:_e,page:ne,total:m.meta.total,perPage:le,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===e?function(e,t,n,o){var r=o.id;ge(!0),n?(me(r),Y&&clearInterval(Y),Z(c.id,a,r),Y=setInterval((function(){return Z(c.id,a,r)}),5e3)):(me(void 0),clearInterval(Y)),j(n,r)}:function(e,t,n,o){var r=o.id;ge(!0),n?(me(r),Z(c.id,a,r)):me(void 0),clearInterval(Y),j(n,r)}},s().createElement(_.Toolbar,null,s().createElement(_.ToolbarContent,null,s().createElement(_.ToolbarItem,null,s().createElement(C.Z,{items:[{value:"display_name",label:"Name",filterValues:{placeholder:"Filter by name",type:k.Yu.text,value:U,onChange:function(e,t){$(t),ae(1),Ae(r,a,n,le,0,t)}}}]})),s().createElement(_.ToolbarItem,null,s().createElement(_.Button,{variant:"secondary",onClick:function(){return(0,x.rN)(c.id)}},"Download playbook")))))))))},Se=(0,i.useContext)(G.B);return c&&z&&u&&u.data?s().createElement(s().Fragment,null,s().createElement(y.Z,null,s().createElement(_.Breadcrumb,null,s().createElement(_.BreadcrumbItem,null,s().createElement(d.Link,{to:"/"}," Remediations ")),s().createElement(_.BreadcrumbItem,null,s().createElement(d.Link,{to:"/".concat(c.id)}," ",c.name," ")),s().createElement(_.BreadcrumbItem,null,s().createElement(d.Link,{to:"/".concat(c.id,"/").concat(a)},s().createElement(A.Z,{type:"exact",date:u.data.created_at}))),s().createElement(_.BreadcrumbItem,{isActive:!0}," ",z.executor_name," ")),s().createElement(_.Stack,{hasGutter:!0},s().createElement(_.StackItem,null,s().createElement(f.Z,{title:"Running"===(0,B.fb)(z.status)?s().createElement(s().Fragment,null,s().createElement(h.InProgressIcon,{className:"ins-c-remediations-running","aria-label":"connection status"}),z.executor_name):z.executor_name})),s().createElement(_.StackItem,null,s().createElement(_.Split,{hasGutter:!0},s().createElement(_.SplitItem,null,s().createElement(S.Z,{className:"ins-c-playbookSummary__settings",title:"Run status"},z.status?s().createElement(B.kf,{executorStatus:z.status,counts:z.counts,permission:Se}):s().createElement(E.Z,{size:"lg"}))),s().createElement(_.SplitItem,null,s().createElement(S.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},"".concat(u.data.created_by.first_name," ").concat(u.data.created_by.last_name))),s().createElement(_.SplitItem,null,s().createElement(S.Z,{className:"ins-c-playbookSummary__settings",title:"Run on"},s().createElement(A.Z,{type:"exact",date:u.data.created_at}))))))),{running:ve(he=(0,B.fb)(z.status)),success:ve(he),failure:ve(he),canceled:ve(he),epicFailure:s().createElement(g.Z,null,s().createElement(_.Stack,{hasGutter:!0},s().createElement(_.Card,null,s().createElement(_.CardHeader,{className:"ins-m-card__header-bold"},s().createElement(_.Button,{variant:"secondary",onClick:function(){return(0,x.rN)(c.id)}},"Download playbook")),s().createElement(_.CardBody,null,s().createElement(L,{name:z.executor_name})))))}[(0,B.fb)(he)]):s().createElement(T,null)};H.propTypes={match:m().object,remediation:m().object,playbookRun:m().object,playbookRunSystems:m().object,playbookRunSystemDetails:m().object,getPlaybookRun:m().func,getPlaybookRunSystems:m().func,getPlaybookRunSystemDetails:m().func,onCollapseInventory:m().func,loadRemediation:m().func},H.defaultProps={remediation:{}};const K=(0,c.connect)((function(e){var t=e.playbookRuns,n=e.playbookRun,a=e.playbookRunSystems,o=e.playbookRunSystemDetails,r=e.selectedRemediation;return{playbookRuns:t.data,playbookRun:n,playbookRunSystemDetails:o,playbookRunSystems:a,remediation:r.remediation}}),(function(e){return{getPlaybookRuns:function(t){return e((0,R.getPlaybookRuns)(t))},getPlaybookRun:function(t,n){return e((0,R.getPlaybookRun)(t,n))},getPlaybookRunSystems:function(t,n,a,o,r,l){return e((0,R.getPlaybookRunSystems)(t,n,a,o,r,l))},getPlaybookRunSystemDetails:function(t,n,a){return e((0,R.getPlaybookRunSystemDetails)(t,n,a))},onCollapseInventory:function(t,n){return e((0,R.expandInventoryTable)(n,t))},loadRemediation:function(t){return e((0,R.loadRemediation)(t))}}}))(H)},82598:(e,t,n)=>{"use strict";var a=n(93379),o=n.n(a),r=n(32009),l=o()(r.default,{insert:"head",singleton:!1});if(!r.default.locals||e.hot.invalidate){var i=r.default.locals;e.hot.accept(32009,(t=>{r=n(32009),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,r.default.locals)?(i=r.default.locals,l(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),r.default.locals},9774:(e,t,n)=>{"use strict";var a=n(93379),o=n.n(a),r=n(19671),l=o()(r.default,{insert:"head",singleton:!1});if(!r.default.locals||e.hot.invalidate){var i=r.default.locals;e.hot.accept(19671,(t=>{r=n(19671),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,r.default.locals)?(i=r.default.locals,l(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),r.default.locals}}]);
//# sourceMappingURL=ExecutorDetails.f524f5237657892eabda.js.map