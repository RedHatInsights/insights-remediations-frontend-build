"use strict";(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[460],{57869:(e,t,n)=>{n.d(t,{B:()=>ue,Z:()=>me});var a=n(29439),r=n(45697),o=n.n(r),i=n(92950),s=n.n(i),c=n(55140),l=n(334),u=n(28216),d=n(87462),m=n(15861),p=n(4942),f=n(87757),E=n.n(f),y=n(14938),g=n(50289),h=n(16075),_=n(80123),v=n(39173),b=n(14748),I=n(83045),S=n(97481),C=n(95274),T=n(52017),k=n(62410),R=n(83215),O=n(29144);function P(e,t,n){Promise.all(e.map((function(e){return n(e),e.payload}))).then(t)}var N=function(e){var t,n,r=e.remediation,o=e.remediationIdx,c=e.archived,d=e.selector,m=e.setExecuteOpen,p=e.update,f=e.loadRemediation,E=e.getConnectionStatus,h=e.downloadPlaybook,_=e.permission,v=(0,i.useState)(!1),b=(0,a.Z)(v,2),I=b[0],S=b[1],C=(0,i.useState)(c),T=(0,a.Z)(C,2),N=T[0],w=T[1],D=(0,u.useDispatch)(),x=[],L=function(){P([(0,g.patchRemediation)(r.id,{archived:!N})],(function(){w(!N),p(!0)}),D)};return x.push(s().createElement(y.DropdownItem,{key:"execute",id:"execute",isDisabled:!_.isReceptorConfigured||N,className:"".concat(!_.permissions.execute&&"ins-m-not-entitled"),onClick:function(){m(!1),P([f(r.id),E(r.id)],(function(){m(!0),S(!1)}),D)}},"Execute playbook")),x.push(s().createElement(y.DropdownItem,{key:"download",onClick:function(){h([r.id]),S(!1),(0,O.q)({title:"Preparing playbook for download",description:"Once complete, your download will start automatically.",variant:"info",dismissable:!0,autoDismiss:!0})}},"Download playbook")),N?x.push(s().createElement(y.DropdownItem,{key:"restore",onClick:function(){L(),S(!1),D((0,R.wN)({variant:"info",title:"Restored playbook ".concat(r.name)}))}},"Restore playbook")):x.push(s().createElement(y.DropdownItem,{key:"archive",onClick:function(){L(),S(!1),D((0,R.wN)({variant:"info",title:"Archived playbook ".concat(r.name)}))}},"Archive playbook")),s().createElement(y.CardHeader,{className:"rem-c-playbook-card__header"},s().createElement(y.CardActions,null,s().createElement(y.Dropdown,{key:"dropdown",id:"".concat(r.id,"-dropdown"),isOpen:I,isPlain:!0,onSelect:function(e){return e},toggle:s().createElement(y.KebabToggle,{id:"".concat(r.id,"-toggle"),onToggle:function(e){return S(e)}}),dropdownItems:x,position:"right"}),s().createElement("input",{type:"checkbox",name:"".concat(r.id,"-checkbox"),checked:d.getSelectedIds().includes(r.id),onChange:function(e){d.props.onSelect(e,e.target.checked,o)},"aria-label":"".concat(r.id,"-checkbox")})),s().createElement(y.CardTitle,null,s().createElement(y.Stack,{hasGutter:!0},s().createElement(y.StackItem,{className:"rem-c-playbook-card__header--title"},s().createElement("span",{className:"pf-u-mr-sm"},(t=r.name,n=r.id,s().createElement(l.Link,{to:"/".concat(n),className:"rem-c-playbook-card__header--name"},t))),N&&s().createElement(y.Label,null,"Archived")),s().createElement(y.StackItem,{className:"rem-c-playbook-card__header--last-modified"},"Last modified: ",s().createElement(k.Z,{date:r.updated_at})))))};N.propTypes={remediation:r.PropTypes.object.isRequired,remediationIdx:r.PropTypes.number.isRequired,archived:r.PropTypes.bool.isRequired,selector:r.PropTypes.object.isRequired,setExecuteOpen:r.PropTypes.func.isRequired,update:r.PropTypes.func.isRequired,loadRemediation:r.PropTypes.func.isRequired,getConnectionStatus:r.PropTypes.func.isRequired,downloadPlaybook:r.PropTypes.func.isRequired,permission:r.PropTypes.object.isRequired};var w=function(e){var t,n,a=e.remediation,r=e.remediationIdx,o=e.archived,i=e.selector,c=e.setExecuteOpen,l=e.update,u=e.loadRemediation,d=e.getConnectionStatus,m=e.downloadPlaybook,p=e.permission;return s().createElement(y.Card,{className:"rem-c-playbook-card",isCompact:!0},s().createElement(N,{remediation:a,remediationIdx:r,archived:o,selector:i,setExecuteOpen:c,update:l,loadRemediation:u,getConnectionStatus:d,downloadPlaybook:m,permission:p}),s().createElement(y.CardBody,{className:"rem-c-playbook-card__body"},s().createElement(y.Split,{hasGutter:!0,className:"rem-c-playbook-card__body--split"},s().createElement(y.SplitItem,null,s().createElement(y.Stack,null,s().createElement(y.StackItem,{className:"rem-c-playbook-card__body--titles"},"Systems"),s().createElement(y.StackItem,{className:"rem-c-playbook-card__body--values"},a.system_count))),s().createElement(y.SplitItem,null,s().createElement(y.Stack,null,s().createElement(y.StackItem,{className:"rem-c-playbook-card__body--titles"},"Complete actions"),s().createElement(y.StackItem,{className:"rem-c-playbook-card__body--values"},(t=a.resolved_count)===(n=a.issue_count)&&0!==t?s().createElement("div",null,s().createElement(T.CheckCircleIcon,{className:"rem-c-success"})," ",t," of  ",n):"".concat(t," of ").concat(n)))))),function(e,t,n){return n?s().createElement(y.Progress,{className:"rem-c-playbook-card__progress rem-c-playbook-card__progress--archived",value:100,measureLocation:y.ProgressMeasureLocation.none}):e===t&&0!==e?s().createElement(y.Progress,{className:"rem-c-playbook-card__progress rem-c-playbook-card__progress--success",value:100,measureLocation:y.ProgressMeasureLocation.none}):s().createElement(y.Progress,{className:"rem-c-playbook-card__progress",value:e/t*100,measureLocation:y.ProgressMeasureLocation.none})}(a.resolved_count,a.issue_count,o))};w.propTypes={remediation:r.PropTypes.object.isRequired,remediationIdx:r.PropTypes.number.isRequired,archived:r.PropTypes.bool.isRequired,selector:r.PropTypes.object.isRequired,setExecuteOpen:r.PropTypes.func.isRequired,executeOpen:r.PropTypes.bool.isRequired,update:r.PropTypes.func.isRequired,loadRemediation:r.PropTypes.func.isRequired,getConnectionStatus:r.PropTypes.func.isRequired,downloadPlaybook:r.PropTypes.func.isRequired,permission:r.PropTypes.object.isRequired};var D=function(e){var t=e.archivedCount,n=e.setShowArchived;return s().createElement(y.Bullseye,{className:"rem-c-no-remediations pf-u-pt-2xl"},s().createElement(y.EmptyState,null,s().createElement(y.EmptyStateIcon,{icon:T.WrenchIcon,size:"sm"}),s().createElement(y.Title,{size:"lg",headingLevel:"h5"},"No remediation playbooks yet"),s().createElement(y.EmptyStateBody,null,"Insights uses Ansible Playbooks to remediate or mitigate configuration problems on your systems, and apply patches.",s().createElement("br",null),s().createElement("br",null),"To create a remediation playbook, select issues identified in Insights applications, then select",s().createElement("strong",null," Remediate"),"."),s().createElement("br",null),t>0&&s().createElement(y.Button,{variant:"link",onClick:function(){return n(!0)},ouiaId:"show-archived-playbooks"},"Show ",t," archived playbooks")))};D.propTypes={archivedCount:o().number.isRequired,setShowArchived:o().func.isRequired};var x=[null,"name","system_count","issue_count","updated_at"];function L(e){var t,n,r=e.remediations,o=e.loadRemediations,c=e.sorter,l=e.filter,d=e.selector,m=e.pagination,p=e.shouldUpdateGrid,f=e.setShouldUpdateGrid,E=e.setRemediationCount,_=e.showArchived,v=e.setShowArchived,I=r.value,T=r.status,k=[],R=(0,i.useContext)(ue),O=(0,i.useState)(!1),P=(0,a.Z)(O,2),N=P[0],L=P[1],A=(0,i.useState)(!1),Z=(0,a.Z)(A,2),F=Z[0],U=Z[1],j=(0,u.useSelector)((function(e){return e.selectedRemediation})),B=(0,u.useSelector)((function(e){return e.connectionStatus})),V=(0,u.useSelector)((function(e){return e.runRemediation})),G=(0,u.useDispatch)();return(0,i.useEffect)((function(){var e;!0===p&&(f(!1),e=x[c.sortBy],_?o(e,c.sortDir,l.value,m.pageSize,m.offset):o(e,c.sortDir,l.value,m.pageSize,m.offset,void 0,!0))}),[p]),(0,i.useEffect)((function(){"changed"===V.status?((0,g.getConnectionStatus)(j.remediation.id),U(!0)):"fulfilled"===V.status&&L(!1)}),[V.status]),(0,i.useEffect)((function(){r.value&&E(I.meta.total)}),[r]),"fulfilled"!==T?s().createElement(s().Fragment,null,s().createElement(b.Z,null,s().createElement(S.Z,{centered:!0}))):0===(k=_?null==I||null===(t=I.data)||void 0===t?void 0:t.map((function(e){return e})):null==I||null===(n=I.data)||void 0===n?void 0:n.reduce((function(e,t){return!0!==t.archived&&e.push(t),e}),[])).length?s().createElement(D,{archivedCount:I.data.length,setShowArchived:v}):(d.register(k),s().createElement(s().Fragment,null,s().createElement(y.Stack,{hasGutter:!0},s().createElement(y.StackItem,null,N&&s().createElement(C.l,{isOpen:N,onClose:function(){U(!1),L(!1)},showRefresh:F,remediationId:j.remediation.id,data:B.data,etag:B.etag,isLoading:"fulfilled"!==B.status,issueCount:j.remediation.issues.length,remediationStatus:V.status,runRemediation:function(e,t){G((0,g.runRemediation)(e,t)).then((function(){return G((0,g.getPlaybookRuns)(e))}))},setEtag:function(e){G((0,g.setEtag)(e))}})),s().createElement(y.StackItem,null,s().createElement(y.Grid,{sm:12,md:6,lg:4,hasGutter:!0},k.map((function(e,t){return s().createElement(y.GridItem,{key:e.id},s().createElement(w,{remediation:e,remediationIdx:t,archived:e.archived,selector:d,setExecuteOpen:L,executeOpen:N,update:f,loadRemediation:g.loadRemediation,getConnectionStatus:g.getConnectionStatus,downloadPlaybook:h.rN,permission:R}))})))))))}L.propTypes={remediations:o().object.isRequired,loadRemediations:o().func.isRequired,sorter:o().object.isRequired,filter:o().object.isRequired,selector:o().object.isRequired,pagination:o().object.isRequired,shouldUpdateGrid:o().bool.isRequired,setShouldUpdateGrid:o().func.isRequired,setRemediationCount:o().func.isRequired,showArchived:o().bool.isRequired,setShowArchived:o().func.isRequired};const A=L;var Z=n(45987),F=n(93433),U=n(15671),j=n(43144),B=n(97326),V=n(60136),G=n(82963),M=n(61120),H=n(54352),q=["dataProvider","children"];var Y=function(e){(0,V.Z)(o,e);var t,n,a,r=(n=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,M.Z)(n);if(a){var r=(0,M.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,G.Z)(this,e)});function o(e){var t;return(0,U.Z)(this,o),t=r.call(this,e),(0,p.Z)((0,B.Z)(t),"isEnabled",(function(){return"true"===localStorage.getItem("remediations:debug")})),(0,p.Z)((0,B.Z)(t),"dataProviderPing",(function(){return{issues:[{id:"test:ping",description:"Ansible ping"}],systems:t.state.allHosts}})),(0,p.Z)((0,B.Z)(t),"dataProviderA1",(function(){return{issues:[{id:"vulnerabilities:CVE-2019-3815",description:"CVE-2019-3815"}],systems:t.state.allHosts}})),(0,p.Z)((0,B.Z)(t),"dataProviderA2",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read",systems:t.state.allHosts.slice(0,5)}]}})),(0,p.Z)((0,B.Z)(t),"dataProviderC1",(function(){return{issues:[{id:"vulnerabilities:CVE-2019-3815",description:"CVE-2019-3815"},{id:"vulnerabilities:CVE-2018-16865",description:"CVE-2018-16865"},{id:"vulnerabilities:CVE-2017-17712",description:"CVE-2017-17712"}],systems:t.state.allHosts.slice(-1)}})),(0,p.Z)((0,B.Z)(t),"dataProviderC2",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read"},{id:"advisor:rhnsd_pid_world_write|RHNSD_PID_WORLD_WRITABLE",description:"Code injection risk or wrong pid altering when rhnsd daemon file rhnsd.pid is world writable, due to a bug in rhnsd"}],systems:t.state.allHosts.slice(-1)}})),(0,p.Z)((0,B.Z)(t),"dataProviderC3",(function(){return{issues:[].concat((0,F.Z)(t.dataProviderC1().issues),(0,F.Z)(t.dataProviderC2().issues)),systems:t.state.allHosts.slice(-1)}})),(0,p.Z)((0,B.Z)(t),"dataProviderC4",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read"},{id:"advisor:corosync_enable_rt_schedule|COROSYNC_NOT_ENABLE_RT",description:"Cluster nodes are frequently fenced as realtime is not enabled in corosync"},{id:"advisor:CVE_2017_6074_kernel|KERNEL_CVE_2017_6074",description:"Kernel vulnerable to local privilege escalation via DCCP module (CVE-2017-6074)"}],systems:t.state.allHosts.slice(-1)}})),(0,p.Z)((0,B.Z)(t),"dataProviderC5",(function(){return{issues:[{id:"advisor:unsupported",description:"Unsupported issue"},{id:"vulnerabilities:CVE-2019-999999",description:"Unsupported issue"},{id:"advisor:CVE_2017_6074_kernel|KERNEL_CVE_2017_6074",description:"Kernel vulnerable to local privilege escalation via DCCP module (CVE-2017-6074)"}],systems:t.state.allHosts.slice(-1)}})),(0,p.Z)((0,B.Z)(t),"dataProviderD1",(function(){return{issues:[{id:"vulnerabilities:CVE-2019-3815",description:"CVE-2019-3815",systems:t.state.allHosts.slice(0,1)},{id:"vulnerabilities:CVE-2018-16865",description:"CVE-2018-16865",systems:t.state.allHosts.length>1?t.state.allHosts.slice(1,2):t.state.allHosts.slice(0,1)},{id:"vulnerabilities:CVE-2017-17712",description:"CVE-2017-17712"}],systems:t.state.allHosts}})),(0,p.Z)((0,B.Z)(t),"dataProviderD2",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read",systems:t.state.allHosts.slice(0,1)},{id:"advisor:rhnsd_pid_world_write|RHNSD_PID_WORLD_WRITABLE",description:"Code injection risk or wrong pid altering when rhnsd daemon file rhnsd.pid is world writable, due to a bug in rhnsd",systems:t.state.allHosts.slice(1)}]}})),t.state={allHosts:!1},t}return(0,j.Z)(o,[{key:"componentDidMount",value:(t=(0,m.Z)(E().mark((function e(){var t=this;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isEnabled()&&(0,h.yY)().then((function(e){return t.setState({allHosts:e.results.map((function(e){return e.id}))})}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(!this.isEnabled())return null;var t=this.state.allHosts,n=function(n){var a=n.dataProvider,r=n.children,o=(0,Z.Z)(n,q);return s().createElement(y.SplitItem,null,s().createElement(H.default,(0,d.Z)({dataProvider:a,isDisabled:!t||!t.length,onRemediationCreated:e.props.onRemediationCreated},o),r))};return s().createElement(s().Fragment,null,s().createElement(y.Stack,{hasGutter:!0},s().createElement(y.StackItem,null,s().createElement(y.Split,{hasGutter:!0},["ping","alwaysFail","failHalfTheTime","pause1m","pause5m","pause15m","pauseRandom15m","pause1h","pause6h"].map((function(t){return s().createElement(n,{key:t,dataProvider:function(){return{issues:[{id:"test:".concat(t),description:"Ansible ".concat(t," test playbook")}],systems:e.state.allHosts}}},t)})))),s().createElement(y.StackItem,null,s().createElement(y.Split,{hasGutter:!0},s().createElement(n,{dataProvider:this.dataProviderA1},"A1"),s().createElement(n,{dataProvider:this.dataProviderA2},"A2"),s().createElement(n,{dataProvider:this.dataProviderC1},"C1"),s().createElement(n,{dataProvider:this.dataProviderC2},"C2"),s().createElement(n,{dataProvider:this.dataProviderC3},"C3"),s().createElement(n,{dataProvider:this.dataProviderC4},"C4 (multires)"),s().createElement(n,{dataProvider:this.dataProviderC5},"C5 (unsupported)"),s().createElement(n,{dataProvider:this.dataProviderD1},"D1"),s().createElement(n,{dataProvider:this.dataProviderD2},"D2")))))}}]),o}(s().Component);Y.propTypes={onRemediationCreated:o().func},Y.defaultProps={onRemediationCreated:function(e){return e}};const K=Y;var z=n(78762),W=n(10170),J=n(11178),Q=n(58610),X=n(24350),$=n.n(X);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=[null,"name","system_count","issue_count","updated_at"];const ae=function(){var e,t=(0,c.Z)();(0,i.useEffect)((function(){t.updateDocumentTitle("Remediations | Red Hat Insights")}),[t]);var n=(0,i.useState)("dismissed"!==localStorage.getItem("remediations:receptorBannerStatus")),r=(0,a.Z)(n,2),o=r[0],l=r[1],d=(0,J.sk)(4,"desc"),p=(0,J.L0)(),f=(0,J.v9)(),S=(0,J.h0)(),C=(0,i.useState)(0),T=(0,a.Z)(C,2),k=T[0],O=T[1],P=(0,i.useState)(""),N=(0,a.Z)(P,2),w=N[0],D=N[1],x=(0,i.useState)(!1),L=(0,a.Z)(x,2),Z=L[0],F=L[1],U=(0,i.useState)("true"===localStorage.getItem("remediations:showArchived")),j=(0,a.Z)(U,2),B=j[0],V=j[1],G=(0,i.useState)(!1),M=(0,a.Z)(G,2),H=M[0],q=M[1],Y=(0,u.useSelector)((function(e){return e.remediations})),X=(0,u.useDispatch)(),ee=function(){return X(g.loadRemediations.apply(g,arguments))},ae=(null==Y||null===(e=Y.value)||void 0===e?void 0:e.data.length)||0;(0,i.useEffect)((function(){var e=ne[d.sortBy];B?ee(e,d.sortDir,p.value,S.pageSize,S.offset):ee(e,d.sortDir,p.value,S.pageSize,S.offset,void 0,!0)}),[]),(0,i.useEffect)((function(){"fulfilled"===Y.status&&p.value===w&&q(!0)}),[d.sortBy,d.sortDir,p.value,S.pageSize,S.pageDebounced,B]),(0,i.useEffect)((function(){p.setValue(w)}),[w]),p.onChange(S.reset),d.onChange(S.reset);var re=f.getSelectedIds(),oe=function(e){var t;t=e.getNotification(),X((0,R.wN)(t)),X(g.loadRemediations())},ie={filters:w.length?[{category:"Name",chips:[{name:w}]}]:[],onDelete:function(){D(""),p.setValue("")}};return s().createElement("div",{className:"page__remediations"},s().createElement(ue.Consumer,null,(function(e){return!1===e.permissions.read?s().createElement(z.Z,null):s().createElement(s().Fragment,null,s().createElement(_.Z,null,s().createElement(v.Z,{title:"Remediations"}),s().createElement(K,{onRemediationCreated:oe})),s().createElement(I.Z,{filterConfig:{items:[{label:"Search playbooks",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Search playbooks",value:w,onChange:function(e,t){D(t)}}}]},bulkSelect:{items:[{title:"Select none",onClick:function(){return f.props.onSelect("none",!0)}},{title:"Select page (".concat(ae,")"),onClick:function(){return f.props.onSelect("page",!0)}}],checked:re.length&&k>re.length?null:re.length,count:re.length,isDisabled:!ae,onSelect:function(e){return f.props.onSelect(re.length?"none":"page",e)}},actionsConfig:{actions:[{label:re.length>1?"Download playbooks":"Download playbook",props:{variant:"secondary",isDisabled:!re.length},onClick:function(){return function(e,t,n){var a=function(e,t){var n=$()(t,(function(e){return e.id}));return e.reduce((function(e,t){var a=n[t];return a&&a.issue_count>0&&e.push(a.id),e}),[])}(e,t);0===a.length?n((0,R.wN)({variant:"danger",title:"No playbooks downloaded.",description:e.length>1?"Selected remediations do not contain any issues to remediate.":"Selected remediation does not contain any issues to remediate."})):a.length<e.length?((0,h.rN)(a),n((0,R.wN)({variant:"success",title:a.length>1?"Downloading playbooks":"Downloading playbook",description:e.length-a.length>1?"".concat(e.length-a.length," remediations with no issues were not downloaded."):"1 remediation with no issues was not downloaded."}))):((0,h.rN)(a),n((0,R.wN)({variant:"success",title:a.length>1?"Downloading playbooks":"Downloading playbook"})))}(re,Y.value.data,X)}},{label:"Delete playbooks",props:{isDisabled:!e.permissions.write||!re.length},onClick:function(){return F(!0)}},{label:B?"Hide archived playbooks":"Show archived playbooks",onClick:B?function(){V(!1),f.reset(),localStorage.setItem("remediations:showArchived","false")}:function(){V(!0),f.reset(),localStorage.setItem("remediations:showArchived","true")}}]},pagination:te(te({},S.props),{},{itemCount:k}),activeFiltersConfig:ie}),s().createElement(b.Z,null,s().createElement(y.Stack,{hasGutter:!0},e.hasSmartManagement&&!e.isReceptorConfigured&&o&&s().createElement(y.StackItem,null,s().createElement(W.Z,{onClose:function(){return l(!1),void localStorage.setItem("remediations:receptorBannerStatus","dismissed")}})),Z&&s().createElement(Q.Z,{title:1===re.length?"Remove playbook":"Remove playbooks",text:"".concat(re.length," ").concat(re.length>1?"playbooks":"playbook"," \n                                            will be removed from Remediations. This is permanent and cannot be undone."),confirmText:"Remove",onClose:function(){var e=(0,m.Z)(E().mark((function e(t){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!1),!t){e.next=6;break}return e.next=4,n=re,X(g.deleteRemediations({remediation_ids:n}));case 4:ee(),f.reset();case 6:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}()}),s().createElement(y.StackItem,null,s().createElement(A,{remediations:Y,loadRemediations:ee,sorter:d,filter:p,selector:f,pagination:S,shouldUpdateGrid:H,setShouldUpdateGrid:q,setRemediationCount:O,showArchived:B,setShowArchived:V})))))})))};var re=(0,i.lazy)((function(){return Promise.all([n.e(504),n.e(390)]).then(n.bind(n,9823))})),oe=(0,i.lazy)((function(){return n.e(935).then(n.bind(n,66227))})),ie=(0,i.lazy)((function(){return Promise.all([n.e(224),n.e(530)]).then(n.bind(n,76691))})),se=function(){return s().createElement(i.Suspense,{fallback:s().createElement(i.Fragment,null)},s().createElement(l.Switch,null,s().createElement(l.Route,{exact:!0,path:"/",component:ae}),s().createElement(l.Route,{exact:!0,path:"/:id",component:re}),s().createElement(l.Route,{exact:!0,path:"/:id/:run_id",render:function(e){return s().createElement(oe,(0,d.Z)({remediation:{}},e))}}),s().createElement(l.Route,{exact:!0,path:"/:id/:run_id/:executor_id",render:function(e){return s().createElement(ie,e)}}),s().createElement(l.Redirect,{path:"*",to:"/",push:!0})))};se.propTypes={childProps:o().shape({history:o().shape({push:o().func})})};const ce=function(){return s().createElement(s().Fragment,null,s().createElement(_.Z,{className:"ins-remediations__skeleton"},s().createElement(v.Z,{className:"rem-s-page-header",title:"Remediations"})),s().createElement(b.Z,null,s().createElement(S.Z,{centered:!0})))};var le=n(51344),ue=(0,i.createContext)(),de=function(e){var t=(0,c.Z)(),n=(0,i.useState)({readPermission:void 0,writePermission:void 0,executePermission:void 0,arePermissionLoaded:!1}),r=(0,a.Z)(n,2),o=r[0],l=o.readPermission,u=o.writePermission,d=o.executePermission,m=o.arePermissionLoaded,p=r[1],f=(0,i.useState)(void 0),E=(0,a.Z)(f,2),y=E[0],g=E[1],_=function(e,t,n){return p({readPermission:e,writePermission:t,executePermission:n,arePermissionLoaded:!0})};return(0,i.useEffect)((function(){var e,n;return t&&(t.identifyApp("remediations"),null==t||null===(n=t.hideGlobalFilter)||void 0===n||n.call(t),(0,h.kd)().then((function(e){return g(e.data.length>0)})),e=t.on("APP_NAVIGATION",(function(e){return history.push("/".concat(e.navId))})),t.getUserPermissions("remediations").then((function(e){var t=e.map((function(e){return e.permission}));t.includes("remediations:*:*")?_(!0,!0,!0):_(t.includes("remediations:remediation:read"),t.includes("remediations:remediation:write"),t.includes("remediations:remediation:execute"))}))),function(){e()}}),[]),m?s().createElement(ue.Provider,{value:{permissions:{read:l,write:u,execute:d},isReceptorConfigured:y}},s().createElement(le.ZP,null),s().createElement(se,{childProps:e})):s().createElement(ce,null)};de.propTypes={history:o().object};const me=(0,l.withRouter)((0,u.connect)()(de))},29144:(e,t,n)=>{n.d(t,{q:()=>o});var a=n(30319),r=n(83215),o=function(e){var t;t=(0,r.wN)(e),(0,a.bh)().dispatch(t)}},50289:(e,t,n)=>{n.r(t),n.d(t,{loadRemediations:()=>o,loadRemediation:()=>i,loadRemediationStatus:()=>s,refreshRemediation:()=>c,createRemediation:()=>l,patchRemediation:()=>u,deleteRemediation:()=>d,deleteRemediations:()=>m,deleteRemediationIssue:()=>p,deleteRemediationIssueSystem:()=>f,patchRemediationIssue:()=>E,getResolutions:()=>y,getConnectionStatus:()=>g,runRemediation:()=>h,setEtag:()=>_,getPlaybookRuns:()=>v,cancelPlaybookRuns:()=>b,getPlaybookRun:()=>I,getPlaybookRunSystems:()=>S,getPlaybookRunSystemDetails:()=>C,expandInventoryTable:()=>T,getEndpoint:()=>k,selectEntity:()=>R,deleteSystems:()=>O,checkExecutable:()=>P});var a=n(58061),r=n(16075),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"updated_at",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;return{type:a.aI.LOAD_REMEDIATIONS,payload:r.V_.getRemediations("".concat("desc"===t?"-":"").concat(e),n,o,i,s,c)}},i=function(e){return{type:a.aI.LOAD_REMEDIATION,payload:r.V_.getRemediation(e)}},s=function(e){return{type:a.aI.LOAD_REMEDIATION_STATUS,payload:(0,r.uQ)(e)}},c=function(e){return{type:a.aI.REFRESH_REMEDIATION,payload:r.V_.getRemediation(e)}},l=function(e){return{type:a.aI.CREATE_REMEDIATIONS,payload:r.V_.createRemediation(e)}},u=function(e,t){return{type:a.aI.PATCH_REMEDIATION,payload:r.V_.updateRemediation(e,t).then((function(){return t}))}},d=function(e){return{type:a.aI.DELETE_REMEDIATION,payload:r.V_.deleteRemediation(e)}},m=function(e){return{type:a.aI.DELETE_REMEDIATION,payload:r.V_.deleteRemediations(e)}},p=function(e,t){return{type:a.aI.DELETE_REMEDIATION_ISSUE,payload:r.V_.deleteRemediationIssue(e,t).then((function(){return{id:e,issueId:t}}))}},f=function(e,t,n){return{type:a.aI.DELETE_REMEDIATION_ISSUE_SYSTEM,payload:r.V_.deleteRemediationIssueSystem(e,t,n).then((function(){return{id:e,issue:t,system:n}}))}},E=function(e,t,n){return{type:a.aI.PATCH_REMEDIATION_ISSUE,payload:r.V_.updateRemediationIssue(e,t,{resolution:n})}},y=function(e){return{type:a.aI.GET_RESOLUTIONS,payload:r._5.getResolutionsForIssue(e)}},g=function(e){return{type:a.aI.GET_CONNECTION_STATUS,payload:r.V_.getRemediationConnectionStatus(e)}},h=function(e,t,n){return{type:a.aI.RUN_REMEDIATION,payload:r.V_.runRemediation(e,{headers:{"If-Match":t},data:{exclude:n}})}},_=function(e){return{type:a.aI.SET_ETAG,payload:{etag:e}}},v=function(e){return{type:a.aI.GET_PLAYBOOK_RUNS,payload:r.V_.listPlaybookRuns(e)}},b=function(e,t){return{type:a.aI.CANCEL_PLAYBOOK_RUNS,payload:r.V_.cancelPlaybookRuns(e,t)}},I=function(e,t){return{type:a.aI.GET_PLAYBOOK_RUN,payload:r.V_.getPlaybookRunDetails(e,t)}},S=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;return{type:a.aI.GET_PLAYBOOK_RUN_SYSTEMS,payload:r.V_.getPlaybookRunSystems(e,t,n,o,i,s)}},C=function(e,t,n){return{type:a.aI.GET_PLAYBOOK_RUN_SYSTEM_DETAILS,payload:r.V_.getPlaybookRunSystemDetails(e,t,n)}},T=function(e,t){return{type:a.aI.EXPAND_INVENTORY_TABLE,payload:{id:e,isOpen:t}}},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:a.aI.GET_ENDPOINT,payload:r.YI.showEndpoint(e,t)}},R=function(e,t){return{type:a.aI.SELECT_ENTITY,payload:{id:e,selected:t}}},O=function(e,t){return{type:a.aI.DELTE_SYSTEMS,payload:(0,r.yc)(e,t)}},P=function(e){return{type:a.aI.CHECK_EXECUTABLE,payload:r.V_.checkExecutable(e)}}},10170:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(87462),r=n(45987),o=n(92950),i=n.n(o),s=n(45697),c=n.n(s),l=n(14938),u=["onClose"],d=function(e){var t=e.onClose,n=(0,r.Z)(e,u);return i().createElement(l.Alert,(0,a.Z)({variant:"info",isInline:!0,title:"Do more with your Find it Fix it capabilities",actionClose:i().createElement(l.AlertActionCloseButton,{onClose:t})},n),i().createElement(l.Stack,{hasGutter:!0},i().createElement(l.StackItem,null,"Configure your systems with Cloud Connector to fix systems across all your Satellite instances."),i().createElement(l.StackItem,null,i().createElement("a",{href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/using_cloud_connector_to_remediate_issues_across_your_red_hat_satellite_infrastructure/index"},"Learn how to configure"))))};const m=d;d.propTypes={onClose:c().func},d.defaultProps={onClose:function(){}}},58610:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(92950),r=n.n(a),o=n(45697),i=n.n(o),s=n(14938),c=n(52017);function l(e){var t=e.isOpen,n=void 0===t||t,a=e.title,o=void 0===a?"Remove system?":a,i=e.text,l=void 0===i?"This action cannot be undone":i,u=e.confirmText,d=void 0===u?"Remove system":u,m=e.onClose,p=void 0===m?function(e){return e}:m;return r().createElement(s.Modal,{title:r().createElement("div",null,r().createElement(c.ExclamationTriangleIcon,{className:"rem-m-alert rem-c-delete-icon pf-u-mr-xs"}),o),className:"remediations rem-c-dialog",variant:s.ModalVariant.small,isOpen:n,onClose:function(){return p(!1)},isFooterLeftAligned:!0,actions:[r().createElement(s.Button,{key:"confirm",variant:"danger",ouiaId:"confirm",onClick:function(){return p(!0)}},d),r().createElement(s.Button,{key:"cancel",variant:"link",ouiaId:"cancel",onClick:function(){return p(!1)}},"Cancel")]},r().createElement("h2",null,l))}l.propTypes={isOpen:i().bool,title:i().string,text:i().string,confirmText:i().string,onClose:i().func}},78762:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(92950),r=n.n(a),o=n(14938),i=n(52017),s=n(80123),c=n(39173),l=n(14748);const u=function(){return r().createElement(r().Fragment,null,r().createElement(s.Z,null,r().createElement(c.Z,{title:"Remediations"})),r().createElement(l.Z,null,r().createElement(o.EmptyState,{variant:o.EmptyStateVariant.full,className:"rem-c-denied-state"},r().createElement(o.EmptyStateIcon,{icon:i.LockIcon}),r().createElement(o.Title,{headingLevel:"h5",size:"lg"},"You do not have access to Remediations"),r().createElement(o.EmptyStateBody,null,"Contact your organization administrator(s) for more information."),document.referrer?r().createElement(o.Button,{variant:"primary",onClick:function(){return history.back()}},"Return to previous page"):r().createElement(o.Button,{variant:"primary",component:"a",href:"."},"Go to landing page"))))}},95274:(e,t,n)=>{n.d(t,{l:()=>S});var a=n(4942),r=n(93433),o=n(29439),i=n(92950),s=n.n(i),c=n(45697),l=n.n(c),u=n(14938),d=n(16075),m=n(77431),p=n(17855),f=n(35664),E=n(52017),y=n(29393),g=function(){return s().createElement(u.EmptyState,null,s().createElement(u.EmptyStateIcon,{icon:y.ZP}),s().createElement(u.Title,{headingLevel:"h4",size:"lg"},"This playbook has no systems associated with it."),s().createElement(u.EmptyStateBody,null,"Add at least one system and action to this playbook to use remote execution."))};const h=g;g.propTypes={onClose:l().func.isRequired};var _=n(29144),v=n(55140);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.isOpen,n=e.onClose,a=e.showRefresh,c=e.isLoading,l=e.data,y=e.remediationId,g=e.remediationName,b=e.issueCount,S=e.runRemediation,C=e.etag,T=e.setEtag,k=(0,i.useState)([]),R=(0,o.Z)(k,2),O=R[0],P=R[1],N=(0,i.useState)([]),w=(0,o.Z)(N,2),D=w[0],x=w[1],L=function(){return"true"===localStorage.getItem("remediations:debug")},A=(0,v.Z)();(0,i.useEffect)((function(){var e=l.reduce((function(e,t){var n=(0,o.Z)(e,2),a=n[0],i=n[1];return t&&"connected"===t.connection_status?[[].concat((0,r.Z)(a),[I({},t)]),i]:[a,[].concat((0,r.Z)(i),[t])]}),[[],[]]),t=(0,o.Z)(e,2),n=t[0],a=t[1];P(n),x(a)}),[l]);var Z=function(e){var t;return(0,m.nH)(e.connection_status,null==A||null===(t=A.isBeta)||void 0===t?void 0:t.call(A))},F=[].concat((0,r.Z)(O),(0,r.Z)(D)).map((function(e){return{cells:[{title:e.executor_name?s().createElement(u.Tooltip,{content:"".concat(e.executor_name)},s().createElement("span",null,e.executor_name.length>25?"".concat(e.executor_name.slice(0,22),"..."):e.executor_name)):"Direct connection"},e.system_count,{title:Z(e)}]}})),U=O.reduce((function(e,t){return t.system_count+e}),0),j=l.reduce((function(e,t){return t.system_count+e}),0),B=function(e,t){return e>1?"".concat(e," ").concat(t,"s"):"".concat(e," ").concat(t)};return s().createElement(u.Modal,{className:"remediations rem-c-execute-modal",variant:L()?u.ModalVariant.large:u.ModalVariant.small,title:"Execute playbook",isOpen:t,onClose:n,isFooterLeftAligned:!0,actions:0!==j?[s().createElement(u.Button,{key:"confirm",variant:"primary",ouiaId:"etag",isDisabled:0===O.length,onClick:function(){S(y,C,D.map((function(e){return e.executor_id})).filter((function(e){return e}))),(0,_.q)({title:"Executing playbook ".concat(g),description:s().createElement("span",null,"View results in the ",s().createElement("b",null,"Activity tab")),variant:"success",dismissable:!0,autoDismiss:!0})}},c?"Execute playbook":"Execute playbook on ".concat(B(U,"system"))),s().createElement(u.Button,{key:"download",variant:"secondary",ouiaId:"download-playbook",onClick:function(){(0,d.rN)(y),(0,_.q)({title:"Preparing playbook for download",description:"Once complete, your download will start automatically.",variant:"info",dismissable:!0,autoDismiss:!0})}},"Download playbook"),L()?s().createElement(u.Button,{key:"reset-etag",onClick:function(){return T("test")},ouiaId:"reset-etag"},"Reset etag"):null]:[s().createElement(u.Button,{key:"close-modal",onClick:function(){return n()},variant:"primary"},"Close")]},s().createElement("div",{className:"rem-c-execute-modal__body"},a?s().createElement(u.Alert,{variant:"warning",isInline:!0,title:"The connection status of systems associated with this Playbook has changed. Please review again."}):null,s().createElement(u.TextContent,null,c?s().createElement(f.Z,{size:"lg"}):s().createElement(u.Text,{component:u.TextVariants.p},"Playbook contains ",s().createElement("b",null,"".concat(B(b,"action")))," affecting",s().createElement("b",null," ","".concat(B(j,"system"),".")," ")),s().createElement(u.Text,null,s().createElement(u.ExpandableSection,{toggleText:"About remote execution with Cloud connector"},"Playbooks can be executed on systems which:",s().createElement(u.List,null,s().createElement(u.ListItem,null,"Are connected to Insights via a Satellite instance which has Receptor/Cloud Connector enabled, or ",s().createElement("br",null),s().createElement(u.Button,{className:"pf-u-p-0",key:"download",variant:"link",isInline:!0,component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/using_cloud_connector_to_remediate_issues_across_your_red_hat_satellite_infrastructure/index",rel:"noreferrer",target:"_blank"},"How to configure Receptor/Cloud Connector on Red Hat Satellite  ",s().createElement(E.ExternalLinkAltIcon,null))),s().createElement(u.ListItem,null,"Are directly connected to Insights via Red Hat connector, and Cloud Connector is enabled ",s().createElement("br",null),s().createElement(u.Button,{className:"pf-u-p-0",key:"configure",variant:"link",isInline:!0,component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/red_hat_connector_configuration_guide/index",rel:"noreferrer",target:"_blank"},"How to enable Cloud Connector with Red Hat connect  ",s().createElement(E.ExternalLinkAltIcon,null)))))),s().createElement(u.Text,{component:u.TextVariants.p},"Executed Ansible Playbooks run on eligible systems with Cloud Connector. The playbook will be pushed immediately after selecting “Execute playbook”. If the playbook has “Auto reboot” on, systems requiring reboot to complete an action will reboot."),s().createElement(u.Button,{className:"pf-u-p-0",key:"configure",variant:"link",isInline:!0,component:"a",href:"https://access.redhat.com/articles/rhc",rel:"noreferrer",target:"_blank"},"Learn more about Cloud Connector  ",s().createElement(E.ExternalLinkAltIcon,null)),0!==F.length&&s().createElement(u.Text,{component:u.TextVariants.h4},"Connection status of systems")),c&&s().createElement(f.Z,{size:"lg"}),!c&&0!==j&&s().createElement(p.Table,{variant:p.TableVariant.compact,"aria-label":"Systems",cells:[{title:"Connection type",value:"type"},{title:"Systems",value:"count"},{title:"Connection status",value:"status"}],rows:F},s().createElement(p.TableHeader,null),s().createElement(p.TableBody,null)),!c&&0===j&&s().createElement(h,null)))};S.propTypes={isOpen:l().bool,onClose:l().func,showRefresh:l().bool,isLoading:l().bool,data:l().array,remediationId:l().string,remediationName:l().string,issueCount:l().number,runRemediation:l().func,etag:l().string,setEtag:l().func}},77431:(e,t,n)=>{n.d(t,{fb:()=>u,Nv:()=>d,_6:()=>p,kf:()=>f,nH:()=>E});var a=n(92950),r=n.n(a),o=n(52017),i=n(14938),s=n(44332),c=n(86507),l=function(e){return"".concat(window.location.origin,e?"/preview/settings/connector":"/settings/connector")},u=function(e){return{running:"running",pending:"running",acked:"running",failure:"failure",canceled:"canceled",success:"success"}[e]},d=function(e,t){return{running:r().createElement(i.Flex,{className:"rem-c-running",spacer:{default:"space-items-sm"}},r().createElement(i.FlexItem,null,r().createElement("b",null,t||"Running")),r().createElement(i.FlexItem,null,r().createElement(o.InProgressIcon,{"aria-label":"connection status: running"}))),success:r().createElement(i.Flex,{className:"rem-c-success",spacer:{default:"space-items-sm"}},r().createElement(i.FlexItem,null,r().createElement("b",null,t||"Success")),r().createElement(i.FlexItem,null,r().createElement(o.CheckCircleIcon,{"aria-label":"connection status: success"}))),failure:r().createElement(i.Flex,{className:"rem-c-failure",spacer:{default:"space-items-sm"}},r().createElement(i.FlexItem,null,r().createElement("b",null,t||"Failed")),r().createElement(i.FlexItem,null,r().createElement(o.TimesCircleIcon,{"aria-label":"connection status: failed"}))),canceled:r().createElement(i.Flex,{className:"rem-c-canceled",spacer:{default:"space-items-sm"}},r().createElement(i.FlexItem,null,r().createElement("b",null,t||"Canceled")),r().createElement(i.FlexItem,null,r().createElement(o.TimesCircleIcon,{"aria-label":"connection status: canceled"})))}[e]},m="rem-c-status-text",p=function(e,t){return 1===e?"".concat(e," ").concat(t):"".concat(e," ").concat(t,"s")},f=function(e){var t=e.executorStatus,n=e.permission,a=e.hasCancel,o=e.counts,l=e.remediationName,f=e.remediationId,E=e.playbookId,y=o.acked&&!o.acked.isNaN()?o.running+o.pending+o.acked:o.running+o.pending,g=o.failure+o.canceled,h=o.success,_=r().createElement(i.Flex,{className:"rem-c-status-bar"},t&&r().createElement(i.FlexItem,null,function(e){return{running:r().createElement("b",{className:"".concat(m," rem-c-running")},"Running"),pending:r().createElement("b",{className:"".concat(m," rem-c-running")},"Pending"),acked:r().createElement("b",{className:"".concat(m," rem-c-running")}," Acked "),success:r().createElement("b",{className:"".concat(m," rem-c-success")},"Succeeded"),failure:r().createElement("b",{className:"".concat(m," rem-c-failure")},"Failed"),canceled:r().createElement("b",{className:"".concat(m," rem-c-canceled")},"Canceled")}[e]}(t)),r().createElement(i.FlexItem,null,d("success","".concat(h))),r().createElement(i.FlexItem,null,d("failure","".concat(g))),r().createElement(i.FlexItem,null,d("running","".concat(y))),"true"===localStorage.getItem("remediations:debug")&&a&&n.permissions.execute&&t&&"running"===u(t)&&r().createElement(i.FlexItem,null,r().createElement(s.L,{remediationName:l,remediationId:f,playbookId:E})));return t?r().createElement(i.Tooltip,{position:"right",className:"ins-c-status-tooltip",enableFlip:!0,content:r().createElement("div",null,"Run: ",(0,c.kC)(t)," ",r().createElement("br",null),"Success: ",p(o.success,"system")," ",r().createElement("br",null),"Failed: ",p(o.failure,"system")," ",r().createElement("br",null),"Canceled: ",p(o.canceled,"system")," ",r().createElement("br",null),o.acked&&!o.acked.isNaN()?"Pending, Running, Acked: ".concat(p(o.pending+o.running+o.acked,"system")):"Pending, Running: ".concat(p(o.pending+o.running,"system")))},_):_},E=function(e,t){return{connected:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},r().createElement(o.CheckCircleIcon,{className:"rem-c-reboot-check-circle rem-c-connection-status","aria-label":"connection status"}),"Ready")),disconnected:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},"Connection issue",r().createElement(i.Text,{component:i.TextVariants.small,style:{margin:"0px"}},"Receptor not responding"))),no_executor:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},"Cannot remediate - Direct connection.",r().createElement(i.Text,{component:i.TextVariants.small,style:{margin:"0px"}},"Connect your systems to Satellite to automatically remediate."),r().createElement(i.Button,{className:"pf-u-p-0",key:"download",variant:"link",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/using_cloud_connector_to_remediate_issues_across_your_red_hat_satellite_infrastructure/configuring-your-satellite-infrastructure-to-communicate-with-insights"},"Learn how to connect  ",r().createElement(o.ExternalLinkAltIcon,null)))),no_source:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},"Cannot remediate - Satellite not configured",r().createElement(i.Text,{component:i.TextVariants.small,style:{margin:"0px"}},"Satellite not registered for Playbook execution"))),no_receptor:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},r().createElement(o.ExclamationCircleIcon,{className:"rem-c-failure rem-c-connection-status","aria-label":"connection status"}),"Cannot remediate - Cloud connector not defined",r().createElement(i.Text,{component:i.TextVariants.small,style:{margin:"0px"}},"Configure Cloud connector to automatically remediate"),r().createElement(i.Button,{className:"pf-u-p-0",key:"configure",variant:"link",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html-single/using_cloud_connector_to_remediate_issues_across_your_red_hat_satellite_infrastructure/index#configuring-your-satellite-infrastructure-to-communicate-with-insights"},"Learn how to configure  ",r().createElement(o.ExternalLinkAltIcon,null)))),no_rhc:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},"Cannot remediate - Cloud connector not defined",r().createElement(i.Text,{component:i.TextVariants.small,style:{margin:"0px"}},"Remediation from Insights requires Cloud connector. Cloud connector can be enabled via Satelite, or through  ",r().createElement(i.Button,{className:"pf-u-p-0",key:"configure",variant:"link",component:"a",href:l(t)},"RHC (Red Hat connector)")),r().createElement(i.Button,{className:"pf-u-p-0",key:"download",variant:"link",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/red_hat_connector_configuration_guide/index"},"Learn how to configure  ",r().createElement(o.ExternalLinkAltIcon,null)))),disabled:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.p},"Cannot remediate - Cloud connector not defined",r().createElement(i.Text,{component:i.TextVariants.small,style:{margin:"0px"}},"Remediation from Insights requires Cloud connector. Cloud connector can be enabled via Satelite, or through  ",r().createElement(i.Button,{className:"pf-u-p-0",key:"configure",variant:"link",component:"a",href:l(t)},"RHC (Red Hat connector)")),r().createElement(i.Button,{className:"pf-u-p-0",key:"download",variant:"link",component:"a",href:"https://access.redhat.com/documentation/en-us/red_hat_insights/2023/html/red_hat_connector_configuration_guide/index"},"Learn how to configure  ",r().createElement(o.ExternalLinkAltIcon,null)))),loading:r().createElement(i.TextContent,null,r().createElement(i.Text,{component:i.TextVariants.small},r().createElement(o.SyncIcon,{className:"rem-c-connection-status","aria-label":"connection status"}),"Checking"))}[e]}},44332:(e,t,n)=>{n.d(t,{L:()=>f});var a=n(29439),r=n(92950),o=n.n(r),i=n(45697),s=n.n(i),c=n(14938),l=n(52017),u=function(e){var t=e.isOpen,n=e.onModalCancel,a=e.onConfirmCancel;return o().createElement(c.Modal,{header:o().createElement(c.Title,{headingLevel:"h1",size:"2xl",className:"ins-c-modal__cancel-run-warning-header"},o().createElement(l.ExclamationTriangleIcon,{size:"md",className:"ins-c-modal__cancel-run-warning-header--icon"}),"Cancel remediation process"),title:"Cancel remediation process",hideTitle:!0,variant:c.ModalVariant.small,className:"ins-c-modal__cancel-run-warning",isOpen:t,onClose:n,actions:[o().createElement(c.Button,{key:"confirm",variant:"danger",ouiaId:"cancel_playbook",onClick:a},"Cancel playbook process"),o().createElement(c.Button,{key:"cancel",variant:"link",ouiaId:"cancel",onClick:n},"Cancel")],isFooterLeftAligned:!0},o().createElement("span",null,"Canceling a running playbook process only affects pending and running tasks. It does not affect any previously succeeded or failed tasks that have already run."))};u.propTypes={type:s().string,isOpen:s().bool,onModalCancel:s().func,onConfirmCancel:s().func};var d=n(28216),m=n(50289),p=n(83215),f=function(e){var t=e.remediationName,n=e.remediationId,i=e.playbookId,s=(0,r.useState)(!1),l=(0,a.Z)(s,2),f=l[0],E=l[1],y=(0,d.useDispatch)();return o().createElement(o().Fragment,null,o().createElement(c.Button,{variant:"link",onClick:function(){return E(!0)}},"Cancel process"),o().createElement(u,{isOpen:f,onModalCancel:function(){return E(!1)},onConfirmCancel:function(){return function(e,t,n){y((0,m.cancelPlaybookRuns)(t,n)),y((0,p.wN)({variant:"success",title:"Canceling playbook ".concat(e," successful"),dismissDelay:8e3,dismissable:!1})),E(!1)}(t,n,i)}}))};f.propTypes={remediationName:s().string,remediationId:s().string,playbookId:s().string}},11178:(e,t,n)=>{n.d(t,{sk:()=>R,L0:()=>O,h0:()=>P,v9:()=>x});var a=n(4942),r=n(29439),o=n(92950),i=n(23279),s=n.n(i),c=n(63105),l=n.n(c),u=n(35937),d=n.n(u),m=n(3674),p=n.n(m),f=n(24350),E=n.n(f),y=n(66604),g=n.n(y),h=n(6557),_=n.n(h),v=n(25325),b=n.n(v),I=n(58061);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=_(),t=function(){return e.apply(void 0,arguments)};return t.add=function(t){return n=e,a=t,e=function(){n.apply(void 0,arguments),a.apply(void 0,arguments)};var n,a},t}function k(e){if(void 0===e)throw new Error("row does not define id!")}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=(0,o.useState)(e),a=(0,r.Z)(n,2),i=a[0],s=a[1],c=(0,o.useState)(t),l=(0,r.Z)(c,2),u=l[0],d=l[1],m=T();return{sortBy:i,sortDir:u,onChange:m.add,props:{sortBy:{index:i,direction:u},onSort:function(e,t,n){m(t,n),s(t),d(n)}}}}function O(){var e=(0,o.useState)(""),t=(0,r.Z)(e,2),n=t[0],a=t[1],i=T(),c=s()((function(e){i(e),a(e)}),I.ET);return{value:n,setValue:c,onChange:i.add,props:{onFilterChange:c}}}function P(){var e=(0,o.useState)(1),t=(0,r.Z)(e,2),n=t[0],a=t[1],i=(0,o.useState)(1),c=(0,r.Z)(i,2),l=c[0],u=c[1],d=(0,o.useState)(20),m=(0,r.Z)(d,2),p=m[0],f=m[1],E=function(){return a(1)},y=T();return{page:n,pageDebounced:l,offset:(n-1)*p,pageSize:p,setPage:a,onChange:y.add,reset:E,props:{page:n,perPage:p,onSetPage:function(e,t){a(t),"INPUT"===e.target.tagName?s()(u,I.ET)(t):u(t),y(t,p)},onPerPageSelect:function(e,t){y(n,t),E(),f(t)}}}}function N(e,t,n){return k(n),C(C({},e),{},(0,a.Z)({},n,t))}function w(e,t,n,a){var r=E()(l()(e,(function(e){return a(e)})),a);return C(C({},t),g()(r,(function(){return n})))}function D(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&e[t]}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.id},t=(0,o.useState)({}),n=(0,r.Z)(t,2),i=n[0],s=n[1],c=!1;return{getSelectedIds:function(e){var t=p()(d()(i,_()));return e?b()(t,e):t},register:function(t){(c=t).forEach((function(t){return t.selected=!0===i[e(t)]}))},reset:function(){return s({})},props:{onSelect:function(t,n,a){if(!c)throw new Error("register() not called on useSelector()");switch(t){case"none":s({});break;case"page":s(w(c,i,n,e));break;default:s(N(i,n,e(c[a])))}}},tbodyProps:{onRowClick:function(t,n){if(!["A","BUTTON","INPUT"].includes(t.target.tagName)){var r=e(n);k(r),s((function(e){return C(C({},e),{},(0,a.Z)({},r,!D(e,r)))}))}}}}}},93214:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(71002);function r(e,t){if(!e)throw new TypeError(t)}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];Object.keys(e).forEach((function(e){return r(n.includes(e),"Unexpected key: ".concat(e," Expected one of: ").concat(n))}))}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];n.forEach((function(t){return r(Object.prototype.hasOwnProperty.call(e,t),"Required key missing: ".concat(t))}))}function s(e){r(Array.isArray(e),"Systems must be an array"),r(e.length,"Systems array must not be empty"),e.forEach((function(e){return r("string"==typeof e,"System must be of type string")}))}function c(e){r("object"===(0,a.Z)(e)&&null!==e),o(e,"issues","systems","onRemediationCreated"),i(e,"issues"),r(Array.isArray(e.issues),"Issues must be an array"),r(e.issues.length,"Issues array must not be empty"),e.issues.forEach((function(t){r("object"===(0,a.Z)(t)&&null!==t,"Issue must be an object"),o(t,"id","description","systems"),i(t,"id","description"),Object.prototype.hasOwnProperty.call(t,"systems")&&s(t.systems),r(Object.prototype.hasOwnProperty.call(t,"systems")||Object.prototype.hasOwnProperty.call(e,"systems"),"No systems defined for ".concat(t.id))})),Object.prototype.hasOwnProperty.call(e,"systems")&&s(e.systems)}},30319:(e,t,n)=>{n.d(t,{S1:()=>d,bh:()=>m,z2:()=>p});var a,r=n(93433),o=n(67336),i=n(83215),s=n(84885),c=n(57283),l=n.n(c),u=n(81730);function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(a=(0,o.JH)({},[l(),(0,s.ZP)({errorTitleKey:"message",errorDescriptionKey:"description"})].concat((0,r.Z)(t.filter((function(e){return void 0!==e})))))).register(u.Z),a.register({notifications:i.ee}),a}function m(){return a.getStore()}function p(){var e;return(e=a).register.apply(e,arguments)}},81730:(e,t,n)=>{n.d(t,{L:()=>k,Z:()=>R});var a,r,o,i,s,c,l,u,d=n(45987),m=n(4942),p=n(92950),f=n.n(p),E=n(58061),y=n(18546),g=n(94654),h=n.n(g),_=n(44908),v=n.n(_),b=["id"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){return v()(h()(e,(function(e){return e.systems.map((function(e){return e.id}))})))}function T(e){var t=C(e.issues),n=C(e.issues.filter((function(e){return e.resolution.needs_reboot})));return S(S({},e),{},{stats:{systemsWithReboot:n.length,systemsWithoutReboot:t.length-n.length}})}var k=function(e){var t,n=e.LOAD_ENTITIES_FULFILLED;return(0,y.Gg)((t={},(0,m.Z)(t,E.aI.SELECT_ENTITY,(function(e,t){var n=t.payload,a=e.selected||new Map;if(n.selected)if(0===n.id){var r;null==e||null===(r=e.rows)||void 0===r||r.forEach((function(e){return a.set(null==e?void 0:e.id,e)}))}else{var o,i=null==e||null===(o=e.rows)||void 0===o?void 0:o.find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t===n.id}));a.set(n.id,S(S({},i||{}),{},{id:n.id}))}else 0===n.id?e.rows.forEach((function(e){return a.delete(e.id)})):-1===n.id?a.clear():a.delete(n.id);return S(S({},e),{},{selected:new Map(a)})})),(0,m.Z)(t,"".concat(n),(function(e){return S(S({},e),{},{rows:e.rows.map((function(t){var n,a=t.id;return S(S({id:a},(0,d.Z)(t,b)),{},{selected:!(null===(n=e.selected)||void 0===n||!n.get(a))})}))})})),t))};const R={remediations:(0,y.Gg)((a={},(0,m.Z)(a,E.aI.LOAD_REMEDIATIONS_PENDING,(function(){return{status:"pending"}})),(0,m.Z)(a,E.aI.LOAD_REMEDIATIONS_FULFILLED,(function(e,t){return{status:"fulfilled",value:t.payload}})),(0,m.Z)(a,E.aI.LOAD_REMEDIATIONS_REJECTED,(function(){return{status:"rejected"}})),a),{status:"initial"}),selectedRemediation:(0,y.Gg)((r={},(0,m.Z)(r,E.aI.LOAD_REMEDIATION_PENDING,(function(){return{status:"pending"}})),(0,m.Z)(r,E.aI.LOAD_REMEDIATION_FULFILLED,(function(e,t){return{status:"fulfilled",remediation:T(t.payload)}})),(0,m.Z)(r,E.aI.REFRESH_REMEDIATION_FULFILLED,(function(e,t){return t.payload.id===e.remediation.id?{status:"fulfilled",remediation:T(t.payload)}:e})),(0,m.Z)(r,E.aI.LOAD_REMEDIATION_REJECTED,(function(){return{status:"rejected"}})),(0,m.Z)(r,E.aI.PATCH_REMEDIATION_FULFILLED,(function(e,t){return{status:e.status,remediation:S(S({},e.remediation),t.payload)}})),(0,m.Z)(r,E.aI.DELETE_REMEDIATION_ISSUE_FULFILLED,(function(e,t){var n=e.remediation.issues.filter((function(e){return e.id!==t.payload.issueId}));return t.payload.id===e.remediation.id?{status:"fulfilled",remediation:T(S(S({},e.remediation),{},{issues:n,needs_reboot:n.some((function(e){return e.resolution.needs_reboot}))}))}:e})),(0,m.Z)(r,E.aI.DELETE_REMEDIATION_ISSUE_SYSTEM_FULFILLED,(function(e,t){if(t.payload.id!==e.remediation.id)return e;var n=e.remediation.issues.filter((function(e){return e.id!==t.payload.issue||(e.systems=e.systems.filter((function(e){return e.id!==t.payload.system})),e.systems.length>0)}));return{status:"fulfilled",remediation:T(S(S({},e.remediation),{},{issues:n,needs_reboot:n.some((function(e){return e.resolution.needs_reboot}))}))}})),r),{status:"initial"}),selectedRemediationStatus:(0,y.Gg)((o={},(0,m.Z)(o,E.aI.LOAD_REMEDIATION_STATUS_PENDING,(function(){return{status:"pending"}})),(0,m.Z)(o,E.aI.LOAD_REMEDIATION_STATUS_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload}})),(0,m.Z)(o,E.aI.LOAD_REMEDIATION_STATUS_REJECTED,(function(){return{status:"rejected"}})),o),{status:"initial"}),connectionStatus:(0,y.Gg)((i={},(0,m.Z)(i,E.aI.GET_CONNECTION_STATUS_PENDING,(function(){return{status:"pending"}})),(0,m.Z)(i,E.aI.GET_CONNECTION_STATUS_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload.data,etag:t.payload.etag}})),(0,m.Z)(i,E.aI.GET_CONNECTION_STATUS_REJECTED,(function(){return{status:"rejected",data:[]}})),(0,m.Z)(i,E.aI.SET_ETAG,(function(e,t){return S(S({},e),{},{etag:t.etag})})),i),{status:"initial"}),inventoryEntitiesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{INVENTORY_ACTION_TYPES:{}};return function(){return(0,y.Gg)((0,m.Z)({},e.INVENTORY_ACTION_TYPES.LOAD_ENTITIES_FULFILLED,(function(t){return S(S({},t),{},{columns:[{key:"display_name",title:"Name",renderFunc:function(t,n,a){var r=a.display_name;return f().createElement("div",null,f().createElement("a",{href:e.urlBuilder(n)},r))}},{key:"system_status",title:"Status",renderFunc:function(t,n){return f().createElement("div",null,e.generateStatus(n))}}]})})))}},playbookActivityIntentory:function(){return function(){return(0,y.Gg)((0,m.Z)({},E.aI.EXPAND_INVENTORY_TABLE,(function(e,t){return S(S({},e),{},{rows:e.rows.map((function(e){return S(S({},e),{},{isOpen:e.id===t.payload.id&&t.payload.isOpen})}))})})))}},playbookRuns:(0,y.Gg)((0,m.Z)({},E.aI.GET_PLAYBOOK_RUNS_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload.data,meta:t.payload.meta}}))),cancelPlaybookRuns:(0,y.Gg)((s={},(0,m.Z)(s,E.aI.CANCEL_PLAYBOOK_RUNS_PENDING,(function(){return{status:"pending"}})),(0,m.Z)(s,E.aI.CANCEL_PLAYBOOK_RUNS_FULFILLED,(function(e,t){return{status:"fulfilled",value:t.payload}})),(0,m.Z)(s,E.aI.CANCEL_PLAYBOOK_RUNS_REJECTED,(function(){return{status:"rejected"}})),s),{status:"initial"}),playbookRun:(0,y.Gg)((0,m.Z)({},E.aI.GET_PLAYBOOK_RUN_FULFILLED,(function(e,t){return{data:t.payload}}))),playbookRunSystems:(0,y.Gg)((c={},(0,m.Z)(c,E.aI.GET_PLAYBOOK_RUN_SYSTEMS_FULFILLED,(function(e,t){return S({},t.payload)})),(0,m.Z)(c,E.aI.GET_PLAYBOOK_RUN_SYSTEMS_PENDING,(function(e){return S(S({},e),{},{status:"pending"})})),(0,m.Z)(c,E.aI.GET_PLAYBOOK_RUN_SYSTEMS_REJECTED,(function(e){return S(S({},e),{},{data:[],status:"rejected"})})),c),{data:[],meta:{}}),playbookRunSystemDetails:(0,y.Gg)((0,m.Z)({},E.aI.GET_PLAYBOOK_RUN_SYSTEM_DETAILS_FULFILLED,(function(e,t){return S({},t.payload)}))),runRemediation:(0,y.Gg)((l={},(0,m.Z)(l,E.aI.RUN_REMEDIATION_PENDING,(function(){return{status:"pending"}})),(0,m.Z)(l,E.aI.RUN_REMEDIATION_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload.data}})),(0,m.Z)(l,E.aI.RUN_REMEDIATION_REJECTED,(function(e,t){return{status:412===t.payload.response.status?"changed":"rejected"}})),l),{status:"initial"}),sources:(0,y.Gg)((0,m.Z)({},E.aI.GET_ENDPOINT_FULFILLED,(function(e,t){return{status:"fulfilled",data:S(S({},e.data),{},(0,m.Z)({},t.payload.id,t.payload))}})),{status:"initial"}),executable:(0,y.Gg)((u={},(0,m.Z)(u,E.aI.CHECK_EXECUTABLE_REJECTED,(function(){return!1})),(0,m.Z)(u,E.aI.CHECK_EXECUTABLE_FULFILLED,(function(){return!0})),u),!1)}}}]);
//# sourceMappingURL=../sourcemaps/460.64af1ddbaf667ce3751abb449737216d.js.map