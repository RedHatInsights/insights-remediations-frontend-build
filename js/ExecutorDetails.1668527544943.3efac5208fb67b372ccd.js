"use strict";(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[2530],{68452:(e,t,n)=>{function a(e){return e.split(":")[0]}function r(e){switch(a(e.id)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function l(e){var t=e.display_name,n=e.hostname,a=e.id;return t||n||a}function c(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{Pz:()=>a,lN:()=>r,_f:()=>l,PW:()=>c})},22163:(e,t,n)=>{n.d(t,{T:()=>c,Tj:()=>s,Gd:()=>o});var a=n(54998),r=n.n(a),l=n(68452);function c(e){var t=function(e){var t=e.id;switch((0,l.Pz)(t)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=o("inventory").toString();return function(e){return"".concat(n,"/").concat(e,"?appName=").concat(t)}}function s(e){var t=e.split(":");switch(t[0]){case"advisor":return o(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return o(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return o(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function o(e){switch(e){case"advisor":return r()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return r()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return r()(document.baseURI).segment("insights").segment("compliance");case"inventory":return r()(document.baseURI).segment((t=window.location.pathname.split("/"),"beta"===t[1]?t[2]:t[1])).segment("inventory");case"patch-advisory":return r()(document.baseURI).segment("insights").segment("patch");default:throw new Error("Unknown app: ".concat(e))}var t}},35873:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var a=n(4942),r=n(29439),l=n(92950),c=n.n(l),s=n(14494),o=n(45697),i=n.n(o),u=n(334),m=n(99166),d=n(81321),p=n(14748),y=n(80123),E=n(39173),b=n(62410),f=n(35664),g=n(18213),v=n(83237),k=n(14938),h=n(52017),Z=n(81730),S=n(76200),_=n(50289),R=n(73725),I=n(77431),P=n(22812),N=n(66650),w=n(78923),C=n(96184),T=function(e){var t=e.data;return c().createElement(w.n,{data:t,toolbar:c().createElement(k.Toolbar,null,c().createElement(k.ToolbarContent,null,c().createElement(k.ToolbarItem,null,c().createElement(C.Y,{placeholder:"Search"}))))})};T.propTypes={data:i().string};const z=T;P.Z.registerLanguage("yaml",N.Z);var B=function(e){var t=e.systemId,n=e.playbookRunSystemDetails;return c().createElement(c().Fragment,null,c().createElement(k.Title,{headingLevel:"h4",size:"xl",className:"rem-c-title-job-output"},"Playbook log"),t&&t===n.system_id?c().createElement(c().Fragment,null,c().createElement(z,{data:n.console}),"running"===n.status&&c().createElement("div",{className:"rem-l-playbook-running"},c().createElement(k.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):c().createElement(f.Z,{size:"lg"}))};B.propTypes={systemId:i().string,status:i().string,console:i().string,playbookRunSystemDetails:i().shape({system_id:i().string,status:i().string,console:i().string})},B.defaultProps={playbookRunSystemDetails:{}};const x=(0,s.connect)((function(e){return{playbookRunSystemDetails:e.playbookRunSystemDetails}}))(B);var O=n(40742);const D=function(){return c().createElement(c().Fragment,null,c().createElement(y.Z,null,c().createElement(k.Breadcrumb,null,c().createElement(k.BreadcrumbItem,null,c().createElement(f.Z,{size:"lg"})),c().createElement(k.BreadcrumbItem,null,c().createElement(f.Z,{size:"lg"})),c().createElement(k.BreadcrumbItem,{isActive:!0},c().createElement(f.Z,{size:"lg"}))),c().createElement(k.Stack,{hasGutter:!0},c().createElement(k.StackItem,null,c().createElement(E.Z,{title:c().createElement(f.Z,{size:"lg"})})),c().createElement(k.StackItem,null,c().createElement(k.Split,{hasGutter:!0},c().createElement(k.SplitItem,null,c().createElement(S.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},c().createElement(f.Z,{size:"lg"}))),c().createElement(k.SplitItem,null,c().createElement(S.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},c().createElement(f.Z,{size:"lg"}))),c().createElement(k.SplitItem,null,c().createElement(S.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},c().createElement(f.Z,{size:"lg"}))))))),c().createElement(p.Z,null,c().createElement(k.Stack,{hasGutter:!0},c().createElement(k.Card,null,c().createElement(k.CardHeader,{className:"rem-m-card__header-bold"},c().createElement(k.Button,null,"Download playbook")),c().createElement(k.CardBody,null,c().createElement(O.Z,null))))))};var j=function(e){var t=e.name;return c().createElement(k.Bullseye,null,c().createElement(k.EmptyState,null,c().createElement(k.EmptyStateIcon,{className:"rem-c-failure",icon:h.ExclamationCircleIcon}),c().createElement(k.Title,{headingLevel:"h5",size:"lg"},"Run failed"),c().createElement(k.EmptyStateBody,null,"Playbook failed to run on ",t,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),c().createElement(k.Button,{variant:"link"},"Learn more")))};j.propTypes={name:i().string};const G=j;var L,F=n(22163),U=n(57869),A=n(30319);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var V=function(e){var t=e.match.params,n=t.executor_id,s=t.run_id,o=t.id,i=e.remediation,_=e.playbookRun,P=e.playbookRunSystems,N=e.playbookRunSystemDetails,w=e.getPlaybookRun,C=e.getPlaybookRunSystems,T=e.getPlaybookRunSystemDetails,z=e.onCollapseInventory,B=e.loadRemediation,O=(0,l.useState)({}),j=(0,r.Z)(O,2),V=j[0],H=j[1],W=(0,l.useState)([]),q=(0,r.Z)(W,2),J=q[0],K=q[1],M=(0,l.useState)(""),Q=(0,r.Z)(M,2),X=Q[0],$=Q[1],ee=(0,l.useState)(1),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],re=(0,l.useState)(50),le=(0,r.Z)(re,2),ce=le[0],se=le[1],oe=(0,l.useState)(),ie=(0,r.Z)(oe,2),ue=ie[0],me=ie[1],de=(0,l.useState)(!1),pe=(0,r.Z)(de,2),ye=pe[0],Ee=pe[1],be=(0,l.useState)(),fe=(0,r.Z)(be,2),ge=fe[0],ve=fe[1],ke=(0,l.useRef)(null),he=(0,F.T)({id:"default"}),Ze=function(e){ke&&ke.current&&(C(o,s,n,e.per_page,e.per_page*(e.page-1)),ae(e.page),se(e.per_page),ke.current.onRefreshData(e))};(0,l.useEffect)((function(){return B(o),w(o,s),ve((function(){return(0,m.Z)(C,500)})),function(){L&&clearInterval(L)}}),[]),(0,l.useEffect)((function(){_&&_.data&&H(_.data.executors.find((function(e){return e.executor_id===n}))||{}),"pending"!==P.status&&C(o,s,n,ce,ce*(ne-1),X)}),[_]),(0,l.useEffect)((function(){ye||w(o,s),"running"!==(0,I.fb)(N.status)&&L&&clearInterval(L),Ee(!1)}),[N.status]),(0,l.useEffect)((function(){K((function(){return P.data.map((function(e){var t=e.system_id;return{id:t,display_name:e.system_name,status:e.status,isOpen:ue===t,children:c().createElement(x,{systemId:t})}}))}))}),[P]);var Se,_e=function(e){return c().createElement(p.Z,null,c().createElement(k.Stack,{hasGutter:!0},c().createElement(k.Card,{className:"rem-c-card__playbook-log"},c().createElement(k.CardBody,null,c().createElement(d.Z,{ref:ke,onLoad:function(e){var t=e.INVENTORY_ACTION_TYPES,n=e.mergeWithEntities;return(0,A.z2)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n(Z.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:t,renderStatus:function(e){return c().createElement("div",{className:"rem-c-status-bar"},(0,I.Nv)((0,I.fb)(e)))},urlBuilder:he})())))},items:"pending"!==P.status?J:[],isLoaded:"pending"!==P.status,onRefresh:Ze,page:ne,total:P.meta.total,perPage:ce,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===e?function(e,t,n,a){var r=a.id;Ee(!0),n?(me(r),L&&clearInterval(L),T(i.id,s,r),L=setInterval((function(){return T(i.id,s,r)}),5e3)):(me(void 0),clearInterval(L)),z(n,r)}:function(e,t,n,a){var r=a.id;Ee(!0),n?(me(r),T(i.id,s,r)):me(void 0),clearInterval(L),z(n,r)}},c().createElement(k.Toolbar,null,c().createElement(k.ToolbarContent,null,c().createElement(k.ToolbarItem,null,c().createElement(g.Z,{items:[{value:"display_name",label:"Name",filterValues:{placeholder:"Filter by name",type:v.Y.text,value:X,onChange:function(e,t){$(t),ae(1),ge(o,s,n,ce,0,t)}}}]})),c().createElement(k.ToolbarItem,null,c().createElement(k.Button,{variant:"secondary",onClick:function(){return(0,R.rN)(i.id)}},"Download playbook")))))))))},Re=(0,l.useContext)(U.B);return i&&V&&_&&_.data?c().createElement(c().Fragment,null,c().createElement(y.Z,null,c().createElement(k.Breadcrumb,null,c().createElement(k.BreadcrumbItem,null,c().createElement(u.Link,{to:"/"}," Remediations ")),c().createElement(k.BreadcrumbItem,null,c().createElement(u.Link,{to:"/".concat(i.id)}," ",i.name," ")),c().createElement(k.BreadcrumbItem,null,c().createElement(u.Link,{to:"/".concat(i.id,"/").concat(s)},c().createElement(b.Z,{type:"exact",date:_.data.created_at}))),c().createElement(k.BreadcrumbItem,{isActive:!0}," ",V.executor_name," ")),c().createElement(k.Stack,{hasGutter:!0},c().createElement(k.StackItem,null,c().createElement(E.Z,{title:"Running"===(0,I.fb)(V.status)?c().createElement(c().Fragment,null,c().createElement(h.InProgressIcon,{className:"rem-c-running","aria-label":"connection status"}),V.executor_name):V.executor_name})),c().createElement(k.StackItem,null,c().createElement(k.Split,{hasGutter:!0},c().createElement(k.SplitItem,null,c().createElement(S.Z,{className:"rem-c-playbookSummary__settings",title:"Run status"},V.status?c().createElement(I.kf,{executorStatus:V.status,counts:V.counts,permission:Re}):c().createElement(f.Z,{size:"lg"}))),c().createElement(k.SplitItem,null,c().createElement(S.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},"".concat(_.data.created_by.first_name," ").concat(_.data.created_by.last_name))),c().createElement(k.SplitItem,null,c().createElement(S.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},c().createElement(b.Z,{type:"exact",date:_.data.created_at}))))))),{running:_e(Se=(0,I.fb)(V.status)),success:_e(Se),failure:_e(Se),canceled:_e(Se),epicFailure:c().createElement(p.Z,null,c().createElement(k.Stack,{hasGutter:!0},c().createElement(k.Card,null,c().createElement(k.CardHeader,{className:"rem-m-card__header-bold"},c().createElement(k.Button,{variant:"secondary",onClick:function(){return(0,R.rN)(i.id)}},"Download playbook")),c().createElement(k.CardBody,null,c().createElement(G,{name:V.executor_name})))))}[(0,I.fb)(Se)]):c().createElement(D,null)};V.propTypes={match:i().object,remediation:i().object,playbookRun:i().object,playbookRunSystems:i().object,playbookRunSystemDetails:i().object,getPlaybookRun:i().func,getPlaybookRunSystems:i().func,getPlaybookRunSystemDetails:i().func,onCollapseInventory:i().func,loadRemediation:i().func},V.defaultProps={remediation:{}};const H=(0,s.connect)((function(e){var t=e.playbookRuns,n=e.playbookRun,a=e.playbookRunSystems,r=e.playbookRunSystemDetails,l=e.selectedRemediation;return{playbookRuns:t.data,playbookRun:n,playbookRunSystemDetails:r,playbookRunSystems:a,remediation:l.remediation}}),(function(e){return{getPlaybookRuns:function(t){return e((0,_.getPlaybookRuns)(t))},getPlaybookRun:function(t,n){return e((0,_.getPlaybookRun)(t,n))},getPlaybookRunSystems:function(t,n,a,r,l,c){return e((0,_.getPlaybookRunSystems)(t,n,a,r,l,c))},getPlaybookRunSystemDetails:function(t,n,a){return e((0,_.getPlaybookRunSystemDetails)(t,n,a))},onCollapseInventory:function(t,n){return e((0,_.expandInventoryTable)(n,t))},loadRemediation:function(t){return e((0,_.loadRemediation)(t))}}}))(V)},76200:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(87462),r=n(4942),l=n(45987),c=n(92950),s=n.n(c),o=n(45697),i=n.n(o),u=n(94184),m=n.n(u),d=["title","className","children","isBold","hasGutter","needsPointer"],p=function(e){var t=e.title,n=e.className,c=e.children,o=e.isBold,i=e.hasGutter,u=e.needsPointer,p=(0,l.Z)(e,d),y=m()("rem-c-description-list__description",(0,r.Z)({},"rem-c-description-list__description--bold",o),(0,r.Z)({},"rem-c-description-list__description--withGutter",i),(0,r.Z)({},"rem-c-description-list__description--needsPointer",u)),E=m()(n,"rem-c-description-list");return s().createElement("dl",(0,a.Z)({className:E},p),s().createElement("dt",{className:"rem-c-description-list__title"},s().createElement("b",null,t)),s().createElement("dd",{className:y}," ",c," "))};const y=p;p.propTypes={title:i().string,children:i().any,isBold:i().bool,className:i().string,hasGutter:i().bool,needsPointer:i().bool}},40742:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(87462),r=n(15671),l=n(43144),c=n(60136),s=n(82963),o=n(61120),i=n(92950),u=n.n(i),m=n(17855),d=n(35664),p=n(65550),y=n(97481),E=n(58247);const b=function(e){(0,c.Z)(f,e);var t,n,b=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var r=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,s.Z)(this,e)});function f(e){var t;return(0,r.Z)(this,f),(t=b.call(this,e)).state={columns:[{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"sm"})},{title:u().createElement(d.Z,{size:"sm"})},{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"sm"})}],rows:[[{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"md"})}]]},t}return(0,l.Z)(f,[{key:"render",value:function(){var e=this.state,t=e.columns,n=e.rows;return u().createElement(i.Fragment,null,u().createElement(m.Table,(0,a.Z)({cells:t,rows:n,"aria-label":"Loading",variant:m.TableVariant.compact},this.props),u().createElement(m.TableHeader,null)),u().createElement(E.Z,{centered:!0},u().createElement(y.Z,null)),u().createElement(p.Z,{isFooter:!0,className:"rem-c-skeleton-table__footer rem-m-align-right"},u().createElement(d.Z,{size:"sm"})))}}]),f}(u().Component)}}]);
//# sourceMappingURL=../sourcemaps/ExecutorDetails.50593b95fba5af846066ca6030f0d5c0.js.map