(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[2530],{77832:(e,t,n)=>{"use strict";function a(e){return e.split(":")[0]}function l({id:e}){switch(a(e)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function r({display_name:e,hostname:t,id:n}){return e||t||n}function s(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{PW:()=>s,Pz:()=>a,_f:()=>r,lN:()=>l})},18293:(e,t,n)=>{"use strict";n.d(t,{Gd:()=>c,T:()=>s,Tj:()=>i});var a=n(54998),l=n.n(a),r=n(77832);function s(e){const t=function({id:e}){switch((0,r.Pz)(e)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=c("inventory").toString();return e=>`${n}/${e}?appName=${t}`}function i(e){const t=e.split(":");switch(t[0]){case"advisor":return c(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return c(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return c(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function c(e){switch(e){case"advisor":return l()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return l()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return l()(document.baseURI).segment("insights").segment("compliance");case"inventory":return l()(document.baseURI).segment(function(){const e=window.location.pathname.split("/");return"preview"===e[1]?e[2]:e[1]}()).segment("inventory");case"patch-advisory":return l()(document.baseURI).segment("insights").segment("patch");default:throw new Error(`Unknown app: ${e}`)}}},75593:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var a=n(10756),l=n.n(a),r=n(28216),s=n(45697),i=n.n(s),c=n(92397),o=n(88208),m=n(63652),u=n(99087),d=n(63456),p=n(39173),E=n(62410),y=n(32819),g=n(31593),b=n(76491),_=n(40667),k=n(53774),h=n(29684),v=n(37248),f=n.n(v),S=n(881),I=n(76400),Z=n(34413),R=n(33626),N=n(15848),w=n(2648);const x=()=>l().createElement(l().Fragment,null,l().createElement(d.Z,null,l().createElement(k.Breadcrumb,null,l().createElement(k.BreadcrumbItem,null,l().createElement(y.Z,{size:"lg"})),l().createElement(k.BreadcrumbItem,null,l().createElement(y.Z,{size:"lg"})),l().createElement(k.BreadcrumbItem,{isActive:!0},l().createElement(y.Z,{size:"lg"}))),l().createElement(_.Stack,{hasGutter:!0},l().createElement(_.StackItem,null,l().createElement(p.Z,{title:l().createElement(y.Z,{size:"lg"})})),l().createElement(_.StackItem,null,l().createElement(h.Split,{hasGutter:!0},l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},l().createElement(y.Z,{size:"lg"}))),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},l().createElement(y.Z,{size:"lg"}))),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},l().createElement(y.Z,{size:"lg"}))))))),l().createElement(u.ZP,null,l().createElement(_.Stack,{hasGutter:!0},l().createElement(b.Card,null,l().createElement(b.CardHeader,{className:"rem-m-card__header-bold"},l().createElement(g.Button,null,"Download playbook")),l().createElement(b.CardBody,null,l().createElement(w.Z,null))))));var C=n(4252),z=n(45791),P=n(20211),B=n.n(P);const T=({name:e})=>l().createElement(z.Bullseye,null,l().createElement(C.EmptyState,null,l().createElement(C.EmptyStateHeader,{titleText:"Run failed",icon:l().createElement(C.EmptyStateIcon,{className:"rem-c-failure",icon:B()}),headingLevel:"h5"}),l().createElement(C.EmptyStateBody,null,"Playbook failed to run on ",e,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),l().createElement(C.EmptyStateFooter,null,l().createElement(g.Button,{variant:"link"},"Learn more"))));T.propTypes={name:i().string};const D=T;var F=n(95726),G=n(92223),$=n(68175);const A=(0,n(18293).T)({id:"default"}),L=[{key:"display_name",title:"Name",renderFunc:(e,t,{fqdn:n})=>l().createElement("div",null,l().createElement("a",{href:A(t)},n||e||t))},{key:"tags"},{key:"status",title:"Status",renderFunc:e=>l().createElement("div",{className:"rem-c-status-bar"},(0,N.Nv)((0,N.fb)(e)))}];var O=n(22812),U=n(66650),V=n(19158),Y=n(49231);const j=({data:e})=>l().createElement(V.nU,{data:e,toolbar:l().createElement(Y.Toolbar,null,l().createElement(Y.ToolbarContent,null,l().createElement(Y.ToolbarItem,null,l().createElement(V.Yt,{placeholder:"Search"}))))});j.propTypes={data:i().string};const q=j;var H=n(75796),W=n(13193);O.Z.registerLanguage("yaml",U.Z);const M=({systemId:e,playbookRunSystemDetails:t})=>l().createElement(l().Fragment,null,l().createElement(W.Title,{headingLevel:"h4",size:"xl",className:"rem-c-title-job-output"},"Playbook log"),e&&e===t.system_id?l().createElement(l().Fragment,null,l().createElement(q,{data:t.console}),"running"===t.status&&l().createElement("div",{className:"rem-l-playbook-running"},l().createElement(H.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):l().createElement(y.Z,{size:"lg"}));M.propTypes={systemId:i().string,status:i().string,console:i().string,playbookRunSystemDetails:i().shape({system_id:i().string,status:i().string,console:i().string})},M.defaultProps={playbookRunSystemDetails:{}};const J=(0,r.connect)((({playbookRunSystemDetails:e})=>({playbookRunSystemDetails:e})))(M);let K;const Q=({remediation:e,playbookRun:t,playbookRunSystemDetails:n,getPlaybookRun:r,getPlaybookRunSystemDetails:s,onCollapseInventory:i,loadRemediation:v})=>{const{executor_id:Z,run_id:w,id:C}=(0,o.useParams)(),[z,P]=(0,a.useState)({}),[B,T]=(0,a.useState)(),[A,O]=(0,a.useState)(!1),U=(0,a.useRef)(null);(0,a.useEffect)((()=>(v(C),r(C,w),()=>{K&&clearInterval(K)})),[]),(0,a.useEffect)((()=>{t&&t.data&&P(t.data.executors.find((e=>e.executor_id===Z))||{})}),[t]),(0,a.useEffect)((()=>{A||r(C,w),"running"!==(0,N.fb)(n.status)&&K&&clearInterval(K),O(!1)}),[n.status]);const V=(e=>{const{id:t,run_id:n,executor_id:a,openId:r}=e||{};return async(e,{page:s,per_page:i,filters:{hostnameOrId:c}})=>{const o=await R.V_.getPlaybookRunSystems(t,n,a,i,i*(s-1),c);return{results:o.data.map((({system_id:e,system_name:t,status:n})=>({id:e,display_name:t,status:n,isOpen:r===e,children:l().createElement(J,{systemId:e})}))),total:o.meta?.total}}})({id:C,run_id:w,executor_id:Z,openId:B}),Y=t=>l().createElement(u.ZP,null,l().createElement(_.Stack,{hasGutter:!0},l().createElement(b.Card,{className:"rem-c-card__playbook-log"},l().createElement(b.CardBody,null,l().createElement(m.Z,{ref:U,columns:e=>(0,$.VA)(e,L),onLoad:({INVENTORY_ACTION_TYPES:e,mergeWithEntities:t})=>(0,G.z2)({...t(S.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:e})())}),getEntities:V,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===t?(t,n,a,{id:l})=>{O(!0),a?(T(l),K&&clearInterval(K),s(e.id,w,l),K=setInterval((()=>s(e.id,w,l)),5e3)):(T(void 0),clearInterval(K)),i(a,l)}:(t,n,a,{id:l})=>{O(!0),a?(T(l),s(e.id,w,l)):T(void 0),clearInterval(K),i(a,l)},actionsConfig:{actions:[l().createElement(g.Button,{key:"download-playbook",variant:"secondary",onClick:()=>(0,R.rN)([e.id])},"Download playbook")]},hideFilters:{all:!0,name:!1}}))))),j=(0,a.useContext)(F.B);return e&&z&&t&&t.data?l().createElement(l().Fragment,null,l().createElement(d.Z,null,l().createElement(k.Breadcrumb,null,l().createElement(k.BreadcrumbItem,null,l().createElement(c.Z,{to:"/"}," Remediations ")),l().createElement(k.BreadcrumbItem,null,l().createElement(c.Z,{to:`/${e.id}`}," ",e.name," ")),l().createElement(k.BreadcrumbItem,null,l().createElement(c.Z,{to:`/${e.id}/${w}`},l().createElement(E.Z,{type:"exact",date:t.data.created_at}))),l().createElement(k.BreadcrumbItem,{isActive:!0}," ",z.executor_name," ")),l().createElement(_.Stack,{hasGutter:!0},l().createElement(_.StackItem,null,l().createElement(p.Z,{title:"Running"===(0,N.fb)(z.status)?l().createElement(l().Fragment,null,l().createElement(f(),{className:"rem-c-running","aria-label":"connection status"}),z.executor_name):z.executor_name})),l().createElement(_.StackItem,null,l().createElement(h.Split,{hasGutter:!0},l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run status"},z.status?l().createElement(N.kf,{executorStatus:z.status,counts:z.counts,permission:j}):l().createElement(y.Z,{size:"lg"}))),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},`${t.data.created_by.first_name} ${t.data.created_by.last_name}`)),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},l().createElement(E.Z,{type:"exact",date:t.data.created_at}))))))),{running:Y(q=(0,N.fb)(z.status)),success:Y(q),failure:Y(q),canceled:Y(q),epicFailure:l().createElement(u.ZP,null,l().createElement(_.Stack,{hasGutter:!0},l().createElement(b.Card,null,l().createElement(b.CardHeader,{className:"rem-m-card__header-bold"},l().createElement(g.Button,{variant:"secondary",onClick:()=>(0,R.rN)(e.id)},"Download playbook")),l().createElement(b.CardBody,null,l().createElement(D,{name:z.executor_name})))))}[(0,N.fb)(q)]):l().createElement(x,null);var q};Q.propTypes={remediation:i().object,playbookRun:i().object,playbookRunSystemDetails:i().object,getPlaybookRun:i().func,getPlaybookRunSystemDetails:i().func,onCollapseInventory:i().func,loadRemediation:i().func},Q.defaultProps={remediation:{}};const X=(0,r.connect)((({playbookRuns:e,playbookRun:t,playbookRunSystemDetails:n,selectedRemediation:a})=>({playbookRuns:e.data,playbookRun:t,playbookRunSystemDetails:n,remediation:a.remediation})),(e=>({getPlaybookRuns:t=>e((0,Z.Is)(t)),getPlaybookRun:(t,n)=>e((0,Z.zy)(t,n)),getPlaybookRunSystemDetails:(t,n,a)=>e((0,Z.gE)(t,n,a)),onCollapseInventory:(t,n)=>e((0,Z.wY)(n,t)),loadRemediation:t=>e((0,Z.d5)(t))})))(Q)},76400:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(10756),l=n.n(a),r=n(45697),s=n.n(r),i=n(93967),c=n.n(i);const o=({title:e,className:t,children:n,isBold:a,hasGutter:r,needsPointer:s,...i})=>{const o=c()("rem-c-description-list__description",{"rem-c-description-list__description--bold":a},{"rem-c-description-list__description--withGutter":r},{"rem-c-description-list__description--needsPointer":s}),m=c()(t,"rem-c-description-list");return l().createElement("dl",{className:m,...i},l().createElement("dt",{className:"rem-c-description-list__title"},l().createElement("b",null,e)),l().createElement("dd",{className:o}," ",n," "))},m=o;o.propTypes={title:s().string,children:s().any,isBold:s().bool,className:s().string,hasGutter:s().bool,needsPointer:s().bool}},68175:(e,t,n)=>{"use strict";n.d(t,{Gx:()=>r,M1:()=>l,VA:()=>s,um:()=>a});const a=(e=[],t)=>e.every((({id:e})=>t?.has(e)))?e.length>0:e.some((({id:e})=>t?.has(e)))&&null,l=e=>e?.issues?.reduce(((e,t)=>(t?.systems?.forEach((n=>{const a=e.find((({id:e})=>n.id===e)),l={id:t.id,resolution:t.resolution,description:t.description};a?(a.issues=[...a.issues,{...l,resolved:a.resolved}],a.rebootRequired=a.issues.some((({resolution:e})=>e?.needs_reboot))):e.push({...n,issues:[{...l,resolved:n.resolved}],rebootRequired:t?.resolution?.needs_reboot})})),e)),[])||[],r=async({page:e=0,...t}={},n,a,l)=>{const r=n.filter((({display_name:e})=>!t.filters?.hostnameOrId||e.includes(t.filters.hostnameOrId))),s=await a(r.slice((e-1)*t.per_page,e*t.per_page).map((({id:e})=>e)),{...t,hasItems:!0},!0),i=s.results.map((e=>{const t=e.id,n=403!==l&&l.find((e=>e.system_ids.includes(t)));return n?{...e,connection_status:n.connection_status,executor_type:n.executor_type}:e}));return{...s,page:e,results:i.map((e=>({...r.find((({id:t})=>t===e.id)),...e}))),total:r.length}},s=(e=[],t=[])=>t.map((t=>e.find((e=>e.key===t.key))||t))},2648:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(10756),l=n.n(a),r=n(75863),s=n(43416),i=n(49004),c=n(32819),o=n(15433),m=n(87694),u=n(82814);class d extends l().Component{constructor(e){super(e),this.state={columns:[{title:l().createElement(c.Z,{size:"xs"})},{title:l().createElement(c.Z,{size:"sm"})},{title:l().createElement(c.Z,{size:"sm"})},{title:l().createElement(c.Z,{size:"md"})},{title:l().createElement(c.Z,{size:"sm"})}],rows:[[{title:l().createElement(c.Z,{size:"md"})},{title:l().createElement(c.Z,{size:"xs"})},{title:l().createElement(c.Z,{size:"xs"})},{title:l().createElement(c.Z,{size:"md"})},{title:l().createElement(c.Z,{size:"md"})}]]}}render(){const{columns:e,rows:t}=this.state;return l().createElement(a.Fragment,null,l().createElement(s.i,{cells:e,rows:t,"aria-label":"Loading",variant:r.B.compact,...this.props},l().createElement(i.x,null)),l().createElement(u.Z,{centered:!0},l().createElement(m.Z,null)),l().createElement(o.Z,{isFooter:!0,className:"rem-c-skeleton-table__footer rem-m-align-right"},l().createElement(c.Z,{size:"sm"})))}}const p=d},42655:()=>{}}]);
//# sourceMappingURL=../sourcemaps/ExecutorDetails.63f2c2f5f19b4629ae3ee012b94e3797.js.map