/*! For license information please see RemediationButton.4929cc605bde3bae5c8a.js.LICENSE.txt */
(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[8011,6408],{73725:(e,t,n)=>{"use strict";n.d(t,{GZ:()=>q,yc:()=>H,rN:()=>Y,yY:()=>k,kd:()=>G,NH:()=>$,uQ:()=>C,lK:()=>X,mY:()=>z,o6:()=>V,V_:()=>U,_5:()=>x,YI:()=>M});var r=n(4942),o=n(15861),s=n(43144),i=n(15671),a=n(82963),c=n(61120),u=n(60136),l=n(72407),f=n(64687),p=n.n(f),d=n(28962),E=n(11521),O=n.n(E),y=n(67450),m=n(64517);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t,n){return t=(0,c.Z)(t),(0,a.Z)(e,v()?Reflect.construct(t,n||[],(0,c.Z)(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var w=function(e){function t(e){var n;return(0,i.Z)(this,t),(n=b(this,t,["Error communicating with the server"])).description=e,n}return(0,u.Z)(t,e),(0,s.Z)(t)}((0,l.Z)(Error));function _(e){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:if(!t.headers.get("content-type").includes("application/json")){e.next=17;break}return n=!1,e.prev=4,e.next=7,t.json();case 7:n=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:if(!n.errors||!n.errors.length){e.next=17;break}if(!(r=n.errors[0]).details||!r.details.name){e.next=16;break}throw new w("".concat(r.title," (").concat(r.details.name,")"));case 16:throw new w(r.title);case 17:throw new w("Unexpected response code ".concat(t.status));case 18:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function A(e){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if((n=t.headers.get("content-type")).includes("application/json")){e.next=5;break}throw new w("Unexpected response type (".concat(n,") returned"));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({credentials:"same-origin",method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"},arguments.length>4&&void 0!==arguments[4]?arguments[4]:{});return n&&(o.headers=n),t&&(o.body=JSON.stringify(t)),fetch(e,o)}(e.toString()).then(_).then(A)}var T=n(54998),I=n.n(T);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t=(0,c.Z)(t),(0,a.Z)(e,D()?Reflect.construct(t,n||[],(0,c.Z)(e).constructor):t.apply(e,n))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var C=function(e){return P(function(){for(var e=I()(d.API_BASE).segment("remediations"),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.segment(t)})),e}(e,"status"))};function k(){return P("/api/inventory/v1/hosts")}var B=function(e){function t(e){var n;return(0,i.Z)(this,t),(n=N(this,t,["Error communicating with the server"])).description=e,n}return(0,u.Z)(t,e),(0,s.Z)(t)}((0,l.Z)(Error));function Z(){return Z=(0,o.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}var L=O().create();L.interceptors.request.use((function(e){return Z.apply(this,arguments)})),L.interceptors.response.use((function(e){return e.data?j(j({},e.data),{},{etag:e.headers.etag}):e})),L.interceptors.response.use(null,(function(e){if(e){if(e.response&&401===e.response.status)return!1;throw e}})),L.interceptors.response.use(null,(function(e){if(e){if(e.response&&e.response.data&&e.response.data.errors&&e.response.data.errors.length){var t=e.response.data.errors[0];if(t.details&&t.details.name)throw new B("".concat(t.title," (").concat(t.details.name,")"));throw new B(t.title)}throw e}}));var U=new y.RemediationsApi(void 0,d.API_BASE,L),x=new y.ResolutionsApi(void 0,d.API_BASE,L),M=new m.DefaultApi(void 0,d.SOURCES_BASE,L);function Y(e){return new Promise((function(t,n){var r=e.length>1?(new y.RemediationsApiAxiosParamCreator).downloadPlaybooks(e).then((function(e){return window.location.assign(d.API_BASE+e.url)})):(new y.RemediationsApiAxiosParamCreator).getRemediationPlaybook(e[0]).then((function(e){return window.location.assign(d.API_BASE+e.url)}));if(!r)return n();var o=setInterval((function(){r.closed&&(clearInterval(o),t())}),500)}))}function G(){return P("".concat(window.location.origin,"/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]"))}function H(e,t){return Promise.all(e.flatMap((function(e){return e.issues.map((function(n){return U.deleteRemediationIssueSystem(t.id,n.id,e.id)}))})))}function F(e){if(!e.ok){var t=new Error("Unexpected response code ".concat(e.status));throw t.statusCode=e.status,t}return e}function K(e){return F(e),e.json()}var J=Object.freeze({"Content-Type":"application/json; charset=utf-8"});function q(e){var t=new(I())(d.API_BASE).segment("remediations").toString();return fetch(t,{headers:J,method:"POST",credentials:"include",body:JSON.stringify(e)}).then(K)}function V(e,t){var n=new(I())(d.API_BASE).segment("remediations").segment(e).toString();return fetch(n,{headers:J,credentials:"include",method:"PATCH",body:JSON.stringify(t)}).then(F)}function X(){var e=new(I())(d.API_BASE).segment("remediations").query({limit:200}).toString();return fetch(e,{credentials:"include"}).then(K)}function $(e){var t=new(I())(d.API_BASE).segment("remediations").segment(e).toString();return fetch(t,{credentials:"include"}).then(K)}function z(e){var t=new(I())(d.API_BASE).segment("resolutions").toString();return fetch(t,{headers:J,credentials:"include",method:"POST",body:JSON.stringify({issues:e})}).then(K)}},28962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{API_BASE:()=>r,SOURCES_BASE:()=>o});var r="/api/remediations/v1",o="/api/sources/v2.0"},58061:(e,t,n)=>{"use strict";n.d(t,{ET:()=>u,JY:()=>f,aI:()=>c,mg:()=>l});var r=n(93433),o=n(24350),s=n.n(o),i=n(94654),a=n.n(i)()(["LOAD_REMEDIATIONS","CREATE_REMEDIATIONS","LOAD_REMEDIATION","LOAD_REMEDIATION_STATUS","REFRESH_REMEDIATION","PATCH_REMEDIATION","DELETE_REMEDIATION","DELETE_REMEDIATION_ISSUE","DELETE_REMEDIATION_ISSUE_SYSTEM","PATCH_REMEDIATION_ISSUE","GET_RESOLUTIONS","GET_CONNECTION_STATUS","RUN_REMEDIATION","EXECUTE_PLAYBOOK_BANNER","RUN_REMEDIATION","GET_PLAYBOOK_RUNS","GET_PLAYBOOK_RUN","GET_PLAYBOOK_RUN_SYSTEMS","GET_PLAYBOOK_RUN_SYSTEM_DETAILS","CANCEL_PLAYBOOK_RUNS","GET_ENDPOINT","CHECK_EXECUTABLE"],(function(e){return[e,"".concat(e,"_PENDING"),"".concat(e,"_FULFILLED"),"".concat(e,"_REJECTED")]})),c=s()([].concat((0,r.Z)(a),["SET_ETAG","EXPAND_INVENTORY_TABLE","SELECT_ENTITY"]),(function(e){return e})),u=500,l="FETCH_SELECTED_HOSTS",f="FETCH_RESOLUTIONS"},2793:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var r=n(4942),o=n(87462),s=n(29439),i=n(10756),a=n.n(i),c=n(45697),u=n.n(c),l=n(55140),f=n(71002);function p(e,t){if(!e)throw new TypeError(t)}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Object.keys(e).forEach((function(e){return p(n.includes(e),"Unexpected key: ".concat(e," Expected one of: ").concat(n))}))}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){return p(Object.prototype.hasOwnProperty.call(e,t),"Required key missing: ".concat(t))}))}function O(e){p(Array.isArray(e),"Systems must be an array"),p(e.length,"Systems array must not be empty"),e.forEach((function(e){return p("string"==typeof e,"System must be of type string")}))}var y=n(86507),m=n(26318),h=n(98901),b=n(51662);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.isDisabled,n=e.children,r=e.dataProvider,c=e.onRemediationCreated,u=e.buttonProps,v=(0,i.useState)(!1),_=(0,s.Z)(v,2),S=_[0],A=_[1],g=(0,i.useState)(),P=(0,s.Z)(g,2),T=P[0],I=P[1],R=(0,i.useState)(!1),j=(0,s.Z)(R,2),N=j[0],D=j[1],C=(0,l.Z)();return(0,i.useEffect)((function(){C.getUserPermissions("remediations").then((function(e){A(e.some((function(e){var t=e.permission;return(0,y.P9)(t,y.FH)})))}))}),[]),S?a().createElement(a().Fragment,null,a().createElement(m.Button,(0,o.Z)({isDisabled:t,"data-testid":"remediationButton-with-permissions",onClick:function(){Promise.resolve(r()).then((function(e){e?(function(e){p("object"===(0,f.Z)(e)&&null!==e),d(e,"issues","systems","onRemediationCreated"),E(e,"issues"),p(Array.isArray(e.issues),"Issues must be an array"),p(e.issues.length,"Issues array must not be empty"),e.issues.forEach((function(t){p("object"===(0,f.Z)(t)&&null!==t,"Issue must be an object"),d(t,"id","description","systems"),E(t,"id","description"),Object.prototype.hasOwnProperty.call(t,"systems")&&O(t.systems),p(Object.prototype.hasOwnProperty.call(t,"systems")||Object.prototype.hasOwnProperty.call(e,"systems"),"No systems defined for ".concat(t.id))})),Object.prototype.hasOwnProperty.call(e,"systems")&&O(e.systems)}(e),I(e)):D(!0)}))}},u),n),a().createElement(b.default,{isOpen:N,setOpen:D}),T&&a().createElement(h.default,{setOpen:function(e){return I((function(t){return!1===e?null:t}))},data:w({onRemediationCreated:c},T||{})})):a().createElement(m.Tooltip,{content:"You do not have correct permissions to remediate this entity."},a().createElement("span",null,a().createElement(m.Button,(0,o.Z)({isDisabled:!0},u,{"data-testid":"remediationButton-no-permissions"}),n)))};_.propTypes={isDisabled:u().bool,dataProvider:u().func.isRequired,onRemediationCreated:u().func,children:u().node,buttonProps:u().shape((0,r.Z)({},u().string,u().any))},_.defaultProps={isDisabled:!1,onRemediationCreated:function(e){return e},children:"Remediate with Ansible"};const S=_},51662:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NoDataModal:()=>c,default:()=>u});var r=n(10756),o=n.n(r),s=n(45697),i=n.n(s),a=n(26318),c=function(e){var t=e.isOpen,n=e.setOpen;return o().createElement(a.Modal,{variant:a.ModalVariant.small,title:"Remediate with Ansible",isOpen:t,onClose:function(){return n(!1)},actions:[o().createElement(a.Button,{key:"confirm",variant:"primary",onClick:function(){return n(!1)}},"Back to Insights")]},"None of the selected issues can be remediated with Ansible.",o().createElement("br",null),o().createElement("br",null),"To remediate these issues, review the manual remediation steps associated with each.")};c.propTypes={isOpen:i().bool,setOpen:i().func};const u=c},75251:(e,t,n)=>{"use strict";var r=n(10756),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:l,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},45467:()=>{},81754:()=>{},11452:()=>{},34946:()=>{},32857:()=>{},10108:()=>{},90479:()=>{},8572:()=>{},98379:()=>{},66822:()=>{},314:()=>{},49854:()=>{},87234:()=>{},24654:()=>{}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./RemediationButton.8b2f209efb9099646701305f4045c43d.js.map