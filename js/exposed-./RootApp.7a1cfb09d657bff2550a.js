(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[8178],{95726:(e,t,n)=>{"use strict";n.d(t,{B:()=>O,Z:()=>f});var s=n(10756),a=n.n(s),i=n(55140),r=n(28216),o=n(11521),d=n.n(o),E=n(88208),l=n(75796),u=n(22663),c=n(46639);const _={home:{path:"/*",component:(0,s.lazy)((()=>Promise.all([n.e(9121),n.e(1088),n.e(4493),n.e(2396),n.e(9868),n.e(7078),n.e(8425),n.e(6234),n.e(4933),n.e(8248),n.e(8100),n.e(8929),n.e(5925),n.e(4055),n.e(7269),n.e(7483),n.e(930),n.e(1720),n.e(595),n.e(4252),n.e(8521),n.e(9769),n.e(1891),n.e(6491),n.e(3999),n.e(5268)]).then(n.bind(n,87820))))},details:{path:":id",component:(0,s.lazy)((()=>Promise.all([n.e(9121),n.e(1088),n.e(4493),n.e(2396),n.e(9868),n.e(7078),n.e(8425),n.e(6234),n.e(4933),n.e(8248),n.e(8100),n.e(8929),n.e(5925),n.e(4055),n.e(7483),n.e(5133),n.e(930),n.e(1720),n.e(595),n.e(4252),n.e(8521),n.e(9769),n.e(3774),n.e(3999),n.e(9231),n.e(1390)]).then(n.bind(n,51467))))},runDetails:{path:":id/:run_id",component:(0,s.lazy)((()=>Promise.all([n.e(9121),n.e(1088),n.e(4493),n.e(2396),n.e(9868),n.e(7078),n.e(8425),n.e(6234),n.e(4933),n.e(8248),n.e(8100),n.e(8929),n.e(930),n.e(1720),n.e(595),n.e(8521),n.e(6491),n.e(3774),n.e(7935)]).then(n.bind(n,19845))))},executorDetails:{path:":id/:run_id/:executor_id",component:(0,s.lazy)((()=>Promise.all([n.e(9121),n.e(1088),n.e(4493),n.e(2396),n.e(9868),n.e(7078),n.e(8425),n.e(6234),n.e(4933),n.e(8248),n.e(8100),n.e(8929),n.e(3881),n.e(930),n.e(1720),n.e(595),n.e(4252),n.e(8521),n.e(6491),n.e(3774),n.e(9231),n.e(2530)]).then(n.bind(n,75593))))}},I=()=>{const[e,t]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{try{d().get("/api/inventory/v1/hosts?filter[system_profile][operating_system][RHEL][version][gte]=0&page=1&per_page=1").then((({data:e})=>{t(e.total>0)}))}catch(e){console.log(e)}}),[e]),a().createElement(u.Z,{appName:"dashboard",module:"./AppZeroState",scope:"dashboard",ErrorComponent:a().createElement(c.Z,null),app:"Remediations",appId:"remediation_zero_state",customFetchResults:e},a().createElement(s.Suspense,{fallback:a().createElement(l.Spinner,null)},a().createElement(E.Routes,null,Object.entries(_).map((([e,{path:t,component:n}])=>a().createElement(E.Route,{key:e,path:t,element:a().createElement(n,null)}))))))};var m=n(63456),p=n(39173),T=n(99087),S=n(87694);const A=()=>a().createElement(a().Fragment,null,a().createElement(m.Z,{className:"ins-remediations__skeleton"},a().createElement(p.Z,{className:"rem-s-page-header",title:"Remediations"})),a().createElement(T.ZP,null,a().createElement(S.Z,{centered:!0})));var N=n(33626),L=n(57599);const O=(0,s.createContext)(),f=(0,r.connect)()((()=>{const e=(0,i.Z)(),[{readPermission:t,writePermission:n,executePermission:r,arePermissionLoaded:o},d]=(0,s.useState)({readPermission:void 0,writePermission:void 0,executePermission:void 0,arePermissionLoaded:!1}),[E,l]=(0,s.useState)(void 0),u=(e,t,n)=>d({readPermission:e,writePermission:t,executePermission:n,arePermissionLoaded:!0});return(0,s.useEffect)((()=>{e&&(e?.hideGlobalFilter?.(),(0,N.kd)().then((e=>l(e.data.length>0))),e.getUserPermissions("remediations").then((e=>{const t=e.map((e=>e.permission));t.includes("remediations:*:*")?u(!0,!0,!0):u(t.includes("remediations:remediation:read"),t.includes("remediations:remediation:write"),t.includes("remediations:remediation:execute"))})))}),[]),o?a().createElement(O.Provider,{value:{permissions:{read:t,write:n,execute:r},isReceptorConfigured:E}},a().createElement(L.ZP,null),a().createElement(I,null)):a().createElement(A,null)}))},60167:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var s=n(10756),a=n.n(s),i=n(45697),r=n.n(i),o=n(28216),d=n(92223),E=n(95726);const l=({logger:e})=>a().createElement(o.Provider,{store:(0,d.S1)(e).getStore()},a().createElement(E.Z,null));l.propTypes={logger:r().func};const u=l},33626:(e,t,n)=>{"use strict";n.d(t,{GZ:()=>h,yc:()=>f,rN:()=>L,yY:()=>m,kd:()=>O,NH:()=>U,uQ:()=>I,lK:()=>P,mY:()=>C,o6:()=>y,V_:()=>S,_5:()=>A,YI:()=>N});var s=n(93940),a=n(11521),i=n.n(a),r=n(67450),o=n(64517);class d extends Error{constructor(e){super("Error communicating with the server"),this.description=e}}async function E(e){if(e.ok)return e;if(e.headers.get("content-type").includes("application/json")){let t=!1;try{t=await e.json()}catch(e){}if(t.errors&&t.errors.length){const e=t.errors[0];if(e.details&&e.details.name)throw new d(`${e.title} (${e.details.name})`);throw new d(e.title)}}throw new d(`Unexpected response code ${e.status}`)}async function l(e){if(!e)return;const t=e.headers.get("content-type");if(!t.includes("application/json"))throw new d(`Unexpected response type (${t}) returned`);return e.json()}function u(e){return function(e,t="GET",n=!1,s=!1,a={}){const i={credentials:"same-origin",method:t,...a};return s&&(i.headers=s),n&&(i.body=JSON.stringify(n)),fetch(e,i)}(e.toString()).then(E).then(l)}var c=n(54998),_=n.n(c);const I=e=>u(function(...e){const t=_()(s.API_BASE).segment("remediations");return e.forEach((e=>t.segment(e))),t}(e,"status"));function m(){return u("/api/inventory/v1/hosts")}class p extends Error{constructor(e){super("Error communicating with the server"),this.description=e}}const T=i().create();T.interceptors.request.use((async function(e){return e})),T.interceptors.response.use((function(e){return e.data?{...e.data,etag:e.headers.etag}:e})),T.interceptors.response.use(null,(function(e){if(e){if(e.response&&401===e.response.status)return!1;throw e}})),T.interceptors.response.use(null,(function(e){if(e){if(e.response&&e.response.data&&e.response.data.errors&&e.response.data.errors.length){const t=e.response.data.errors[0];if(t.details&&t.details.name)throw new p(`${t.title} (${t.details.name})`);throw new p(t.title)}throw e}}));const S=new r.RemediationsApi(void 0,s.API_BASE,T),A=new r.ResolutionsApi(void 0,s.API_BASE,T),N=new o.DefaultApi(void 0,s.SOURCES_BASE,T);function L(e){return new Promise(((t,n)=>{const a=e.length>1?(new r.RemediationsApiAxiosParamCreator).downloadPlaybooks(e).then((e=>window.location.assign(s.API_BASE+e.url))):(new r.RemediationsApiAxiosParamCreator).getRemediationPlaybook(e[0]).then((e=>window.location.assign(s.API_BASE+e.url)));if(!a)return n();const i=setInterval((()=>{a.closed&&(clearInterval(i),t())}),500)}))}function O(){return u(`${window.location.origin}/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]`)}function f(e,t){return Promise.all(e.flatMap((e=>e.issues.map((n=>S.deleteRemediationIssueSystem(t.id,n.id,e.id))))))}function D(e){if(!e.ok){const t=new Error(`Unexpected response code ${e.status}`);throw t.statusCode=e.status,t}return e}function R(e){return D(e),e.json()}const g=Object.freeze({"Content-Type":"application/json; charset=utf-8"});function h(e){const t=new(_())(s.API_BASE).segment("remediations").toString();return fetch(t,{headers:g,method:"POST",credentials:"include",body:JSON.stringify(e)}).then(R)}function y(e,t){const n=new(_())(s.API_BASE).segment("remediations").segment(e).toString();return fetch(n,{headers:g,credentials:"include",method:"PATCH",body:JSON.stringify(t)}).then(D)}function P(){const e=new(_())(s.API_BASE).segment("remediations").query({limit:200}).toString();return fetch(e,{credentials:"include"}).then(R)}function U(e){const t=new(_())(s.API_BASE).segment("remediations").segment(e).toString();return fetch(t,{credentials:"include"}).then(R)}function C(e){const t=new(_())(s.API_BASE).segment("resolutions").toString();return fetch(t,{headers:g,credentials:"include",method:"POST",body:JSON.stringify({issues:e})}).then(R)}},93940:(e,t,n)=>{"use strict";n.r(t),n.d(t,{API_BASE:()=>s,SOURCES_BASE:()=>a});const s="/api/remediations/v1",a="/api/sources/v2.0"},37468:(e,t,n)=>{"use strict";n.d(t,{ET:()=>d,JY:()=>l,aI:()=>o,mg:()=>E});var s=n(24350),a=n.n(s),i=n(94654);const r=n.n(i)()(["LOAD_REMEDIATIONS","CREATE_REMEDIATIONS","LOAD_REMEDIATION","LOAD_REMEDIATION_STATUS","REFRESH_REMEDIATION","PATCH_REMEDIATION","DELETE_REMEDIATION","DELETE_REMEDIATION_ISSUE","DELETE_REMEDIATION_ISSUE_SYSTEM","PATCH_REMEDIATION_ISSUE","GET_RESOLUTIONS","GET_CONNECTION_STATUS","RUN_REMEDIATION","EXECUTE_PLAYBOOK_BANNER","RUN_REMEDIATION","GET_PLAYBOOK_RUNS","GET_PLAYBOOK_RUN","GET_PLAYBOOK_RUN_SYSTEMS","GET_PLAYBOOK_RUN_SYSTEM_DETAILS","CANCEL_PLAYBOOK_RUNS","GET_ENDPOINT","CHECK_EXECUTABLE"],(e=>[e,`${e}_PENDING`,`${e}_FULFILLED`,`${e}_REJECTED`])),o=a()([...r,"SET_ETAG","EXPAND_INVENTORY_TABLE","SELECT_ENTITY"],(e=>e)),d=500,E="FETCH_SELECTED_HOSTS",l="FETCH_RESOLUTIONS"},92223:(e,t,n)=>{"use strict";n.d(t,{S1:()=>l,bh:()=>u,z2:()=>c});var s=n(67336),a=n(83215),i=n(84885),r=n(57283),o=n.n(r),d=n(881);let E;function l(...e){return E=(0,s.JH)({},[o(),(0,i.ZP)({errorTitleKey:"message",errorDescriptionKey:"description"}),...e.filter((e=>void 0!==e))]),E.register(d.Z),E.register({notifications:a.ee}),E}function u(){return E.getStore()}function c(...e){return E.register(...e)}},881:(e,t,n)=>{"use strict";n.d(t,{L:()=>_,Z:()=>I});var s=n(10756),a=n.n(s),i=n(37468),r=n(18546),o=n(94654),d=n.n(o),E=n(44908),l=n.n(E);function u(e){return l()(d()(e,(e=>e.systems.map((e=>e.id)))))}function c(e){const t=u(e.issues),n=u(e.issues.filter((e=>e.resolution.needs_reboot)));return{...e,stats:{systemsWithReboot:n.length,systemsWithoutReboot:t.length-n.length}}}const _=({LOAD_ENTITIES_FULFILLED:e})=>(0,r.Gg)({[i.aI.SELECT_ENTITY]:(e,{payload:t})=>{const n=e.selected||new Map;if(t.selected)if(0===t.id)e?.rows?.forEach((e=>n.set(e?.id,e)));else{const s=e?.rows?.find((({id:e}={})=>e===t.id));n.set(t.id,{...s||{},id:t.id})}else 0===t.id?e.rows.forEach((e=>n.delete(e.id))):-1===t.id?n.clear():n.delete(t.id);return{...e,selected:new Map(n)}},[`${e}`]:e=>({...e,rows:e.rows.map((({id:t,...n})=>({id:t,...n,selected:!!e.selected?.get(t)})))})}),I={remediations:(0,r.Gg)({[i.aI.LOAD_REMEDIATIONS_PENDING]:()=>({status:"pending"}),[i.aI.LOAD_REMEDIATIONS_FULFILLED]:(e,t)=>({status:"fulfilled",value:t.payload}),[i.aI.LOAD_REMEDIATIONS_REJECTED]:()=>({status:"rejected"})},{status:"initial"}),selectedRemediation:(0,r.Gg)({[i.aI.LOAD_REMEDIATION_PENDING]:()=>({status:"pending"}),[i.aI.LOAD_REMEDIATION_FULFILLED]:(e,t)=>({status:"fulfilled",remediation:c(t.payload)}),[i.aI.REFRESH_REMEDIATION_FULFILLED]:(e,t)=>t.payload.id===e.remediation.id?{status:"fulfilled",remediation:c(t.payload)}:e,[i.aI.LOAD_REMEDIATION_REJECTED]:()=>({status:"rejected"}),[i.aI.PATCH_REMEDIATION_FULFILLED]:({status:e,remediation:t},n)=>({status:e,remediation:{...t,...n.payload}}),[i.aI.DELETE_REMEDIATION_ISSUE_FULFILLED]:(e,t)=>{const n=e.remediation.issues.filter((e=>e.id!==t.payload.issueId));return t.payload.id===e.remediation.id?{status:"fulfilled",remediation:c({...e.remediation,issues:n,needs_reboot:n.some((e=>e.resolution.needs_reboot))})}:e},[i.aI.DELETE_REMEDIATION_ISSUE_SYSTEM_FULFILLED]:(e,t)=>{if(t.payload.id!==e.remediation.id)return e;const n=e.remediation.issues.filter((e=>e.id!==t.payload.issue||(e.systems=e.systems.filter((e=>e.id!==t.payload.system)),e.systems.length>0)));return{status:"fulfilled",remediation:c({...e.remediation,issues:n,needs_reboot:n.some((e=>e.resolution.needs_reboot))})}}},{status:"initial"}),selectedRemediationStatus:(0,r.Gg)({[i.aI.LOAD_REMEDIATION_STATUS_PENDING]:()=>({status:"pending"}),[i.aI.LOAD_REMEDIATION_STATUS_FULFILLED]:(e,t)=>({status:"fulfilled",data:t.payload}),[i.aI.LOAD_REMEDIATION_STATUS_REJECTED]:()=>({status:"rejected"})},{status:"initial"}),connectionStatus:(0,r.Gg)({[i.aI.GET_CONNECTION_STATUS_PENDING]:()=>({status:"pending"}),[i.aI.GET_CONNECTION_STATUS_FULFILLED]:(e,t)=>({status:"fulfilled",data:t.payload.data,etag:t.payload.etag}),[i.aI.GET_CONNECTION_STATUS_REJECTED]:()=>({status:"rejected",data:[]}),[i.aI.SET_ETAG]:(e,t)=>({...e,etag:t.etag})},{status:"initial"}),inventoryEntitiesReducer:(e={INVENTORY_ACTION_TYPES:{}})=>()=>(0,r.Gg)({[e.INVENTORY_ACTION_TYPES.LOAD_ENTITIES_FULFILLED]:t=>({...t,columns:[{key:"display_name",title:"Name",renderFunc:(t,n,{display_name:s})=>a().createElement("div",null,a().createElement("a",{href:e.urlBuilder(n)},s))},{key:"system_status",title:"Status",renderFunc:(t,n)=>a().createElement("div",null,e.generateStatus(n))}]})}),playbookActivityIntentory:()=>()=>(0,r.Gg)({[i.aI.EXPAND_INVENTORY_TABLE]:(e,t)=>({...e,rows:e.rows.map((e=>({...e,isOpen:e.id===t.payload.id&&t.payload.isOpen})))})}),playbookRuns:(0,r.Gg)({[i.aI.GET_PLAYBOOK_RUNS_FULFILLED]:(e,t)=>({status:"fulfilled",data:t.payload.data,meta:t.payload.meta})}),cancelPlaybookRuns:(0,r.Gg)({[i.aI.CANCEL_PLAYBOOK_RUNS_PENDING]:()=>({status:"pending"}),[i.aI.CANCEL_PLAYBOOK_RUNS_FULFILLED]:(e,t)=>({status:"fulfilled",value:t.payload}),[i.aI.CANCEL_PLAYBOOK_RUNS_REJECTED]:()=>({status:"rejected"})},{status:"initial"}),playbookRun:(0,r.Gg)({[i.aI.GET_PLAYBOOK_RUN_FULFILLED]:(e,t)=>({data:t.payload})}),playbookRunSystems:(0,r.Gg)({[i.aI.GET_PLAYBOOK_RUN_SYSTEMS_FULFILLED]:(e,t)=>({...t.payload}),[i.aI.GET_PLAYBOOK_RUN_SYSTEMS_PENDING]:e=>({...e,status:"pending"}),[i.aI.GET_PLAYBOOK_RUN_SYSTEMS_REJECTED]:e=>({...e,data:[],status:"rejected"})},{data:[],meta:{}}),playbookRunSystemDetails:(0,r.Gg)({[i.aI.GET_PLAYBOOK_RUN_SYSTEM_DETAILS_FULFILLED]:(e,t)=>({...t.payload})}),runRemediation:(0,r.Gg)({[i.aI.RUN_REMEDIATION_PENDING]:()=>({status:"pending"}),[i.aI.RUN_REMEDIATION_FULFILLED]:(e,t)=>({status:"fulfilled",data:t.payload.data}),[i.aI.RUN_REMEDIATION_REJECTED]:(e,t)=>({status:412===t.payload.response.status?"changed":"rejected"})},{status:"initial"}),sources:(0,r.Gg)({[i.aI.GET_ENDPOINT_FULFILLED]:(e,t)=>({status:"fulfilled",data:{...e.data,[t.payload.id]:t.payload}})},{status:"initial"}),executable:(0,r.Gg)({[i.aI.CHECK_EXECUTABLE_REJECTED]:()=>!1,[i.aI.CHECK_EXECUTABLE_FULFILLED]:()=>!0},!1)}},11452:()=>{},34946:()=>{},10108:()=>{},81320:()=>{},88361:()=>{},66822:()=>{},314:()=>{},53519:()=>{},24654:()=>{}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./RootApp.d4b6fcc82bab9265f55ed7460b2c778b.js.map