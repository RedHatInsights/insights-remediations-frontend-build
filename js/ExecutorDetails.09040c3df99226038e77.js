(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[2530],{68452:(e,t,n)=>{"use strict";function r(e){return e.split(":")[0]}function a(e){switch(r(e.id)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function l(e){var t=e.display_name,n=e.hostname,r=e.id;return t||n||r}function s(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{PW:()=>s,Pz:()=>r,_f:()=>l,lN:()=>a})},22163:(e,t,n)=>{"use strict";n.d(t,{Gd:()=>c,T:()=>s,Tj:()=>o});var r=n(54998),a=n.n(r),l=n(68452);function s(e){var t=function(e){var t=e.id;switch((0,l.Pz)(t)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=c("inventory").toString();return function(e){return"".concat(n,"/").concat(e,"?appName=").concat(t)}}function o(e){var t=e.split(":");switch(t[0]){case"advisor":return c(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return c(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return c(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function c(e){switch(e){case"advisor":return a()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return a()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return a()(document.baseURI).segment("insights").segment("compliance");case"inventory":return a()(document.baseURI).segment((t=window.location.pathname.split("/"),"preview"===t[1]?t[2]:t[1])).segment("inventory");case"patch-advisory":return a()(document.baseURI).segment("insights").segment("patch");default:throw new Error("Unknown app: ".concat(e))}var t}},76691:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var r=n(4942),a=n(29439),l=n(92950),s=n.n(l),o=n(28216),c=n(45697),i=n.n(c),u=n(92397),m=n(62012),d=n(99166),p=n(63652),y=n(14748),f=n(89376),b=n(39173),E=n(62410),g=n(35664),v=n(18213),h=n(83237),k=n(14938),Z=n(52017),S=n(81730),_=n(76200),R=n(50289),P=n(16075),I=n(77431),O=n(22812),w=n(66650),N=n(78923),C=n(96184),T=function(e){var t=e.data;return s().createElement(N.n,{data:t,toolbar:s().createElement(k.Toolbar,null,s().createElement(k.ToolbarContent,null,s().createElement(k.ToolbarItem,null,s().createElement(C.Y,{placeholder:"Search"}))))})};T.propTypes={data:i().string};const j=T;O.Z.registerLanguage("yaml",w.Z);var x=function(e){var t=e.systemId,n=e.playbookRunSystemDetails;return s().createElement(s().Fragment,null,s().createElement(k.Title,{headingLevel:"h4",size:"xl",className:"rem-c-title-job-output"},"Playbook log"),t&&t===n.system_id?s().createElement(s().Fragment,null,s().createElement(j,{data:n.console}),"running"===n.status&&s().createElement("div",{className:"rem-l-playbook-running"},s().createElement(k.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):s().createElement(g.Z,{size:"lg"}))};x.propTypes={systemId:i().string,status:i().string,console:i().string,playbookRunSystemDetails:i().shape({system_id:i().string,status:i().string,console:i().string})},x.defaultProps={playbookRunSystemDetails:{}};const z=(0,o.connect)((function(e){return{playbookRunSystemDetails:e.playbookRunSystemDetails}}))(x);var D=n(40742);const B=function(){return s().createElement(s().Fragment,null,s().createElement(f.Z,null,s().createElement(k.Breadcrumb,null,s().createElement(k.BreadcrumbItem,null,s().createElement(g.Z,{size:"lg"})),s().createElement(k.BreadcrumbItem,null,s().createElement(g.Z,{size:"lg"})),s().createElement(k.BreadcrumbItem,{isActive:!0},s().createElement(g.Z,{size:"lg"}))),s().createElement(k.Stack,{hasGutter:!0},s().createElement(k.StackItem,null,s().createElement(b.Z,{title:s().createElement(g.Z,{size:"lg"})})),s().createElement(k.StackItem,null,s().createElement(k.Split,{hasGutter:!0},s().createElement(k.SplitItem,null,s().createElement(_.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},s().createElement(g.Z,{size:"lg"}))),s().createElement(k.SplitItem,null,s().createElement(_.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},s().createElement(g.Z,{size:"lg"}))),s().createElement(k.SplitItem,null,s().createElement(_.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},s().createElement(g.Z,{size:"lg"}))))))),s().createElement(y.ZP,null,s().createElement(k.Stack,{hasGutter:!0},s().createElement(k.Card,null,s().createElement(k.CardHeader,{className:"rem-m-card__header-bold"},s().createElement(k.Button,null,"Download playbook")),s().createElement(k.CardBody,null,s().createElement(D.Z,null))))))};var G=function(e){var t=e.name;return s().createElement(k.Bullseye,null,s().createElement(k.EmptyState,null,s().createElement(k.EmptyStateIcon,{className:"rem-c-failure",icon:Z.ExclamationCircleIcon}),s().createElement(k.Title,{headingLevel:"h5",size:"lg"},"Run failed"),s().createElement(k.EmptyStateBody,null,"Playbook failed to run on ",t,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),s().createElement(k.Button,{variant:"link"},"Learn more")))};G.propTypes={name:i().string};const F=G;var L=n(66655),A=n(30319),U=n(22797),V=(0,n(22163).T)({id:"default"});const Y=[{key:"display_name",title:"Name",renderFunc:function(e,t,n){var r=n.fqdn;return s().createElement("div",null,s().createElement("a",{href:V(t)},r||e||t))}},{key:"tags"},{key:"status",title:"Status",renderFunc:function(e){return s().createElement("div",{className:"rem-c-status-bar"},(0,I.Nv)((0,I.fb)(e)))}}];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var H,W=function(e){var t=e.remediation,n=e.playbookRun,o=e.playbookRunSystems,c=e.playbookRunSystemDetails,i=e.getPlaybookRun,R=e.getPlaybookRunSystems,O=e.getPlaybookRunSystemDetails,w=e.onCollapseInventory,N=e.loadRemediation,C=(0,m.useParams)(),T=C.executor_id,j=C.run_id,x=C.id,D=(0,l.useState)({}),G=(0,a.Z)(D,2),V=G[0],W=G[1],M=(0,l.useState)([]),J=(0,a.Z)(M,2),K=J[0],Q=J[1],X=(0,l.useState)(""),$=(0,a.Z)(X,2),ee=$[0],te=$[1],ne=(0,l.useState)(1),re=(0,a.Z)(ne,2),ae=re[0],le=re[1],se=(0,l.useState)(50),oe=(0,a.Z)(se,2),ce=oe[0],ie=oe[1],ue=(0,l.useState)(),me=(0,a.Z)(ue,2),de=me[0],pe=me[1],ye=(0,l.useState)(!1),fe=(0,a.Z)(ye,2),be=fe[0],Ee=fe[1],ge=(0,l.useState)(),ve=(0,a.Z)(ge,2),he=ve[0],ke=ve[1],Ze=(0,l.useRef)(null),Se=function(e){Ze&&Ze.current&&(R(x,j,T,e.per_page,e.per_page*(e.page-1)),le(e.page),ie(e.per_page),Ze.current.onRefreshData(e))};(0,l.useEffect)((function(){return N(x),i(x,j),ke((function(){return(0,d.Z)(R,500)})),function(){H&&clearInterval(H)}}),[]),(0,l.useEffect)((function(){n&&n.data&&W(n.data.executors.find((function(e){return e.executor_id===T}))||{}),"pending"!==o.status&&R(x,j,T,ce,ce*(ae-1),ee)}),[n]),(0,l.useEffect)((function(){be||i(x,j),"running"!==(0,I.fb)(c.status)&&H&&clearInterval(H),Ee(!1)}),[c.status]),(0,l.useEffect)((function(){Q((function(){return o.data.map((function(e){var t=e.system_id;return{id:t,display_name:e.system_name,status:e.status,isOpen:de===t,children:s().createElement(z,{systemId:t})}}))}))}),[o]);var _e,Re=function(e){return s().createElement(y.ZP,null,s().createElement(k.Stack,{hasGutter:!0},s().createElement(k.Card,{className:"rem-c-card__playbook-log"},s().createElement(k.CardBody,null,s().createElement(p.Z,{ref:Ze,columns:function(e){return(0,U.VA)(e,Y)},onLoad:function(e){var t=e.INVENTORY_ACTION_TYPES,n=e.mergeWithEntities;return(0,A.z2)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n(S.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:t})())))},items:"pending"!==o.status?K:[],isLoaded:"pending"!==o.status,onRefresh:Se,page:ae,total:o.meta.total,perPage:ce,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===e?function(e,n,r,a){var l=a.id;Ee(!0),r?(pe(l),H&&clearInterval(H),O(t.id,j,l),H=setInterval((function(){return O(t.id,j,l)}),5e3)):(pe(void 0),clearInterval(H)),w(r,l)}:function(e,n,r,a){var l=a.id;Ee(!0),r?(pe(l),O(t.id,j,l)):pe(void 0),clearInterval(H),w(r,l)}},s().createElement(k.Toolbar,null,s().createElement(k.ToolbarContent,null,s().createElement(k.ToolbarItem,null,s().createElement(v.Z,{items:[{value:"display_name",label:"Name",filterValues:{placeholder:"Filter by name",type:h.Y.text,value:ee,onChange:function(e,t){te(t),le(1),he(x,j,T,ce,0,t)}}}]})),s().createElement(k.ToolbarItem,null,s().createElement(k.Button,{variant:"secondary",onClick:function(){return(0,P.rN)(t.id)}},"Download playbook")))))))))},Pe=(0,l.useContext)(L.B);return t&&V&&n&&n.data?s().createElement(s().Fragment,null,s().createElement(f.Z,null,s().createElement(k.Breadcrumb,null,s().createElement(k.BreadcrumbItem,null,s().createElement(u.Z,{to:"/"}," Remediations ")),s().createElement(k.BreadcrumbItem,null,s().createElement(u.Z,{to:"/".concat(t.id)}," ",t.name," ")),s().createElement(k.BreadcrumbItem,null,s().createElement(u.Z,{to:"/".concat(t.id,"/").concat(j)},s().createElement(E.Z,{type:"exact",date:n.data.created_at}))),s().createElement(k.BreadcrumbItem,{isActive:!0}," ",V.executor_name," ")),s().createElement(k.Stack,{hasGutter:!0},s().createElement(k.StackItem,null,s().createElement(b.Z,{title:"Running"===(0,I.fb)(V.status)?s().createElement(s().Fragment,null,s().createElement(Z.InProgressIcon,{className:"rem-c-running","aria-label":"connection status"}),V.executor_name):V.executor_name})),s().createElement(k.StackItem,null,s().createElement(k.Split,{hasGutter:!0},s().createElement(k.SplitItem,null,s().createElement(_.Z,{className:"rem-c-playbookSummary__settings",title:"Run status"},V.status?s().createElement(I.kf,{executorStatus:V.status,counts:V.counts,permission:Pe}):s().createElement(g.Z,{size:"lg"}))),s().createElement(k.SplitItem,null,s().createElement(_.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},"".concat(n.data.created_by.first_name," ").concat(n.data.created_by.last_name))),s().createElement(k.SplitItem,null,s().createElement(_.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},s().createElement(E.Z,{type:"exact",date:n.data.created_at}))))))),{running:Re(_e=(0,I.fb)(V.status)),success:Re(_e),failure:Re(_e),canceled:Re(_e),epicFailure:s().createElement(y.ZP,null,s().createElement(k.Stack,{hasGutter:!0},s().createElement(k.Card,null,s().createElement(k.CardHeader,{className:"rem-m-card__header-bold"},s().createElement(k.Button,{variant:"secondary",onClick:function(){return(0,P.rN)(t.id)}},"Download playbook")),s().createElement(k.CardBody,null,s().createElement(F,{name:V.executor_name})))))}[(0,I.fb)(_e)]):s().createElement(B,null)};W.propTypes={remediation:i().object,playbookRun:i().object,playbookRunSystems:i().object,playbookRunSystemDetails:i().object,getPlaybookRun:i().func,getPlaybookRunSystems:i().func,getPlaybookRunSystemDetails:i().func,onCollapseInventory:i().func,loadRemediation:i().func},W.defaultProps={remediation:{}};const M=(0,o.connect)((function(e){var t=e.playbookRuns,n=e.playbookRun,r=e.playbookRunSystems,a=e.playbookRunSystemDetails,l=e.selectedRemediation;return{playbookRuns:t.data,playbookRun:n,playbookRunSystemDetails:a,playbookRunSystems:r,remediation:l.remediation}}),(function(e){return{getPlaybookRuns:function(t){return e((0,R.getPlaybookRuns)(t))},getPlaybookRun:function(t,n){return e((0,R.getPlaybookRun)(t,n))},getPlaybookRunSystems:function(t,n,r,a,l,s){return e((0,R.getPlaybookRunSystems)(t,n,r,a,l,s))},getPlaybookRunSystemDetails:function(t,n,r){return e((0,R.getPlaybookRunSystemDetails)(t,n,r))},onCollapseInventory:function(t,n){return e((0,R.expandInventoryTable)(n,t))},loadRemediation:function(t){return e((0,R.loadRemediation)(t))}}}))(W)},76200:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(87462),a=n(4942),l=n(45987),s=n(92950),o=n.n(s),c=n(45697),i=n.n(c),u=n(94184),m=n.n(u),d=["title","className","children","isBold","hasGutter","needsPointer"],p=function(e){var t=e.title,n=e.className,s=e.children,c=e.isBold,i=e.hasGutter,u=e.needsPointer,p=(0,l.Z)(e,d),y=m()("rem-c-description-list__description",(0,a.Z)({},"rem-c-description-list__description--bold",c),(0,a.Z)({},"rem-c-description-list__description--withGutter",i),(0,a.Z)({},"rem-c-description-list__description--needsPointer",u)),f=m()(n,"rem-c-description-list");return o().createElement("dl",(0,r.Z)({className:f},p),o().createElement("dt",{className:"rem-c-description-list__title"},o().createElement("b",null,t)),o().createElement("dd",{className:y}," ",s," "))};const y=p;p.propTypes={title:i().string,children:i().any,isBold:i().bool,className:i().string,hasGutter:i().bool,needsPointer:i().bool}},22797:(e,t,n)=>{"use strict";n.d(t,{Gx:()=>y,M1:()=>p,VA:()=>f,um:()=>d});var r=n(45987),a=n(15861),l=n(4942),s=n(93433),o=n(64687),c=n.n(o),i=["page"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.every((function(e){var n=e.id;return null==t?void 0:t.has(n)}))?e.length>0:e.some((function(e){var n=e.id;return null==t?void 0:t.has(n)}))&&null},p=function(e){var t;return(null==e||null===(t=e.issues)||void 0===t?void 0:t.reduce((function(e,t){var n;return null==t||null===(n=t.systems)||void 0===n||n.forEach((function(n){var r,a=e.find((function(e){var t=e.id;return n.id===t})),l={id:t.id,resolution:t.resolution,description:t.description};a?(a.issues=[].concat((0,s.Z)(a.issues),[m(m({},l),{},{resolved:a.resolved})]),a.rebootRequired=a.issues.some((function(e){var t=e.resolution;return null==t?void 0:t.needs_reboot}))):e.push(m(m({},n),{},{issues:[m(m({},l),{},{resolved:n.resolved})],rebootRequired:null==t||null===(r=t.resolution)||void 0===r?void 0:r.needs_reboot}))})),e}),[]))||[]},y=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a,l,s,o,u,d,p=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1?p[1]:void 0,a=p.length>2?p[2]:void 0,l=(t=p.length>0&&void 0!==p[0]?p[0]:{}).page,s=void 0===l?0:l,o=(0,r.Z)(t,i),u=n.filter((function(e){var t,n=e.display_name;return null===(t=o.filters)||void 0===t||!t.hostnameOrId||n.includes(o.filters.hostnameOrId)})),e.next=7,a(u.slice((s-1)*o.per_page,s*o.per_page).map((function(e){return e.id})),m(m({},o),{},{hasItems:!0}),!0);case 7:return d=e.sent,e.abrupt("return",m(m({},d),{},{page:s,results:d.results.map((function(e){return m(m({},u.find((function(t){return t.id===e.id}))),e)})),total:u.length}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(t){return e.find((function(e){return e.key===t.key}))||t}))}},40742:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(87462),a=n(15671),l=n(43144),s=n(60136),o=n(82963),c=n(61120),i=n(92950),u=n.n(i),m=n(17855),d=n(35664),p=n(65550),y=n(97481),f=n(58247);const b=function(e){(0,s.Z)(E,e);var t,n,b=(t=E,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function E(e){var t;return(0,a.Z)(this,E),(t=b.call(this,e)).state={columns:[{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"sm"})},{title:u().createElement(d.Z,{size:"sm"})},{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"sm"})}],rows:[[{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"xs"})},{title:u().createElement(d.Z,{size:"md"})},{title:u().createElement(d.Z,{size:"md"})}]]},t}return(0,l.Z)(E,[{key:"render",value:function(){var e=this.state,t=e.columns,n=e.rows;return u().createElement(i.Fragment,null,u().createElement(m.Table,(0,r.Z)({cells:t,rows:n,"aria-label":"Loading",variant:m.TableVariant.compact},this.props),u().createElement(m.TableHeader,null)),u().createElement(f.Z,{centered:!0},u().createElement(y.Z,null)),u().createElement(p.Z,{isFooter:!0,className:"rem-c-skeleton-table__footer rem-m-align-right"},u().createElement(d.Z,{size:"sm"})))}}]),E}(u().Component)},42655:()=>{}}]);
//# sourceMappingURL=../sourcemaps/ExecutorDetails.e6af5e526d30c5caae0e679c65c240a7.js.map