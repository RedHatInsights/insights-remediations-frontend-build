"use strict";(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[9537],{66655:(e,t,n)=>{n.d(t,{B:()=>v,Z:()=>L});var r=n(29439),i=n(92950),o=n.n(i),a=n(55140),s=n(28216),u=n(11521),c=n.n(u),l=n(62012),d=n(14938),f=n(22663),E=n(2443),p={home:{path:"/*",component:(0,i.lazy)((function(){return Promise.all([n.e(8368),n.e(9583),n.e(5372),n.e(7231),n.e(6563),n.e(9843),n.e(4026),n.e(7431),n.e(6632),n.e(8475),n.e(5268)]).then(n.bind(n,37269))}))},details:{path:":id",component:(0,i.lazy)((function(){return Promise.all([n.e(5372),n.e(6563),n.e(9843),n.e(5150),n.e(4026),n.e(7431),n.e(8475),n.e(1390)]).then(n.bind(n,9823))}))},runDetails:{path:":id/:run_id",component:(0,i.lazy)((function(){return Promise.all([n.e(4026),n.e(7431),n.e(7935)]).then(n.bind(n,66227))}))},executorDetails:{path:":id/:run_id/:executor_id",component:(0,i.lazy)((function(){return Promise.all([n.e(5372),n.e(6563),n.e(3497),n.e(4026),n.e(7431),n.e(2530)]).then(n.bind(n,76691))}))}};const m=function(){var e=(0,i.useState)(!0),t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,i.useEffect)((function(){try{c().get("".concat("/api/inventory/v1/hosts","?page=1&per_page=1")).then((function(e){var t=e.data;a(t.total>0)}))}catch(e){console.log(e)}}),[n]),n?o().createElement(i.Suspense,{fallback:o().createElement(d.Spinner,null)},o().createElement(l.Routes,null,Object.entries(p).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],a=i.path,s=i.component;return o().createElement(l.Route,{key:n,path:a,element:o().createElement(s,null)})})))):o().createElement(f.Z,{appName:"dashboard",module:"./AppZeroState",scope:"dashboard",ErrorComponent:o().createElement(E.Z,null),app:"Remediations",appId:"remediation_zero_state"})};var _=n(89376),O=n(39173),I=n(14748),T=n(97481);const y=function(){return o().createElement(o().Fragment,null,o().createElement(_.Z,{className:"ins-remediations__skeleton"},o().createElement(O.Z,{className:"rem-s-page-header",title:"Remediations"})),o().createElement(I.ZP,null,o().createElement(T.Z,{centered:!0})))};var h=n(16075),N=n(51344),v=(0,i.createContext)();const L=(0,s.connect)()((function(){var e=(0,a.Z)(),t=(0,i.useState)({readPermission:void 0,writePermission:void 0,executePermission:void 0,arePermissionLoaded:!1}),n=(0,r.Z)(t,2),s=n[0],u=s.readPermission,c=s.writePermission,l=s.executePermission,d=s.arePermissionLoaded,f=n[1],E=(0,i.useState)(void 0),p=(0,r.Z)(E,2),_=p[0],O=p[1],I=function(e,t,n){return f({readPermission:e,writePermission:t,executePermission:n,arePermissionLoaded:!0})};return(0,i.useEffect)((function(){var t;e&&(null==e||null===(t=e.hideGlobalFilter)||void 0===t||t.call(e),(0,h.kd)().then((function(e){return O(e.data.length>0)})),e.getUserPermissions("remediations").then((function(e){var t=e.map((function(e){return e.permission}));t.includes("remediations:*:*")?I(!0,!0,!0):I(t.includes("remediations:remediation:read"),t.includes("remediations:remediation:write"),t.includes("remediations:remediation:execute"))})))}),[]),d?o().createElement(v.Provider,{value:{permissions:{read:u,write:c,execute:l},isReceptorConfigured:_}},o().createElement(N.ZP,null),o().createElement(m,null)):o().createElement(y,null)}))},16075:(e,t,n)=>{n.d(t,{GZ:()=>x,yc:()=>G,rN:()=>j,yY:()=>A,kd:()=>F,NH:()=>J,uQ:()=>R,lK:()=>K,mY:()=>H,o6:()=>B,V_:()=>Z,_5:()=>U,YI:()=>C});var r=n(4942),i=n(15861),o=n(15671),a=n(60136),s=n(82963),u=n(61120),c=n(72407),l=n(64687),d=n.n(l),f="/api/remediations/v1",E=n(11521),p=n.n(E),m=n(67450),_=n(64517);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I=function(e){(0,a.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),(t=r.call(this,"Error communicating with the server")).description=e,t}return i}((0,c.Z)(Error));function T(e){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:if(!t.headers.get("content-type").includes("application/json")){e.next=17;break}return n=!1,e.prev=4,e.next=7,t.json();case 7:n=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:if(!n.errors||!n.errors.length){e.next=17;break}if(!(r=n.errors[0]).details||!r.details.name){e.next=16;break}throw new I("".concat(r.title," (").concat(r.details.name,")"));case 16:throw new I(r.title);case 17:throw new I("Unexpected response code ".concat(t.status));case 18:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function h(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if((n=t.headers.get("content-type")).includes("application/json")){e.next=5;break}throw new I("Unexpected response type (".concat(n,") returned"));case 5:return e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({credentials:"same-origin",method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET"},arguments.length>4&&void 0!==arguments[4]?arguments[4]:{});return n&&(i.headers=n),t&&(i.body=JSON.stringify(t)),fetch(e,i)}(e.toString()).then(T).then(h)}var L=n(54998),g=n.n(L);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){return v(function(){for(var e=g()(f).segment("remediations"),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.segment(t)})),e}(e,"status"))};function A(){return v("/api/inventory/v1/hosts")}var P=function(e){(0,a.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function i(e){var t;return(0,o.Z)(this,i),(t=r.call(this,"Error communicating with the server")).description=e,t}return i}((0,c.Z)(Error));function b(){return(b=(0,i.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=p().create();w.interceptors.request.use((function(e){return b.apply(this,arguments)})),w.interceptors.response.use((function(e){return e.data?D(D({},e.data),{},{etag:e.headers.etag}):e})),w.interceptors.response.use(null,(function(e){if(e){if(e.response&&401===e.response.status)return!1;throw e}})),w.interceptors.response.use(null,(function(e){if(e){if(e.response&&e.response.data&&e.response.data.errors&&e.response.data.errors.length){var t=e.response.data.errors[0];if(t.details&&t.details.name)throw new P("".concat(t.title," (").concat(t.details.name,")"));throw new P(t.title)}throw e}}));var Z=new m.RemediationsApi(void 0,f,w),U=new m.ResolutionsApi(void 0,f,w),C=new _.DefaultApi(void 0,"/api/sources/v2.0",w);function j(e){return new Promise((function(t,n){var r=e.length>1?(new m.RemediationsApiAxiosParamCreator).downloadPlaybooks(e).then((function(e){return window.location.assign(f+e.url)})):(new m.RemediationsApiAxiosParamCreator).getRemediationPlaybook(e[0]).then((function(e){return window.location.assign(f+e.url)}));if(!r)return n();var i=setInterval((function(){r.closed&&(clearInterval(i),t())}),500)}))}function F(){return v("".concat(window.location.origin,"/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]"))}function G(e,t){return Promise.all(e.flatMap((function(e){return e.issues.map((function(n){return Z.deleteRemediationIssueSystem(t.id,n.id,e.id)}))})))}function M(e){if(!e.ok){var t=new Error("Unexpected response code ".concat(e.status));throw t.statusCode=e.status,t}return e}function Y(e){return M(e),e.json()}var k=Object.freeze({"Content-Type":"application/json; charset=utf-8"});function x(e){var t=new(g())(f).segment("remediations").toString();return fetch(t,{headers:k,method:"POST",credentials:"include",body:JSON.stringify(e)}).then(Y)}function B(e,t){var n=new(g())(f).segment("remediations").segment(e).toString();return fetch(n,{headers:k,credentials:"include",method:"PATCH",body:JSON.stringify(t)}).then(M)}function K(){var e=new(g())(f).segment("remediations").query({limit:200}).toString();return fetch(e,{credentials:"include"}).then(Y)}function J(e){var t=new(g())(f).segment("remediations").segment(e).toString();return fetch(t,{credentials:"include"}).then(Y)}function H(e){var t=new(g())(f).segment("resolutions").toString();return fetch(t,{headers:k,credentials:"include",method:"POST",body:JSON.stringify({issues:e})}).then(Y)}},58061:(e,t,n)=>{n.d(t,{ET:()=>c,JY:()=>d,aI:()=>u,mg:()=>l});var r=n(93433),i=n(24350),o=n.n(i),a=n(94654),s=n.n(a)()(["LOAD_REMEDIATIONS","CREATE_REMEDIATIONS","LOAD_REMEDIATION","LOAD_REMEDIATION_STATUS","REFRESH_REMEDIATION","PATCH_REMEDIATION","DELETE_REMEDIATION","DELETE_REMEDIATION_ISSUE","DELETE_REMEDIATION_ISSUE_SYSTEM","PATCH_REMEDIATION_ISSUE","GET_RESOLUTIONS","GET_CONNECTION_STATUS","RUN_REMEDIATION","EXECUTE_PLAYBOOK_BANNER","RUN_REMEDIATION","GET_PLAYBOOK_RUNS","GET_PLAYBOOK_RUN","GET_PLAYBOOK_RUN_SYSTEMS","GET_PLAYBOOK_RUN_SYSTEM_DETAILS","CANCEL_PLAYBOOK_RUNS","GET_ENDPOINT","CHECK_EXECUTABLE"],(function(e){return[e,"".concat(e,"_PENDING"),"".concat(e,"_FULFILLED"),"".concat(e,"_REJECTED")]})),u=o()([].concat((0,r.Z)(s),["SET_ETAG","EXPAND_INVENTORY_TABLE","SELECT_ENTITY"]),(function(e){return e})),c=500,l="FETCH_SELECTED_HOSTS",d="FETCH_RESOLUTIONS"},30319:(e,t,n)=>{n.d(t,{S1:()=>d,bh:()=>f,z2:()=>E});var r,i=n(93433),o=n(67336),a=n(83215),s=n(84885),u=n(57283),c=n.n(u),l=n(81730);function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=(0,o.JH)({},[c(),(0,s.ZP)({errorTitleKey:"message",errorDescriptionKey:"description"})].concat((0,i.Z)(t.filter((function(e){return void 0!==e})))))).register(l.Z),r.register({notifications:a.ee}),r}function f(){return r.getStore()}function E(){var e;return(e=r).register.apply(e,arguments)}},81730:(e,t,n)=>{n.d(t,{L:()=>S,Z:()=>D});var r,i,o,a,s,u,c,l,d=n(45987),f=n(4942),E=n(92950),p=n.n(E),m=n(58061),_=n(18546),O=n(94654),I=n.n(O),T=n(44908),y=n.n(T),h=["id"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){return y()(I()(e,(function(e){return e.systems.map((function(e){return e.id}))})))}function g(e){var t=L(e.issues),n=L(e.issues.filter((function(e){return e.resolution.needs_reboot})));return v(v({},e),{},{stats:{systemsWithReboot:n.length,systemsWithoutReboot:t.length-n.length}})}var S=function(e){var t,n=e.LOAD_ENTITIES_FULFILLED;return(0,_.Gg)((t={},(0,f.Z)(t,m.aI.SELECT_ENTITY,(function(e,t){var n=t.payload,r=e.selected||new Map;if(n.selected)if(0===n.id){var i;null==e||null===(i=e.rows)||void 0===i||i.forEach((function(e){return r.set(null==e?void 0:e.id,e)}))}else{var o,a=null==e||null===(o=e.rows)||void 0===o?void 0:o.find((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id===n.id}));r.set(n.id,v(v({},a||{}),{},{id:n.id}))}else 0===n.id?e.rows.forEach((function(e){return r.delete(e.id)})):-1===n.id?r.clear():r.delete(n.id);return v(v({},e),{},{selected:new Map(r)})})),(0,f.Z)(t,"".concat(n),(function(e){return v(v({},e),{},{rows:e.rows.map((function(t){var n,r=t.id;return v(v({id:r},(0,d.Z)(t,h)),{},{selected:!(null===(n=e.selected)||void 0===n||!n.get(r))})}))})})),t))};const D={remediations:(0,_.Gg)((r={},(0,f.Z)(r,m.aI.LOAD_REMEDIATIONS_PENDING,(function(){return{status:"pending"}})),(0,f.Z)(r,m.aI.LOAD_REMEDIATIONS_FULFILLED,(function(e,t){return{status:"fulfilled",value:t.payload}})),(0,f.Z)(r,m.aI.LOAD_REMEDIATIONS_REJECTED,(function(){return{status:"rejected"}})),r),{status:"initial"}),selectedRemediation:(0,_.Gg)((i={},(0,f.Z)(i,m.aI.LOAD_REMEDIATION_PENDING,(function(){return{status:"pending"}})),(0,f.Z)(i,m.aI.LOAD_REMEDIATION_FULFILLED,(function(e,t){return{status:"fulfilled",remediation:g(t.payload)}})),(0,f.Z)(i,m.aI.REFRESH_REMEDIATION_FULFILLED,(function(e,t){return t.payload.id===e.remediation.id?{status:"fulfilled",remediation:g(t.payload)}:e})),(0,f.Z)(i,m.aI.LOAD_REMEDIATION_REJECTED,(function(){return{status:"rejected"}})),(0,f.Z)(i,m.aI.PATCH_REMEDIATION_FULFILLED,(function(e,t){return{status:e.status,remediation:v(v({},e.remediation),t.payload)}})),(0,f.Z)(i,m.aI.DELETE_REMEDIATION_ISSUE_FULFILLED,(function(e,t){var n=e.remediation.issues.filter((function(e){return e.id!==t.payload.issueId}));return t.payload.id===e.remediation.id?{status:"fulfilled",remediation:g(v(v({},e.remediation),{},{issues:n,needs_reboot:n.some((function(e){return e.resolution.needs_reboot}))}))}:e})),(0,f.Z)(i,m.aI.DELETE_REMEDIATION_ISSUE_SYSTEM_FULFILLED,(function(e,t){if(t.payload.id!==e.remediation.id)return e;var n=e.remediation.issues.filter((function(e){return e.id!==t.payload.issue||(e.systems=e.systems.filter((function(e){return e.id!==t.payload.system})),e.systems.length>0)}));return{status:"fulfilled",remediation:g(v(v({},e.remediation),{},{issues:n,needs_reboot:n.some((function(e){return e.resolution.needs_reboot}))}))}})),i),{status:"initial"}),selectedRemediationStatus:(0,_.Gg)((o={},(0,f.Z)(o,m.aI.LOAD_REMEDIATION_STATUS_PENDING,(function(){return{status:"pending"}})),(0,f.Z)(o,m.aI.LOAD_REMEDIATION_STATUS_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload}})),(0,f.Z)(o,m.aI.LOAD_REMEDIATION_STATUS_REJECTED,(function(){return{status:"rejected"}})),o),{status:"initial"}),connectionStatus:(0,_.Gg)((a={},(0,f.Z)(a,m.aI.GET_CONNECTION_STATUS_PENDING,(function(){return{status:"pending"}})),(0,f.Z)(a,m.aI.GET_CONNECTION_STATUS_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload.data,etag:t.payload.etag}})),(0,f.Z)(a,m.aI.GET_CONNECTION_STATUS_REJECTED,(function(){return{status:"rejected",data:[]}})),(0,f.Z)(a,m.aI.SET_ETAG,(function(e,t){return v(v({},e),{},{etag:t.etag})})),a),{status:"initial"}),inventoryEntitiesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{INVENTORY_ACTION_TYPES:{}};return function(){return(0,_.Gg)((0,f.Z)({},e.INVENTORY_ACTION_TYPES.LOAD_ENTITIES_FULFILLED,(function(t){return v(v({},t),{},{columns:[{key:"display_name",title:"Name",renderFunc:function(t,n,r){var i=r.display_name;return p().createElement("div",null,p().createElement("a",{href:e.urlBuilder(n)},i))}},{key:"system_status",title:"Status",renderFunc:function(t,n){return p().createElement("div",null,e.generateStatus(n))}}]})})))}},playbookActivityIntentory:function(){return function(){return(0,_.Gg)((0,f.Z)({},m.aI.EXPAND_INVENTORY_TABLE,(function(e,t){return v(v({},e),{},{rows:e.rows.map((function(e){return v(v({},e),{},{isOpen:e.id===t.payload.id&&t.payload.isOpen})}))})})))}},playbookRuns:(0,_.Gg)((0,f.Z)({},m.aI.GET_PLAYBOOK_RUNS_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload.data,meta:t.payload.meta}}))),cancelPlaybookRuns:(0,_.Gg)((s={},(0,f.Z)(s,m.aI.CANCEL_PLAYBOOK_RUNS_PENDING,(function(){return{status:"pending"}})),(0,f.Z)(s,m.aI.CANCEL_PLAYBOOK_RUNS_FULFILLED,(function(e,t){return{status:"fulfilled",value:t.payload}})),(0,f.Z)(s,m.aI.CANCEL_PLAYBOOK_RUNS_REJECTED,(function(){return{status:"rejected"}})),s),{status:"initial"}),playbookRun:(0,_.Gg)((0,f.Z)({},m.aI.GET_PLAYBOOK_RUN_FULFILLED,(function(e,t){return{data:t.payload}}))),playbookRunSystems:(0,_.Gg)((u={},(0,f.Z)(u,m.aI.GET_PLAYBOOK_RUN_SYSTEMS_FULFILLED,(function(e,t){return v({},t.payload)})),(0,f.Z)(u,m.aI.GET_PLAYBOOK_RUN_SYSTEMS_PENDING,(function(e){return v(v({},e),{},{status:"pending"})})),(0,f.Z)(u,m.aI.GET_PLAYBOOK_RUN_SYSTEMS_REJECTED,(function(e){return v(v({},e),{},{data:[],status:"rejected"})})),u),{data:[],meta:{}}),playbookRunSystemDetails:(0,_.Gg)((0,f.Z)({},m.aI.GET_PLAYBOOK_RUN_SYSTEM_DETAILS_FULFILLED,(function(e,t){return v({},t.payload)}))),runRemediation:(0,_.Gg)((c={},(0,f.Z)(c,m.aI.RUN_REMEDIATION_PENDING,(function(){return{status:"pending"}})),(0,f.Z)(c,m.aI.RUN_REMEDIATION_FULFILLED,(function(e,t){return{status:"fulfilled",data:t.payload.data}})),(0,f.Z)(c,m.aI.RUN_REMEDIATION_REJECTED,(function(e,t){return{status:412===t.payload.response.status?"changed":"rejected"}})),c),{status:"initial"}),sources:(0,_.Gg)((0,f.Z)({},m.aI.GET_ENDPOINT_FULFILLED,(function(e,t){return{status:"fulfilled",data:v(v({},e.data),{},(0,f.Z)({},t.payload.id,t.payload))}})),{status:"initial"}),executable:(0,_.Gg)((l={},(0,f.Z)(l,m.aI.CHECK_EXECUTABLE_REJECTED,(function(){return!1})),(0,f.Z)(l,m.aI.CHECK_EXECUTABLE_FULFILLED,(function(){return!0})),l),!1)}}}]);
//# sourceMappingURL=../sourcemaps/9537.062ba38da399307cc56962ae20f75176.js.map