"use strict";(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[5268],{12744:(e,t,n)=>{n.d(t,{n:()=>u});var o=n(65353),i=n(10756),r=n(38296),s=n(41435),a=n(1774),l=n(80164),c=n(35224),d=n(73699);class u extends i.Component{constructor(){super(...arguments),this.ref=i.createRef(),this.additionalRef=i.createRef(),this.getInnerNode=e=>e&&e.childNodes&&e.childNodes.length?e.childNodes[0]:e,this.onKeyDown=e=>{var t,n,o,i,r,s,l,c,d,u;const p=e.target===this.ref.current?0:1;this.props.customChild||e.preventDefault(),"ArrowUp"===e.key?(null===(n=null===(t=this.props.context)||void 0===t?void 0:t.keyHandler)||void 0===n||n.call(t,this.props.index,p,a.Ow.UP),e.stopPropagation()):"ArrowDown"===e.key?(null===(i=null===(o=this.props.context)||void 0===o?void 0:o.keyHandler)||void 0===i||i.call(o,this.props.index,p,a.Ow.DOWN),e.stopPropagation()):"ArrowRight"===e.key?(null===(s=null===(r=this.props.context)||void 0===r?void 0:r.keyHandler)||void 0===s||s.call(r,this.props.index,p,a.Ow.RIGHT),e.stopPropagation()):"ArrowLeft"===e.key?(null===(c=null===(l=this.props.context)||void 0===l?void 0:l.keyHandler)||void 0===c||c.call(l,this.props.index,p,a.Ow.LEFT),e.stopPropagation()):"Enter"!==e.key&&" "!==e.key||(e.target.click(),this.props.enterTriggersArrowDown&&(null===(u=null===(d=this.props.context)||void 0===d?void 0:d.keyHandler)||void 0===u||u.call(d,this.props.index,p,a.Ow.DOWN)))},this.componentRef=e=>{this.ref.current=e;const{component:t}=this.props,n=t.ref;n&&("function"==typeof n?n(e):n.current=e)}}componentDidMount(){var e;const{context:t,index:n,isDisabled:o,role:i,customChild:r,autoFocus:s}=this.props,a=r?this.getInnerNode(this.ref.current):this.ref.current;null===(e=null==t?void 0:t.sendRef)||void 0===e||e.call(t,n,[a,r?a:this.additionalRef.current],o,"separator"===i),s&&setTimeout((()=>a.focus()))}componentDidUpdate(){var e;const{context:t,index:n,isDisabled:o,role:i,customChild:r}=this.props,s=r?this.getInnerNode(this.ref.current):this.ref.current;null===(e=null==t?void 0:t.sendRef)||void 0===e||e.call(t,n,[s,r?s:this.additionalRef.current],o,"separator"===i)}extendAdditionalChildRef(){const{additionalChild:e}=this.props;return i.cloneElement(e,{ref:this.additionalRef})}render(){const e=this.props,{className:t,children:n,context:a,onClick:u,component:p,role:m,isDisabled:h,isAriaDisabled:f,isPlainText:y,index:v,href:b,tooltip:E,tooltipProps:g,id:k,componentID:C,listItemClassName:w,additionalChild:P,customChild:S,enterTriggersArrowDown:_,icon:R,autoFocus:O,styleChildren:D,description:N,inoperableEvents:I}=e,Z=(0,o.__rest)(e,["className","children","context","onClick","component","role","isDisabled","isAriaDisabled","isPlainText","index","href","tooltip","tooltipProps","id","componentID","listItemClassName","additionalChild","customChild","enterTriggersArrowDown","icon","autoFocus","styleChildren","description","inoperableEvents"]);let T=(0,r.css)(R&&d.Z.modifiers.icon,f&&d.Z.modifiers.ariaDisabled,t);"a"===p?Z["aria-disabled"]=h||f:"button"===p&&(Z["aria-disabled"]=h||f,Z.type=Z.type||"button");const x=e=>i.cloneElement(e,Object.assign(Object.assign({},D&&{className:(0,r.css)(e.props.className,T)}),"separator"!==this.props.role&&{role:m,ref:this.componentRef})),A=e=>{const t=e,o=N?i.createElement(i.Fragment,null,i.createElement("div",{className:d.Z.dropdownMenuItemMain},R&&i.createElement("span",{className:(0,r.css)(d.Z.dropdownMenuItemIcon)},R),n),i.createElement("div",{className:d.Z.dropdownMenuItemDescription},N)):i.createElement(i.Fragment,null,R&&i.createElement("span",{className:(0,r.css)(d.Z.dropdownMenuItemIcon)},R),n);return i.createElement(t,Object.assign({},Z,h||f?(0,l.KG)(I):null,{href:b,ref:this.ref,className:T,id:C,role:m}),o)};return i.createElement(s.Dl.Consumer,null,(({onSelect:e,itemClass:t,disabledClass:n,plainTextClass:o})=>{return"separator"!==this.props.role&&(T=(0,r.css)(T,h&&n,y&&o,t,N&&d.Z.modifiers.description)),S?i.cloneElement(S,{ref:this.ref,onKeyDown:this.onKeyDown}):i.createElement("li",Object.assign({},w&&{className:w},{role:"none",onKeyDown:this.onKeyDown,onClick:t=>{h||f||(null==u||u(t),null==e||e(t))},id:k}),(s=i.isValidElement(p)?x(p):A(p),E?i.createElement(c.u,Object.assign({content:E},g),s):s),P&&this.extendAdditionalChildRef());var s}))}}u.displayName="InternalDropdownItem",u.defaultProps={className:"",component:"a",role:"none",isDisabled:!1,isPlainText:!1,tooltipProps:{},onClick:e=>{},index:-1,context:{keyHandler:()=>{},sendRef:()=>{}},enterTriggersArrowDown:!1,icon:null,styleChildren:!0,description:null,inoperableEvents:["onClick","onKeyPress"]}},2793:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var o=n(4942),i=n(87462),r=n(29439),s=n(10756),a=n.n(s),l=n(45697),c=n.n(l),d=n(55140),u=n(71002);function p(e,t){if(!e)throw new TypeError(t)}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];Object.keys(e).forEach((function(e){return p(n.includes(e),"Unexpected key: ".concat(e," Expected one of: ").concat(n))}))}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n.forEach((function(t){return p(Object.prototype.hasOwnProperty.call(e,t),"Required key missing: ".concat(t))}))}function f(e){p(Array.isArray(e),"Systems must be an array"),p(e.length,"Systems array must not be empty"),e.forEach((function(e){return p("string"==typeof e,"System must be of type string")}))}var y=n(86507),v=n(26318),b=n(98901),E=n(51662);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=e.isDisabled,n=e.children,o=e.dataProvider,l=e.onRemediationCreated,c=e.buttonProps,g=(0,s.useState)(!1),C=(0,r.Z)(g,2),w=C[0],P=C[1],S=(0,s.useState)(),_=(0,r.Z)(S,2),R=_[0],O=_[1],D=(0,s.useState)(!1),N=(0,r.Z)(D,2),I=N[0],Z=N[1],T=(0,d.Z)();return(0,s.useEffect)((function(){T.getUserPermissions("remediations").then((function(e){P(e.some((function(e){var t=e.permission;return(0,y.P9)(t,y.FH)})))}))}),[]),w?a().createElement(a().Fragment,null,a().createElement(v.Button,(0,i.Z)({isDisabled:t,"data-testid":"remediationButton-with-permissions",onClick:function(){Promise.resolve(o()).then((function(e){e?(function(e){p("object"===(0,u.Z)(e)&&null!==e),m(e,"issues","systems","onRemediationCreated"),h(e,"issues"),p(Array.isArray(e.issues),"Issues must be an array"),p(e.issues.length,"Issues array must not be empty"),e.issues.forEach((function(t){p("object"===(0,u.Z)(t)&&null!==t,"Issue must be an object"),m(t,"id","description","systems"),h(t,"id","description"),Object.prototype.hasOwnProperty.call(t,"systems")&&f(t.systems),p(Object.prototype.hasOwnProperty.call(t,"systems")||Object.prototype.hasOwnProperty.call(e,"systems"),"No systems defined for ".concat(t.id))})),Object.prototype.hasOwnProperty.call(e,"systems")&&f(e.systems)}(e),O(e)):Z(!0)}))}},c),n),a().createElement(E.default,{isOpen:I,setOpen:Z}),R&&a().createElement(b.default,{setOpen:function(e){return O((function(t){return!1===e?null:t}))},data:k({onRemediationCreated:l},R||{})})):a().createElement(v.Tooltip,{content:"You do not have correct permissions to remediate this entity."},a().createElement("span",null,a().createElement(v.Button,(0,i.Z)({isDisabled:!0},c,{"data-testid":"remediationButton-no-permissions"}),n)))};C.propTypes={isDisabled:c().bool,dataProvider:c().func.isRequired,onRemediationCreated:c().func,children:c().node,buttonProps:c().shape((0,o.Z)({},c().string,c().any))},C.defaultProps={isDisabled:!1,onRemediationCreated:function(e){return e},children:"Remediate with Ansible"};const w=C},51662:(e,t,n)=>{n.r(t),n.d(t,{NoDataModal:()=>l,default:()=>c});var o=n(10756),i=n.n(o),r=n(45697),s=n.n(r),a=n(26318),l=function(e){var t=e.isOpen,n=e.setOpen;return i().createElement(a.Modal,{variant:a.ModalVariant.small,title:"Remediate with Ansible",isOpen:t,onClose:function(){return n(!1)},actions:[i().createElement(a.Button,{key:"confirm",variant:"primary",onClick:function(){return n(!1)}},"Back to Insights")]},"None of the selected issues can be remediated with Ansible.",i().createElement("br",null),i().createElement("br",null),"To remediate these issues, review the manual remediation steps associated with each.")};l.propTypes={isOpen:s().bool,setOpen:s().func};const c=l},95079:(e,t,n)=>{n.r(t),n.d(t,{default:()=>me});var o=n(15861),i=n(4942),r=n(29439),s=n(64687),a=n.n(s),l=n(10756),c=n.n(l),d=n(28216),u=n(26318),p=n(50289),m=n(73725),h=n(89376),f=n(39173),y=n(14748),v=n(83045),b=n(45697),E=n.n(b),g=n(97481),k=n(66655),C=n(95274),w=n(65353),P=n(12744),S=n(41435),_=n(62472);const R=e=>{var{children:t,className:n,component:o="a",isDisabled:i=!1,isAriaDisabled:r=!1,isPlainText:s=!1,href:a,tooltip:c,tooltipProps:d={},listItemClassName:u,onClick:p,ref:m,additionalChild:h,customChild:f,tabIndex:y=-1,icon:v=null,autoFocus:b,description:E=null,styleChildren:g,ouiaId:k,ouiaSafe:C}=e,O=(0,w.__rest)(e,["children","className","component","isDisabled","isAriaDisabled","isPlainText","href","tooltip","tooltipProps","listItemClassName","onClick","ref","additionalChild","customChild","tabIndex","icon","autoFocus","description","styleChildren","ouiaId","ouiaSafe"]);const D=(0,_.S$)(R.displayName,k,C);return l.createElement(S.e4.Consumer,null,(e=>l.createElement(P.n,Object.assign({context:e,role:"menuitem",tabIndex:y,className:n,component:o,isDisabled:i,isAriaDisabled:r,isPlainText:s,href:a,tooltip:c,tooltipProps:d,listItemClassName:u,onClick:p,additionalChild:h,customChild:f,icon:v,autoFocus:b,styleChildren:g,description:E},D,O),t)))};R.displayName="DropdownItem";var O=n(79332),D=n(30120),N=n(42908),I=n(62410),Z=n(83215),T=n(92397),x=n(29144);function A(e,t,n){Promise.all(e.map((function(e){return n(e),e.payload}))).then(t)}var j=function(e){var t,n,o=e.remediation,i=e.remediationIdx,s=e.archived,a=e.selector,m=e.setExecuteOpen,h=e.update,f=e.loadRemediation,y=e.getConnectionStatus,v=e.downloadPlaybook,b=e.permission,E=(0,l.useState)(!1),g=(0,r.Z)(E,2),k=g[0],C=g[1],w=(0,l.useState)(s),P=(0,r.Z)(w,2),S=P[0],_=P[1],N=(0,d.useDispatch)(),j=[],q=function(){A([(0,p.patchRemediation)(o.id,{archived:!S})],(function(){_(!S),h(!0)}),N)};return j.push(c().createElement(R,{key:"execute",id:"execute",isDisabled:!b.isReceptorConfigured||S,className:"".concat(!b.permissions.execute&&"ins-m-not-entitled"),onClick:function(){m(!1),A([f(o.id),y(o.id)],(function(){m(!0),C(!1)}),N)}},"Execute playbook")),j.push(c().createElement(R,{key:"download",onClick:function(){v([o.id]),C(!1),(0,x.q)({title:"Preparing playbook for download",description:"Once complete, your download will start automatically.",variant:"info",dismissable:!0,autoDismiss:!0})}},"Download playbook")),S?j.push(c().createElement(R,{key:"restore",onClick:function(){q(),C(!1),N((0,Z.wN)({variant:"info",title:"Restored playbook ".concat(o.name)}))}},"Restore playbook")):j.push(c().createElement(R,{key:"archive",onClick:function(){q(),C(!1),N((0,Z.wN)({variant:"info",title:"Archived playbook ".concat(o.name)}))}},"Archive playbook")),c().createElement(u.CardHeader,{actions:{actions:c().createElement(c().Fragment,null,c().createElement(O.L,{key:"dropdown",id:"".concat(o.id,"-dropdown"),isOpen:k,isPlain:!0,onSelect:function(e){return e},toggle:c().createElement(D.a,{id:"".concat(o.id,"-toggle"),onToggle:function(e,t){return C(t)}}),dropdownItems:j,position:"right"}),c().createElement("input",{type:"checkbox",name:"".concat(o.id,"-checkbox"),checked:a.getSelectedIds().includes(o.id),onChange:function(e){a.props.onSelect(e,e.target.checked,i)},"aria-label":"".concat(o.id,"-checkbox")})),hasNoOffset:!1,className:void 0},className:"rem-c-playbook-card__header"},c().createElement(u.CardTitle,null,c().createElement(u.Stack,{hasGutter:!0},c().createElement(u.StackItem,{className:"rem-c-playbook-card__header--title"},c().createElement("span",{className:"pf-u-mr-sm"},(t=o.name,n=o.id,c().createElement(T.Z,{to:"/".concat(n),className:"rem-c-playbook-card__header--name"},t))),S&&c().createElement(u.Label,null,"Archived")),c().createElement(u.StackItem,{className:"rem-c-playbook-card__header--last-modified"},"Last modified: ",c().createElement(I.Z,{date:o.updated_at})))))};j.propTypes={remediation:b.PropTypes.object.isRequired,remediationIdx:b.PropTypes.number.isRequired,archived:b.PropTypes.bool.isRequired,selector:b.PropTypes.object.isRequired,setExecuteOpen:b.PropTypes.func.isRequired,update:b.PropTypes.func.isRequired,loadRemediation:b.PropTypes.func.isRequired,getConnectionStatus:b.PropTypes.func.isRequired,downloadPlaybook:b.PropTypes.func.isRequired,permission:b.PropTypes.object.isRequired};var q=function(e){var t,n,o=e.remediation,i=e.remediationIdx,r=e.archived,s=e.selector,a=e.setExecuteOpen,l=e.update,d=e.loadRemediation,p=e.getConnectionStatus,m=e.downloadPlaybook,h=e.permission;return c().createElement(u.Card,{className:"rem-c-playbook-card",isCompact:!0},c().createElement(j,{remediation:o,remediationIdx:i,archived:r,selector:s,setExecuteOpen:a,update:l,loadRemediation:d,getConnectionStatus:p,downloadPlaybook:m,permission:h}),c().createElement(u.CardBody,{className:"rem-c-playbook-card__body"},c().createElement(u.Split,{hasGutter:!0,className:"rem-c-playbook-card__body--split"},c().createElement(u.SplitItem,null,c().createElement(u.Stack,null,c().createElement(u.StackItem,{className:"rem-c-playbook-card__body--titles"},"Systems"),c().createElement(u.StackItem,{className:"rem-c-playbook-card__body--values"},o.system_count))),c().createElement(u.SplitItem,null,c().createElement(u.Stack,null,c().createElement(u.StackItem,{className:"rem-c-playbook-card__body--titles"},"Complete actions"),c().createElement(u.StackItem,{className:"rem-c-playbook-card__body--values"},(t=o.resolved_count)===(n=o.issue_count)&&0!==t?c().createElement("div",null,c().createElement(N.CheckCircleIcon,{className:"rem-c-success"})," ",t," of  ",n):"".concat(t," of ").concat(n)))))),function(e,t,n){return n?c().createElement(u.Progress,{className:"rem-c-playbook-card__progress rem-c-playbook-card__progress--archived",value:100,measureLocation:u.ProgressMeasureLocation.none}):e===t&&0!==e?c().createElement(u.Progress,{className:"rem-c-playbook-card__progress rem-c-playbook-card__progress--success",value:100,measureLocation:u.ProgressMeasureLocation.none,variant:u.ProgressVariant.success}):c().createElement(u.Progress,{className:"rem-c-playbook-card__progress  rem-c-playbook-card__progress--archived",value:e/t*100,measureLocation:u.ProgressMeasureLocation.none})}(o.resolved_count,o.issue_count,r))};q.propTypes={remediation:b.PropTypes.object.isRequired,remediationIdx:b.PropTypes.number.isRequired,archived:b.PropTypes.bool.isRequired,selector:b.PropTypes.object.isRequired,setExecuteOpen:b.PropTypes.func.isRequired,executeOpen:b.PropTypes.bool.isRequired,update:b.PropTypes.func.isRequired,loadRemediation:b.PropTypes.func.isRequired,getConnectionStatus:b.PropTypes.func.isRequired,downloadPlaybook:b.PropTypes.func.isRequired,permission:b.PropTypes.object.isRequired};var B=function(e){var t=e.archivedCount,n=e.setShowArchived;return c().createElement(u.Bullseye,{className:"rem-c-no-remediations pf-u-pt-2xl"},c().createElement(u.EmptyState,null,c().createElement(u.EmptyStateHeader,{titleText:"No remediation playbooks yet",icon:c().createElement(u.EmptyStateIcon,{icon:N.WrenchIcon,size:"sm"}),headingLevel:"h5"}),c().createElement(u.EmptyStateBody,null,"Insights uses Ansible Playbooks to remediate or mitigate configuration problems on your systems, and apply patches.",c().createElement("br",null),c().createElement("br",null),"To create a remediation playbook, select issues identified in Insights applications, then select",c().createElement("strong",null," Remediate"),"."),c().createElement(u.EmptyStateFooter,null,c().createElement("br",null),t>0&&c().createElement(u.Button,{variant:"link",onClick:function(){return n(!0)},ouiaId:"show-archived-playbooks"},"Show ",t," archived playbooks"))))};B.propTypes={archivedCount:E().number.isRequired,setShowArchived:E().func.isRequired};var H=[null,"name","system_count","issue_count","updated_at"];function V(e){var t,n,o=e.remediations,i=e.loadRemediations,s=e.sorter,a=e.filter,h=e.selector,f=e.pagination,v=e.shouldUpdateGrid,b=e.setShouldUpdateGrid,E=e.setRemediationCount,w=e.showArchived,P=e.setShowArchived,S=o.value,_=o.status,R=[],O=(0,l.useContext)(k.B),D=(0,l.useState)(!1),N=(0,r.Z)(D,2),I=N[0],Z=N[1],T=(0,l.useState)(!1),x=(0,r.Z)(T,2),A=x[0],j=x[1],V=(0,d.useSelector)((function(e){return e.selectedRemediation})),L=(0,d.useSelector)((function(e){return e.connectionStatus})),U=(0,d.useSelector)((function(e){return e.runRemediation})),G=(0,d.useDispatch)();return(0,l.useEffect)((function(){var e;!0===v&&(b(!1),e=H[s.sortBy],w?i(e,s.sortDir,a.value,f.pageSize,f.offset):i(e,s.sortDir,a.value,f.pageSize,f.offset,void 0,!0))}),[v]),(0,l.useEffect)((function(){"changed"===U.status?((0,p.getConnectionStatus)(V.remediation.id),j(!0)):"fulfilled"===U.status&&Z(!1)}),[U.status]),(0,l.useEffect)((function(){o.value&&E(S.meta.total)}),[o]),"fulfilled"!==_?c().createElement(c().Fragment,null,c().createElement(y.ZP,null,c().createElement(g.Z,{centered:!0}))):0===(R=w?null==S||null===(t=S.data)||void 0===t?void 0:t.map((function(e){return e})):null==S||null===(n=S.data)||void 0===n?void 0:n.reduce((function(e,t){return!0!==t.archived&&e.push(t),e}),[])).length?c().createElement(B,{archivedCount:S.data.length,setShowArchived:P}):(h.register(R),c().createElement(c().Fragment,null,c().createElement(u.Stack,{hasGutter:!0},c().createElement(u.StackItem,null,I&&c().createElement(C.l,{isOpen:I,onClose:function(){j(!1),Z(!1)},showRefresh:A,remediationId:V.remediation.id,data:L.data,etag:L.etag,isLoading:"fulfilled"!==L.status,issueCount:V.remediation.issues.length,remediationStatus:U.status,runRemediation:function(e,t){G((0,p.runRemediation)(e,t)).then((function(){return G((0,p.getPlaybookRuns)(e))}))},setEtag:function(e){G((0,p.setEtag)(e))}})),c().createElement(u.StackItem,null,c().createElement(u.Grid,{sm:12,md:6,lg:4,hasGutter:!0},R.map((function(e,t){return c().createElement(u.GridItem,{key:e.id},c().createElement(q,{remediation:e,remediationIdx:t,archived:e.archived,selector:h,setExecuteOpen:Z,executeOpen:I,update:b,loadRemediation:p.loadRemediation,getConnectionStatus:p.getConnectionStatus,downloadPlaybook:m.rN,permission:O}))})))))))}V.propTypes={remediations:E().object.isRequired,loadRemediations:E().func.isRequired,sorter:E().object.isRequired,filter:E().object.isRequired,selector:E().object.isRequired,pagination:E().object.isRequired,shouldUpdateGrid:E().bool.isRequired,setShouldUpdateGrid:E().func.isRequired,setRemediationCount:E().func.isRequired,showArchived:E().bool.isRequired,setShowArchived:E().func.isRequired};const L=V;var U=n(87462),G=n(45987),F=n(93433),K=n(15671),M=n(43144),W=n(82963),z=n(61120),Q=n(97326),Y=n(60136),$=n(2793),J=["dataProvider","children"];function X(e,t,n){return t=(0,z.Z)(t),(0,W.Z)(e,ee()?Reflect.construct(t,n||[],(0,z.Z)(e).constructor):t.apply(e,n))}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}var te=function(e){function t(e){var n;return(0,K.Z)(this,t),n=X(this,t,[e]),(0,i.Z)((0,Q.Z)(n),"isEnabled",(function(){return"true"===localStorage.getItem("remediations:debug")})),(0,i.Z)((0,Q.Z)(n),"dataProviderPing",(function(){return{issues:[{id:"test:ping",description:"Ansible ping"}],systems:n.state.allHosts}})),(0,i.Z)((0,Q.Z)(n),"dataProviderA1",(function(){return{issues:[{id:"vulnerabilities:CVE-2019-3815",description:"CVE-2019-3815"}],systems:n.state.allHosts}})),(0,i.Z)((0,Q.Z)(n),"dataProviderA2",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read",systems:n.state.allHosts.slice(0,5)}]}})),(0,i.Z)((0,Q.Z)(n),"dataProviderC1",(function(){return{issues:[{id:"vulnerabilities:CVE-2019-3815",description:"CVE-2019-3815"},{id:"vulnerabilities:CVE-2018-16865",description:"CVE-2018-16865"},{id:"vulnerabilities:CVE-2017-17712",description:"CVE-2017-17712"}],systems:n.state.allHosts.slice(-1)}})),(0,i.Z)((0,Q.Z)(n),"dataProviderC2",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read"},{id:"advisor:rhnsd_pid_world_write|RHNSD_PID_WORLD_WRITABLE",description:"Code injection risk or wrong pid altering when rhnsd daemon file rhnsd.pid is world writable, due to a bug in rhnsd"}],systems:n.state.allHosts.slice(-1)}})),(0,i.Z)((0,Q.Z)(n),"dataProviderC3",(function(){return{issues:[].concat((0,F.Z)(n.dataProviderC1().issues),(0,F.Z)(n.dataProviderC2().issues)),systems:n.state.allHosts.slice(-1)}})),(0,i.Z)((0,Q.Z)(n),"dataProviderC4",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read"},{id:"advisor:corosync_enable_rt_schedule|COROSYNC_NOT_ENABLE_RT",description:"Cluster nodes are frequently fenced as realtime is not enabled in corosync"},{id:"advisor:CVE_2017_6074_kernel|KERNEL_CVE_2017_6074",description:"Kernel vulnerable to local privilege escalation via DCCP module (CVE-2017-6074)"}],systems:n.state.allHosts.slice(-1)}})),(0,i.Z)((0,Q.Z)(n),"dataProviderC5",(function(){return{issues:[{id:"advisor:unsupported",description:"Unsupported issue"},{id:"vulnerabilities:CVE-2019-999999",description:"Unsupported issue"},{id:"advisor:CVE_2017_6074_kernel|KERNEL_CVE_2017_6074",description:"Kernel vulnerable to local privilege escalation via DCCP module (CVE-2017-6074)"}],systems:n.state.allHosts.slice(-1)}})),(0,i.Z)((0,Q.Z)(n),"dataProviderD1",(function(){return{issues:[{id:"vulnerabilities:CVE-2019-3815",description:"CVE-2019-3815",systems:n.state.allHosts.slice(0,1)},{id:"vulnerabilities:CVE-2018-16865",description:"CVE-2018-16865",systems:n.state.allHosts.length>1?n.state.allHosts.slice(1,2):n.state.allHosts.slice(0,1)},{id:"vulnerabilities:CVE-2017-17712",description:"CVE-2017-17712"}],systems:n.state.allHosts}})),(0,i.Z)((0,Q.Z)(n),"dataProviderD2",(function(){return{issues:[{id:"advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE",description:"Bonding will not fail over to the backup link when bonding options are partially read",systems:n.state.allHosts.slice(0,1)},{id:"advisor:rhnsd_pid_world_write|RHNSD_PID_WORLD_WRITABLE",description:"Code injection risk or wrong pid altering when rhnsd daemon file rhnsd.pid is world writable, due to a bug in rhnsd",systems:n.state.allHosts.slice(1)}]}})),n.state={allHosts:!1},n}var n;return(0,Y.Z)(t,e),(0,M.Z)(t,[{key:"componentDidMount",value:(n=(0,o.Z)(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isEnabled()&&(0,m.yY)().then((function(e){return t.setState({allHosts:e.results.map((function(e){return e.id}))})}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(!this.isEnabled())return null;var t=this.state.allHosts,n=function(n){var o=n.dataProvider,i=n.children,r=(0,G.Z)(n,J);return c().createElement(u.SplitItem,null,c().createElement($.default,(0,U.Z)({dataProvider:o,isDisabled:!t||!t.length,onRemediationCreated:e.props.onRemediationCreated},r),i))};return c().createElement(c().Fragment,null,c().createElement(u.Stack,{hasGutter:!0},c().createElement(u.StackItem,null,c().createElement(u.Split,{hasGutter:!0},["ping","alwaysFail","failHalfTheTime","pause1m","pause5m","pause15m","pauseRandom15m","pause1h","pause6h"].map((function(t){return c().createElement(n,{key:t,dataProvider:function(){return{issues:[{id:"test:".concat(t),description:"Ansible ".concat(t," test playbook")}],systems:e.state.allHosts}}},t)})))),c().createElement(u.StackItem,null,c().createElement(u.Split,{hasGutter:!0},c().createElement(n,{dataProvider:this.dataProviderA1},"A1"),c().createElement(n,{dataProvider:this.dataProviderA2},"A2"),c().createElement(n,{dataProvider:this.dataProviderC1},"C1"),c().createElement(n,{dataProvider:this.dataProviderC2},"C2"),c().createElement(n,{dataProvider:this.dataProviderC3},"C3"),c().createElement(n,{dataProvider:this.dataProviderC4},"C4 (multires)"),c().createElement(n,{dataProvider:this.dataProviderC5},"C5 (unsupported)"),c().createElement(n,{dataProvider:this.dataProviderD1},"D1"),c().createElement(n,{dataProvider:this.dataProviderD2},"D2")))))}}]),t}(c().Component);te.propTypes={onRemediationCreated:E().func,dataProvider:E().func,children:E().node},te.defaultProps={onRemediationCreated:function(e){return e}};const ne=te;var oe=n(78762),ie=n(10170),re=n(11178),se=n(58610),ae=n(24350),le=n.n(ae),ce=n(55140);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=[null,"name","system_count","issue_count","updated_at"];const me=function(){var e,t=(0,ce.Z)();(0,l.useEffect)((function(){t.updateDocumentTitle("Remediations | Red Hat Insights")}),[t]);var n=(0,l.useState)("dismissed"!==localStorage.getItem("remediations:receptorBannerStatus")),i=(0,r.Z)(n,2),s=i[0],b=i[1],E=(0,re.sk)(4,"desc"),g=(0,re.L0)(),C=(0,re.v9)(),w=(0,re.h0)(),P=(0,l.useState)(0),S=(0,r.Z)(P,2),_=S[0],R=S[1],O=(0,l.useState)(""),D=(0,r.Z)(O,2),N=D[0],I=D[1],T=(0,l.useState)(!1),x=(0,r.Z)(T,2),A=x[0],j=x[1],q=(0,l.useState)("true"===localStorage.getItem("remediations:showArchived")),B=(0,r.Z)(q,2),H=B[0],V=B[1],U=(0,l.useState)(!1),G=(0,r.Z)(U,2),F=G[0],K=G[1],M=(0,d.useSelector)((function(e){return e.remediations})),W=(0,d.useDispatch)(),z=function(){return W(p.loadRemediations.apply(p,arguments))},Q=(null==M||null===(e=M.value)||void 0===e?void 0:e.data.length)||0;(0,l.useEffect)((function(){var e=pe[E.sortBy];H?z(e,E.sortDir,g.value,w.pageSize,w.offset):z(e,E.sortDir,g.value,w.pageSize,w.offset,void 0,!0)}),[]),(0,l.useEffect)((function(){"fulfilled"===M.status&&g.value===N&&K(!0)}),[E.sortBy,E.sortDir,g.value,w.pageSize,w.pageDebounced,H]),(0,l.useEffect)((function(){g.setValue(N)}),[N]),g.onChange(w.reset),E.onChange(w.reset);var Y=C.getSelectedIds(),$=function(e){var t;t=e.getNotification(),W((0,Z.wN)(t)),W(p.loadRemediations())},J={filters:N.length?[{category:"Name",chips:[{name:N}]}]:[],onDelete:function(){I(""),g.setValue("")}};return c().createElement("div",{className:"page__remediations"},c().createElement(k.B.Consumer,null,(function(e){return!1===e.permissions.read?c().createElement(oe.Z,null):c().createElement(c().Fragment,null,c().createElement(h.Z,null,c().createElement(f.Z,{title:"Remediations"}),c().createElement(ne,{onRemediationCreated:$})),c().createElement(v.Z,{filterConfig:{items:[{label:"Search playbooks",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Search playbooks",value:N,onChange:function(e,t){I(t)}}}]},bulkSelect:{items:[{title:"Select none",onClick:function(){return C.props.onSelect("none",!0)}},{title:"Select page (".concat(Q,")"),onClick:function(){return C.props.onSelect("page",!0)}}],checked:Y.length&&_>Y.length?null:Y.length,count:Y.length,isDisabled:!Q,onSelect:function(e){return C.props.onSelect(Y.length?"none":"page",e)}},actionsConfig:{actions:[{label:Y.length>1?"Download playbooks":"Download playbook",props:{variant:"secondary",isDisabled:!Y.length},onClick:function(){return function(e,t,n){var o=function(e,t){var n=le()(t,(function(e){return e.id}));return e.reduce((function(e,t){var o=n[t];return o&&o.issue_count>0&&e.push(o.id),e}),[])}(e,t);0===o.length?n((0,Z.wN)({variant:"danger",title:"No playbooks downloaded.",description:e.length>1?"Selected remediations do not contain any issues to remediate.":"Selected remediation does not contain any issues to remediate."})):o.length<e.length?((0,m.rN)(o),n((0,Z.wN)({variant:"success",title:o.length>1?"Downloading playbooks":"Downloading playbook",description:e.length-o.length>1?"".concat(e.length-o.length," remediations with no issues were not downloaded."):"1 remediation with no issues was not downloaded."}))):((0,m.rN)(o),n((0,Z.wN)({variant:"success",title:o.length>1?"Downloading playbooks":"Downloading playbook"})))}(Y,M.value.data,W)}},{label:"Delete playbooks",props:{isDisabled:!e.permissions.write||!Y.length},onClick:function(){return j(!0)}},{label:H?"Hide archived playbooks":"Show archived playbooks",onClick:H?function(){V(!1),C.reset(),localStorage.setItem("remediations:showArchived","false")}:function(){V(!0),C.reset(),localStorage.setItem("remediations:showArchived","true")}}]},pagination:ue(ue({},w.props),{},{itemCount:_}),activeFiltersConfig:J}),c().createElement(y.ZP,null,c().createElement(u.Stack,{hasGutter:!0},e.hasSmartManagement&&!e.isReceptorConfigured&&s&&c().createElement(u.StackItem,null,c().createElement(ie.Z,{onClose:function(){return b(!1),void localStorage.setItem("remediations:receptorBannerStatus","dismissed")}})),A&&c().createElement(se.Z,{title:1===Y.length?"Remove playbook":"Remove playbooks",text:"".concat(Y.length," ").concat(Y.length>1?"playbooks":"playbook","\n                                            will be removed from Remediations. This is permanent and cannot be undone."),confirmText:"Remove",onClose:function(){var e=(0,o.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!1),!t){e.next=6;break}return e.next=4,n=Y,W(p.deleteRemediations({remediation_ids:n}));case 4:z(),C.reset();case 6:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}()}),c().createElement(u.StackItem,null,c().createElement(L,{remediations:M,loadRemediations:z,sorter:E,filter:g,selector:C,pagination:w,shouldUpdateGrid:F,setShouldUpdateGrid:K,setRemediationCount:R,showArchived:H,setShowArchived:V})))))})))}}}]);
//# sourceMappingURL=../sourcemaps/Home.dffb8f944058a08e143cc15b34cf0917.js.map