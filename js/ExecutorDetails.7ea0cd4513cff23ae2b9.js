(self.webpackChunkinsights_remediations_frontend=self.webpackChunkinsights_remediations_frontend||[]).push([[530],{66906:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(94015),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,".ins-c-card__playbook-log .ins-c-primary-toolbar{padding:0}.ins-c-card__playbook-log .pf-c-toolbar{padding-left:0;padding-right:0}.ins-c-card__playbook-log .ins-c-tag-count{padding:0}.ins-c-card__playbook-log .pf-c-data-toolbar__content{padding:0px}\n","",{version:3,sources:["webpack://./src/components/ExecutorDetails.scss"],names:[],mappings:"AAAA,iDAC6B,SAAU,CADvC,wCAEoB,cAAe,CAAE,eAAgB,CAFrD,2CAGuB,SAAU,CAHjC,sDAIkC,WAAY",sourcesContent:[".ins-c-card__playbook-log {\n    .ins-c-primary-toolbar { padding: 0; }\n    .pf-c-toolbar { padding-left: 0; padding-right: 0; }\n    .ins-c-tag-count { padding: 0; }\n    .pf-c-data-toolbar__content { padding: 0px; }\n}"],sourceRoot:""}]);const s=o},50457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(94015),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,".ins-c-job-output__title{padding-bottom:var(--pf-global--spacer--lg)}.ins-c-job-output{max-height:500px;padding:0 !important;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:solid solid none solid;white-space:pre-wrap}.ins-c-job-output code:first-of-type{padding:8px;border-right:2px solid var(--pf-global--Color--light-300);margin-right:8px}.ins-c-job-output code:nth-of-type(2){position:relative;top:8px;white-space:pre-wrap}.ins-c-job-output__finished{border-bottom:2px solid var(--pf-global--Color--light-300)}.ins-l-playbook-running{background:#f0f0f0;padding:15px;display:flex;justify-content:center;border-color:var(--pf-global--Color--light-300);border-width:2px;border-style:none solid solid solid}\n","",{version:3,sources:["webpack://./src/components/SystemDetails.scss"],names:[],mappings:"AACA,yBAA2B,2CAA4C,CAAE,kBAGrE,gBAAiB,CACjB,oBAAqB,CACrB,+CAAgD,CAChD,gBAAiB,CACjB,mCAAoC,CACpC,oBAAqB,CANzB,qCAWY,WAAY,CACZ,yDAA0D,CAC1D,gBAAiB,CAb7B,sCAgBa,iBAAkB,CAClB,OAAQ,CACR,oBAAqB,CACxB,4BAIQ,0DAA2D,CAAG,wBAI5E,kBAA8B,CAC9B,YAAa,CACb,YAAa,CACb,sBAAuB,CACvB,+CAAgD,CAChD,gBAAiB,CACjB,mCAAoC",sourcesContent:["\n.ins-c-job-output__title { padding-bottom: var(--pf-global--spacer--lg)}\n\n.ins-c-job-output {\n    max-height: 500px;\n    padding: 0 !important;\n    border-color: var(--pf-global--Color--light-300);\n    border-width: 2px;\n    border-style: solid solid none solid;\n    white-space: pre-wrap;\n\n    code {\n        // style the line numbers\n        &:first-of-type {\n            padding: 8px;\n            border-right: 2px solid var(--pf-global--Color--light-300);\n            margin-right: 8px;\n        }\n         &:nth-of-type(2) {\n             position: relative;\n             top: 8px;\n             white-space: pre-wrap;\n         }\n    }\n\n    // add the border to the bottom since the spinner won't be there\n    &__finished { border-bottom: 2px solid var(--pf-global--Color--light-300);}\n}\n\n.ins-l-playbook-running {\n    background: rgb(240, 240, 240);\n    padding: 15px;\n    display: flex;\n    justify-content: center;\n    border-color: var(--pf-global--Color--light-300);\n    border-width: 2px;\n    border-style: none solid solid solid;\n}\n"],sourceRoot:""}]);const s=o},7521:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var a=n(59713),r=n.n(a),l=n(63038),o=n.n(l),s=n(67294),i=n(58711),c=n(45697),u=n.n(c),m=n(73727),d=n(99166),p=n(58135),b=n(44510),g=n(68433),y=n(89478),f=n(73559),E=n(80712),A=n(39530),C=n(29220),h=n(75061),k=n(37477),_=n(73251),v=n(37323),S=n(78239),B=n(5756),R=n(8239),x=n(66650),I=n(3454),D=n(94184),j=n.n(D);n(18925),R.Z.registerLanguage("yaml",x.Z);var O=function(e){var t=e.systemId,n=e.playbookRunSystemDetails,a=j()("ins-c-job-output",r()({},"ins-c-job-output__finished","running"!==n.status));return s.createElement(s.Fragment,null,s.createElement(A.Title,{headingLevel:"h4",size:"xl",className:"ins-c-job-output__title"},"Playbook log"),t&&t===n.system_id?s.createElement(s.Fragment,null,s.createElement(R.Z,{language:"yaml",showLineNumbers:!0,style:I.Z,className:a},n&&n.console||""),"running"===n.status&&s.createElement("div",{className:"ins-l-playbook-running"},s.createElement(A.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):s.createElement(f.O,{size:"lg"}))};O.propTypes={systemId:u().string,status:u().string,console:u().string,playbookRunSystemDetails:u().shape({system_id:u().string,status:u().string,console:u().string})},O.defaultProps={playbookRunSystemDetails:{}};const w=(0,i.connect)((function(e){return{playbookRunSystemDetails:e.playbookRunSystemDetails}}))(O);var P=n(43439);n(66358);const N=function(){return s.createElement(s.Fragment,null,s.createElement(g.m,null,s.createElement(A.Breadcrumb,null,s.createElement(A.BreadcrumbItem,null,s.createElement(f.O,{size:"lg"})),s.createElement(A.BreadcrumbItem,null,s.createElement(f.O,{size:"lg"})),s.createElement(A.BreadcrumbItem,{isActive:!0},s.createElement(f.O,{size:"lg"}))),s.createElement(A.Stack,{hasGutter:!0},s.createElement(A.StackItem,null,s.createElement(g.B,{title:s.createElement(f.O,{size:"lg"})})),s.createElement(A.StackItem,null,s.createElement(A.Split,{hasGutter:!0},s.createElement(A.SplitItem,null,s.createElement(_.Z,{className:"ins-c-playbookSummary__settings",title:"Run on"},s.createElement(f.O,{size:"lg"}))),s.createElement(A.SplitItem,null,s.createElement(_.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},s.createElement(f.O,{size:"lg"}))),s.createElement(A.SplitItem,null,s.createElement(_.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},s.createElement(f.O,{size:"lg"}))))))),s.createElement(b.o,null,s.createElement(A.Stack,{hasGutter:!0},s.createElement(A.Card,null,s.createElement(A.CardHeader,{className:"ins-m-card__header-bold"},s.createElement(A.Button,null,"Download playbook")),s.createElement(A.CardBody,null,s.createElement(P.Z,null))))))};n(82492);var T=function(e){var t=e.name;return s.createElement(A.Bullseye,null,s.createElement(A.EmptyState,null,s.createElement(A.EmptyStateIcon,{className:"ins-c-remediations-failure",icon:C.ExclamationCircleIcon}),s.createElement(A.Title,{headingLevel:"h5",size:"lg"},"Run failed"),s.createElement(A.EmptyStateBody,null,"Playbook failed to run on ",t,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),s.createElement(A.Button,{variant:"link"},"Learn more")))};T.propTypes={name:u().string};const Z=T;var z,G=n(24274),L=(n(59733),n(38881));function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var F=function(e){var t=e.match.params,n=t.executor_id,a=t.run_id,l=t.id,i=e.remediation,c=e.playbookRun,u=e.playbookRunSystems,v=e.playbookRunSystemDetails,R=e.getPlaybookRun,x=e.getPlaybookRunSystems,I=e.getPlaybookRunSystemDetails,D=e.onCollapseInventory,j=e.loadRemediation,O=(0,s.useState)({}),P=o()(O,2),T=P[0],F=P[1],q=(0,s.useState)([]),H=o()(q,2),W=H[0],U=H[1],V=(0,s.useState)(""),Q=o()(V,2),J=Q[0],K=Q[1],M=(0,s.useState)(1),X=o()(M,2),$=X[0],ee=X[1],te=(0,s.useState)(50),ne=o()(te,2),ae=ne[0],re=ne[1],le=(0,s.useState)(),oe=o()(le,2),se=oe[0],ie=oe[1],ce=(0,s.useState)(!1),ue=o()(ce,2),me=ue[0],de=ue[1],pe=(0,s.useState)(),be=o()(pe,2),ge=be[0],ye=be[1],fe=(0,s.useRef)(null),Ee=(0,G.T)({id:"default"}),Ae=function(e){fe&&fe.current&&(x(l,a,n,e.per_page,e.per_page*(e.page-1)),ee(e.page),re(e.per_page),fe.current.onRefreshData(e))};(0,s.useEffect)((function(){return j(l),R(l,a),ye((function(){return(0,d.Z)(x,500)})),function(){z&&clearInterval(z)}}),[]),(0,s.useEffect)((function(){c&&c.data&&F(c.data.executors.find((function(e){return e.executor_id===n}))||{}),"pending"!==u.status&&x(l,a,n,ae,ae*($-1),J)}),[c]),(0,s.useEffect)((function(){me||R(l,a),"running"!==(0,B.fb)(v.status)&&z&&clearInterval(z),de(!1)}),[v.status]),(0,s.useEffect)((function(){U((function(){return u.data.map((function(e){var t=e.system_id;return{id:t,display_name:e.system_name,status:e.status,isOpen:se===t,children:s.createElement(w,{systemId:t})}}))}))}),[u]);var Ce,he=function(e){return s.createElement(b.o,null,s.createElement(A.Stack,{hasGutter:!0},s.createElement(A.Card,{className:"ins-c-card__playbook-log"},s.createElement(A.CardBody,null,s.createElement(p.e_,{ref:fe,onLoad:function(e){var t=e.INVENTORY_ACTION_TYPES,n=e.mergeWithEntities;return(0,h.JH)().register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n(k.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:t,renderStatus:function(e){return s.createElement("div",{className:"ins-c-remediations-status-bar"},(0,B.Nv)((0,B.fb)(e)))},urlBuilder:Ee})())))},items:"pending"!==u.status?W:[],isLoaded:"pending"!==u.status,onRefresh:Ae,page:$,total:u.meta.total,perPage:ae,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===e?function(e,t,n,r){var l=r.id;de(!0),n?(ie(l),z&&clearInterval(z),I(i.id,a,l),z=setInterval((function(){return I(i.id,a,l)}),5e3)):(ie(void 0),clearInterval(z)),D(n,l)}:function(e,t,n,r){var l=r.id;de(!0),n?(ie(l),I(i.id,a,l)):ie(void 0),clearInterval(z),D(n,l)}},s.createElement(A.Toolbar,null,s.createElement(A.ToolbarContent,null,s.createElement(A.ToolbarItem,null,s.createElement(E.BU,{items:[{value:"display_name",label:"Name",filterValues:{placeholder:"Filter by name",type:E.Yu.text,value:J,onChange:function(e,t){K(t),ee(1),ge(l,a,n,ae,0,t)}}}]})),s.createElement(A.ToolbarItem,null,s.createElement(A.Button,{variant:"secondary",onClick:function(){return(0,S.rN)(i.id)}},"Download playbook")))))))))},ke=(0,s.useContext)(L.B);return i&&T&&c&&c.data?s.createElement(s.Fragment,null,s.createElement(g.m,null,s.createElement(A.Breadcrumb,null,s.createElement(A.BreadcrumbItem,null,s.createElement(m.Link,{to:"/"}," Remediations ")),s.createElement(A.BreadcrumbItem,null,s.createElement(m.Link,{to:"/".concat(i.id)}," ",i.name," ")),s.createElement(A.BreadcrumbItem,null,s.createElement(m.Link,{to:"/".concat(i.id,"/").concat(a)},s.createElement(y.t,{type:"exact",date:c.data.created_at}))),s.createElement(A.BreadcrumbItem,{isActive:!0}," ",T.executor_name," ")),s.createElement(A.Stack,{hasGutter:!0},s.createElement(A.StackItem,null,s.createElement(g.B,{title:"Running"===(0,B.fb)(T.status)?s.createElement(s.Fragment,null,s.createElement(C.InProgressIcon,{className:"ins-c-remediations-running","aria-label":"connection status"}),T.executor_name):T.executor_name})),s.createElement(A.StackItem,null,s.createElement(A.Split,{hasGutter:!0},s.createElement(A.SplitItem,null,s.createElement(_.Z,{className:"ins-c-playbookSummary__settings",title:"Run status"},T.status?s.createElement(B.kf,{executorStatus:T.status,counts:T.counts,permission:ke}):s.createElement(f.O,{size:"lg"}))),s.createElement(A.SplitItem,null,s.createElement(_.Z,{className:"ins-c-playbookSummary__settings",title:"Run by"},"".concat(c.data.created_by.first_name," ").concat(c.data.created_by.last_name))),s.createElement(A.SplitItem,null,s.createElement(_.Z,{className:"ins-c-playbookSummary__settings",title:"Run on"},s.createElement(y.t,{type:"exact",date:c.data.created_at}))))))),{running:he(Ce=(0,B.fb)(T.status)),success:he(Ce),failure:he(Ce),canceled:he(Ce),epicFailure:s.createElement(b.o,null,s.createElement(A.Stack,{hasGutter:!0},s.createElement(A.Card,null,s.createElement(A.CardHeader,{className:"ins-m-card__header-bold"},s.createElement(A.Button,{variant:"secondary",onClick:function(){return(0,S.rN)(i.id)}},"Download playbook")),s.createElement(A.CardBody,null,s.createElement(Z,{name:T.executor_name})))))}[(0,B.fb)(Ce)]):s.createElement(N,null)};F.propTypes={match:u().object,remediation:u().object,playbookRun:u().object,playbookRunSystems:u().object,playbookRunSystemDetails:u().object,getPlaybookRun:u().func,getPlaybookRunSystems:u().func,getPlaybookRunSystemDetails:u().func,onCollapseInventory:u().func,loadRemediation:u().func},F.defaultProps={remediation:{}};const q=(0,i.connect)((function(e){var t=e.playbookRuns,n=e.playbookRun,a=e.playbookRunSystems,r=e.playbookRunSystemDetails,l=e.selectedRemediation;return{playbookRuns:t.data,playbookRun:n,playbookRunSystemDetails:r,playbookRunSystems:a,remediation:l.remediation}}),(function(e){return{getPlaybookRuns:function(t){return e((0,v.getPlaybookRuns)(t))},getPlaybookRun:function(t,n){return e((0,v.getPlaybookRun)(t,n))},getPlaybookRunSystems:function(t,n,a,r,l,o){return e((0,v.getPlaybookRunSystems)(t,n,a,r,l,o))},getPlaybookRunSystemDetails:function(t,n,a){return e((0,v.getPlaybookRunSystemDetails)(t,n,a))},onCollapseInventory:function(t,n){return e((0,v.expandInventoryTable)(n,t))},loadRemediation:function(t){return e((0,v.loadRemediation)(t))}}}))(F)},59733:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),l=n(66906),o=r()(l.default,{insert:"head",singleton:!1});if(!l.default.locals||e.hot.invalidate){var s=l.default.locals;e.hot.accept(66906,(t=>{l=n(66906),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(s,l.default.locals)?(s=l.default.locals,o(l.default)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),l.default.locals},18925:(e,t,n)=>{"use strict";var a=n(93379),r=n.n(a),l=n(50457),o=r()(l.default,{insert:"head",singleton:!1});if(!l.default.locals||e.hot.invalidate){var s=l.default.locals;e.hot.accept(50457,(t=>{l=n(50457),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(s,l.default.locals)?(s=l.default.locals,o(l.default)):e.hot.invalidate()}))}e.hot.dispose((function(){o()})),l.default.locals}}]);
//# sourceMappingURL=ExecutorDetails.7ea0cd4513cff23ae2b9.js.map