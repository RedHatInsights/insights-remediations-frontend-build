(self.webpackChunkremediations=self.webpackChunkremediations||[]).push([[2530],{77832:(e,t,n)=>{"use strict";function a(e){return e.split(":")[0]}function l({id:e}){switch(a(e)){case"advisor":return"Advisor";case"ssg":return"Compliance";case"vulnerabilities":return"Vulnerability";case"patch-advisory":return"Patch";default:return"Unknown"}}function r({display_name:e,hostname:t,id:n}){return e||t||n}function s(e,t){return e.toLowerCase().includes(t.toLowerCase())}n.d(t,{PW:()=>s,Pz:()=>a,_f:()=>r,lN:()=>l})},18293:(e,t,n)=>{"use strict";n.d(t,{Gd:()=>o,T:()=>s,Tj:()=>i});var a=n(54998),l=n.n(a),r=n(77832);function s(e){const t=function({id:e}){switch((0,r.Pz)(e)){case"advisor":return"advisor";case"vulnerabilities":return"vulnerabilities";case"ssg":return"compliance";case"patch-advisory":return"patch";default:return"general_information"}}(e),n=o("inventory").toString();return e=>`${n}/${e}?appName=${t}`}function i(e){const t=e.split(":");switch(t[0]){case"advisor":return o(t[0]).segment("recommendations").segment(t[1]).toString();case"vulnerabilities":return o(t[0]).segment("cves").segment(t[1]).toString();case"patch-advisory":return o(t[0]).segment("advisories").segment(t[1]+":"+t[2]).toString();default:return null}}function o(e){switch(e){case"advisor":return l()(document.baseURI).segment("insights").segment("advisor");case"vulnerabilities":return l()(document.baseURI).segment("insights").segment("vulnerability");case"compliance":case"ssg":return l()(document.baseURI).segment("insights").segment("compliance");case"inventory":return l()(document.baseURI).segment(function(){const e=window.location.pathname.split("/");return"preview"===e[1]?e[2]:e[1]}()).segment("inventory");case"patch-advisory":return l()(document.baseURI).segment("insights").segment("patch");default:throw new Error(`Unknown app: ${e}`)}}},75593:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var a=n(10756),l=n.n(a),r=n(28216),s=n(45697),i=n.n(s),o=n(92397),c=n(88208),m=n(63652),u=n(99087),d=n(63456),p=n(39173),y=n(62410),E=n(32819),g=n(31593),b=n(76491),_=n(40667),k=n(53774),h=n(29684),v=n(37248),f=n.n(v),S=n(881),I=n(76400),R=n(34413),Z=n(33626),N=n(15848),C=n(75796),P=n(45791);const w=()=>l().createElement(l().Fragment,null,l().createElement(d.Z,null,l().createElement(k.Breadcrumb,null,l().createElement(k.BreadcrumbItem,null,l().createElement(E.Z,{size:"lg"})),l().createElement(k.BreadcrumbItem,null,l().createElement(E.Z,{size:"lg"})),l().createElement(k.BreadcrumbItem,{isActive:!0},l().createElement(E.Z,{size:"lg"}))),l().createElement(_.Stack,{hasGutter:!0},l().createElement(_.StackItem,null,l().createElement(p.Z,{title:l().createElement(E.Z,{size:"lg"})})),l().createElement(_.StackItem,null,l().createElement(h.Split,{hasGutter:!0},l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},l().createElement(E.Z,{size:"lg"}))),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},l().createElement(E.Z,{size:"lg"}))),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},l().createElement(E.Z,{size:"lg"}))))))),l().createElement(u.ZP,null,l().createElement(_.Stack,{hasGutter:!0},l().createElement(b.Card,null,l().createElement(b.CardBody,null,l().createElement(P.Bullseye,null,l().createElement(C.Spinner,null)))))));var x=n(4252),B=n(20211),T=n.n(B);const z=({name:e})=>l().createElement(P.Bullseye,null,l().createElement(x.EmptyState,null,l().createElement(x.EmptyStateHeader,{titleText:"Run failed",icon:l().createElement(x.EmptyStateIcon,{className:"rem-c-failure",icon:T()}),headingLevel:"h5"}),l().createElement(x.EmptyStateBody,null,"Playbook failed to run on ",e,". Connection was lost. Try executing the remediation again, and if the problem persist, constact your system administrator(s)."),l().createElement(x.EmptyStateFooter,null,l().createElement(g.Button,{variant:"link"},"Learn more"))));z.propTypes={name:i().string};const D=z;var G=n(95726),F=n(92223),$=n(68175);const A=(0,n(18293).T)({id:"default"}),O=[{key:"display_name",title:"Name",renderFunc:(e,t,{fqdn:n})=>l().createElement("div",null,l().createElement("a",{href:A(t)},n||e||t))},{key:"tags"},{key:"status",title:"Status",renderFunc:e=>l().createElement("div",{className:"rem-c-status-bar"},(0,N.Nv)((0,N.fb)(e)))}];var U=n(22812),L=n(66650),V=n(19158),Y=n(49231);const j=({data:e})=>l().createElement(V.nU,{data:e,toolbar:l().createElement(Y.Toolbar,null,l().createElement(Y.ToolbarContent,null,l().createElement(Y.ToolbarItem,null,l().createElement(V.Yt,{placeholder:"Search"}))))});j.propTypes={data:i().string};const q=j;var H=n(13193);U.Z.registerLanguage("yaml",L.Z);const W=({systemId:e,playbookRunSystemDetails:t})=>l().createElement(l().Fragment,null,l().createElement(H.Title,{headingLevel:"h4",size:"xl",className:"rem-c-title-job-output"},"Playbook log"),e&&e===t.system_id?l().createElement(l().Fragment,null,l().createElement(q,{data:t.console}),"running"===t.status&&l().createElement("div",{className:"rem-l-playbook-running"},l().createElement(C.Spinner,{size:"lg","aria-valuetext":"playbook in progress",className:"ins-c-spinner__playbook-running"}))):l().createElement(E.Z,{size:"lg"}));W.propTypes={systemId:i().string,status:i().string,console:i().string,playbookRunSystemDetails:i().shape({system_id:i().string,status:i().string,console:i().string})},W.defaultProps={playbookRunSystemDetails:{}};const M=(0,r.connect)((({playbookRunSystemDetails:e})=>({playbookRunSystemDetails:e})))(W);let J;const K=({remediation:e,playbookRun:t,playbookRunSystemDetails:n,getPlaybookRun:r,getPlaybookRunSystemDetails:s,onCollapseInventory:i,loadRemediation:v})=>{const{executor_id:R,run_id:C,id:P}=(0,c.useParams)(),[x,B]=(0,a.useState)({}),[T,z]=(0,a.useState)(),[A,U]=(0,a.useState)(!1),L=(0,a.useRef)(null);(0,a.useEffect)((()=>(v(P),r(P,C),()=>{J&&clearInterval(J)})),[]),(0,a.useEffect)((()=>{t&&t.data&&B(t.data.executors.find((e=>e.executor_id===R))||{})}),[t]),(0,a.useEffect)((()=>{A||r(P,C),"running"!==(0,N.fb)(n.status)&&J&&clearInterval(J),U(!1)}),[n.status]);const V=(e=>{const{id:t,run_id:n,executor_id:a,openId:r}=e||{};return async(e,{page:s,per_page:i,filters:{hostnameOrId:o}})=>{const c=await Z.V_.getPlaybookRunSystems(t,n,a,i,i*(s-1),o);return{results:c.data.map((({system_id:e,system_name:t,status:n})=>({id:e,display_name:t,status:n,isOpen:r===e,children:l().createElement(M,{systemId:e})}))),total:c.meta?.total}}})({id:P,run_id:C,executor_id:R,openId:T}),Y=t=>l().createElement(u.ZP,null,l().createElement(_.Stack,{hasGutter:!0},l().createElement(b.Card,{className:"rem-c-card__playbook-log"},l().createElement(b.CardBody,null,l().createElement(m.Z,{ref:L,columns:e=>(0,$.VA)(e,O),onLoad:({INVENTORY_ACTION_TYPES:e,mergeWithEntities:t})=>(0,F.z2)({...t(S.Z.playbookActivityIntentory({INVENTORY_ACTION_TYPES:e})())}),getEntities:V,hasCheckbox:!1,expandable:!0,showTags:!0,onExpandClick:"running"===t?(t,n,a,{id:l})=>{U(!0),a?(z(l),J&&clearInterval(J),s(e.id,C,l),J=setInterval((()=>s(e.id,C,l)),5e3)):(z(void 0),clearInterval(J)),i(a,l)}:(t,n,a,{id:l})=>{U(!0),a?(z(l),s(e.id,C,l)):z(void 0),clearInterval(J),i(a,l)},actionsConfig:{actions:[l().createElement(g.Button,{key:"download-playbook",variant:"secondary",onClick:()=>(0,Z.rN)([e.id])},"Download playbook")]},hideFilters:{all:!0,name:!1}}))))),j=(0,a.useContext)(G.B);return e&&x&&t&&t.data?l().createElement(l().Fragment,null,l().createElement(d.Z,null,l().createElement(k.Breadcrumb,null,l().createElement(k.BreadcrumbItem,null,l().createElement(o.Z,{to:"/"}," Remediations ")),l().createElement(k.BreadcrumbItem,null,l().createElement(o.Z,{to:`/${e.id}`}," ",e.name," ")),l().createElement(k.BreadcrumbItem,null,l().createElement(o.Z,{to:`/${e.id}/${C}`},l().createElement(y.Z,{type:"exact",date:t.data.created_at}))),l().createElement(k.BreadcrumbItem,{isActive:!0}," ",x.executor_name," ")),l().createElement(_.Stack,{hasGutter:!0},l().createElement(_.StackItem,null,l().createElement(p.Z,{title:"Running"===(0,N.fb)(x.status)?l().createElement(l().Fragment,null,l().createElement(f(),{className:"rem-c-running","aria-label":"connection status"}),x.executor_name):x.executor_name})),l().createElement(_.StackItem,null,l().createElement(h.Split,{hasGutter:!0},l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run status"},x.status?l().createElement(N.kf,{executorStatus:x.status,counts:x.counts,permission:j}):l().createElement(E.Z,{size:"lg"}))),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run by"},`${t.data.created_by.first_name} ${t.data.created_by.last_name}`)),l().createElement(h.SplitItem,null,l().createElement(I.Z,{className:"rem-c-playbookSummary__settings",title:"Run on"},l().createElement(y.Z,{type:"exact",date:t.data.created_at}))))))),{running:Y(q=(0,N.fb)(x.status)),success:Y(q),failure:Y(q),canceled:Y(q),epicFailure:l().createElement(u.ZP,null,l().createElement(_.Stack,{hasGutter:!0},l().createElement(b.Card,null,l().createElement(b.CardHeader,{className:"rem-m-card__header-bold"},l().createElement(g.Button,{variant:"secondary",onClick:()=>(0,Z.rN)(e.id)},"Download playbook")),l().createElement(b.CardBody,null,l().createElement(D,{name:x.executor_name})))))}[(0,N.fb)(q)]):l().createElement(w,null);var q};K.propTypes={remediation:i().object,playbookRun:i().object,playbookRunSystemDetails:i().object,getPlaybookRun:i().func,getPlaybookRunSystemDetails:i().func,onCollapseInventory:i().func,loadRemediation:i().func},K.defaultProps={remediation:{}};const Q=(0,r.connect)((({playbookRuns:e,playbookRun:t,playbookRunSystemDetails:n,selectedRemediation:a})=>({playbookRuns:e.data,playbookRun:t,playbookRunSystemDetails:n,remediation:a.remediation})),(e=>({getPlaybookRuns:t=>e((0,R.Is)(t)),getPlaybookRun:(t,n)=>e((0,R.zy)(t,n)),getPlaybookRunSystemDetails:(t,n,a)=>e((0,R.gE)(t,n,a)),onCollapseInventory:(t,n)=>e((0,R.wY)(n,t)),loadRemediation:t=>e((0,R.d5)(t))})))(K)},76400:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(10756),l=n.n(a),r=n(45697),s=n.n(r),i=n(93967),o=n.n(i);const c=({title:e,className:t,children:n,isBold:a,hasGutter:r,needsPointer:s,...i})=>{const c=o()("rem-c-description-list__description",{"rem-c-description-list__description--bold":a},{"rem-c-description-list__description--withGutter":r},{"rem-c-description-list__description--needsPointer":s}),m=o()(t,"rem-c-description-list");return l().createElement("dl",{className:m,...i},l().createElement("dt",{className:"rem-c-description-list__title"},l().createElement("b",null,e)),l().createElement("dd",{className:c}," ",n," "))},m=c;c.propTypes={title:s().string,children:s().any,isBold:s().bool,className:s().string,hasGutter:s().bool,needsPointer:s().bool}},68175:(e,t,n)=>{"use strict";n.d(t,{Gx:()=>r,M1:()=>l,VA:()=>s,um:()=>a});const a=(e=[],t)=>e.every((({id:e})=>t?.has(e)))?e.length>0:e.some((({id:e})=>t?.has(e)))&&null,l=e=>e?.issues?.reduce(((e,t)=>(t?.systems?.forEach((n=>{const a=e.find((({id:e})=>n.id===e)),l={id:t.id,resolution:t.resolution,description:t.description};a?(a.issues=[...a.issues,{...l,resolved:a.resolved}],a.rebootRequired=a.issues.some((({resolution:e})=>e?.needs_reboot))):e.push({...n,issues:[{...l,resolved:n.resolved}],rebootRequired:t?.resolution?.needs_reboot})})),e)),[])||[],r=async({page:e=0,...t}={},n,a,l)=>{const r=n.filter((({display_name:e})=>!t.filters?.hostnameOrId||e.includes(t.filters.hostnameOrId))),s=await a(r.slice((e-1)*t.per_page,e*t.per_page).map((({id:e})=>e)),{...t,hasItems:!0},!0),i=s.results.map((e=>{const t=e.id,n=403!==l&&l.find((e=>e.system_ids.includes(t)));return n?{...e,connection_status:n.connection_status,executor_type:n.executor_type}:e}));return{...s,page:e,results:i.map((e=>({...r.find((({id:t})=>t===e.id)),...e}))),total:r.length}},s=(e=[],t=[])=>t.map((t=>e.find((e=>e.key===t.key))||t))},42655:()=>{}}]);
//# sourceMappingURL=../sourcemaps/ExecutorDetails.cbf8863286c5d0daccd3e96d605a932a.js.map