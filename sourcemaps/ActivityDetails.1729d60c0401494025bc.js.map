{"version":3,"sources":["webpack:///./src/skeletons/ActivityDetailsSkeleton.js","webpack:///./src/components/ActivityDetails.js"],"names":["PageHeader","Breadcrumb","BreadcrumbItem","Skeleton","size","isActive","Stack","gutter","StackItem","PageHeaderTitle","title","Split","hasGutter","SplitItem","DescriptionList","className","Main","Card","CardHeader","Title","headingLevel","CardBody","SkeletonTable","ActivityDetail","match","params","id","run_id","remediation","playbookRun","getPlaybookRun","getPlaybookRuns","loadRemediation","useEffect","permission","useContext","PermissionContext","data","Link","to","name","DateFormat","type","date","created_at","normalizeStatus","status","InProgressIcon","localStorage","getItem","CancelButton","remediationName","remediationId","playbookId","created_by","first_name","last_name","executorStatus","counts","executors","reduce","acc","ex","pending","running","success","failure","canceled","acked","Table","rows","map","e","cells","executor_id","executor_name","system_count","TableHeader","TableBody","propTypes","PropTypes","issue","defaultProps","connect","selectedRemediation","dispatch","runId"],"mappings":"2XA4FA,QAhEgC,WAC9B,OACE,kBAAC,aAAD,KACE,kBAACA,EAAA,EAAD,KACE,kBAAC,EAAAC,WAAD,KACE,kBAAC,EAAAC,eAAD,KACE,kBAACC,EAAA,EAAD,CAAUC,KAAK,QAEjB,kBAAC,EAAAF,eAAD,CAAgBG,UAAQ,GACtB,kBAACF,EAAA,EAAD,CAAUC,KAAK,SAGnB,kBAAC,EAAAE,MAAD,CAAOC,QAAM,GACX,kBAAC,EAAAC,UAAD,KACE,kBAACC,EAAA,EAAD,CAAiBC,MAAO,kBAACP,EAAA,EAAD,CAAUC,KAAK,UAEzC,kBAAC,EAAAI,UAAD,KACE,kBAAC,EAAAG,MAAD,CAAOC,WAAS,GACd,kBAAC,EAAAC,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,kCACVL,MAAM,UAEN,kBAACP,EAAA,EAAD,CAAUC,KAAK,SAGnB,kBAAC,EAAAS,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,kCACVL,MAAM,UAEN,kBAACP,EAAA,EAAD,CAAUC,KAAK,SAGnB,kBAAC,EAAAS,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,kCACVL,MAAM,cAEN,kBAACP,EAAA,EAAD,CAAUC,KAAK,aAO3B,kBAACY,EAAA,EAAD,KACE,kBAAC,EAAAV,MAAD,CAAOM,WAAS,GACd,kBAAC,EAAAK,KAAD,KACE,kBAAC,EAAAC,WAAD,CAAYH,UAAU,2BACpB,kBAAC,EAAAI,MAAD,CAAOC,aAAa,KAAKhB,KAAK,MAA9B,0BAIF,kBAAC,EAAAiB,SAAD,KACE,kBAACC,EAAA,EAAD,Y,eC7CRC,EAAiB,SAAC,GASlB,QARJC,MACEC,OAAUC,EAOR,EAPQA,GAAIC,EAOZ,EAPYA,OAEhBC,EAKI,EALJA,YACAC,EAII,EAJJA,YACAC,EAGI,EAHJA,eACAC,EAEI,EAFJA,gBACAC,EACI,EADJA,iBAEAC,gBAAU,WACRD,EAAgBN,GAChBK,EAAgBL,GAChBI,EAAeJ,EAAIC,KAClB,IAEH,IAAMO,GAAaC,gBAAWC,KAG9B,OAAOR,GAAeC,GAAeA,EAAYQ,KAC/C,kBAAC,aAAD,KACE,kBAACrC,EAAA,EAAD,KACE,kBAAC,EAAAC,WAAD,KACE,kBAAC,EAAAC,eAAD,KACE,kBAAC,EAAAoC,KAAD,CAAMC,GAAE,KAAR,mBAEF,kBAAC,EAAArC,eAAD,KACE,kBAAC,EAAAoC,KAAD,CAAMC,GAAE,WAAMX,EAAYF,KAA1B,IAAkCE,EAAYY,KAA9C,MAEF,kBAAC,EAAAtC,eAAD,CAAgBG,UAAQ,GACtB,kBAACoC,EAAA,EAAD,CAAYC,KAAK,QAAQC,KAAMd,EAAYQ,KAAKO,eAGpD,kBAAC,EAAAtC,MAAD,CAAOM,WAAS,GACd,kBAAC,EAAAJ,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,MAC+C,aAA7CmC,QAAgBhB,EAAYQ,KAAKS,QAC/B,kBAAC,aAAD,KACE,kBAAC,EAAAC,eAAD,CACEhC,UAAU,6BACV,aAAW,sBAEb,kBAAC0B,EAAA,EAAD,CACEC,KAAK,QACLC,KAAMd,EAAYQ,KAAKO,aA5B0B,SAA/CI,aAAaC,QAAQ,uBA+BvB,kBAACC,EAAA,EAAD,CACEC,gBAAiBvB,EAAYY,KAC7BY,cAAexB,EAAYF,GAC3B2B,WAAYxB,EAAYQ,KAAKX,MAKnC,kBAACe,EAAA,EAAD,CAAYC,KAAK,QAAQC,KAAMd,EAAYQ,KAAKO,gBAKxD,kBAAC,EAAApC,UAAD,KACE,kBAAC,EAAAG,MAAD,CAAOC,WAAS,GACd,kBAAC,EAAAC,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,kCACVL,MAAM,UAEN,kBAAC+B,EAAA,EAAD,CAAYC,KAAK,QAAQC,KAAMd,EAAYQ,KAAKO,eAGpD,kBAAC,EAAA/B,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,kCACVL,MAAM,UAFR,UAIMmB,EAAYQ,KAAKiB,WAAWC,WAJlC,YAIgD1B,EAAYQ,KAAKiB,WAAWE,aAG9E,kBAAC,EAAA3C,UAAD,KACE,kBAACC,EAAA,EAAD,CACEC,UAAU,kCACVL,MAAM,cAEN,kBAAC,KAAD,CACE+C,eAAgB5B,EAAYQ,KAAKS,OACjCY,OAAQ7B,EAAYQ,KAAKsB,UAAUC,QACjC,SAACC,EAAKC,GAAN,MAAc,CACZC,QAASF,EAAIE,QAAUD,EAAGJ,OAAOK,QACjCC,QAASH,EAAIG,QAAUF,EAAGJ,OAAOM,QACjCC,QAASJ,EAAII,QAAUH,EAAGJ,OAAOO,QACjCC,QAASL,EAAIK,QAAUJ,EAAGJ,OAAOQ,QACjCC,SAAUN,EAAIM,SAAWL,EAAGJ,OAAOS,SACnCC,MAAOP,EAAIO,MAAQN,EAAGJ,OAAOU,SAE/B,CACEL,QAAS,EACTC,QAAS,EACTC,QAAS,EACTC,QAAS,EACTC,SAAU,IAGdjC,WAAYA,UAQ1B,kBAAClB,EAAA,EAAD,KACE,kBAAC,EAAAV,MAAD,CAAOM,WAAS,GACd,kBAAC,EAAAK,KAAD,KACE,kBAAC,EAAAC,WAAD,CAAYH,UAAU,2BACpB,kBAAC,EAAAI,MAAD,CAAOC,aAAa,KAAKhB,KAAK,MAA9B,0BAIF,kBAAC,EAAAiB,SAAD,KACE,kBAAC,EAAAgD,MAAD,CACE,aAAW,oBACXC,KAAMzC,EAAYQ,KAAKsB,UAAUY,KAAI,SAACC,GAAD,MAAQ,CAC3CC,MAAO,CACL,CACE/D,MACE,kBAAC,EAAA4B,KAAD,CACEC,GAAE,WAAMX,EAAYF,GAAlB,YAAwBG,EAAYQ,KAAKX,GAAzC,YAA+C8C,EAAEE,cAElDF,EAAEG,gBAITH,EAAEI,aACF,CACElE,MACE,kBAAC,KAAD,CACE+C,gBAAgBZ,QAAgB2B,EAAE1B,QAClCY,OAAQc,EAAEd,OACVxB,WAAYA,UAMtBuC,MAAO,CACL,CAAE/D,MAAO,cACT,CAAEA,MAAO,WACT,CAAEA,MAAO,yBAGX,kBAAC,EAAAmE,YAAD,MACA,kBAAC,EAAAC,UAAD,YAQZ,kBAAC,EAAD,OAIJvD,EAAewD,UAAY,CACzBnD,YAAaoD,WACbC,MAAOD,WACPnD,YAAamD,WACblD,eAAgBkD,SAChBjD,gBAAiBiD,SACjBhD,gBAAiBgD,SACjBxD,MAAOwD,YAGTzD,EAAe2D,aAAe,GAc9B,SAZkBC,cAChB,kBAA2C,CACzCtD,YADF,EAAGA,YAEDD,YAFF,EAAgBwD,oBAEmBxD,gBAEnC,SAACyD,GAAD,MAAe,CACbvD,eAAgB,SAACJ,EAAI4D,GAAL,OAAeD,GAASvD,oBAAeJ,EAAI4D,KAC3DvD,gBAAiB,SAACqB,GAAD,OACfiC,GAAStD,qBAAgBqB,KAC3BpB,gBAAiB,SAACN,GAAD,OAAQ2D,GAASrD,qBAAgBN,QATpCyD,CAWhB5D","file":"js/ActivityDetails.97cd5e6c7c5fba941b0b.js","sourcesContent":["import React from 'react';\n\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { Skeleton } from '@redhat-cloud-services/frontend-components/Skeleton';\n\nimport SkeletonTable from './SkeletonTable';\n\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Stack,\n  StackItem,\n  Breadcrumb,\n  BreadcrumbItem,\n  Split,\n  SplitItem,\n  Title,\n} from '@patternfly/react-core';\n\nimport DescriptionList from '../components/Layouts/DescriptionList';\n\nimport './RemediationDetailsSkeleton.scss';\n\nconst ActivityDetailsSkeleton = () => {\n  return (\n    <React.Fragment>\n      <PageHeader>\n        <Breadcrumb>\n          <BreadcrumbItem>\n            <Skeleton size=\"lg\" />\n          </BreadcrumbItem>\n          <BreadcrumbItem isActive>\n            <Skeleton size=\"lg\" />\n          </BreadcrumbItem>\n        </Breadcrumb>\n        <Stack gutter>\n          <StackItem>\n            <PageHeaderTitle title={<Skeleton size=\"lg\" />} />\n          </StackItem>\n          <StackItem>\n            <Split hasGutter>\n              <SplitItem>\n                <DescriptionList\n                  className=\"ins-c-playbookSummary__settings\"\n                  title=\"Run on\"\n                >\n                  <Skeleton size=\"lg\" />\n                </DescriptionList>\n              </SplitItem>\n              <SplitItem>\n                <DescriptionList\n                  className=\"ins-c-playbookSummary__settings\"\n                  title=\"Run by\"\n                >\n                  <Skeleton size=\"lg\" />\n                </DescriptionList>\n              </SplitItem>\n              <SplitItem>\n                <DescriptionList\n                  className=\"ins-c-playbookSummary__settings\"\n                  title=\"Run status\"\n                >\n                  <Skeleton size=\"lg\" />\n                </DescriptionList>\n              </SplitItem>\n            </Split>\n          </StackItem>\n        </Stack>\n      </PageHeader>\n      <Main>\n        <Stack hasGutter>\n          <Card>\n            <CardHeader className=\"ins-m-card__header-bold\">\n              <Title headingLevel=\"h4\" size=\"xl\">\n                Results by connection\n              </Title>\n            </CardHeader>\n            <CardBody>\n              <SkeletonTable />\n            </CardBody>\n          </Card>\n        </Stack>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nexport default ActivityDetailsSkeleton;\n","/* eslint-disable camelcase */\n\nimport React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/DateFormat';\n\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  Stack,\n  StackItem,\n  Breadcrumb,\n  BreadcrumbItem,\n  Split,\n  SplitItem,\n  Title,\n} from '@patternfly/react-core';\nimport { Table, TableHeader, TableBody } from '@patternfly/react-table';\nimport { InProgressIcon } from '@patternfly/react-icons';\n\nimport DescriptionList from './Layouts/DescriptionList';\nimport { CancelButton } from '../containers/CancelButton';\nimport { getPlaybookRun, getPlaybookRuns, loadRemediation } from '../actions';\nimport './Status.scss';\nimport { StatusSummary, normalizeStatus } from './statusHelper';\nimport ActivityDetailsSkeleton from '../skeletons/ActivityDetailsSkeleton';\nimport { PermissionContext } from '../App';\n\nimport './ActivityDetails.scss';\n\nconst ActivityDetail = ({\n  match: {\n    params: { id, run_id },\n  },\n  remediation,\n  playbookRun,\n  getPlaybookRun,\n  getPlaybookRuns,\n  loadRemediation,\n}) => {\n  useEffect(() => {\n    loadRemediation(id);\n    getPlaybookRuns(id);\n    getPlaybookRun(id, run_id);\n  }, []);\n\n  const permission = useContext(PermissionContext);\n  const isDebug = () => localStorage.getItem('remediations:debug') === 'true';\n\n  return remediation && playbookRun && playbookRun.data ? (\n    <React.Fragment>\n      <PageHeader>\n        <Breadcrumb>\n          <BreadcrumbItem>\n            <Link to={`/`}> Remediations </Link>\n          </BreadcrumbItem>\n          <BreadcrumbItem>\n            <Link to={`/${remediation.id}`}> {remediation.name} </Link>\n          </BreadcrumbItem>\n          <BreadcrumbItem isActive>\n            <DateFormat type=\"exact\" date={playbookRun.data.created_at} />\n          </BreadcrumbItem>\n        </Breadcrumb>\n        <Stack hasGutter>\n          <StackItem>\n            <PageHeaderTitle\n              title={\n                normalizeStatus(playbookRun.data.status) === 'running' ? (\n                  <React.Fragment>\n                    <InProgressIcon\n                      className=\"ins-c-remediations-running\"\n                      aria-label=\"connection status\"\n                    />\n                    <DateFormat\n                      type=\"exact\"\n                      date={playbookRun.data.created_at}\n                    />\n                    {isDebug() && (\n                      <CancelButton\n                        remediationName={remediation.name}\n                        remediationId={remediation.id}\n                        playbookId={playbookRun.data.id}\n                      />\n                    )}\n                  </React.Fragment>\n                ) : (\n                  <DateFormat type=\"exact\" date={playbookRun.data.created_at} />\n                )\n              }\n            />\n          </StackItem>\n          <StackItem>\n            <Split hasGutter>\n              <SplitItem>\n                <DescriptionList\n                  className=\"ins-c-playbookSummary__settings\"\n                  title=\"Run on\"\n                >\n                  <DateFormat type=\"exact\" date={playbookRun.data.created_at} />\n                </DescriptionList>\n              </SplitItem>\n              <SplitItem>\n                <DescriptionList\n                  className=\"ins-c-playbookSummary__settings\"\n                  title=\"Run by\"\n                >\n                  {`${playbookRun.data.created_by.first_name} ${playbookRun.data.created_by.last_name}`}\n                </DescriptionList>\n              </SplitItem>\n              <SplitItem>\n                <DescriptionList\n                  className=\"ins-c-playbookSummary__settings\"\n                  title=\"Run status\"\n                >\n                  <StatusSummary\n                    executorStatus={playbookRun.data.status}\n                    counts={playbookRun.data.executors.reduce(\n                      (acc, ex) => ({\n                        pending: acc.pending + ex.counts.pending,\n                        running: acc.running + ex.counts.running,\n                        success: acc.success + ex.counts.success,\n                        failure: acc.failure + ex.counts.failure,\n                        canceled: acc.canceled + ex.counts.canceled,\n                        acked: acc.acked + ex.counts.acked,\n                      }),\n                      {\n                        pending: 0,\n                        running: 0,\n                        success: 0,\n                        failure: 0,\n                        canceled: 0,\n                      }\n                    )}\n                    permission={permission}\n                  />\n                </DescriptionList>\n              </SplitItem>\n            </Split>\n          </StackItem>\n        </Stack>\n      </PageHeader>\n      <Main>\n        <Stack hasGutter>\n          <Card>\n            <CardHeader className=\"ins-m-card__header-bold\">\n              <Title headingLevel=\"h4\" size=\"xl\">\n                Results by connection\n              </Title>\n            </CardHeader>\n            <CardBody>\n              <Table\n                aria-label=\"Collapsible table\"\n                rows={playbookRun.data.executors.map((e) => ({\n                  cells: [\n                    {\n                      title: (\n                        <Link\n                          to={`/${remediation.id}/${playbookRun.data.id}/${e.executor_id}`}\n                        >\n                          {e.executor_name}\n                        </Link>\n                      ),\n                    },\n                    e.system_count,\n                    {\n                      title: (\n                        <StatusSummary\n                          executorStatus={normalizeStatus(e.status)}\n                          counts={e.counts}\n                          permission={permission}\n                        />\n                      ),\n                    },\n                  ],\n                }))}\n                cells={[\n                  { title: 'Connection' },\n                  { title: 'Systems' },\n                  { title: 'Playbook run status' },\n                ]}\n              >\n                <TableHeader />\n                <TableBody />\n              </Table>\n            </CardBody>\n          </Card>\n        </Stack>\n      </Main>\n    </React.Fragment>\n  ) : (\n    <ActivityDetailsSkeleton />\n  );\n};\n\nActivityDetail.propTypes = {\n  remediation: PropTypes.object,\n  issue: PropTypes.object,\n  playbookRun: PropTypes.object,\n  getPlaybookRun: PropTypes.func,\n  getPlaybookRuns: PropTypes.func,\n  loadRemediation: PropTypes.func,\n  match: PropTypes.object,\n};\n\nActivityDetail.defaultProps = {};\n\nconst connected = connect(\n  ({ playbookRun, selectedRemediation }) => ({\n    playbookRun,\n    remediation: selectedRemediation.remediation,\n  }),\n  (dispatch) => ({\n    getPlaybookRun: (id, runId) => dispatch(getPlaybookRun(id, runId)),\n    getPlaybookRuns: (remediationId) =>\n      dispatch(getPlaybookRuns(remediationId)),\n    loadRemediation: (id) => dispatch(loadRemediation(id)),\n  })\n)(ActivityDetail);\nexport default connected;\n\n// export default ActivityDetail;\n"],"sourceRoot":""}