{"version":3,"file":"js/413.1683103996174.c2bf47d0620ecb1b3185.js","mappings":"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","sources":["webpack:///./src/Utilities/utils.js","webpack:///./src/config.js","webpack:///./src/Utilities/http.js","webpack:///./src/api/index.js","webpack:///./src/constants.js","webpack:///./src/api/inventory.js","webpack:///./src/store/actions/host-actions.js","webpack:///./src/store/actions/resolution-actions.js","webpack:///./src/store/reducers/host-reducer.js","webpack:///./src/modules/RemediationsModal/schema.js","webpack:///./src/modules/RemediationsModal/steps/fetchError.js","webpack:///./src/modules/RemediationsModal/steps/selectPlaybook.js","webpack:///./src/modules/RemediationsModal/steps/reviewSystems.js","webpack:///./src/modules/RemediationsModal/steps/reviewActions.js","webpack:///./src/modules/RemediationsModal/steps/issueResolution.js","webpack:///./src/modules/RemediationsModal/steps/review.js","webpack:///./src/store/reducers/resolutions-reducer.js","webpack:///./src/modules/RemediationsModal/common/ProgressBar.js","webpack:///./src/modules/RemediationsModal/steps/progress.js","webpack:///./src/modules/RemediationsModal/RemediationsWizard.js","webpack:///./src/modules/RemediationsModal/common/SystemsTable.js"],"sourcesContent":["export function capitalize(string) {\n  return `${string.charAt(0).toUpperCase() + string.slice(1)}`;\n}\n\n/* eslint-disable camelcase */\nimport React, { Fragment } from 'react';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport * as api from '../api';\nimport uniqWith from 'lodash/uniqWith';\nimport isEqual from 'lodash/isEqual';\nimport { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry/ReducerRegistry';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { SystemsTableWithContext } from '../modules/RemediationsModal/common/SystemsTable';\n\nexport const CAN_REMEDIATE = 'remediations:remediation:write';\nexport const AUTO_REBOOT = 'auto-reboot';\nexport const HAS_MULTIPLES = 'has-multiples';\nexport const SELECT_PLAYBOOK = 'select-playbook';\nexport const SELECTED_RESOLUTIONS = 'selected-resolutions';\nexport const MANUAL_RESOLUTION = 'manual-resolution';\nexport const EXISTING_PLAYBOOK_SELECTED = 'existing-playbook-selected';\nexport const EXISTING_PLAYBOOK = 'existing-playbook';\nexport const SYSTEMS = 'systems';\nexport const RESOLUTIONS = 'resolutions';\nexport const ISSUES_MULTIPLE = 'issues-multiple';\nexport const TOGGLE_BULK_SELECT = 'toggle-bulk-select';\n\n// Get the current group since we can be mounted at two urls\nexport const getGroup = () =>\n  window.location.pathname\n    .split('/')\n    .filter((s) => s !== 'preview' && s.length > 0)\n    .shift();\n\nexport const getEnvUrl = () => {\n  const pathName = window.location.pathname.split('/');\n  return pathName[1] === 'preview' ? 'preview/' : '';\n};\n\nexport const getBaseUri = () =>\n  `${document.baseURI.replace('preview/', '')}${getEnvUrl()}`;\n\nexport const remediationUrl = (id) =>\n  `${getBaseUri()}${getGroup()}/remediations${id ? `/${id}` : ''}`;\n\nexport const dedupeArray = (array) => [...new Set(array)];\n\nexport const pluralize = (count, str, fallback) =>\n  count !== 1 ? fallback || str + 's' : str;\n\nconst sortRecords = (records, sortByState) =>\n  [...records].sort((a, b) => {\n    const key = Object.keys(a)[sortByState.index - 1];\n    return (\n      (a[key] > b[key] ? 1 : a[key] < b[key] ? -1 : 0) *\n      (sortByState.direction === 'desc' ? -1 : 1)\n    );\n  });\n\nexport const buildRows = (\n  records,\n  sortByState,\n  showAlternate,\n  allSystemsNamed\n) =>\n  sortRecords(records, sortByState).reduce(\n    (acc, curr, index) => [\n      ...acc,\n      {\n        isOpen: false,\n        cells: [\n          { title: curr.action },\n          {\n            title: (\n              <Fragment key={`${index}-description`}>\n                <p key={`${index}-resolution`}>{curr.resolution}</p>\n                {showAlternate && curr.alternate > 0 && (\n                  <p key={`${index}-alternate`}>\n                    {curr.alternate} alternate{' '}\n                    {pluralize(curr.alternate, 'resolution')}\n                  </p>\n                )}\n              </Fragment>\n            ),\n          },\n          {\n            title: curr.needsReboot ? (\n              <div>Required</div>\n            ) : (\n              <div>Not required</div>\n            ),\n          },\n          {\n            title: curr.systems?.length || 0,\n            props: { isOpen: false },\n          },\n        ],\n      },\n      ...(curr.systems?.length > 0\n        ? [\n            {\n              parent: index * 2,\n              fullWidth: true,\n              allSystemsNamed: allSystemsNamed.filter((system) =>\n                curr.systems.includes(system.id)\n              ),\n              allSystems: curr.systems,\n              cells: [\n                {\n                  title: (\n                    <Bullseye>\n                      <Spinner />\n                    </Bullseye>\n                  ),\n                  props: { colSpan: 5, className: 'pf-m-no-padding' },\n                },\n              ],\n            },\n          ]\n        : []),\n    ],\n    []\n  );\n\nconst buildSystemRow = (allSystemsNamed = [], allSystems = []) => (\n  <Router>\n    <SystemsTableWithContext\n      allSystemsNamed={allSystemsNamed}\n      allSystems={allSystems}\n      disabledColumns={['updated']}\n    />\n  </Router>\n);\n\nexport const onCollapse = (event, rowKey, isOpen, rows, setRows) => {\n  let temp = [...rows];\n  rows[rowKey].isOpen = isOpen;\n  temp[rowKey + 1].cells = [\n    {\n      title: buildSystemRow(\n        rows[rowKey + 1].allSystemsNamed,\n        rows[rowKey + 1].allSystems\n      ),\n    },\n  ];\n  setRows(temp);\n};\n\nexport const getResolution = (issueId, formValues) => {\n  const issueResolutions =\n    formValues[RESOLUTIONS].find((r) => r.id === issueId)?.resolutions || [];\n\n  if (\n    formValues[MANUAL_RESOLUTION] &&\n    issueId in formValues[SELECTED_RESOLUTIONS]\n  ) {\n    return issueResolutions.filter(\n      (r) => r.id === formValues[SELECTED_RESOLUTIONS][issueId]\n    );\n  }\n\n  if (formValues[EXISTING_PLAYBOOK_SELECTED]) {\n    const existing = formValues[EXISTING_PLAYBOOK]?.issues?.find(\n      (i) => i.id === issueId\n    );\n\n    if (existing) {\n      return issueResolutions.filter((r) => r.id === existing.resolution.id);\n    }\n  }\n\n  return issueResolutions;\n};\n\nexport function createNotification(id, name, isNewSwitch) {\n  const verb = isNewSwitch ? 'created' : 'updated';\n  return {\n    variant: 'success',\n    title: `Playbook ${verb}`,\n    description: (\n      <span>\n        You have successfully {verb} <a href={remediationUrl(id)}>{name}</a>.\n      </span>\n    ),\n    dismissable: true,\n  };\n}\n\nexport const submitRemediation = (formValues, data, basePath, setState) => {\n  let percent = 1;\n  setState({ percent });\n\n  const issues = data.issues\n    .map(({ id }) => {\n      const playbookSystems =\n        formValues[EXISTING_PLAYBOOK]?.issues\n          ?.find((i) => i.id === id)\n          ?.systems?.map((s) => s.id) || [];\n      return {\n        id,\n        resolution: getResolution(id, formValues)?.[0]?.id,\n        systems: dedupeArray([\n          ...(formValues[EXISTING_PLAYBOOK_SELECTED] ? [] : playbookSystems),\n          ...(formValues[SYSTEMS][id] || []),\n        ]),\n      };\n    })\n    .filter((issue) => issue.systems.length > 0);\n\n  const interval = setInterval(() => {\n    percent < 99 && setState({ percent: ++percent });\n  }, (issues.length + Object.keys(formValues[SYSTEMS]).length) / 10);\n\n  const add = { issues, systems: [] };\n\n  const { id } = formValues[EXISTING_PLAYBOOK] || {};\n  const isUpdate = formValues[EXISTING_PLAYBOOK_SELECTED];\n\n  (\n    (isUpdate &&\n      api.patchRemediation(\n        id,\n        { add, auto_reboot: formValues[AUTO_REBOOT] },\n        basePath\n      )) ||\n    api.createRemediation(\n      {\n        name: formValues[SELECT_PLAYBOOK],\n        add,\n        auto_reboot: formValues[AUTO_REBOOT],\n      },\n      basePath\n    )\n  )\n    .then(({ id }) => {\n      setState({ id, percent: 100 });\n      data?.onRemediationCreated?.({\n        remediation: { id, name },\n        getNotification: () =>\n          createNotification(id, formValues[SELECT_PLAYBOOK], !isUpdate),\n      });\n    })\n    .catch(() => {\n      setState({ failed: true });\n    })\n    .finally(() => clearInterval(interval));\n};\n\nexport const entitySelected = (state, { payload }) => {\n  let selected = state.selected || [];\n  if (payload.selected) {\n    selected = [\n      ...selected,\n      ...(payload.id === 0 ? state.rows.map((row) => row.id) : [payload.id]),\n    ];\n  } else {\n    if (payload.id === 0) {\n      const rowsIds = state.rows.map((row) => row.id);\n      selected = selected.filter((item) => !rowsIds.includes(item));\n    } else {\n      selected =\n        payload.id === -1 ? [] : selected.filter((item) => item !== payload.id);\n    }\n  }\n\n  return {\n    ...state,\n    selected,\n  };\n};\n\nexport const loadEntitiesFulfilled = (state, allSystems, sortBy) => {\n  let selected = state.selected || [];\n  if (!state.selected) {\n    selected = allSystems ? allSystems : state.rows.map((row) => row.id);\n  }\n  return {\n    ...state,\n    selected,\n    rows: sortByAttr(\n      state.rows.map(({ id, ...row }) => ({\n        id,\n        ...row,\n        selected: !!selected?.includes(id),\n      })),\n      'display_name',\n      sortBy?.direction || 'asc'\n    ),\n    sortBy,\n  };\n};\n\nexport const changeBulkSelect = (state, action) => {\n  const removeSelected = !action.payload;\n  if (!removeSelected) {\n    state.selected = dedupeArray([\n      ...state.selected,\n      ...state.rows.map((row) => row.id),\n    ]);\n  }\n\n  return {\n    ...state,\n    selected: removeSelected ? [] : state.selected,\n    rows: state.rows.map(({ id, ...row }) => ({\n      id,\n      ...row,\n      selected: !removeSelected,\n    })),\n  };\n};\n\nexport const sortByAttr = (systems, attribute, direction) =>\n  Array.isArray(systems)\n    ? systems.sort(\n        (a, b) =>\n          ((a[attribute] > b[attribute] && 1) || -1) *\n          (direction === 'asc' ? 1 : -1)\n      )\n    : [];\n\nexport const fetchSystemsInfo = async (\n  config,\n  sortableColumns = [],\n  allSystemsNamed = [],\n  getEntities\n) => {\n  const isSortingValid = sortableColumns.includes(config.orderBy);\n  config.orderBy = isSortingValid ? config.orderBy : undefined;\n  config.orderDirection = isSortingValid\n    ? config.orderDirection?.toLowerCase()\n    : undefined;\n  allSystemsNamed = sortByAttr(allSystemsNamed, 'name', config.orderDirection);\n  const hostnameOrId = config?.filters?.hostnameOrId?.toLowerCase();\n  const systems = hostnameOrId\n    ? allSystemsNamed.reduce(\n        (acc, curr) => [\n          ...acc,\n          ...(curr.name.toLowerCase().includes(hostnameOrId) ? [curr.id] : []),\n        ],\n        []\n      )\n    : allSystemsNamed.map((system) => system.id);\n  const sliced = systems.slice(\n    (config.page - 1) * config.per_page,\n    config.page * config.per_page\n  );\n  const data =\n    sliced.length > 0\n      ? await getEntities(sliced, { ...config, hasItems: true, page: 1 }, true)\n      : {};\n  return {\n    ...{\n      ...data,\n      results: sortByAttr(data.results, 'display_name', config.orderDirection),\n    },\n    total: systems.length,\n    page: config.page,\n    per_page: config.per_page,\n    orderBy: config.orderBy,\n    orderDirection: config.orderDirection,\n    sortBy: { key: config.orderBy, direction: config.orderDirection },\n  };\n};\n\nexport const splitArray = (inputArray, perChunk) =>\n  [...new Array(Math.ceil(inputArray.length / perChunk))].map((_item, key) =>\n    inputArray.slice(key * perChunk, (key + 1) * perChunk)\n  );\n\nexport const getPlaybookSystems = (playbook) =>\n  (playbook &&\n    uniqWith(\n      playbook.issues?.reduce(\n        (acc, curr) => [\n          ...acc,\n          ...curr.systems.map((system) => ({\n            id: system.id,\n            name: system.display_name,\n          })),\n        ],\n        []\n      ),\n      isEqual\n    )) ||\n  [];\n\nexport const inventoryEntitiesReducer = (\n  allSystems,\n  { LOAD_ENTITIES_FULFILLED }\n) =>\n  applyReducerHash({\n    SELECT_ENTITY: (state, action) => entitySelected(state, action),\n    [LOAD_ENTITIES_FULFILLED]: (state, { payload }) =>\n      loadEntitiesFulfilled(state, allSystems, {\n        key: payload.orderBy,\n        direction: payload.orderDirection,\n      }),\n    [TOGGLE_BULK_SELECT]: changeBulkSelect,\n  });\n\nexport const shortenIssueId = (issueId) =>\n  issueId?.split('|')?.slice(-1)?.[0] || issueId;\n\nexport const getIssuesMultiple = (\n  issues = [],\n  systems = [],\n  resolutions = []\n) =>\n  issues\n    .map((issue) => {\n      const issueResolutions =\n        resolutions.find((r) => r.id === issue.id)?.resolutions || [];\n      const { description, needs_reboot: needsReboot } =\n        issueResolutions?.[0] || {};\n      return {\n        action: issues.find((i) => i.id === issue.id).description,\n        resolution: description,\n        needsReboot,\n        systems: dedupeArray([...(issue.systems || []), ...systems]),\n        id: issue.id,\n        alternate: issueResolutions?.length - 1,\n      };\n    })\n    .filter((record) => record.alternate > 0);\n\nexport const matchPermissions = (permissionA, permissionB) => {\n  const segmentsA = permissionA.split(':');\n  const segmentsB = permissionB.split(':');\n\n  if (segmentsA.length !== segmentsB.length) {\n    return false;\n  }\n\n  return segmentsA.every(\n    (segmentA, index) =>\n      segmentA === segmentsB[index] ||\n      segmentA === '*' ||\n      segmentsB[index] === '*'\n  );\n};\n","export const API_BASE = '/api/remediations/v1';\nexport const SOURCES_BASE = '/api/sources/v2.0';\n","const HEADERS = {\n  'Content-Type': 'application/json; charset=utf-8',\n};\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function checkResponse(r) {\n  if (r.ok) {\n    return r;\n  }\n\n  if (r.headers.get('content-type').includes('application/json')) {\n    // let's try to extract some more info\n    let data = false;\n    try {\n      data = await r.json();\n    } catch (e) {} // eslint-disable-line no-empty\n\n    if (data.errors && data.errors.length) {\n      const error = data.errors[0];\n\n      if (error.details && error.details.name) {\n        throw new HttpError(`${error.title} (${error.details.name})`);\n      }\n\n      throw new HttpError(error.title);\n    }\n  }\n\n  throw new HttpError(`Unexpected response code ${r.status}`);\n}\n\nasync function json(r) {\n  if (!r) {\n    return;\n  }\n\n  const type = r.headers.get('content-type');\n  if (!type.includes('application/json')) {\n    throw new HttpError(`Unexpected response type (${type}) returned`);\n  }\n\n  return r.json();\n}\n\nfunction doFetch(\n  uri,\n  method = 'GET',\n  data = false,\n  headers = false,\n  options = {}\n) {\n  const opts = {\n    credentials: 'same-origin',\n    method,\n    ...options,\n  };\n\n  if (headers) {\n    opts.headers = headers;\n  }\n\n  if (data) {\n    opts.body = JSON.stringify(data);\n  }\n\n  return fetch(uri, opts);\n}\n\nexport function doGet(uri) {\n  return doFetch(uri.toString()).then(checkResponse).then(json);\n}\n\nexport function doPost(uri, data) {\n  return doFetch(uri, 'POST', data, HEADERS).then(checkResponse).then(json);\n}\n\nexport function doPatch(uri, data) {\n  return doFetch(uri, 'PATCH', data, HEADERS).then(checkResponse);\n}\n\nexport function doDelete(uri) {\n  return doFetch(uri, 'DELETE').then(checkResponse);\n}\n","import { API_BASE, SOURCES_BASE } from '../config';\n\nimport axios from 'axios';\nimport {\n  RemediationsApi,\n  ResolutionsApi,\n  RemediationsApiAxiosParamCreator,\n} from '@redhat-cloud-services/remediations-client';\nimport { DefaultApi } from '@redhat-cloud-services/sources-client';\n\n/*\n * TODO: replace these with generated clients\n */\nimport { doGet } from '../Utilities/http';\nimport urijs from 'urijs';\n\nfunction url(...args) {\n  const url = urijs(API_BASE).segment('remediations');\n  args.forEach((segment) => url.segment(segment));\n  return url;\n}\n\nexport const getRemediationStatus = (id) => doGet(url(id, 'status'));\nexport function getHosts() {\n  return doGet('/api/inventory/v1/hosts');\n}\n/*\n * end of TODO\n */\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function authInterceptor(config) {\n  return config;\n}\n\nfunction responseDataInterceptor(response) {\n  if (response.data) {\n    return { ...response.data, etag: response.headers.etag };\n  }\n\n  return response;\n}\n\nfunction interceptor401(err) {\n  if (!err) {\n    return;\n  }\n\n  if (err.response && err.response.status === 401) {\n    return false;\n  }\n\n  throw err;\n}\n\nfunction errorInterceptor(err) {\n  if (!err) {\n    return;\n  }\n\n  if (\n    err.response &&\n    err.response.data &&\n    err.response.data.errors &&\n    err.response.data.errors.length\n  ) {\n    const error = err.response.data.errors[0];\n\n    if (error.details && error.details.name) {\n      throw new HttpError(`${error.title} (${error.details.name})`);\n    }\n\n    throw new HttpError(error.title);\n  }\n\n  throw err;\n}\n\nconst instance = axios.create();\ninstance.interceptors.request.use(authInterceptor);\ninstance.interceptors.response.use(responseDataInterceptor);\ninstance.interceptors.response.use(null, interceptor401);\ninstance.interceptors.response.use(null, errorInterceptor);\n\nexport const remediations = new RemediationsApi(undefined, API_BASE, instance);\nexport const resolutions = new ResolutionsApi(undefined, API_BASE, instance);\nexport const sources = new DefaultApi(undefined, SOURCES_BASE, instance);\n\nexport function downloadPlaybook(selectedIds) {\n  return new Promise((resolve, reject) => {\n    const tab =\n      selectedIds.length > 1\n        ? new RemediationsApiAxiosParamCreator()\n            .downloadPlaybooks(selectedIds)\n            .then((value) => window.open(API_BASE + value.url))\n        : new RemediationsApiAxiosParamCreator()\n            .getRemediationPlaybook(selectedIds[0])\n            .then((value) => window.open(API_BASE + value.url));\n\n    if (!tab) {\n      return reject();\n    }\n\n    const handle = setInterval(() => {\n      if (tab.closed) {\n        clearInterval(handle);\n        resolve();\n      }\n    }, 500);\n  });\n}\n\nexport function getIsReceptorConfigured() {\n  return doGet(\n    `${window.location.origin}/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]`\n  );\n}\n\nexport function deleteSystemsFromRemediation(systems, remediation) {\n  return Promise.all(\n    systems.flatMap((system) =>\n      system.issues.map((issue) =>\n        remediations.deleteRemediationIssueSystem(\n          remediation.id,\n          issue.id,\n          system.id\n        )\n      )\n    )\n  );\n}\n\nfunction checkResponse(r) {\n  if (!r.ok) {\n    const error = new Error(`Unexpected response code ${r.status}`);\n    error.statusCode = r.status;\n    throw error;\n  }\n\n  return r;\n}\n\nfunction json(r) {\n  checkResponse(r);\n  return r.json();\n}\n\nconst headers = Object.freeze({\n  'Content-Type': 'application/json; charset=utf-8',\n});\n\nexport function createRemediation(data) {\n  const uri = new urijs(API_BASE).segment('remediations').toString();\n  return fetch(uri, {\n    headers,\n    method: 'POST',\n    credentials: 'include',\n    body: JSON.stringify(data),\n  }).then(json);\n}\n\nexport function patchRemediation(id, data) {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .segment(id)\n    .toString();\n  return fetch(uri, {\n    headers,\n    credentials: 'include',\n    method: 'PATCH',\n    body: JSON.stringify(data),\n  }).then(checkResponse);\n}\n\nexport function getRemediations() {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .query({ limit: 200 })\n    .toString();\n  return fetch(uri, { credentials: 'include' }).then(json);\n}\n\nexport function getRemediation(id) {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .segment(id)\n    .toString();\n  return fetch(uri, { credentials: 'include' }).then(json);\n}\n\nexport function getResolutionsBatch(issues) {\n  const uri = new urijs(API_BASE).segment('resolutions').toString();\n  return fetch(uri, {\n    headers,\n    credentials: 'include',\n    method: 'POST',\n    body: JSON.stringify({ issues }),\n  }).then(json);\n}\n","import keyBy from 'lodash/keyBy';\nimport flatMap from 'lodash/flatMap';\n\nconst asyncActions = flatMap(\n  [\n    'LOAD_REMEDIATIONS',\n    'CREATE_REMEDIATIONS',\n    'LOAD_REMEDIATION',\n    'LOAD_REMEDIATION_STATUS',\n    'REFRESH_REMEDIATION',\n    'PATCH_REMEDIATION',\n    'DELETE_REMEDIATION',\n    'DELETE_REMEDIATION_ISSUE',\n    'DELETE_REMEDIATION_ISSUE_SYSTEM',\n    'PATCH_REMEDIATION_ISSUE',\n    'GET_RESOLUTIONS',\n    'GET_CONNECTION_STATUS',\n    'RUN_REMEDIATION',\n    'EXECUTE_PLAYBOOK_BANNER',\n    'RUN_REMEDIATION',\n    'GET_PLAYBOOK_RUNS',\n    'GET_PLAYBOOK_RUN',\n    'GET_PLAYBOOK_RUN_SYSTEMS',\n    'GET_PLAYBOOK_RUN_SYSTEM_DETAILS',\n    'CANCEL_PLAYBOOK_RUNS',\n    'GET_ENDPOINT',\n    'CHECK_EXECUTABLE',\n  ],\n  (a) => [a, `${a}_PENDING`, `${a}_FULFILLED`, `${a}_REJECTED`]\n);\n\nconst actions = ['SET_ETAG', 'EXPAND_INVENTORY_TABLE', 'SELECT_ENTITY'];\nexport const ACTION_TYPES = keyBy([...asyncActions, ...actions], (k) => k);\n\nexport const SEARCH_DEBOUNCE_DELAY = 500;\n\nexport const FETCH_SELECTED_HOSTS = 'FETCH_SELECTED_HOSTS';\nexport const FETCH_RESOLUTIONS = 'FETCH_RESOLUTIONS';\n","import instance from '@redhat-cloud-services/frontend-components-utilities/interceptors';\nimport { HostsApi } from '@redhat-cloud-services/host-inventory-client';\n\nexport const INVENTORY_API_BASE = '/api/inventory/v1';\nexport const hosts = new HostsApi(undefined, INVENTORY_API_BASE, instance);\n\nexport function getHostsById(systems, { page, perPage }) {\n  return hosts.apiHostGetHostById(systems, undefined, perPage, page);\n}\n","import * as HostHelper from '../../api/inventory';\nimport { FETCH_SELECTED_HOSTS } from '../../constants';\n\nexport const fetchHostsById = (systems, options = {}) => ({\n  type: FETCH_SELECTED_HOSTS,\n  payload: HostHelper.getHostsById(systems, options),\n});\n","import * as api from '../../api';\nimport { FETCH_RESOLUTIONS } from '../../constants';\nimport transform from 'lodash/transform';\n\nconst batchResolutions = async (issues) => {\n  try {\n    const result = await api.getResolutionsBatch(issues.map((i) => i.id));\n\n    const [resolutions, warnings] = transform(\n      result,\n      ([resolutions, errors], value, key) => {\n        if (!value) {\n          errors.push(`Issue ${key} does not have Ansible support`);\n        } else {\n          resolutions.push(value);\n        }\n\n        return [resolutions, errors];\n      },\n      [[], []]\n    );\n\n    return { resolutions, warnings };\n  } catch (e) {\n    return {\n      errors: [\n        'Error obtaining resolution information. Please try again later.',\n      ],\n    };\n  }\n};\n\nexport const fetchResolutions = (issues = []) => ({\n  type: FETCH_RESOLUTIONS,\n  payload: batchResolutions(issues),\n});\n","import { FETCH_SELECTED_HOSTS } from '../../constants';\n\n// Initial State\nexport const hostsInitialState = {\n  isLoading: false,\n  hosts: [],\n};\n\nconst setLoadingState = (state) => ({ ...state, isLoading: true });\n\nconst setHosts = (state, { payload }) => ({\n  ...state,\n  hosts: [...state.hosts, ...(payload.results || [])],\n  isLoading: false,\n});\n\nexport default {\n  [`${FETCH_SELECTED_HOSTS}_FULFILLED`]: setHosts,\n  [`${FETCH_SELECTED_HOSTS}_PENDING`]: setLoadingState,\n};\n","import componentTypes from '@data-driven-forms/react-form-renderer/component-types';\nimport validatorTypes from '@data-driven-forms/react-form-renderer/validator-types';\nimport {\n  SELECT_PLAYBOOK,\n  MANUAL_RESOLUTION,\n  EXISTING_PLAYBOOK,\n  EXISTING_PLAYBOOK_SELECTED,\n  SELECTED_RESOLUTIONS,\n  AUTO_REBOOT,\n  SYSTEMS,\n  ISSUES_MULTIPLE,\n  RESOLUTIONS,\n  shortenIssueId,\n} from '../../Utilities/utils';\n\nexport const selectPlaybookFields = [\n  {\n    name: SELECT_PLAYBOOK,\n    component: 'select-playbook',\n    validate: [\n      {\n        type: validatorTypes.PATTERN,\n        pattern: /^$|^.*[\\w\\d]+.*$/,\n      },\n      {\n        type: validatorTypes.REQUIRED,\n      },\n    ],\n  },\n  {\n    name: EXISTING_PLAYBOOK_SELECTED,\n    component: componentTypes.TEXT_FIELD,\n    hideField: true,\n  },\n  {\n    name: EXISTING_PLAYBOOK,\n    component: componentTypes.TEXT_FIELD,\n    hideField: true,\n  },\n  {\n    name: RESOLUTIONS,\n    component: componentTypes.TEXT_FIELD,\n    hideField: true,\n  },\n];\n\nexport const reviewActionsFields = [\n  {\n    name: MANUAL_RESOLUTION,\n    component: 'review-actions',\n  },\n];\n\nexport const reviewActionsNextStep = (values) => {\n  const filteredIssues = values[EXISTING_PLAYBOOK_SELECTED]\n    ? values[ISSUES_MULTIPLE].filter(\n        (issue) =>\n          !values[EXISTING_PLAYBOOK].issues.some((i) => i.id === issue.id) &&\n          Object.keys(values[SYSTEMS]).includes(issue.id)\n      )\n    : values[ISSUES_MULTIPLE].filter((issue) =>\n        Object.keys(values[SYSTEMS]).includes(issue.id)\n      );\n  return values[MANUAL_RESOLUTION] ? filteredIssues[0]?.id : 'review';\n};\n\nexport const issueResolutionNextStep = (values, issue) => {\n  const filteredIssues = values[EXISTING_PLAYBOOK_SELECTED]\n    ? values[ISSUES_MULTIPLE].filter(\n        (issue) =>\n          !values[EXISTING_PLAYBOOK].issues.some(\n            (i) =>\n              i.id === issue.id &&\n              Object.keys(values[SYSTEMS]).includes(issue.id)\n          )\n      )\n    : values[ISSUES_MULTIPLE].filter((issue) =>\n        Object.keys(values[SYSTEMS]).includes(issue.id)\n      );\n  return (\n    filteredIssues.slice(\n      filteredIssues.findIndex((i) => i.id === issue.id) + 1,\n      filteredIssues.length\n    )[0]?.id || 'review'\n  );\n};\n\nexport const reviewSystemsNextStep = (values) => {\n  const filteredIssues = values[EXISTING_PLAYBOOK_SELECTED]\n    ? values[ISSUES_MULTIPLE].filter(\n        (issue) =>\n          !values[EXISTING_PLAYBOOK].issues.some(\n            (i) =>\n              i.id === issue.id &&\n              Object.keys(values[SYSTEMS]).includes(issue.id)\n          )\n      )\n    : values[ISSUES_MULTIPLE].filter((issue) =>\n        Object.keys(values[SYSTEMS]).includes(issue.id)\n      );\n  return filteredIssues.length > 0 ? 'actions' : 'review';\n};\n\nexport default (issues) => ({\n  fields: [\n    {\n      component: componentTypes.WIZARD,\n      name: 'remediations-wizard',\n      isDynamic: true,\n      inModal: true,\n      showTitles: true,\n      title: 'Remediate with Ansible',\n      description: 'Add actions to an Ansible Playbook',\n      fields: [\n        {\n          name: 'playbook',\n          title: 'Select playbook',\n          fields: selectPlaybookFields,\n          nextStep: 'systems',\n        },\n        {\n          name: 'systems',\n          title: 'Review systems',\n          fields: [\n            {\n              name: SYSTEMS,\n              component: 'review-systems',\n              validate: [{ type: 'validate-systems' }],\n            },\n          ],\n          nextStep: ({ values }) => reviewSystemsNextStep(values),\n        },\n        {\n          name: 'actions',\n          title: 'Review and edit actions',\n          fields: reviewActionsFields,\n          nextStep: ({ values }) => reviewActionsNextStep(values, issues),\n        },\n        ...(issues?.map((issue) => ({\n          name: issue.id,\n          title: shortenIssueId(issue.id),\n          showTitle: false,\n          fields: [\n            {\n              name: issue.id,\n              component: 'issue-resolution',\n              issue,\n            },\n            {\n              name: SELECTED_RESOLUTIONS,\n              component: componentTypes.TEXT_FIELD,\n              hideField: true,\n            },\n          ],\n          nextStep: ({ values }) => issueResolutionNextStep(values, issue),\n          substepOf: 'Choose actions',\n        })) || []),\n        {\n          name: 'review',\n          title: 'Remediation review',\n          fields: [\n            {\n              name: AUTO_REBOOT,\n              component: 'review',\n            },\n          ],\n        },\n      ],\n    },\n  ],\n});\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/use-field-api';\nimport {\n  Title,\n  EmptyState,\n  EmptyStateVariant,\n  EmptyStateIcon,\n  EmptyStateBody,\n} from '@patternfly/react-core';\nimport { ExclamationCircleIcon } from '@patternfly/react-icons';\nimport red from '@patternfly/react-tokens/dist/js/global_palette_red_100';\n\nconst FetchError = (props) => {\n  const { resolutionsCount } = props;\n\n  const { input } = useFieldApi(props);\n  input.valid = false;\n\n  return (\n    <EmptyState\n      variant={EmptyStateVariant.small}\n      data-component-ouia-id=\"wizard-fetch-error\"\n    >\n      <EmptyStateIcon color={red.value} icon={ExclamationCircleIcon} />\n      <Title headingLevel=\"h4\" size=\"lg\">\n        Unexpected error\n      </Title>\n      <EmptyStateBody>\n        Please try again later.{' '}\n        {resolutionsCount !== 0 && (\n          <div>Hint: No resolutions for selected issues.</div>\n        )}\n      </EmptyStateBody>\n    </EmptyState>\n  );\n};\n\nFetchError.propTypes = {\n  resolutionsCount: propTypes.number,\n};\n\nexport default FetchError;\n","import React, { useState, useEffect } from 'react';\nimport propTypes from 'prop-types';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport {\n  Skeleton,\n  SkeletonSize,\n} from '@redhat-cloud-services/frontend-components/Skeleton';\nimport * as api from '../../../api';\nimport { Fragment } from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport FetchError from './fetchError';\nimport {\n  FormGroup,\n  Grid,\n  GridItem,\n  Radio,\n  FormSelect,\n  FormSelectOption,\n  Text,\n  TextContent,\n  TextInput,\n  Stack,\n  StackItem,\n  Popover,\n  Button,\n  Alert,\n} from '@patternfly/react-core';\nimport differenceWith from 'lodash/differenceWith';\nimport isEqual from 'lodash/isEqual';\nimport {\n  getIssuesMultiple,\n  pluralize,\n  EXISTING_PLAYBOOK,\n  EXISTING_PLAYBOOK_SELECTED,\n  RESOLUTIONS,\n  ISSUES_MULTIPLE,\n} from '../../../Utilities/utils';\nimport './selectPlaybook.scss';\n\nconst SelectPlaybook = (props) => {\n  const { issues, systems, allSystems } = props;\n  const { input } = useFieldApi(props);\n  const formOptions = useFormApi();\n  const values = formOptions.getState().values;\n\n  const [existingRemediations, setExistingRemediations] = useState();\n  const [existingPlaybookSelected, setExistingPlaybookSelected] = useState(\n    values[EXISTING_PLAYBOOK_SELECTED]\n  );\n  const [newPlaybookName, setNewPlaybookName] = useState(\n    values[EXISTING_PLAYBOOK_SELECTED] ? '' : input.value\n  );\n  const [selectedPlaybook, setSelectedPlaybook] = useState(\n    values[EXISTING_PLAYBOOK]\n  );\n  const [isLoadingRemediation, setIsLoadingRemediation] = useState(false);\n\n  const errors = useSelector(\n    ({ resolutionsReducer }) => resolutionsReducer?.errors || [],\n    shallowEqual\n  );\n  const warnings = useSelector(\n    ({ resolutionsReducer }) => resolutionsReducer?.warnings || [],\n    shallowEqual\n  );\n  const resolutions = useSelector(\n    ({ resolutionsReducer }) => resolutionsReducer?.resolutions || [],\n    shallowEqual\n  );\n  const isLoading = useSelector(\n    ({ resolutionsReducer }) => resolutionsReducer?.isLoading\n  );\n\n  useEffect(() => {\n    async function fetchData() {\n      const { data: existingRemediations } = await api.getRemediations();\n      setExistingRemediations(existingRemediations);\n    }\n\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (differenceWith(resolutions, values[RESOLUTIONS], isEqual)?.length > 0) {\n      formOptions.change(RESOLUTIONS, resolutions);\n      formOptions.change(\n        ISSUES_MULTIPLE,\n        getIssuesMultiple(issues, systems, resolutions)\n      );\n    }\n  });\n\n  return errors.length <= 0 ? (\n    <Stack hasGutter data-component-ouia-id=\"wizard-select-playbook\">\n      <StackItem>\n        {warnings.length !== 0 && (\n          <StackItem>\n            <Alert\n              variant=\"warning\"\n              isInline\n              title={\n                <Text>\n                  There {pluralize(warnings.length, 'was', 'were')}{' '}\n                  <Popover\n                    aria-label=\"Resolution error popover\"\n                    bodyContent={\n                      <Fragment>\n                        {warnings.map((warning, key) => (\n                          <div key={key}>{warning}</div>\n                        ))}\n                      </Fragment>\n                    }\n                  >\n                    <b>\n                      <Button variant=\"link\" isInline>\n                        {warnings.length}\n                      </Button>{' '}\n                      {pluralize(warnings.length, 'error')}\n                    </b>\n                  </Popover>{' '}\n                  while fetching resolutions for your issues!{' '}\n                </Text>\n              }\n            />\n          </StackItem>\n        )}\n        <TextContent>\n          <Text>\n            You selected{' '}\n            <b>\n              {`${allSystems.length} ${pluralize(allSystems.length, 'system')}`}{' '}\n            </b>\n            to remediate with Ansible, which in total includes{' '}\n            <b>{`${issues?.length} ${pluralize(issues?.length, 'issue')}`} </b>\n            {issues?.length !== resolutions.length && !isLoading ? (\n              <Fragment>\n                of which <b>{resolutions.length} </b>\n              </Fragment>\n            ) : (\n              'which'\n            )}{' '}\n            can be remediated by Ansible.\n          </Text>\n        </TextContent>\n      </StackItem>\n      <StackItem>\n        <Grid hasGutter>\n          <GridItem sm={12} md={6} lg={4}>\n            <Radio\n              label={\n                existingRemediations\n                  ? `Add to existing playbook (${existingRemediations.length})`\n                  : 'Add to existing playbook'\n              }\n              aria-label=\"Add to existing playbook\"\n              id=\"existing\"\n              name=\"radio\"\n              isDisabled={!existingRemediations || !existingRemediations.length}\n              defaultChecked={existingPlaybookSelected}\n              onChange={() => {\n                setExistingPlaybookSelected(true);\n                formOptions.change(EXISTING_PLAYBOOK_SELECTED, true);\n                input.onChange(selectedPlaybook?.name || '');\n                formOptions.change(EXISTING_PLAYBOOK, selectedPlaybook);\n              }}\n            />\n          </GridItem>\n          <GridItem sm={12} md={6} lg={4}>\n            {existingRemediations && !isLoadingRemediation ? (\n              <FormSelect\n                onChange={(val) => {\n                  setIsLoadingRemediation(true);\n                  api.getRemediation(val).then((remediation) => {\n                    setSelectedPlaybook(remediation);\n                    setIsLoadingRemediation(false);\n                    existingPlaybookSelected &&\n                      input.onChange(remediation.name);\n                    existingPlaybookSelected &&\n                      formOptions.change(EXISTING_PLAYBOOK, remediation);\n                  });\n                }}\n                value={selectedPlaybook?.id || ''}\n                aria-label=\"Select an existing playbook\"\n              >\n                {existingRemediations?.length ? (\n                  [\n                    <FormSelectOption\n                      key=\"select-playbook-placeholder\"\n                      value=\"\"\n                      label=\"Select playbook\"\n                      isDisabled\n                    />,\n                    ...existingRemediations.map(({ id, name }) => (\n                      <FormSelectOption key={id} value={id} label={name} />\n                    )),\n                  ]\n                ) : (\n                  <FormSelectOption\n                    key=\"empty\"\n                    value=\"empty\"\n                    label=\"No existing playbooks\"\n                  />\n                )}\n              </FormSelect>\n            ) : (\n              <Skeleton size={SkeletonSize.lg} />\n            )}\n          </GridItem>\n        </Grid>\n      </StackItem>\n      <StackItem>\n        <Grid hasGutter>\n          <GridItem sm={12} md={6} lg={4}>\n            <Radio\n              label=\"Create new playbook\"\n              aria-label=\"Create new playbook\"\n              id=\"new\"\n              name=\"radio\"\n              defaultChecked={!existingPlaybookSelected}\n              onChange={() => {\n                setExistingPlaybookSelected(false);\n                formOptions.change(EXISTING_PLAYBOOK_SELECTED, false);\n                input.onChange(newPlaybookName);\n                formOptions.change(EXISTING_PLAYBOOK, undefined);\n              }}\n            />\n          </GridItem>\n          <GridItem sm={12} md={6} lg={4}>\n            <FormGroup fieldId=\"remediation-name\">\n              <TextInput\n                type=\"text\"\n                value={newPlaybookName}\n                onChange={(val) => {\n                  setNewPlaybookName(val);\n                  existingPlaybookSelected || input.onChange(val);\n                }}\n                aria-label=\"Name your playbook\"\n                autoFocus\n              />\n            </FormGroup>\n          </GridItem>\n        </Grid>\n      </StackItem>\n    </Stack>\n  ) : (\n    <FetchError />\n  );\n};\n\nSelectPlaybook.propTypes = {\n  issues: propTypes.arrayOf(\n    propTypes.shape({\n      description: propTypes.string,\n      id: propTypes.string,\n    })\n  ).isRequired,\n  systems: propTypes.arrayOf(propTypes.string).isRequired,\n  allSystems: propTypes.arrayOf(propTypes.string).isRequired,\n};\n\nexport default SelectPlaybook;\n","/* eslint-disable camelcase */\nimport React, { useEffect } from 'react';\nimport propTypes from 'prop-types';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport { Text, TextContent, Stack, StackItem } from '@patternfly/react-core';\nimport ReducerRegistry from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { ExclamationCircleIcon } from '@patternfly/react-icons';\nimport isEqual from 'lodash/isEqual';\nimport SystemsTable from '../common/SystemsTable';\nimport { dedupeArray, TOGGLE_BULK_SELECT } from '../../../Utilities/utils';\nimport './reviewSystems.scss';\n\nconst ReviewSystems = ({ issues, systems, allSystems, registry, ...props }) => {\n  let dispatch = useDispatch();\n  const { input } = useFieldApi(props);\n  const formOptions = useFormApi();\n\n  const error = formOptions.getState().errors?.systems;\n\n  const rowsLength = useSelector(\n    ({ entities }) => (entities?.rows || []).length\n  );\n  const selected = useSelector(({ entities }) => entities?.selected || []);\n  const loaded = useSelector(({ entities }) => entities?.loaded);\n  const allSystemsNamed = useSelector(\n    ({ hostReducer: { hosts } }) =>\n      hosts?.map((host) => ({ id: host.id, name: host.display_name })) || []\n  );\n\n  useEffect(() => {\n    const value = issues?.reduce((acc, curr) => {\n      const tempSystems = dedupeArray([\n        ...systems,\n        ...(curr.systems || []),\n      ]).filter((id) => selected?.includes(id));\n      return {\n        ...acc,\n        ...(tempSystems.length > 0 ? { [curr.id]: tempSystems } : {}),\n      };\n    }, {});\n    if (!isEqual(input.value, value)) {\n      input.onChange(value);\n    }\n  }, [selected]);\n\n  const onSelectRows = (value) => {\n    dispatch({\n      type: TOGGLE_BULK_SELECT,\n      payload: value,\n    });\n  };\n\n  return (\n    <Stack hasGutter data-component-ouia-id=\"wizard-review-systems\">\n      <StackItem>\n        <TextContent>\n          <Text>\n            Review and optionally exclude systems from your selection.\n          </Text>\n        </TextContent>\n      </StackItem>\n      <StackItem>\n        <Router>\n          <SystemsTable\n            registry={registry}\n            allSystemsNamed={allSystemsNamed}\n            allSystems={allSystems}\n            hasCheckbox={true}\n            bulkSelect={{\n              id: 'select-systems',\n              count: selected.length,\n              items: [\n                {\n                  title: 'Select none (0)',\n                  onClick: () => onSelectRows(false),\n                },\n                ...(loaded && rowsLength > 0\n                  ? [\n                      {\n                        title: `Select page (${rowsLength})`,\n                        onClick: () => onSelectRows(true),\n                      },\n                    ]\n                  : []),\n              ],\n              checked: selected.length > 0,\n              onSelect: (value) => onSelectRows(value),\n            }}\n            onSelectRows\n          />\n        </Router>\n      </StackItem>\n      {error && loaded && (\n        <StackItem>\n          <ExclamationCircleIcon className=\"ins-c-remediations-error pf-u-mr-sm\" />\n          <span className=\"ins-c-remediations-error\">{error}</span>\n        </StackItem>\n      )}\n    </Stack>\n  );\n};\n\nReviewSystems.propTypes = {\n  issues: propTypes.arrayOf(\n    propTypes.shape({\n      description: propTypes.string,\n      id: propTypes.string,\n    })\n  ).isRequired,\n  systems: propTypes.arrayOf(propTypes.string).isRequired,\n  allSystems: propTypes.arrayOf(propTypes.string).isRequired,\n  registry: propTypes.instanceOf(ReducerRegistry).isRequired,\n};\n\nexport default ReviewSystems;\n","import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport propTypes from 'prop-types';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport {\n  Table,\n  TableVariant,\n  TableHeader,\n  TableBody,\n  sortable,\n  expandable,\n} from '@patternfly/react-table';\nimport {\n  Radio,\n  Text,\n  TextContent,\n  Stack,\n  StackItem,\n} from '@patternfly/react-core';\nimport {\n  buildRows,\n  onCollapse,\n  pluralize,\n  EXISTING_PLAYBOOK,\n  EXISTING_PLAYBOOK_SELECTED,\n  ISSUES_MULTIPLE,\n  SYSTEMS,\n} from '../../../Utilities/utils';\nimport './reviewActions.scss';\n\nconst ReviewActions = (props) => {\n  const formOptions = useFormApi();\n  const values = formOptions.getState().values;\n  const issues = props.issues.filter((issue) =>\n    Object.keys(values[SYSTEMS]).includes(issue.id)\n  );\n  const { input } = useFieldApi(props);\n  const [sortByState, setSortByState] = useState({\n    index: undefined,\n    direction: undefined,\n  });\n  const allSystemsNamed = useSelector(\n    ({ hostReducer: { hosts } }) =>\n      hosts?.map((host) => ({ id: host.id, name: host.display_name })) || []\n  );\n\n  const multiples = (\n    values[EXISTING_PLAYBOOK_SELECTED]\n      ? values[ISSUES_MULTIPLE].filter(\n          (issue) =>\n            !values[EXISTING_PLAYBOOK].issues.some((i) => i.id === issue.id)\n        )\n      : values[ISSUES_MULTIPLE]\n  )\n    .map((issue) => ({\n      ...issue,\n      systems: values[SYSTEMS][issue.id],\n    }))\n    .filter((record) => record?.systems?.length > 0);\n\n  const [rows, setRows] = useState(\n    buildRows(multiples, sortByState, true, allSystemsNamed)\n  );\n\n  useEffect(() => {\n    setRows(buildRows(multiples, sortByState, true, allSystemsNamed));\n  }, [sortByState]);\n\n  return (\n    <Stack hasGutter data-component-ouia-id=\"wizard-review-actions\">\n      <StackItem>\n        <TextContent>\n          <Text>\n            You have selected{' '}\n            <b>{`${issues.length} ${pluralize(issues.length, 'item')}`}</b> to\n            remediate.{' '}\n            <b>\n              {multiples.length} of{' '}\n              {`${issues.length} ${pluralize(issues.length, 'item')}`}\n            </b>\n            {multiples.length !== 1 ? ' allow' : ' allows'} for you to chose\n            from multiple resolution steps.\n          </Text>\n        </TextContent>\n      </StackItem>\n      <StackItem>\n        <Radio\n          label={`Review and/or change the resolution steps for ${\n            multiples.length !== 1 ? 'these' : 'this'\n          }\n                         ${multiples.length} ${pluralize(\n            multiples.length,\n            'action'\n          )}.`}\n          id=\"change\"\n          name=\"radio\"\n          isChecked={input.value}\n          onChange={() => input.onChange(true)}\n        />\n        {issues.length - multiples.length > 0 && (\n          <Text className=\"rem-c-choose-actions-description\">\n            {`The ${\n              issues.length - multiples.length\n            } other selected ${pluralize(\n              issues.length - multiples.length,\n              'issue'\n            )} \n                    ${\n                      issues.length - multiples.length !== 1 ? 'do' : 'does'\n                    } not have multiple resolution options.`}\n          </Text>\n        )}\n      </StackItem>\n      <Table\n        aria-label=\"Actions\"\n        className=\"ins-c-remediation-summary-table\"\n        variant={TableVariant.compact}\n        onCollapse={(event, rowKey, isOpen) =>\n          onCollapse(event, rowKey, isOpen, rows, setRows)\n        }\n        cells={[\n          {\n            title: 'Action',\n            transforms: [sortable],\n          },\n          {\n            title: 'Resolution',\n            transforms: [sortable],\n          },\n          {\n            title: 'Reboot required',\n            transforms: [sortable],\n          },\n          {\n            title: 'Systems',\n            transforms: [sortable],\n            cellFormatters: [expandable],\n          },\n        ]}\n        rows={rows}\n        onSort={(event, index, direction) =>\n          setSortByState({ index, direction })\n        }\n        sortBy={sortByState}\n      >\n        <TableHeader noWrap />\n        <TableBody />\n      </Table>\n      <StackItem>\n        <Radio\n          label={'Accept all recommended resolution steps for all actions'}\n          id=\"accept\"\n          name=\"radio\"\n          isChecked={!input.value}\n          onChange={() => input.onChange(false)}\n        />\n        <Text className=\"rem-c-choose-actions-description\">\n          You may modify reboot status to manual reboot in the next step, or\n          from the playbook.\n        </Text>\n      </StackItem>\n    </Stack>\n  );\n};\n\nReviewActions.propTypes = {\n  issues: propTypes.arrayOf(\n    propTypes.shape({\n      description: propTypes.string,\n      id: propTypes.string,\n    })\n  ).isRequired,\n};\n\nexport default ReviewActions;\n","import React, { Fragment } from 'react';\nimport propTypes from 'prop-types';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport './issueResolution.scss';\nimport {\n  Text,\n  TextContent,\n  Stack,\n  StackItem,\n  Tile,\n  Title,\n  Alert,\n  Popover,\n  Button,\n} from '@patternfly/react-core';\nimport {\n  pluralize,\n  shortenIssueId,\n  RESOLUTIONS,\n  SELECTED_RESOLUTIONS,\n  SYSTEMS,\n} from '../../../Utilities/utils';\nimport uniqBy from 'lodash/uniqBy';\nimport differenceWith from 'lodash/differenceWith';\nimport isEqual from 'lodash/isEqual';\n\nconst IssueResolution = ({ issue }) => {\n  const formOptions = useFormApi();\n  const resolutions = formOptions.getState().values[RESOLUTIONS];\n\n  const systems = formOptions.getState().values[SYSTEMS][issue.id] || [];\n  const issueResolutions =\n    resolutions.find((r) => r.id === issue.id)?.resolutions || [];\n  const uniqueResolutions = uniqBy(issueResolutions, 'id');\n  const removedResolutions = differenceWith(\n    issueResolutions,\n    uniqueResolutions,\n    isEqual\n  );\n\n  return (\n    <Stack hasGutter data-component-ouia-id=\"wizard-issue-resolution\">\n      <StackItem>\n        <Title headingLevel=\"h2\">\n          {`Choose action: ${shortenIssueId(issue.id)}`}\n        </Title>\n      </StackItem>\n      <StackItem>\n        {removedResolutions.length > 0 && (\n          <StackItem className=\"pf-u-mb-sm\">\n            <Alert\n              variant=\"warning\"\n              isInline\n              title={\n                <Text>\n                  There {pluralize(removedResolutions.length, 'was', 'were')}{' '}\n                  <Popover\n                    aria-label=\"Resolution duplicates popover\"\n                    bodyContent={\n                      <Fragment>\n                        {removedResolutions.map((resolution, key) => (\n                          <div key={key}>{resolution.description}</div>\n                        ))}\n                      </Fragment>\n                    }\n                  >\n                    <b>\n                      <Button variant=\"link\" isInline>\n                        {removedResolutions.length}\n                      </Button>{' '}\n                      {pluralize(removedResolutions.length, 'resolution')}\n                    </b>\n                  </Popover>{' '}\n                  removed due to duplication\n                </Text>\n              }\n            />\n          </StackItem>\n        )}\n        <TextContent>\n          <Text>\n            Review the possible resolution steps and select which to add to your\n            playbook.\n          </Text>\n          <Text className=\"ins-c-remediations-action-description\">\n            {issue.action}\n          </Text>\n          <Text className=\"ins-c-remediations-action-description\">\n            {`Resolution affects ${systems.length} ${pluralize(\n              systems.length,\n              'system'\n            )}`}\n          </Text>\n        </TextContent>\n      </StackItem>\n      <StackItem>\n        <div className=\"ins-c-resolution-container\">\n          {uniqueResolutions.map((resolution, index) => (\n            <div\n              className=\"ins-c-resolution-option\"\n              sm={12}\n              md={6}\n              lg={4}\n              xl={3}\n              key={resolution.id}\n            >\n              <Tile\n                onClick={() =>\n                  formOptions.change(SELECTED_RESOLUTIONS, {\n                    ...formOptions.getState().values[SELECTED_RESOLUTIONS],\n                    [issue.id]: resolution.id,\n                  })\n                }\n                isSelected={\n                  formOptions.getState().values[SELECTED_RESOLUTIONS][issue.id]\n                    ? formOptions.getState().values[SELECTED_RESOLUTIONS][\n                        issue.id\n                      ] === resolution.id\n                    : index === 0\n                }\n                title={resolution.description}\n              >\n                <TextContent className=\"pf-u-pt-sm\">\n                  <Text className=\"pf-u-mb-sm ins-c-playbook-description\">\n                    Resolution from &quot;{issue.id.split(/:|\\|/)[1]}&quot;\n                  </Text>\n                  {\n                    <div className=\"ins-c-reboot-required\">\n                      <Text component=\"span\">\n                        {resolution.needs_reboot ? (\n                          'Reboot required'\n                        ) : (\n                          <span>\n                            Reboot <b>not</b> required\n                          </span>\n                        )}\n                      </Text>\n                    </div>\n                  }\n                </TextContent>\n              </Tile>\n            </div>\n          ))}\n        </div>\n      </StackItem>\n    </Stack>\n  );\n};\n\nIssueResolution.propTypes = {\n  issue: propTypes.shape({\n    id: propTypes.string,\n    action: propTypes.string,\n    alternate: propTypes.number,\n    systems: propTypes.arrayOf(propTypes.string),\n  }).isRequired,\n};\n\nexport default IssueResolution;\n","import React, { useState, useEffect } from 'react';\nimport propTypes from 'prop-types';\nimport useFieldApi from '@data-driven-forms/react-form-renderer/use-field-api';\nimport useFormApi from '@data-driven-forms/react-form-renderer/use-form-api';\nimport {\n  Table,\n  TableVariant,\n  TableHeader,\n  TableBody,\n  sortable,\n  expandable,\n} from '@patternfly/react-table';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport {\n  Button,\n  Text,\n  TextContent,\n  Stack,\n  StackItem,\n} from '@patternfly/react-core';\nimport {\n  buildRows,\n  getResolution,\n  onCollapse,\n  EXISTING_PLAYBOOK,\n  EXISTING_PLAYBOOK_SELECTED,\n  SELECT_PLAYBOOK,\n  SYSTEMS,\n} from '../../../Utilities/utils';\nimport { useSelector } from 'react-redux';\nimport './review.scss';\n\nconst Review = (props) => {\n  const formOptions = useFormApi();\n  const selectedPlaybook = formOptions.getState().values[EXISTING_PLAYBOOK];\n  const existingPlaybookSelected =\n    formOptions.getState().values[EXISTING_PLAYBOOK_SELECTED];\n  const systems = formOptions.getState().values[SYSTEMS];\n\n  const { data, issuesById } = {\n    ...props,\n    data: {\n      ...props.data,\n      issues: props.data.issues.filter(\n        (issue) => systems[issue.id]?.length > 0\n      ),\n    },\n  };\n  const { input } = useFieldApi(props);\n  const [sortByState, setSortByState] = useState({\n    index: undefined,\n    direction: undefined,\n  });\n\n  const allSystemsNamed = useSelector(\n    ({ hostReducer: { hosts } }) =>\n      hosts?.map((host) => ({ id: host.id, name: host.display_name })) || []\n  );\n\n  const records = data.issues.map((issue) => {\n    const issueResolutions = getResolution(\n      issue.id,\n      formOptions.getState().values\n    );\n    const { description, needs_reboot: needsReboot } =\n      issueResolutions?.[0] || {};\n    return {\n      action: issuesById[issue.id].description,\n      resolution: description,\n      needsReboot,\n      systems: systems[issue.id],\n    };\n  });\n\n  useEffect(() => {\n    input.onChange(\n      input.value !== ''\n        ? input.value\n        : (existingPlaybookSelected && selectedPlaybook.auto_reboot) ||\n            records.some((record) => record.needsReboot)\n    );\n  }, []);\n\n  const [rows, setRows] = useState(\n    buildRows(records, sortByState, false, allSystemsNamed)\n  );\n\n  useEffect(() => {\n    setRows(buildRows(records, sortByState, false, allSystemsNamed));\n  }, [sortByState]);\n\n  return (\n    <Stack hasGutter data-component-ouia-id=\"wizard-review\">\n      <StackItem>\n        <TextContent>\n          <Text>\n            Issues listed below will be added to the playbook{' '}\n            <b>{formOptions.getState().values[SELECT_PLAYBOOK]}</b>.\n          </Text>\n        </TextContent>\n      </StackItem>\n      {records.some((r) => r.needsReboot) && (\n        <StackItem>\n          <TextContent>\n            <Text className=\"ins-c-playbook-reboot-required\">\n              <ExclamationTriangleIcon /> A system reboot is required to\n              remediate selected issues\n            </Text>\n          </TextContent>\n        </StackItem>\n      )}\n      <StackItem>\n        <TextContent>\n          <Text>\n            The playbook <b>{formOptions.getState().values[SELECT_PLAYBOOK]}</b>\n            {input.value ? (\n              ' does'\n            ) : (\n              <span className=\"ins-c-remediation-danger-text\"> does not</span>\n            )}{' '}\n            auto reboot systems.\n          </Text>\n        </TextContent>\n      </StackItem>\n      <StackItem>\n        <Button\n          variant=\"link\"\n          isInline\n          onClick={() => input.onChange(!input.value)}\n        >\n          Turn {input.value ? 'off' : 'on'} autoreboot\n        </Button>\n      </StackItem>\n      <Table\n        aria-label=\"Actions\"\n        className=\"ins-c-remediation-summary-table\"\n        variant={TableVariant.compact}\n        cells={[\n          {\n            title: 'Action',\n            transforms: [sortable],\n          },\n          {\n            title: 'Resolution',\n            transforms: [sortable],\n          },\n          {\n            title: 'Reboot required',\n            transforms: [sortable],\n          },\n          {\n            title: 'Systems',\n            transforms: [sortable],\n            cellFormatters: [expandable],\n          },\n        ]}\n        rows={rows}\n        onSort={(event, index, direction) =>\n          setSortByState({ index, direction })\n        }\n        onCollapse={(event, rowKey, isOpen) =>\n          onCollapse(event, rowKey, isOpen, rows, setRows)\n        }\n        sortBy={sortByState}\n      >\n        <TableHeader noWrap />\n        <TableBody />\n      </Table>\n    </Stack>\n  );\n};\n\nReview.propTypes = {\n  data: propTypes.shape({\n    issues: propTypes.array,\n    systems: propTypes.array,\n    onRemediationCreated: propTypes.func,\n  }).isRequired,\n  issuesById: propTypes.shape({\n    [propTypes.string]: propTypes.shape({\n      id: propTypes.string,\n      description: propTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default Review;\n","import { FETCH_RESOLUTIONS } from '../../constants';\n\n// Initial State\nexport const resolutionsInitialState = {\n  isLoading: false,\n  resolutions: undefined,\n};\n\nconst setLoadingState = (state) => ({ ...state, isLoading: true });\n\nconst setResolutions = (state, { payload }) => ({\n  ...state,\n  ...payload,\n  isLoading: false,\n});\n\nexport default {\n  [`${FETCH_RESOLUTIONS}_FULFILLED`]: setResolutions,\n  [`${FETCH_RESOLUTIONS}_PENDING`]: setLoadingState,\n};\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport {\n  Progress,\n  ProgressVariant,\n} from '@patternfly/react-core/dist/js/components/Progress';\n\nconst ProgressBar = ({ percent, failed }) => {\n  let variant;\n  let title;\n\n  if (percent === 100) {\n    title = 'Completed';\n    variant = ProgressVariant.success;\n  } else if (failed) {\n    title = 'Error';\n    variant = ProgressVariant.danger;\n  } else {\n    title = 'In progress';\n    variant = ProgressVariant.info;\n  }\n\n  return (\n    <Progress\n      id={'finished-create-remediation'}\n      value={percent}\n      title={title}\n      variant={variant}\n    />\n  );\n};\n\nProgressBar.propTypes = {\n  percent: propTypes.number,\n  failed: propTypes.bool,\n};\n\nexport default ProgressBar;\n","import React from 'react';\nimport {\n  Title,\n  Button,\n  EmptyState,\n  EmptyStateVariant,\n  EmptyStateIcon,\n  EmptyStateBody,\n  EmptyStateSecondaryActions,\n} from '@patternfly/react-core';\nimport ProgressBar from '../common/ProgressBar';\nimport PropTypes from 'prop-types';\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n  ExternalLinkAltIcon,\n  InProgressIcon,\n} from '@patternfly/react-icons';\nimport {\n  dedupeArray,\n  getEnvUrl,\n  pluralize,\n  remediationUrl,\n  SELECT_PLAYBOOK,\n  SYSTEMS,\n} from '../../../Utilities/utils';\nimport './progress.scss';\n\nconst Progress = ({ onClose, setOpen, submitRemediation, setState, state }) => {\n  const { percent, failed, systems, issues, playbook } = {\n    percent: state.percent,\n    failed: state.failed,\n    systems: dedupeArray(Object.values(state.formValues[SYSTEMS]).flat()),\n    issues: Object.keys(state.formValues[SYSTEMS]),\n    playbook: {\n      name: state.formValues[SELECT_PLAYBOOK],\n      id: state.id,\n    },\n  };\n\n  return (\n    <EmptyState\n      variant={EmptyStateVariant.large}\n      data-component-ouia-id=\"wizard-progress\"\n    >\n      <EmptyStateIcon\n        className=\"pf-u-mb-lg pf-u-mt-sm\"\n        color={\n          failed\n            ? 'var(--pf-global--danger-color--100)'\n            : percent === 100\n            ? 'var(--pf-global--success-color--100)'\n            : undefined\n        }\n        icon={\n          failed\n            ? ExclamationCircleIcon\n            : percent === 100\n            ? CheckCircleIcon\n            : InProgressIcon\n        }\n      />\n      <Title headingLevel=\"h1\" size=\"lg\">\n        {failed\n          ? 'Error: Unable to add items to playbook'\n          : percent === 100\n          ? 'Items added to playbook'\n          : 'Adding items to the playbook'}\n      </Title>\n      <EmptyStateBody className=\"pf-c-progress-bar pf-u-mt-md\">\n        <ProgressBar percent={percent} failed={failed} />\n      </EmptyStateBody>\n      {(failed || percent === 100) && (\n        <EmptyStateBody className=\"pf-c-progress-message\">\n          {failed ? (\n            'Please try again.'\n          ) : (\n            <div>\n              {`${issues.length} ${pluralize(\n                issues.length,\n                'action'\n              )} affecting \n                        ${systems.length} ${pluralize(\n                systems.length,\n                'system'\n              )} \n                        ${\n                          issues.length > 1 ? 'were' : 'was'\n                        } added to the playbook `}\n              <a href={remediationUrl(playbook.id)}>{playbook.name}</a>.\n            </div>\n          )}\n        </EmptyStateBody>\n      )}\n      {percent === 100 && (\n        <EmptyStateBody className=\"pf-c-progress-message-description pf-u-mb-md\">\n          You can remediate these systems directly from Insights by enabling\n          <Button\n            className=\"pf-u-py-0 pf-u-px-xs\"\n            variant=\"link\"\n            ouiaId=\"CloudConnectorButton\"\n            icon={<ExternalLinkAltIcon />}\n            iconPosition=\"right\"\n            isSmall\n            onClick={() =>\n              (window.location.href = `${\n                window.location.origin\n              }/${getEnvUrl()}settings/connector`)\n            }\n          >\n            Cloud Connector\n          </Button>\n          on eligible systems.\n        </EmptyStateBody>\n      )}\n      {failed && (\n        <Button\n          className=\"pf-u-mt-md pf-u-mb-sm\"\n          variant=\"primary\"\n          ouiaId=\"TryAgainButton\"\n          onClick={() => {\n            setState({ failed: false, percent: 0 });\n            submitRemediation(false);\n          }}\n        >\n          Try again\n        </Button>\n      )}\n      {percent === 100 && (\n        <Button\n          className=\"pf-u-mt-md pf-u-mb-sm\"\n          variant=\"primary\"\n          ouiaId=\"ReturnToAppButton\"\n          onClick={() => {\n            onClose();\n            setOpen(false);\n          }}\n        >\n          Return to application\n        </Button>\n      )}\n      <EmptyStateSecondaryActions>\n        {failed && (\n          <Button\n            variant=\"secondary\"\n            ouiaId=\"BackToWizardButton\"\n            onClick={() => {\n              onClose();\n            }}\n          >\n            Go back to the wizard\n          </Button>\n        )}\n        {percent === 100 && (\n          <Button\n            variant=\"link\"\n            component=\"a\"\n            ouiaId=\"OpenPlaybookButton\"\n            href={remediationUrl(playbook.id)}\n            onClick={() => {\n              onClose();\n              setOpen(false);\n            }}\n          >\n            Open playbook {playbook.name}\n          </Button>\n        )}\n      </EmptyStateSecondaryActions>\n    </EmptyState>\n  );\n};\n\nProgress.propTypes = {\n  onClose: PropTypes.func,\n  setOpen: PropTypes.func,\n  submitRemediation: PropTypes.func,\n  setState: PropTypes.func,\n  state: PropTypes.shape({\n    id: PropTypes.string,\n    percent: PropTypes.number.isRequired,\n    failed: PropTypes.bool.isRequired,\n    formValues: PropTypes.shape({\n      [SELECT_PLAYBOOK]: PropTypes.string,\n      [SYSTEMS]: PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),\n    }),\n  }),\n};\n\nexport default Progress;\n","import React, {\n  Fragment,\n  useEffect,\n  useReducer,\n  useRef,\n  useState,\n} from 'react';\nimport propTypes from 'prop-types';\nimport { fetchHostsById } from '../../store/actions/host-actions';\nimport { fetchResolutions } from '../../store/actions/resolution-actions';\nimport { Provider, useDispatch } from 'react-redux';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport ReducerRegistry from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport hostReducer, {\n  hostsInitialState,\n} from '../../store/reducers/host-reducer';\nimport { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry/ReducerRegistry';\nimport keyBy from 'lodash/keyBy';\nimport FormRenderer from '@data-driven-forms/react-form-renderer/form-renderer';\nimport Pf4FormTemplate from '@data-driven-forms/pf4-component-mapper/form-template';\nimport schemaBuilder from './schema';\nimport WizardMapper from '@data-driven-forms/pf4-component-mapper/wizard';\nimport { Modal, Wizard } from '@patternfly/react-core';\nimport TextField from '@data-driven-forms/pf4-component-mapper/text-field';\nimport componentTypes from '@data-driven-forms/react-form-renderer/component-types';\nimport SelectPlaybook from './steps/selectPlaybook';\nimport ReviewSystems from './steps/reviewSystems';\nimport ReviewActions from './steps/reviewActions';\nimport IssueResolution from './steps/issueResolution';\nimport Review from './steps/review';\nimport resolutionsReducer, {\n  resolutionsInitialState,\n} from '../../store/reducers/resolutions-reducer';\nimport {\n  dedupeArray,\n  submitRemediation,\n  splitArray,\n  SELECTED_RESOLUTIONS,\n  EXISTING_PLAYBOOK_SELECTED,\n  MANUAL_RESOLUTION,\n  SYSTEMS,\n  RESOLUTIONS,\n  ISSUES_MULTIPLE,\n} from '../../Utilities/utils';\nimport Progress from './steps/progress';\nimport { ModalVariant } from '@patternfly/react-core';\n\nconst initialState = {\n  submitted: false,\n  id: undefined,\n  percent: 0,\n  failed: false,\n  formValues: undefined,\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'schema':\n      return { ...state, schema: action.payload };\n    case 'state':\n      return { ...state, ...action.payload };\n    default:\n      throw new Error();\n  }\n};\n\nexport const RemediationWizard = ({ setOpen, data, basePath, registry }) => {\n  const allSystems = useRef(\n    dedupeArray(\n      data.issues?.reduce(\n        (acc, curr) => [...acc, ...(curr.systems || [])],\n        [...(data.systems || [])]\n      )\n    )\n  );\n\n  const dispatch = useDispatch();\n\n  const [state, setState] = useReducer(reducer, initialState);\n\n  const issuesById = keyBy(data.issues, (issue) => issue.id);\n\n  const fetchHostNames = (systems = []) => {\n    const perChunk = 50;\n    const chunks = splitArray(systems, perChunk);\n    chunks.forEach((chunk) => {\n      dispatch(fetchHostsById(chunk, { page: 1, perPage: perChunk }));\n    });\n  };\n\n  useEffect(() => {\n    setState({ type: 'schema', payload: schemaBuilder(data.issues) });\n    registry.register({\n      hostReducer: applyReducerHash(hostReducer, hostsInitialState),\n      resolutionsReducer: applyReducerHash(\n        resolutionsReducer,\n        resolutionsInitialState\n      ),\n    });\n    dispatch(fetchResolutions(data.issues));\n    fetchHostNames(allSystems.current);\n  }, []);\n\n  const mapperExtension = {\n    'select-playbook': {\n      component: SelectPlaybook,\n      issues: data.issues,\n      systems: data.systems,\n      allSystems: allSystems.current,\n    },\n    'review-systems': {\n      component: ReviewSystems,\n      issues: data.issues,\n      systems: data.systems || [],\n      allSystems: allSystems.current,\n      registry,\n    },\n    'review-actions': {\n      component: ReviewActions,\n      issues: data.issues,\n    },\n    'issue-resolution': {\n      component: IssueResolution,\n    },\n    review: {\n      component: Review,\n      data,\n      issuesById: issuesById,\n    },\n  };\n\n  const validatorMapper = {\n    'validate-systems': () => (value) =>\n      value &&\n      Object.values(value).filter((value) => typeof value !== undefined).length\n        ? undefined\n        : 'At least one system must be selected. Actions must be associated to a system to be added to a playbook.',\n  };\n\n  return (\n    <Fragment>\n      {state.schema && !state.submitted ? (\n        <FormRenderer\n          schema={state.schema}\n          subscription={{ values: true }}\n          FormTemplate={(props) => (\n            <Pf4FormTemplate {...props} showFormControls={false} />\n          )}\n          initialValues={{\n            [RESOLUTIONS]: [],\n            [ISSUES_MULTIPLE]: [],\n            [SYSTEMS]: {},\n            [MANUAL_RESOLUTION]: true,\n            [SELECTED_RESOLUTIONS]: {},\n            [EXISTING_PLAYBOOK_SELECTED]: false,\n          }}\n          componentMapper={{\n            [componentTypes.WIZARD]: {\n              component: WizardMapper,\n              className: 'remediations',\n              'data-ouia-component-id': 'remediation-wizard',\n            },\n            [componentTypes.TEXT_FIELD]: TextField,\n            ...mapperExtension,\n          }}\n          validatorMapper={validatorMapper}\n          onSubmit={(formValues) => {\n            setState({\n              type: 'state',\n              payload: { submitted: true, formValues: formValues },\n            });\n            submitRemediation(formValues, data, basePath, (payload) =>\n              setState({ type: 'state', payload: payload })\n            );\n          }}\n          onCancel={() => setOpen(false)}\n        />\n      ) : null}\n      {state.submitted ? (\n        <Modal\n          isOpen\n          variant={ModalVariant.large}\n          showClose={false}\n          className=\"remediations\"\n          hasNoBodyWrapper\n          aria-describedby=\"wiz-modal-description\"\n          aria-labelledby=\"wiz-modal-title\"\n        >\n          <Wizard\n            className=\"remediations\"\n            title={'Remediate with Ansible'}\n            description={'Add actions to an Ansible Playbook'}\n            steps={[\n              {\n                name: 'progress',\n                component: (\n                  <Progress\n                    onClose={() => {\n                      setState({\n                        type: 'state',\n                        payload: {\n                          submitted: false,\n                          id: undefined,\n                          failed: false,\n                          formValues: undefined,\n                        },\n                      });\n                    }}\n                    title={'Adding items to the playbook'}\n                    setOpen={setOpen}\n                    submitRemediation={() =>\n                      submitRemediation(\n                        state.formValues,\n                        data,\n                        basePath,\n                        (payload) =>\n                          setState({ type: 'state', payload: payload })\n                      )\n                    }\n                    setState={(payload) =>\n                      setState({ type: 'state', payload: payload })\n                    }\n                    state={state}\n                  />\n                ),\n                isFinishedStep: true,\n              },\n            ]}\n            onClose={() => {\n              setState({\n                type: 'state',\n                payload: {\n                  submitted: false,\n                  id: undefined,\n                  failed: false,\n                  formValues: undefined,\n                },\n              });\n              setOpen(false);\n            }}\n          />\n        </Modal>\n      ) : null}\n    </Fragment>\n  );\n};\n\nRemediationWizard.propTypes = {\n  setOpen: propTypes.func.isRequired,\n  data: propTypes.shape({\n    issues: propTypes.arrayOf(\n      propTypes.shape({\n        description: propTypes.string,\n        id: propTypes.string,\n      })\n    ),\n    systems: propTypes.arrayOf(propTypes.string),\n    onRemediationCreated: propTypes.func,\n  }).isRequired,\n  basePath: propTypes.string,\n  registry: propTypes.shape({\n    register: propTypes.func,\n  }).isRequired,\n};\n\nconst RemediationWizardWithContext = (props) => {\n  const [registry, setRegistry] = useState();\n\n  useEffect(() => {\n    setRegistry(() => new ReducerRegistry({}, [promiseMiddleware]));\n  }, []);\n\n  return registry?.store ? (\n    <Provider store={registry.store}>\n      <RemediationWizard {...props} registry={registry} />\n    </Provider>\n  ) : null;\n};\n\nexport default RemediationWizardWithContext;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Provider } from 'react-redux';\nimport propTypes from 'prop-types';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport ReducerRegistry from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport InventoryTable from '@redhat-cloud-services/frontend-components/Inventory/InventoryTable';\nimport {\n  fetchSystemsInfo,\n  inventoryEntitiesReducer as entitiesReducer,\n} from '../../../Utilities/utils';\nimport './systemsTable.scss';\n\nconst SystemsTable = ({\n  registry,\n  allSystemsNamed,\n  allSystems,\n  hasCheckbox,\n  disabledColumns,\n  bulkSelect,\n}) => {\n  const inventory = useRef(null);\n  const sortableColumns = ['display_name'];\n\n  return (\n    <InventoryTable\n      hideFilters={{\n        tags: true,\n        registeredWith: true,\n        stale: true,\n      }}\n      columns={(columns) =>\n        columns.reduce(\n          (acc, curr) => [\n            ...acc,\n            ...(!disabledColumns.includes(curr.key)\n              ? [\n                  {\n                    ...curr,\n                    props: {\n                      ...(curr.props || {}),\n                      isStatic: !sortableColumns.includes(curr.key),\n                    },\n                  },\n                ]\n              : []),\n          ],\n          []\n        )\n      }\n      noDetail\n      variant=\"compact\"\n      hasCheckbox={hasCheckbox}\n      showTags\n      bulkSelect={bulkSelect}\n      ref={inventory}\n      getEntities={(_i, config, showTags, defaultGetEntities) =>\n        fetchSystemsInfo(\n          config,\n          sortableColumns,\n          allSystemsNamed,\n          defaultGetEntities\n        )\n      }\n      onLoad={({ mergeWithEntities, INVENTORY_ACTION_TYPES }) => {\n        registry.register(\n          mergeWithEntities(entitiesReducer(allSystems, INVENTORY_ACTION_TYPES))\n        );\n      }}\n      tableProps={{\n        canSelectAll: false,\n      }}\n    ></InventoryTable>\n  );\n};\n\nSystemsTable.defaultProps = {\n  disabledColumns: [],\n  hasCheckbox: false,\n};\n\nSystemsTable.propTypes = {\n  registry: propTypes.instanceOf(ReducerRegistry).isRequired,\n  allSystemsNamed: propTypes.arrayOf(\n    propTypes.shape({\n      id: propTypes.string,\n      name: propTypes.string,\n    })\n  ).isRequired,\n  allSystems: propTypes.arrayOf(propTypes.string).isRequired,\n  hasCheckbox: propTypes.bool,\n  disabledColumns: propTypes.arrayOf(propTypes.string),\n  bulkSelect: propTypes.object,\n};\n\nexport const SystemsTableWithContext = (props) => {\n  const [registry, setRegistry] = useState();\n\n  useEffect(() => {\n    setRegistry(() => new ReducerRegistry({}, [promiseMiddleware]));\n  }, []);\n\n  return registry?.store ? (\n    <Provider store={registry.store}>\n      <div className=\"pf-u-pl-lg\">\n        <SystemsTable {...props} registry={registry} />\n      </div>\n    </Provider>\n  ) : null;\n};\n\nexport default SystemsTable;\n"],"names":["capitalize","string","charAt","toUpperCase","slice","CAN_REMEDIATE","AUTO_REBOOT","SELECT_PLAYBOOK","SELECTED_RESOLUTIONS","MANUAL_RESOLUTION","EXISTING_PLAYBOOK_SELECTED","EXISTING_PLAYBOOK","SYSTEMS","RESOLUTIONS","ISSUES_MULTIPLE","TOGGLE_BULK_SELECT","getEnvUrl","window","location","pathname","split","remediationUrl","id","document","baseURI","replace","filter","s","length","shift","dedupeArray","array","Set","pluralize","count","str","fallback","buildRows","records","sortByState","showAlternate","allSystemsNamed","sort","a","b","key","Object","keys","index","direction","sortRecords","reduce","acc","curr","isOpen","cells","title","action","Fragment","resolution","alternate","needsReboot","systems","props","parent","fullWidth","system","includes","allSystems","Bullseye","Spinner","colSpan","className","buildSystemRow","disabledColumns","onCollapse","event","rowKey","rows","setRows","temp","getResolution","issueId","formValues","issueResolutions","find","r","resolutions","existing","issues","i","submitRemediation","data","basePath","setState","percent","map","playbookSystems","issue","interval","setInterval","add","isUpdate","api","auto_reboot","name","then","onRemediationCreated","remediation","getNotification","isNewSwitch","verb","variant","description","href","dismissable","createNotification","failed","clearInterval","changeBulkSelect","state","removeSelected","payload","selected","row","sortByAttr","attribute","Array","isArray","fetchSystemsInfo","config","sortableColumns","getEntities","isSortingValid","orderBy","undefined","orderDirection","toLowerCase","hostnameOrId","filters","sliced","page","per_page","hasItems","results","total","sortBy","splitArray","inputArray","perChunk","Math","ceil","_item","inventoryEntitiesReducer","LOAD_ENTITIES_FULFILLED","applyReducerHash","SELECT_ENTITY","rowsIds","item","entitySelected","loadEntitiesFulfilled","shortenIssueId","getIssuesMultiple","needs_reboot","record","matchPermissions","permissionA","permissionB","segmentsA","segmentsB","every","segmentA","API_BASE","HttpError","Error","checkResponse","ok","headers","get","json","errors","error","details","status","type","doGet","uri","opts","credentials","method","body","JSON","stringify","fetch","doFetch","toString","getRemediationStatus","url","urijs","segment","args","forEach","getHosts","instance","axios","interceptors","request","use","response","etag","err","remediations","RemediationsApi","ResolutionsApi","sources","DefaultApi","downloadPlaybook","selectedIds","Promise","resolve","reject","tab","RemediationsApiAxiosParamCreator","downloadPlaybooks","value","open","getRemediationPlaybook","handle","closed","getIsReceptorConfigured","origin","deleteSystemsFromRemediation","all","flatMap","deleteRemediationIssueSystem","statusCode","freeze","createRemediation","patchRemediation","getRemediations","query","limit","getRemediation","getResolutionsBatch","asyncActions","ACTION_TYPES","keyBy","k","SEARCH_DEBOUNCE_DELAY","FETCH_SELECTED_HOSTS","FETCH_RESOLUTIONS","hosts","HostsApi","getHostsById","perPage","apiHostGetHostById","fetchHostsById","options","HostHelper","batchResolutions","result","transform","push","warnings","hostsInitialState","isLoading","selectPlaybookFields","component","validate","validatorTypes","pattern","componentTypes","hideField","reviewActionsFields","FetchError","resolutionsCount","useFieldApi","input","valid","EmptyState","EmptyStateVariant","EmptyStateIcon","color","red","icon","ExclamationCircleIcon","Title","headingLevel","size","EmptyStateBody","propTypes","SelectPlaybook","formOptions","useFormApi","values","getState","useState","existingRemediations","setExistingRemediations","existingPlaybookSelected","setExistingPlaybookSelected","newPlaybookName","setNewPlaybookName","selectedPlaybook","setSelectedPlaybook","isLoadingRemediation","setIsLoadingRemediation","useSelector","resolutionsReducer","shallowEqual","useEffect","fetchData","differenceWith","isEqual","change","Stack","hasGutter","StackItem","Alert","isInline","Text","Popover","bodyContent","warning","Button","TextContent","Grid","GridItem","sm","md","lg","Radio","label","isDisabled","defaultChecked","onChange","FormSelect","val","FormSelectOption","Skeleton","SkeletonSize","FormGroup","fieldId","TextInput","autoFocus","isRequired","ReviewSystems","registry","dispatch","useDispatch","rowsLength","entities","loaded","hostReducer","host","display_name","tempSystems","onSelectRows","SystemsTable","hasCheckbox","bulkSelect","items","onClick","checked","onSelect","ReducerRegistry","ReviewActions","setSortByState","multiples","some","isChecked","Table","TableVariant","transforms","sortable","cellFormatters","expandable","onSort","TableHeader","noWrap","TableBody","IssueResolution","uniqueResolutions","uniqBy","removedResolutions","xl","Tile","isSelected","Review","issuesById","ExclamationTriangleIcon","resolutionsInitialState","ProgressBar","ProgressVariant","Progress","onClose","setOpen","flat","playbook","CheckCircleIcon","InProgressIcon","ouiaId","ExternalLinkAltIcon","iconPosition","isSmall","EmptyStateSecondaryActions","PropTypes","initialState","submitted","reducer","schema","RemediationWizard","useRef","useReducer","fields","isDynamic","inModal","showTitles","nextStep","filteredIssues","showTitle","findIndex","issueResolutionNextStep","substepOf","register","fetchResolutions","chunk","fetchHostNames","current","mapperExtension","review","validatorMapper","subscription","FormTemplate","showFormControls","initialValues","componentMapper","WizardMapper","TextField","onSubmit","onCancel","Modal","ModalVariant","showClose","hasNoBodyWrapper","Wizard","steps","isFinishedStep","setRegistry","promiseMiddleware","store","Provider","inventory","hideFilters","tags","registeredWith","stale","columns","isStatic","noDetail","showTags","ref","_i","defaultGetEntities","onLoad","mergeWithEntities","INVENTORY_ACTION_TYPES","entitiesReducer","tableProps","canSelectAll","defaultProps","SystemsTableWithContext"],"sourceRoot":""}