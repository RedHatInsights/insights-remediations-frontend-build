{"version":3,"file":"js/exposed-./RemediationButton.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./src/Utilities/utils.js","webpack:///./src/Utilities/http.js","webpack:///./src/api/index.js","webpack:///./src/config.js","webpack:///./src/constants.js","webpack:///./src/modules/RemediationsModal/validate/validator.js","webpack:///./src/modules/RemediationsButton.js","webpack:///./src/modules/RemediationsModal/NoDataModal.js","webpack:///./src/modules/RemediationsModal/common/SystemsTable.js"],"sourcesContent":["export function capitalize(string) {\n  return `${string.charAt(0).toUpperCase() + string.slice(1)}`;\n}\n\n/* eslint-disable camelcase */\nimport React, { Fragment } from 'react';\nimport { Bullseye, Spinner } from '@patternfly/react-core';\nimport * as api from '../api';\nimport uniqWith from 'lodash/uniqWith';\nimport isEqual from 'lodash/isEqual';\nimport { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry/ReducerRegistry';\nimport { SystemsTableWithContext } from '../modules/RemediationsModal/common/SystemsTable';\n\nexport const CAN_REMEDIATE = 'remediations:remediation:write';\nexport const AUTO_REBOOT = 'auto-reboot';\nexport const HAS_MULTIPLES = 'has-multiples';\nexport const SELECT_PLAYBOOK = 'select-playbook';\nexport const SELECTED_RESOLUTIONS = 'selected-resolutions';\nexport const MANUAL_RESOLUTION = 'manual-resolution';\nexport const EXISTING_PLAYBOOK_SELECTED = 'existing-playbook-selected';\nexport const EXISTING_PLAYBOOK = 'existing-playbook';\nexport const SYSTEMS = 'systems';\nexport const RESOLUTIONS = 'resolutions';\nexport const ISSUES_MULTIPLE = 'issues-multiple';\nexport const TOGGLE_BULK_SELECT = 'toggle-bulk-select';\n\n// Get the current group since we can be mounted at two urls\nexport const getGroup = () =>\n  window.location.pathname\n    .split('/')\n    .filter((s) => s !== 'preview' && s.length > 0)\n    .shift();\n\nexport const getEnvUrl = () => {\n  const pathName = window.location.pathname.split('/');\n  return pathName[1] === 'preview' ? 'preview/' : '';\n};\n\nexport const getBaseUri = () =>\n  `${document.baseURI.replace('preview/', '')}${getEnvUrl()}`;\n\nexport const remediationUrl = (id) =>\n  `${getBaseUri()}${getGroup()}/remediations${id ? `/${id}` : ''}`;\n\nexport const dedupeArray = (array) => [...new Set(array)];\n\nexport const pluralize = (count, str, fallback) =>\n  count !== 1 ? fallback || str + 's' : str;\n\nconst sortRecords = (records, sortByState) =>\n  [...records].sort((a, b) => {\n    const key = Object.keys(a)[sortByState.index - 1];\n    return (\n      (a[key] > b[key] ? 1 : a[key] < b[key] ? -1 : 0) *\n      (sortByState.direction === 'desc' ? -1 : 1)\n    );\n  });\n\nexport const buildRows = (\n  records,\n  sortByState,\n  showAlternate,\n  allSystemsNamed\n) =>\n  sortRecords(records, sortByState).reduce(\n    (acc, curr, index) => [\n      ...acc,\n      {\n        isOpen: false,\n        cells: [\n          { title: curr.action },\n          {\n            title: (\n              <Fragment key={`${index}-description`}>\n                <p key={`${index}-resolution`}>{curr.resolution}</p>\n                {showAlternate && curr.alternate > 0 && (\n                  <p key={`${index}-alternate`}>\n                    {curr.alternate} alternate{' '}\n                    {pluralize(curr.alternate, 'resolution')}\n                  </p>\n                )}\n              </Fragment>\n            ),\n          },\n          {\n            title: curr.needsReboot ? (\n              <div>Required</div>\n            ) : (\n              <div>Not required</div>\n            ),\n          },\n          {\n            title: curr.systems?.length || 0,\n            props: { isOpen: false },\n          },\n        ],\n      },\n      ...(curr.systems?.length > 0\n        ? [\n            {\n              parent: index * 2,\n              fullWidth: true,\n              allSystemsNamed: allSystemsNamed.filter((system) =>\n                curr.systems.includes(system.id)\n              ),\n              allSystems: curr.systems,\n              cells: [\n                {\n                  title: (\n                    <Bullseye>\n                      <Spinner />\n                    </Bullseye>\n                  ),\n                  props: { colSpan: 5, className: 'pf-m-no-padding' },\n                },\n              ],\n            },\n          ]\n        : []),\n    ],\n    []\n  );\n\nconst buildSystemRow = (allSystemsNamed = [], allSystems = []) => (\n  <SystemsTableWithContext\n    allSystemsNamed={allSystemsNamed}\n    allSystems={allSystems}\n    disabledColumns={['updated']}\n  />\n);\n\nexport const onCollapse = (event, rowKey, isOpen, rows, setRows) => {\n  let temp = [...rows];\n  rows[rowKey].isOpen = isOpen;\n  temp[rowKey + 1].cells = [\n    {\n      title: buildSystemRow(\n        rows[rowKey + 1].allSystemsNamed,\n        rows[rowKey + 1].allSystems\n      ),\n    },\n  ];\n  setRows(temp);\n};\n\nexport const getResolution = (issueId, formValues) => {\n  const issueResolutions =\n    formValues[RESOLUTIONS].find((r) => r.id === issueId)?.resolutions || [];\n\n  if (\n    formValues[MANUAL_RESOLUTION] &&\n    issueId in formValues[SELECTED_RESOLUTIONS]\n  ) {\n    return issueResolutions.filter(\n      (r) => r.id === formValues[SELECTED_RESOLUTIONS][issueId]\n    );\n  }\n\n  if (formValues[EXISTING_PLAYBOOK_SELECTED]) {\n    const existing = formValues[EXISTING_PLAYBOOK]?.issues?.find(\n      (i) => i.id === issueId\n    );\n\n    if (existing) {\n      return issueResolutions.filter((r) => r.id === existing.resolution.id);\n    }\n  }\n\n  return issueResolutions;\n};\n\nexport function createNotification(id, name, isNewSwitch) {\n  const verb = isNewSwitch ? 'created' : 'updated';\n  return {\n    variant: 'success',\n    title: `Playbook ${verb}`,\n    description: (\n      <span>\n        You have successfully {verb} <a href={remediationUrl(id)}>{name}</a>.\n      </span>\n    ),\n    dismissable: true,\n  };\n}\n\nexport const submitRemediation = (formValues, data, basePath, setState) => {\n  let percent = 1;\n  setState({ percent });\n\n  const issues = data.issues\n    .map(({ id }) => {\n      const playbookSystems =\n        formValues[EXISTING_PLAYBOOK]?.issues\n          ?.find((i) => i.id === id)\n          ?.systems?.map((s) => s.id) || [];\n      return {\n        id,\n        resolution: getResolution(id, formValues)?.[0]?.id,\n        systems: dedupeArray([\n          ...(formValues[EXISTING_PLAYBOOK_SELECTED] ? [] : playbookSystems),\n          ...(formValues[SYSTEMS][id] || []),\n        ]),\n      };\n    })\n    .filter((issue) => issue.systems.length > 0);\n\n  const interval = setInterval(() => {\n    percent < 99 && setState({ percent: ++percent });\n  }, (issues.length + Object.keys(formValues[SYSTEMS]).length) / 10);\n\n  const add = { issues, systems: [] };\n\n  const { id: existing_id } = formValues[EXISTING_PLAYBOOK] || {};\n  const isUpdate = formValues[EXISTING_PLAYBOOK_SELECTED];\n\n  (\n    (isUpdate &&\n      api.patchRemediation(\n        existing_id,\n        { add, auto_reboot: formValues[AUTO_REBOOT] },\n        basePath\n      )) ||\n    api.createRemediation(\n      {\n        name: formValues[SELECT_PLAYBOOK],\n        add,\n        auto_reboot: formValues[AUTO_REBOOT],\n      },\n      basePath\n    )\n  )\n    // watch out, id is only returned from createRemediation endpoint,\n    // not patchRemediation, thus we use existing_id as well\n    .then(({ id }) => {\n      setState({ id: id ?? existing_id, percent: 100 });\n      data?.onRemediationCreated?.({\n        remediation: { id, name },\n        getNotification: () =>\n          createNotification(\n            id ?? existing_id,\n            formValues[SELECT_PLAYBOOK],\n            !isUpdate\n          ),\n      });\n    })\n    .catch(() => {\n      setState({ failed: true });\n    })\n    .finally(() => clearInterval(interval));\n};\n\nexport const entitySelected = (state, { payload }) => {\n  let selected = state.selected || [];\n  if (payload.selected) {\n    selected = [\n      ...selected,\n      ...(payload.id === 0 ? state.rows.map((row) => row.id) : [payload.id]),\n    ];\n  } else {\n    if (payload.id === 0) {\n      const rowsIds = state.rows.map((row) => row.id);\n      selected = selected.filter((item) => !rowsIds.includes(item));\n    } else {\n      selected =\n        payload.id === -1 ? [] : selected.filter((item) => item !== payload.id);\n    }\n  }\n\n  return {\n    ...state,\n    selected,\n  };\n};\n\nexport const loadEntitiesFulfilled = (state, allSystems, sortBy) => {\n  let selected = state.selected || [];\n  if (!state.selected) {\n    selected = allSystems ? allSystems : state.rows.map((row) => row.id);\n  }\n  return {\n    ...state,\n    selected,\n    rows: sortByAttr(\n      state.rows.map(({ id, ...row }) => ({\n        id,\n        ...row,\n        selected: !!selected?.includes(id),\n      })),\n      'display_name',\n      sortBy?.direction || 'asc'\n    ),\n    sortBy,\n  };\n};\n\nexport const changeBulkSelect = (state, action) => {\n  const removeSelected = !action.payload;\n  if (!removeSelected) {\n    state.selected = dedupeArray([\n      ...state.selected,\n      ...state.rows.map((row) => row.id),\n    ]);\n  }\n\n  return {\n    ...state,\n    selected: removeSelected ? [] : state.selected,\n    rows: state.rows.map(({ id, ...row }) => ({\n      id,\n      ...row,\n      selected: !removeSelected,\n    })),\n  };\n};\n\nexport const sortByAttr = (systems, attribute, direction) =>\n  Array.isArray(systems)\n    ? systems.sort(\n        (a, b) =>\n          ((a[attribute] > b[attribute] && 1) || -1) *\n          (direction === 'asc' ? 1 : -1)\n      )\n    : [];\n\nexport const fetchSystemsInfo = async (\n  config,\n  sortableColumns = [],\n  allSystemsNamed = [],\n  getEntities\n) => {\n  const isSortingValid = sortableColumns.includes(config.orderBy);\n  config.orderBy = isSortingValid ? config.orderBy : undefined;\n  config.orderDirection = isSortingValid\n    ? config.orderDirection?.toLowerCase()\n    : undefined;\n  allSystemsNamed = sortByAttr(allSystemsNamed, 'name', config.orderDirection);\n  const hostnameOrId = config?.filters?.hostnameOrId?.toLowerCase();\n  const systems = hostnameOrId\n    ? allSystemsNamed.reduce(\n        (acc, curr) => [\n          ...acc,\n          ...(curr.name.toLowerCase().includes(hostnameOrId) ? [curr.id] : []),\n        ],\n        []\n      )\n    : allSystemsNamed.map((system) => system.id);\n  const sliced = systems.slice(\n    (config.page - 1) * config.per_page,\n    config.page * config.per_page\n  );\n  const data =\n    sliced.length > 0\n      ? await getEntities(\n          sliced,\n          {\n            ...config,\n            fields: { system_profile: ['operating_system', 'bootc_status'] },\n            hasItems: true,\n            page: 1,\n          },\n          true\n        )\n      : {};\n  return {\n    ...{\n      ...data,\n      results: sortByAttr(data.results, 'display_name', config.orderDirection),\n    },\n    total: systems.length,\n    page: config.page,\n    per_page: config.per_page,\n    orderBy: config.orderBy,\n    orderDirection: config.orderDirection,\n    sortBy: { key: config.orderBy, direction: config.orderDirection },\n  };\n};\n\nexport const splitArray = (inputArray, perChunk) =>\n  [...new Array(Math.ceil(inputArray.length / perChunk))].map((_item, key) =>\n    inputArray.slice(key * perChunk, (key + 1) * perChunk)\n  );\n\nexport const getPlaybookSystems = (playbook) =>\n  (playbook &&\n    uniqWith(\n      playbook.issues?.reduce(\n        (acc, curr) => [\n          ...acc,\n          ...curr.systems.map((system) => ({\n            id: system.id,\n            name: system.display_name,\n          })),\n        ],\n        []\n      ),\n      isEqual\n    )) ||\n  [];\n\nexport const inventoryEntitiesReducer = (\n  allSystems,\n  { LOAD_ENTITIES_FULFILLED }\n) =>\n  applyReducerHash({\n    SELECT_ENTITY: (state, action) => entitySelected(state, action),\n    [LOAD_ENTITIES_FULFILLED]: (state, { payload }) =>\n      loadEntitiesFulfilled(state, allSystems, {\n        key: payload.orderBy,\n        direction: payload.orderDirection,\n      }),\n    [TOGGLE_BULK_SELECT]: changeBulkSelect,\n  });\n\nexport const shortenIssueId = (issueId) =>\n  issueId?.split('|')?.slice(-1)?.[0] || issueId;\n\nexport const getIssuesMultiple = (\n  issues = [],\n  systems = [],\n  resolutions = []\n) =>\n  issues\n    .map((issue) => {\n      const issueResolutions =\n        resolutions.find((r) => r.id === issue.id)?.resolutions || [];\n      const { description, needs_reboot: needsReboot } =\n        issueResolutions?.[0] || {};\n      return {\n        action: issues.find((i) => i.id === issue.id).description,\n        resolution: description,\n        needsReboot,\n        systems: dedupeArray([...(issue.systems || []), ...systems]),\n        id: issue.id,\n        alternate: issueResolutions?.length - 1,\n      };\n    })\n    .filter((record) => record.alternate > 0);\n\nexport const matchPermissions = (permissionA, permissionB) => {\n  const segmentsA = permissionA.split(':');\n  const segmentsB = permissionB.split(':');\n\n  if (segmentsA.length !== segmentsB.length) {\n    return false;\n  }\n\n  return segmentsA.every(\n    (segmentA, index) =>\n      segmentA === segmentsB[index] ||\n      segmentA === '*' ||\n      segmentsB[index] === '*'\n  );\n};\n\nexport const getResolvedSystems = (issue) => {\n  let count = 0;\n  issue.systems.map((system) => {\n    if (system.resolved) {\n      count++;\n    }\n  });\n  return count;\n};\n","const HEADERS = {\n  'Content-Type': 'application/json; charset=utf-8',\n};\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function checkResponse(r) {\n  if (r.ok) {\n    return r;\n  }\n\n  if (r.headers.get('content-type').includes('application/json')) {\n    // let's try to extract some more info\n    let data = false;\n    try {\n      data = await r.json();\n    } catch (e) {} // eslint-disable-line no-empty\n\n    if (data.errors && data.errors.length) {\n      const error = data.errors[0];\n\n      if (error.details && error.details.name) {\n        throw new HttpError(`${error.title} (${error.details.name})`);\n      }\n\n      throw new HttpError(error.title);\n    }\n  }\n\n  throw new HttpError(`Unexpected response code ${r.status}`);\n}\n\nasync function json(r) {\n  if (!r) {\n    return;\n  }\n\n  const type = r.headers.get('content-type');\n  if (!type.includes('application/json')) {\n    throw new HttpError(`Unexpected response type (${type}) returned`);\n  }\n\n  return r.json();\n}\n\nfunction doFetch(\n  uri,\n  method = 'GET',\n  data = false,\n  headers = false,\n  options = {}\n) {\n  const opts = {\n    credentials: 'same-origin',\n    method,\n    ...options,\n  };\n\n  if (headers) {\n    opts.headers = headers;\n  }\n\n  if (data) {\n    opts.body = JSON.stringify(data);\n  }\n\n  return fetch(uri, opts);\n}\n\nexport function doGet(uri) {\n  return doFetch(uri.toString()).then(checkResponse).then(json);\n}\n\nexport function doPost(uri, data) {\n  return doFetch(uri, 'POST', data, HEADERS).then(checkResponse).then(json);\n}\n\nexport function doPatch(uri, data) {\n  return doFetch(uri, 'PATCH', data, HEADERS).then(checkResponse);\n}\n\nexport function doDelete(uri) {\n  return doFetch(uri, 'DELETE').then(checkResponse);\n}\n","import { API_BASE, SOURCES_BASE } from '../config';\n\nimport axios from 'axios';\nimport {\n  RemediationsApi,\n  ResolutionsApi,\n  RemediationsApiAxiosParamCreator,\n} from '@redhat-cloud-services/remediations-client';\nimport { DefaultApi } from '@redhat-cloud-services/sources-client';\n\n/*\n * TODO: replace these with generated clients\n */\nimport { doGet } from '../Utilities/http';\nimport urijs from 'urijs';\n\nfunction url(...args) {\n  const url = urijs(API_BASE).segment('remediations');\n  args.forEach((segment) => url.segment(segment));\n  return url;\n}\n\nexport const getRemediationStatus = (id) => doGet(url(id, 'status'));\nexport function getHosts() {\n  return doGet('/api/inventory/v1/hosts');\n}\n/*\n * end of TODO\n */\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function authInterceptor(config) {\n  return config;\n}\n\nfunction responseDataInterceptor(response) {\n  if (response.data) {\n    return { ...response.data, etag: response.headers.etag };\n  }\n\n  return response;\n}\n\nfunction interceptor401(err) {\n  if (!err) {\n    return;\n  }\n\n  if (err.response && err.response.status === 401) {\n    return false;\n  }\n\n  throw err;\n}\n\nfunction errorInterceptor(err) {\n  if (!err) {\n    return;\n  }\n\n  if (\n    err.response &&\n    err.response.data &&\n    err.response.data.errors &&\n    err.response.data.errors.length\n  ) {\n    const error = err.response.data.errors[0];\n\n    if (error.details && error.details.name) {\n      throw new HttpError(`${error.title} (${error.details.name})`);\n    }\n\n    throw new HttpError(error.title);\n  }\n\n  throw err;\n}\n\nconst instance = axios.create();\ninstance.interceptors.request.use(authInterceptor);\ninstance.interceptors.response.use(responseDataInterceptor);\ninstance.interceptors.response.use(null, interceptor401);\ninstance.interceptors.response.use(null, errorInterceptor);\n\nexport const remediations = new RemediationsApi(undefined, API_BASE, instance);\nexport const resolutions = new ResolutionsApi(undefined, API_BASE, instance);\nexport const sources = new DefaultApi(undefined, SOURCES_BASE, instance);\n\nexport function downloadPlaybook(selectedIds) {\n  return new Promise((resolve, reject) => {\n    const tab =\n      selectedIds.length > 1\n        ? new RemediationsApiAxiosParamCreator()\n            .downloadPlaybooks(selectedIds)\n            .then((value) => window.location.assign(API_BASE + value.url))\n        : new RemediationsApiAxiosParamCreator()\n            .getRemediationPlaybook(selectedIds[0])\n            .then((value) => window.location.assign(API_BASE + value.url));\n\n    if (!tab) {\n      return reject();\n    }\n\n    const handle = setInterval(() => {\n      if (tab.closed) {\n        clearInterval(handle);\n        resolve();\n      }\n    }, 500);\n  });\n}\n\nexport function getIsReceptorConfigured() {\n  return doGet(\n    `${window.location.origin}/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]`\n  );\n}\n\nexport function deleteSystemsFromRemediation(systems, remediation) {\n  return Promise.all(\n    systems.flatMap((system) =>\n      system.issues.map((issue) =>\n        remediations.deleteRemediationIssueSystem(\n          remediation.id,\n          issue.id,\n          system.id\n        )\n      )\n    )\n  );\n}\n\nfunction checkResponse(r) {\n  if (!r.ok) {\n    const error = new Error(`Unexpected response code ${r.status}`);\n    error.statusCode = r.status;\n    throw error;\n  }\n\n  return r;\n}\n\nfunction json(r) {\n  checkResponse(r);\n  return r.json();\n}\n\nconst headers = Object.freeze({\n  'Content-Type': 'application/json; charset=utf-8',\n});\n\nexport function createRemediation(data) {\n  const uri = new urijs(API_BASE).segment('remediations').toString();\n  return fetch(uri, {\n    headers,\n    method: 'POST',\n    credentials: 'include',\n    body: JSON.stringify(data),\n  }).then(json);\n}\n\nexport function patchRemediation(id, data) {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .segment(id)\n    .toString();\n  return fetch(uri, {\n    headers,\n    credentials: 'include',\n    method: 'PATCH',\n    body: JSON.stringify(data),\n  }).then(checkResponse);\n}\n\nexport function getRemediations() {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .query({ limit: 200 })\n    .toString();\n  return fetch(uri, { credentials: 'include' }).then(json);\n}\n\nexport function getRemediation(id) {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .segment(id)\n    .toString();\n  return fetch(uri, { credentials: 'include' }).then(json);\n}\n\nexport function getResolutionsBatch(issues) {\n  const uri = new urijs(API_BASE).segment('resolutions').toString();\n  return fetch(uri, {\n    headers,\n    credentials: 'include',\n    method: 'POST',\n    body: JSON.stringify({ issues }),\n  }).then(json);\n}\n","export const API_BASE = '/api/remediations/v1';\nexport const SOURCES_BASE = '/api/sources/v2.0';\n","import keyBy from 'lodash/keyBy';\nimport flatMap from 'lodash/flatMap';\n\nconst asyncActions = flatMap(\n  [\n    'LOAD_REMEDIATIONS',\n    'CREATE_REMEDIATIONS',\n    'LOAD_REMEDIATION',\n    'LOAD_REMEDIATION_STATUS',\n    'REFRESH_REMEDIATION',\n    'PATCH_REMEDIATION',\n    'DELETE_REMEDIATION',\n    'DELETE_REMEDIATION_ISSUE',\n    'DELETE_REMEDIATION_ISSUE_SYSTEM',\n    'PATCH_REMEDIATION_ISSUE',\n    'GET_RESOLUTIONS',\n    'GET_CONNECTION_STATUS',\n    'RUN_REMEDIATION',\n    'EXECUTE_PLAYBOOK_BANNER',\n    'RUN_REMEDIATION',\n    'GET_PLAYBOOK_RUNS',\n    'GET_PLAYBOOK_RUN',\n    'GET_PLAYBOOK_RUN_SYSTEMS',\n    'GET_PLAYBOOK_RUN_SYSTEM_DETAILS',\n    'CANCEL_PLAYBOOK_RUNS',\n    'GET_ENDPOINT',\n    'CHECK_EXECUTABLE',\n  ],\n  (a) => [a, `${a}_PENDING`, `${a}_FULFILLED`, `${a}_REJECTED`]\n);\n\nconst actions = ['SET_ETAG', 'EXPAND_INVENTORY_TABLE', 'SELECT_ENTITY'];\nexport const ACTION_TYPES = keyBy([...asyncActions, ...actions], (k) => k);\n\nexport const SEARCH_DEBOUNCE_DELAY = 500;\n\nexport const FETCH_SELECTED_HOSTS = 'FETCH_SELECTED_HOSTS';\nexport const FETCH_RESOLUTIONS = 'FETCH_RESOLUTIONS';\n","function assert(test, msg) {\n  if (!test) {\n    throw new TypeError(msg);\n  }\n}\n\nfunction checkAllowedKeys(reference, ...keys) {\n  Object.keys(reference).forEach((key) =>\n    assert(\n      keys.includes(key),\n      `Unexpected key: ${key} Expected one of: ${keys}`\n    )\n  );\n}\n\nfunction checkRequiredKeys(reference, ...keys) {\n  keys.forEach((key) =>\n    assert(\n      Object.prototype.hasOwnProperty.call(reference, key),\n      `Required key missing: ${key}`\n    )\n  );\n}\n\nfunction checkSystems(systems) {\n  assert(Array.isArray(systems), 'Systems must be an array');\n  assert(systems.length, 'Systems array must not be empty');\n  systems.forEach((system) =>\n    assert(typeof system === 'string', 'System must be of type string')\n  );\n}\n\nexport default function validate(data) {\n  assert(typeof data === 'object' && data !== null);\n  checkAllowedKeys(data, 'issues', 'systems', 'onRemediationCreated');\n  checkRequiredKeys(data, 'issues');\n\n  assert(Array.isArray(data.issues), 'Issues must be an array');\n  assert(data.issues.length, 'Issues array must not be empty');\n  data.issues.forEach((issue) => {\n    assert(\n      typeof issue === 'object' && issue !== null,\n      'Issue must be an object'\n    );\n    checkAllowedKeys(issue, 'id', 'description', 'systems');\n    checkRequiredKeys(issue, 'id', 'description');\n    Object.prototype.hasOwnProperty.call(issue, 'systems') &&\n      checkSystems(issue.systems);\n    assert(\n      Object.prototype.hasOwnProperty.call(issue, 'systems') ||\n        Object.prototype.hasOwnProperty.call(data, 'systems'),\n      `No systems defined for ${issue.id}`\n    );\n  });\n\n  Object.prototype.hasOwnProperty.call(data, 'systems') &&\n    checkSystems(data.systems);\n}\n","import React, { useEffect, useState } from 'react';\n\nimport propTypes from 'prop-types';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport validate from './RemediationsModal/validate';\n\nimport { CAN_REMEDIATE, matchPermissions } from '../Utilities/utils';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport RemediationWizard from './RemediationsModal';\nimport NoDataModal from './RemediationsModal/NoDataModal';\n\nconst RemediationButton = ({\n  isDisabled,\n  children,\n  dataProvider,\n  onRemediationCreated,\n  buttonProps,\n  patchNoAdvisoryText,\n}) => {\n  const [hasPermissions, setHasPermissions] = useState(false);\n  const [remediationsData, setRemediationsData] = useState();\n  const [isNoDataModalOpen, setNoDataModalOpen] = useState(false);\n  const chrome = useChrome();\n\n  useEffect(() => {\n    chrome.getUserPermissions('remediations').then((permissions) => {\n      setHasPermissions(\n        permissions.some(({ permission }) => {\n          return matchPermissions(permission, CAN_REMEDIATE);\n        })\n      );\n    });\n  }, []);\n\n  if (!hasPermissions) {\n    return (\n      <Tooltip content=\"You do not have correct permissions to remediate this entity.\">\n        <span>\n          <Button\n            isDisabled\n            {...buttonProps}\n            data-testid=\"remediationButton-no-permissions\"\n          >\n            {children}\n          </Button>\n        </span>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <Button\n        isDisabled={isDisabled}\n        data-testid=\"remediationButton-with-permissions\"\n        onClick={() => {\n          Promise.resolve(dataProvider()).then((data) => {\n            if (!data) {\n              setNoDataModalOpen(true);\n              return;\n            }\n\n            validate(data);\n            setRemediationsData(data);\n          });\n        }}\n        {...buttonProps}\n      >\n        {children}\n      </Button>\n      <NoDataModal\n        isOpen={isNoDataModalOpen}\n        setOpen={setNoDataModalOpen}\n        patchNoAdvisoryText={patchNoAdvisoryText}\n      />\n      {remediationsData && (\n        <RemediationWizard\n          setOpen={(isOpen) =>\n            setRemediationsData((prevData) =>\n              isOpen === false ? null : prevData\n            )\n          }\n          data={{\n            onRemediationCreated,\n            ...(remediationsData || {}),\n          }}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nRemediationButton.propTypes = {\n  isDisabled: propTypes.bool,\n  dataProvider: propTypes.func.isRequired,\n  onRemediationCreated: propTypes.func,\n  children: propTypes.node,\n  buttonProps: propTypes.shape({\n    [propTypes.string]: propTypes.any,\n  }),\n  patchNoAdvisoryText: propTypes.string,\n};\n\nRemediationButton.defaultProps = {\n  isDisabled: false,\n  onRemediationCreated: (f) => f,\n  children: 'Remediate with Ansible',\n};\n\nexport default RemediationButton;\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport { Button, Modal, ModalVariant } from '@patternfly/react-core';\n\nexport const NoDataModal = ({ isOpen, setOpen, patchNoAdvisoryText }) => {\n  return (\n    <Modal\n      variant={ModalVariant.small}\n      title=\"Remediate with Ansible\"\n      isOpen={isOpen}\n      onClose={() => setOpen(false)}\n      actions={[\n        <Button key=\"confirm\" variant=\"primary\" onClick={() => setOpen(false)}>\n          Back to Insights\n        </Button>,\n      ]}\n    >\n      {patchNoAdvisoryText ? (\n        patchNoAdvisoryText\n      ) : (\n        <>\n          None of the selected issues can be remediated with Ansible.\n          <br />\n          <br />\n          To remediate these issues, review the manual remediation steps\n          associated with each.\n        </>\n      )}\n    </Modal>\n  );\n};\n\nNoDataModal.propTypes = {\n  isOpen: propTypes.bool,\n  setOpen: propTypes.func,\n  patchNoAdvisoryText: propTypes.string,\n};\n\nexport default NoDataModal;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Provider } from 'react-redux';\nimport propTypes from 'prop-types';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport ReducerRegistry from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport InventoryTable from '@redhat-cloud-services/frontend-components/Inventory/InventoryTable';\nimport {\n  fetchSystemsInfo,\n  inventoryEntitiesReducer as entitiesReducer,\n} from '../../../Utilities/utils';\nimport './systemsTable.scss';\n\nconst SystemsTable = ({\n  registry,\n  allSystemsNamed,\n  allSystems,\n  hasCheckbox,\n  disabledColumns,\n  bulkSelect,\n}) => {\n  const inventory = useRef(null);\n  const sortableColumns = ['display_name'];\n\n  return (\n    <InventoryTable\n      hideFilters={{\n        tags: true,\n        registeredWith: true,\n        stale: true,\n      }}\n      columns={(columns) =>\n        columns.reduce(\n          (acc, curr) => [\n            ...acc,\n            ...(!disabledColumns.includes(curr.key)\n              ? [\n                  {\n                    ...curr,\n                    props: {\n                      ...(curr.props || {}),\n                      isStatic: !sortableColumns.includes(curr.key),\n                    },\n                  },\n                ]\n              : []),\n          ],\n          []\n        )\n      }\n      noDetail\n      variant=\"compact\"\n      hasCheckbox={hasCheckbox}\n      showTags\n      bulkSelect={bulkSelect}\n      ref={inventory}\n      getEntities={(_i, config, showTags, defaultGetEntities) =>\n        fetchSystemsInfo(\n          config,\n          sortableColumns,\n          allSystemsNamed,\n          defaultGetEntities\n        )\n      }\n      onLoad={({ mergeWithEntities, INVENTORY_ACTION_TYPES }) => {\n        registry.register(\n          mergeWithEntities(entitiesReducer(allSystems, INVENTORY_ACTION_TYPES))\n        );\n      }}\n      tableProps={{\n        canSelectAll: false,\n      }}\n    ></InventoryTable>\n  );\n};\n\nSystemsTable.defaultProps = {\n  disabledColumns: [],\n  hasCheckbox: false,\n};\n\nSystemsTable.propTypes = {\n  registry: propTypes.instanceOf(ReducerRegistry).isRequired,\n  allSystemsNamed: propTypes.arrayOf(\n    propTypes.shape({\n      id: propTypes.string,\n      name: propTypes.string,\n    })\n  ).isRequired,\n  allSystems: propTypes.arrayOf(propTypes.string).isRequired,\n  hasCheckbox: propTypes.bool,\n  disabledColumns: propTypes.arrayOf(propTypes.string),\n  bulkSelect: propTypes.object,\n};\n\nexport const SystemsTableWithContext = (props) => {\n  const [registry, setRegistry] = useState();\n\n  useEffect(() => {\n    setRegistry(() => new ReducerRegistry({}, [promiseMiddleware]));\n  }, []);\n\n  return registry?.store ? (\n    <Provider store={registry.store}>\n      <div className=\"pf-u-pl-lg\">\n        <SystemsTable {...props} registry={registry} />\n      </div>\n    </Provider>\n  ) : null;\n};\n\nexport default SystemsTable;\n"],"names":["capitalize","string","charAt","toUpperCase","slice","CAN_REMEDIATE","AUTO_REBOOT","SELECT_PLAYBOOK","SELECTED_RESOLUTIONS","MANUAL_RESOLUTION","EXISTING_PLAYBOOK_SELECTED","EXISTING_PLAYBOOK","SYSTEMS","RESOLUTIONS","ISSUES_MULTIPLE","TOGGLE_BULK_SELECT","getEnvUrl","window","location","pathname","split","remediationUrl","id","document","baseURI","replace","filter","s","length","shift","dedupeArray","array","Set","pluralize","count","str","fallback","buildRows","records","sortByState","showAlternate","allSystemsNamed","sort","a","b","key","Object","keys","index","direction","sortRecords","reduce","acc","curr","isOpen","cells","title","action","Fragment","resolution","alternate","needsReboot","systems","props","parent","fullWidth","system","includes","allSystems","Bullseye","Spinner","colSpan","className","buildSystemRow","disabledColumns","onCollapse","event","rowKey","rows","setRows","temp","getResolution","issueId","formValues","issueResolutions","find","r","resolutions","existing","issues","i","submitRemediation","data","basePath","setState","percent","map","playbookSystems","issue","interval","setInterval","add","existing_id","isUpdate","auto_reboot","name","then","onRemediationCreated","remediation","getNotification","isNewSwitch","verb","variant","description","href","dismissable","createNotification","catch","failed","finally","clearInterval","changeBulkSelect","state","removeSelected","payload","selected","row","sortByAttr","attribute","Array","isArray","fetchSystemsInfo","async","config","sortableColumns","getEntities","isSortingValid","orderBy","undefined","orderDirection","toLowerCase","hostnameOrId","filters","sliced","page","per_page","fields","system_profile","hasItems","results","total","sortBy","splitArray","inputArray","perChunk","Math","ceil","_item","inventoryEntitiesReducer","LOAD_ENTITIES_FULFILLED","applyReducerHash","SELECT_ENTITY","rowsIds","item","entitySelected","loadEntitiesFulfilled","shortenIssueId","getIssuesMultiple","needs_reboot","record","matchPermissions","permissionA","permissionB","segmentsA","segmentsB","every","segmentA","getResolvedSystems","resolved","HttpError","Error","constructor","super","this","checkResponse","ok","headers","get","json","e","errors","error","details","status","type","doGet","uri","method","options","opts","credentials","body","JSON","stringify","fetch","doFetch","toString","getRemediationStatus","args","url","API_BASE","segment","forEach","getHosts","instance","interceptors","request","use","response","etag","err","remediations","RemediationsApi","ResolutionsApi","sources","DefaultApi","SOURCES_BASE","downloadPlaybook","selectedIds","Promise","resolve","reject","tab","RemediationsApiAxiosParamCreator","downloadPlaybooks","value","assign","getRemediationPlaybook","handle","closed","getIsReceptorConfigured","origin","deleteSystemsFromRemediation","all","flatMap","deleteRemediationIssueSystem","statusCode","freeze","createRemediation","patchRemediation","getRemediations","query","limit","getRemediation","getResolutionsBatch","asyncActions","ACTION_TYPES","k","SEARCH_DEBOUNCE_DELAY","FETCH_SELECTED_HOSTS","FETCH_RESOLUTIONS","assert","test","msg","TypeError","checkAllowedKeys","reference","checkRequiredKeys","prototype","hasOwnProperty","call","checkSystems","RemediationButton","isDisabled","children","dataProvider","buttonProps","patchNoAdvisoryText","hasPermissions","setHasPermissions","useState","remediationsData","setRemediationsData","isNoDataModalOpen","setNoDataModalOpen","chrome","useChrome","useEffect","getUserPermissions","permissions","some","permission","Button","onClick","validate","NoDataModal","setOpen","prevData","Tooltip","content","propTypes","isRequired","defaultProps","f","Modal","ModalVariant","small","onClose","actions","SystemsTable","registry","hasCheckbox","bulkSelect","inventory","useRef","hideFilters","tags","registeredWith","stale","columns","isStatic","noDetail","showTags","ref","_i","defaultGetEntities","onLoad","mergeWithEntities","INVENTORY_ACTION_TYPES","register","tableProps","canSelectAll","SystemsTableWithContext","setRegistry","store","Provider"],"sourceRoot":""}