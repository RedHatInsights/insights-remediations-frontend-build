{"version":3,"file":"js/exposed-./RemediationButton.09040c3df99226038e77.js","mappings":"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","sources":["webpack:///./src/config.js","webpack:///./src/Utilities/http.js","webpack:///./src/api/index.js","webpack:///./src/constants.js","webpack:///./src/modules/RemediationsModal/validate/validator.js","webpack:///./src/modules/RemediationsButton.js","webpack:///./src/modules/RemediationsModal/NoDataModal.js","webpack:///./node_modules/react/cjs/react-jsx-runtime.production.min.js"],"sourcesContent":["export const API_BASE = '/api/remediations/v1';\nexport const SOURCES_BASE = '/api/sources/v2.0';\n","const HEADERS = {\n  'Content-Type': 'application/json; charset=utf-8',\n};\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function checkResponse(r) {\n  if (r.ok) {\n    return r;\n  }\n\n  if (r.headers.get('content-type').includes('application/json')) {\n    // let's try to extract some more info\n    let data = false;\n    try {\n      data = await r.json();\n    } catch (e) {} // eslint-disable-line no-empty\n\n    if (data.errors && data.errors.length) {\n      const error = data.errors[0];\n\n      if (error.details && error.details.name) {\n        throw new HttpError(`${error.title} (${error.details.name})`);\n      }\n\n      throw new HttpError(error.title);\n    }\n  }\n\n  throw new HttpError(`Unexpected response code ${r.status}`);\n}\n\nasync function json(r) {\n  if (!r) {\n    return;\n  }\n\n  const type = r.headers.get('content-type');\n  if (!type.includes('application/json')) {\n    throw new HttpError(`Unexpected response type (${type}) returned`);\n  }\n\n  return r.json();\n}\n\nfunction doFetch(\n  uri,\n  method = 'GET',\n  data = false,\n  headers = false,\n  options = {}\n) {\n  const opts = {\n    credentials: 'same-origin',\n    method,\n    ...options,\n  };\n\n  if (headers) {\n    opts.headers = headers;\n  }\n\n  if (data) {\n    opts.body = JSON.stringify(data);\n  }\n\n  return fetch(uri, opts);\n}\n\nexport function doGet(uri) {\n  return doFetch(uri.toString()).then(checkResponse).then(json);\n}\n\nexport function doPost(uri, data) {\n  return doFetch(uri, 'POST', data, HEADERS).then(checkResponse).then(json);\n}\n\nexport function doPatch(uri, data) {\n  return doFetch(uri, 'PATCH', data, HEADERS).then(checkResponse);\n}\n\nexport function doDelete(uri) {\n  return doFetch(uri, 'DELETE').then(checkResponse);\n}\n","import { API_BASE, SOURCES_BASE } from '../config';\n\nimport axios from 'axios';\nimport {\n  RemediationsApi,\n  ResolutionsApi,\n  RemediationsApiAxiosParamCreator,\n} from '@redhat-cloud-services/remediations-client';\nimport { DefaultApi } from '@redhat-cloud-services/sources-client';\n\n/*\n * TODO: replace these with generated clients\n */\nimport { doGet } from '../Utilities/http';\nimport urijs from 'urijs';\n\nfunction url(...args) {\n  const url = urijs(API_BASE).segment('remediations');\n  args.forEach((segment) => url.segment(segment));\n  return url;\n}\n\nexport const getRemediationStatus = (id) => doGet(url(id, 'status'));\nexport function getHosts() {\n  return doGet('/api/inventory/v1/hosts');\n}\n/*\n * end of TODO\n */\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function authInterceptor(config) {\n  return config;\n}\n\nfunction responseDataInterceptor(response) {\n  if (response.data) {\n    return { ...response.data, etag: response.headers.etag };\n  }\n\n  return response;\n}\n\nfunction interceptor401(err) {\n  if (!err) {\n    return;\n  }\n\n  if (err.response && err.response.status === 401) {\n    return false;\n  }\n\n  throw err;\n}\n\nfunction errorInterceptor(err) {\n  if (!err) {\n    return;\n  }\n\n  if (\n    err.response &&\n    err.response.data &&\n    err.response.data.errors &&\n    err.response.data.errors.length\n  ) {\n    const error = err.response.data.errors[0];\n\n    if (error.details && error.details.name) {\n      throw new HttpError(`${error.title} (${error.details.name})`);\n    }\n\n    throw new HttpError(error.title);\n  }\n\n  throw err;\n}\n\nconst instance = axios.create();\ninstance.interceptors.request.use(authInterceptor);\ninstance.interceptors.response.use(responseDataInterceptor);\ninstance.interceptors.response.use(null, interceptor401);\ninstance.interceptors.response.use(null, errorInterceptor);\n\nexport const remediations = new RemediationsApi(undefined, API_BASE, instance);\nexport const resolutions = new ResolutionsApi(undefined, API_BASE, instance);\nexport const sources = new DefaultApi(undefined, SOURCES_BASE, instance);\n\nexport function downloadPlaybook(selectedIds) {\n  return new Promise((resolve, reject) => {\n    const tab =\n      selectedIds.length > 1\n        ? new RemediationsApiAxiosParamCreator()\n            .downloadPlaybooks(selectedIds)\n            .then((value) => window.location.assign(API_BASE + value.url))\n        : new RemediationsApiAxiosParamCreator()\n            .getRemediationPlaybook(selectedIds[0])\n            .then((value) => window.location.assign(API_BASE + value.url));\n\n    if (!tab) {\n      return reject();\n    }\n\n    const handle = setInterval(() => {\n      if (tab.closed) {\n        clearInterval(handle);\n        resolve();\n      }\n    }, 500);\n  });\n}\n\nexport function getIsReceptorConfigured() {\n  return doGet(\n    `${window.location.origin}/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]`\n  );\n}\n\nexport function deleteSystemsFromRemediation(systems, remediation) {\n  return Promise.all(\n    systems.flatMap((system) =>\n      system.issues.map((issue) =>\n        remediations.deleteRemediationIssueSystem(\n          remediation.id,\n          issue.id,\n          system.id\n        )\n      )\n    )\n  );\n}\n\nfunction checkResponse(r) {\n  if (!r.ok) {\n    const error = new Error(`Unexpected response code ${r.status}`);\n    error.statusCode = r.status;\n    throw error;\n  }\n\n  return r;\n}\n\nfunction json(r) {\n  checkResponse(r);\n  return r.json();\n}\n\nconst headers = Object.freeze({\n  'Content-Type': 'application/json; charset=utf-8',\n});\n\nexport function createRemediation(data) {\n  const uri = new urijs(API_BASE).segment('remediations').toString();\n  return fetch(uri, {\n    headers,\n    method: 'POST',\n    credentials: 'include',\n    body: JSON.stringify(data),\n  }).then(json);\n}\n\nexport function patchRemediation(id, data) {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .segment(id)\n    .toString();\n  return fetch(uri, {\n    headers,\n    credentials: 'include',\n    method: 'PATCH',\n    body: JSON.stringify(data),\n  }).then(checkResponse);\n}\n\nexport function getRemediations() {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .query({ limit: 200 })\n    .toString();\n  return fetch(uri, { credentials: 'include' }).then(json);\n}\n\nexport function getRemediation(id) {\n  const uri = new urijs(API_BASE)\n    .segment('remediations')\n    .segment(id)\n    .toString();\n  return fetch(uri, { credentials: 'include' }).then(json);\n}\n\nexport function getResolutionsBatch(issues) {\n  const uri = new urijs(API_BASE).segment('resolutions').toString();\n  return fetch(uri, {\n    headers,\n    credentials: 'include',\n    method: 'POST',\n    body: JSON.stringify({ issues }),\n  }).then(json);\n}\n","import keyBy from 'lodash/keyBy';\nimport flatMap from 'lodash/flatMap';\n\nconst asyncActions = flatMap(\n  [\n    'LOAD_REMEDIATIONS',\n    'CREATE_REMEDIATIONS',\n    'LOAD_REMEDIATION',\n    'LOAD_REMEDIATION_STATUS',\n    'REFRESH_REMEDIATION',\n    'PATCH_REMEDIATION',\n    'DELETE_REMEDIATION',\n    'DELETE_REMEDIATION_ISSUE',\n    'DELETE_REMEDIATION_ISSUE_SYSTEM',\n    'PATCH_REMEDIATION_ISSUE',\n    'GET_RESOLUTIONS',\n    'GET_CONNECTION_STATUS',\n    'RUN_REMEDIATION',\n    'EXECUTE_PLAYBOOK_BANNER',\n    'RUN_REMEDIATION',\n    'GET_PLAYBOOK_RUNS',\n    'GET_PLAYBOOK_RUN',\n    'GET_PLAYBOOK_RUN_SYSTEMS',\n    'GET_PLAYBOOK_RUN_SYSTEM_DETAILS',\n    'CANCEL_PLAYBOOK_RUNS',\n    'GET_ENDPOINT',\n    'CHECK_EXECUTABLE',\n  ],\n  (a) => [a, `${a}_PENDING`, `${a}_FULFILLED`, `${a}_REJECTED`]\n);\n\nconst actions = ['SET_ETAG', 'EXPAND_INVENTORY_TABLE', 'SELECT_ENTITY'];\nexport const ACTION_TYPES = keyBy([...asyncActions, ...actions], (k) => k);\n\nexport const SEARCH_DEBOUNCE_DELAY = 500;\n\nexport const FETCH_SELECTED_HOSTS = 'FETCH_SELECTED_HOSTS';\nexport const FETCH_RESOLUTIONS = 'FETCH_RESOLUTIONS';\n","function assert(test, msg) {\n  if (!test) {\n    throw new TypeError(msg);\n  }\n}\n\nfunction checkAllowedKeys(reference, ...keys) {\n  Object.keys(reference).forEach((key) =>\n    assert(\n      keys.includes(key),\n      `Unexpected key: ${key} Expected one of: ${keys}`\n    )\n  );\n}\n\nfunction checkRequiredKeys(reference, ...keys) {\n  keys.forEach((key) =>\n    assert(\n      Object.prototype.hasOwnProperty.call(reference, key),\n      `Required key missing: ${key}`\n    )\n  );\n}\n\nfunction checkSystems(systems) {\n  assert(Array.isArray(systems), 'Systems must be an array');\n  assert(systems.length, 'Systems array must not be empty');\n  systems.forEach((system) =>\n    assert(typeof system === 'string', 'System must be of type string')\n  );\n}\n\nexport default function validate(data) {\n  assert(typeof data === 'object' && data !== null);\n  checkAllowedKeys(data, 'issues', 'systems', 'onRemediationCreated');\n  checkRequiredKeys(data, 'issues');\n\n  assert(Array.isArray(data.issues), 'Issues must be an array');\n  assert(data.issues.length, 'Issues array must not be empty');\n  data.issues.forEach((issue) => {\n    assert(\n      typeof issue === 'object' && issue !== null,\n      'Issue must be an object'\n    );\n    checkAllowedKeys(issue, 'id', 'description', 'systems');\n    checkRequiredKeys(issue, 'id', 'description');\n    Object.prototype.hasOwnProperty.call(issue, 'systems') &&\n      checkSystems(issue.systems);\n    assert(\n      Object.prototype.hasOwnProperty.call(issue, 'systems') ||\n        Object.prototype.hasOwnProperty.call(data, 'systems'),\n      `No systems defined for ${issue.id}`\n    );\n  });\n\n  Object.prototype.hasOwnProperty.call(data, 'systems') &&\n    checkSystems(data.systems);\n}\n","import React, { useEffect, useState } from 'react';\n\nimport propTypes from 'prop-types';\nimport useChrome from '@redhat-cloud-services/frontend-components/useChrome';\nimport validate from './RemediationsModal/validate';\n\nimport { CAN_REMEDIATE, matchPermissions } from '../Utilities/utils';\nimport { Button, Tooltip } from '@patternfly/react-core';\nimport RemediationWizard from './RemediationsModal';\nimport NoDataModal from './RemediationsModal/NoDataModal';\n\nconst RemediationButton = ({\n  isDisabled,\n  children,\n  dataProvider,\n  onRemediationCreated,\n  buttonProps,\n}) => {\n  const [hasPermissions, setHasPermissions] = useState(false);\n  const [remediationsData, setRemediationsData] = useState();\n  const [isNoDataModalOpen, setNoDataModalOpen] = useState(false);\n  const chrome = useChrome();\n\n  useEffect(() => {\n    chrome.getUserPermissions('remediations').then((permissions) => {\n      setHasPermissions(\n        permissions.some(({ permission }) => {\n          return matchPermissions(permission, CAN_REMEDIATE);\n        })\n      );\n    });\n  }, []);\n\n  if (!hasPermissions) {\n    return (\n      <Tooltip content=\"You do not have correct permissions to remediate this entity.\">\n        <span>\n          <Button isDisabled {...buttonProps}>\n            {children}\n          </Button>\n        </span>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <Button\n        isDisabled={isDisabled}\n        onClick={() => {\n          Promise.resolve(dataProvider()).then((data) => {\n            if (!data) {\n              setNoDataModalOpen(true);\n              return;\n            }\n\n            validate(data);\n            setRemediationsData(data);\n          });\n        }}\n        {...buttonProps}\n      >\n        {children}\n      </Button>\n      <NoDataModal isOpen={isNoDataModalOpen} setOpen={setNoDataModalOpen} />\n      {remediationsData && (\n        <RemediationWizard\n          setOpen={(isOpen) =>\n            setRemediationsData((prevData) =>\n              isOpen === false ? null : prevData\n            )\n          }\n          data={{\n            onRemediationCreated,\n            ...(remediationsData || {}),\n          }}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nRemediationButton.propTypes = {\n  isDisabled: propTypes.bool,\n  dataProvider: propTypes.func.isRequired,\n  onRemediationCreated: propTypes.func,\n  children: propTypes.node,\n  buttonProps: propTypes.shape({\n    [propTypes.string]: propTypes.any,\n  }),\n};\n\nRemediationButton.defaultProps = {\n  isDisabled: false,\n  onRemediationCreated: (f) => f,\n  children: 'Remediate with Ansible',\n};\n\nexport default RemediationButton;\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport { Button, Modal, ModalVariant } from '@patternfly/react-core';\n\nexport const NoDataModal = ({ isOpen, setOpen }) => {\n  return (\n    <Modal\n      variant={ModalVariant.small}\n      title=\"Remediate with Ansible\"\n      isOpen={isOpen}\n      onClose={() => setOpen(false)}\n      actions={[\n        <Button key=\"confirm\" variant=\"primary\" onClick={() => setOpen(false)}>\n          Back to Insights\n        </Button>,\n      ]}\n    >\n      None of the selected issues can be remediated with Ansible.\n      <br />\n      <br />\n      To remediate these issues, review the manual remediation steps associated\n      with each.\n    </Modal>\n  );\n};\n\nNoDataModal.propTypes = {\n  isOpen: propTypes.bool,\n  setOpen: propTypes.func,\n};\n\nexport default NoDataModal;\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n"],"names":["API_BASE","HttpError","description","Error","checkResponse","r","ok","headers","get","includes","data","json","errors","length","error","details","name","title","status","type","doGet","uri","opts","credentials","method","body","JSON","stringify","fetch","doFetch","toString","then","getRemediationStatus","id","url","urijs","segment","args","forEach","getHosts","config","instance","axios","interceptors","request","use","response","etag","err","remediations","RemediationsApi","undefined","resolutions","ResolutionsApi","sources","DefaultApi","downloadPlaybook","selectedIds","Promise","resolve","reject","tab","RemediationsApiAxiosParamCreator","downloadPlaybooks","value","window","location","assign","getRemediationPlaybook","handle","setInterval","closed","clearInterval","getIsReceptorConfigured","origin","deleteSystemsFromRemediation","systems","remediation","all","flatMap","system","issues","map","issue","deleteRemediationIssueSystem","statusCode","Object","freeze","createRemediation","patchRemediation","getRemediations","query","limit","getRemediation","getResolutionsBatch","asyncActions","a","ACTION_TYPES","keyBy","k","SEARCH_DEBOUNCE_DELAY","FETCH_SELECTED_HOSTS","FETCH_RESOLUTIONS","assert","test","msg","TypeError","checkAllowedKeys","reference","keys","key","checkRequiredKeys","prototype","hasOwnProperty","call","checkSystems","Array","isArray","RemediationButton","isDisabled","children","dataProvider","onRemediationCreated","buttonProps","useState","hasPermissions","setHasPermissions","remediationsData","setRemediationsData","isNoDataModalOpen","setNoDataModalOpen","chrome","useChrome","useEffect","getUserPermissions","permissions","some","permission","matchPermissions","CAN_REMEDIATE","Button","onClick","validate","NoDataModal","isOpen","setOpen","prevData","Tooltip","content","propTypes","isRequired","defaultProps","f","Modal","variant","ModalVariant","small","onClose","actions","g","exports","Fragment","Symbol","for","h","m","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","n","p","ref","__self","__source","q","c","b","d","e","l","$$typeof","props","_owner","current","jsx","jsxs"],"sourceRoot":""}