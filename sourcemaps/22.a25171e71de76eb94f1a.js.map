{"version":3,"sources":["webpack:///./src/components/PlaybookCard.js","webpack:///./src/components/EmptyStates/EmptyRemediations.js","webpack:///./src/components/RemediationTable.js","webpack:///./src/components/TestButtons.js","webpack:///./src/components/CreatePlanModal/ModalSteps/PlanName.js","webpack:///./src/components/CreatePlanModal/ModalSteps/PlanSystems.js","webpack:///./src/routes/Home.js","webpack:///./src/Routes.js","webpack:///./src/skeletons/GlobalSkeleton.js","webpack:///./src/App.js","webpack:///./src/Utilities/model.js","webpack:///./src/Utilities/urls.js","webpack:///./src/actions.js","webpack:///./src/Utilities/http.js","webpack:///./src/api.js","webpack:///./src/components/Alerts/NoReceptorBanner.js","webpack:///./src/components/Alerts/PlaybookToastAlerts.js","webpack:///./src/components/ConfirmationDialog.js","webpack:///./src/components/DeniedState.js","webpack:///./src/components/EmptyExecutePlaybookState.js","webpack:///./src/components/Modals/ExecuteModal.js","webpack:///./src/components/SystemsTable/RemoveSystemModal.js","webpack:///./src/components/SystemsTable/helpers.js","webpack:///./src/components/SystemsTable/SystemsTable.js","webpack:///./src/components/statusHelper.js","webpack:///./src/Utilities/utils.js","webpack:///./src/config.js","webpack:///./src/constants.js","webpack:///./src/components/Modals/WarningModal.js","webpack:///./src/containers/CancelButton.js","webpack:///./src/hooks/table.js","webpack:///./src/store/index.js","webpack:///./src/components/SystemsTable/RebootColumn.js","webpack:///./src/components/SystemsTable/IssuesColumn.js","webpack:///./src/store/reducers.js"],"names":["actionWrapper","actionsList","callback","dispatch","Promise","all","map","event","payload","then","PlaybookCardHeader","name","id","remediation","remediationIdx","archived","selector","setExecuteOpen","update","loadRemediation","getConnectionStatus","downloadPlaybook","permission","setActiveAlert","useState","isOpen","setIsOpen","isArchived","setIsArchived","useDispatch","dropdownItems","archiveHandler","patchRemediation","push","DropdownItem","key","isDisabled","isReceptorConfigured","className","hasSmartManagement","permissions","execute","onClick","generateUniqueId","title","description","variant","addNotification","CardHeader","CardActions","Dropdown","isPlain","onSelect","f","toggle","KebabToggle","onToggle","position","type","checked","getSelectedIds","includes","onChange","e","props","target","CardTitle","Stack","hasGutter","StackItem","Badge","isRead","Link","to","DateFormat","date","updated_at","propTypes","PropTypes","PlaybookCard","complete","total","Card","isCompact","CardBody","Split","SplitItem","system_count","resolved_count","issue_count","CheckCircleIcon","Progress","value","measureLocation","ProgressMeasureLocation","ProgressVariant","renderProgress","executeOpen","EmptyRemediations","archivedCount","setShowArchived","Bullseye","EmptyState","EmptyStateIcon","icon","WrenchIcon","size","Title","headingLevel","EmptyStateBody","href","appUrl","toString","Button","ouiaId","SORTING_ITERATEES","RemediationTable","remediations","loadRemediations","sorter","filter","pagination","shouldUpdateGrid","setShouldUpdateGrid","setRemediationCount","showArchived","status","cards","useContext","PermissionContext","showRefreshMessage","setShowRefreshMessage","activeToastAlert","setActiveToastAlert","selectedRemediation","reduxSelector","state","connectionStatus","runningRemediation","runRemediation","sources","useEffect","column","sortBy","sortDir","pageSize","offset","undefined","meta","Main","Spinner","centered","data","reduce","result","length","register","ExecuteModal","onClose","showRefresh","remediationId","etag","isLoading","issueCount","issues","remediationStatus","getPlaybookRuns","setEtag","getEndpoint","activeAlert","PlaybookToastAlerts","Grid","sm","md","lg","idx","GridItem","TestButtons","localStorage","getItem","systems","allHosts","slice","dataProviderC1","dataProviderC2","this","isEnabled","window","insights","chrome","auth","getUser","getHosts","hosts","setState","results","RemediationBtn","dataProvider","children","RemediationButton","onRemediationCreated","dataProviderA1","dataProviderA2","dataProviderC3","dataProviderC4","dataProviderC5","dataProviderD1","dataProviderD2","React","defaultProps","Form","FormGroup","label","isRequired","fieldId","TextInput","handleTextInputChange","placeholder","autoFocus","Component","systemValue","groupValue","onChangeSystemOptions","bind","onChangeSystemGroup","systemOptions","disabled","groupOptions","Radio","Select","option","index","SelectOption","document","isModalOpen","setIsModalOpen","noReceptorBannerVisible","setNoReceptorBannerVisible","useSorter","useFilter","useSelector","usePagination","remediationCount","filterText","setFilterText","dialogOpen","setDialogOpen","actions","pageDebounced","setValue","reset","selectedIds","sendNotification","submitted","getNotification","ModalStepContent","activeFiltersConfig","filters","category","chips","onDelete","Consumer","read","DeniedState","PageHeader","PageHeaderTitle","PrimaryToolbar","filterConfig","items","filterValues","_e","bulkSelect","count","isSelected","actionsConfig","valid","byId","keyBy","r","verifyDownload","download","write","setItem","itemCount","NoReceptorBanner","ConfirmationDialog","text","confirmText","del","deleteRemediation","Wizard","isLarge","content","RemediationDetails","lazy","ActivityDetails","ExecutorDetails","Routes","Suspense","fallback","Fragment","Switch","Route","exact","path","component","Home","render","Redirect","childProps","history","createContext","App","hasRead","hasWrite","hasExecute","readPermission","writePermission","executePermission","arePermissionLoaded","unregister","init","hideGlobalFilter","identifyApp","user","entitlements","smart_management","is_entitled","getIsReceptorConfigured","isConfigured","on","domEvent","replace","basename","getUserPermissions","remediationsPermissions","permissionList","handlePermissionUpdate","Provider","withRouter","connect","getIssuePrefix","split","getIssueApplication","getSystemName","display_name","hostname","includesIgnoreCase","included","toLowerCase","inventoryUrlBuilder","issue","tab","getInventoryTabForIssue","base","systemId","buildIssueUrl","parts","segment","app","urijs","baseURI","pathName","location","pathname","Error","limit","system","hideArchived","ACTION_TYPES","loadRemediationStatus","getRemediationStatus","refreshRemediation","createRemediation","deleteRemediationIssue","issueId","deleteRemediationIssueSystem","patchRemediationIssue","resolution","getResolutions","ruleId","resolutions","exclude","headers","cancelPlaybookRuns","runId","getPlaybookRun","getPlaybookRunSystems","executorId","ansibleHost","getPlaybookRunSystemDetails","expandInventoryTable","options","selectEntity","selected","deleteSystems","deleteSystemsFromRemediation","checkExecutable","HttpError","checkResponse","ok","logout","get","json","errors","error","details","doGet","uri","opts","credentials","method","body","JSON","stringify","fetch","doFetch","url","API_BASE","args","forEach","config","instance","axios","interceptors","request","use","response","err","RemediationsApi","ResolutionsApi","DefaultApi","SOURCES_BASE","resolve","reject","RemediationsApiAxiosParamCreator","downloadPlaybooks","open","getRemediationPlaybook","handle","setInterval","closed","clearInterval","origin","flatMap","Alert","isInline","actionClose","AlertActionCloseButton","activeAlerts","setActiveAlerts","addActiveAlert","removeAlert","previousAlerts","alert","AlertGroup","isToast","timeout","isLiveRegion","onTimeout","Date","getTime","Modal","ExclamationTriangleIcon","ModalVariant","isFooterLeftAligned","EmptyStateVariant","LockIcon","referrer","back","EmptyExecutePlaybookState","DesktopIcon","remediationName","isUserEntitled","setIsUserEntitled","connected","setConnected","disconnected","setDisconnected","isDebug","combineStatuses","availability","availability_status","pass","fail","connection_status","con","dis","c","endpoint_id","updatedData","sourcesStatus","isAvailable","generateRowsStatus","styledConnectionStatus","availability_status_error","rows","cells","executor_name","Tooltip","connectedCount","acc","systemCount","pluralize","number","str","executor_id","TextContent","Skeleton","Text","TextVariants","ExpandableSection","toggleText","List","ListItem","rel","ExternalLinkAltIcon","Table","TableVariant","TableHeader","TableBody","RemoveSystemModal","onConfirm","appendTo","getElementsByClassName","isFilled","calculateChecked","every","has","some","fetchInventoryData","getEntities","page","currSystems","hostnameOrId","per_page","hasItems","host","find","SystemsTableWrapper","registry","systemsRef","useRef","getEntitiesRef","activeSystem","entities","Map","loaded","current","curr","found","resolved","rebootRequired","needs_reboot","calculateSystems","InventoryTable","showTags","noDetail","hideFilters","tableProps","canSelectAll","_i","onLoad","INVENTORY_ACTION_TYPES","mergeWithEntities","api","remediationSystems","_event","_index","displayName","selectedSystems","Array","from","action","SystemsTable","setRegistry","ReducerRegistry","promiseMiddleware","store","connectorUrl","isBeta","normalizeStatus","running","pending","acked","failure","canceled","success","renderStatus","Flex","spacer","default","FlexItem","InProgressIcon","TimesCircleIcon","statusTextClass","StatusSummary","string","executorStatus","hasCancel","counts","playbookId","runningCount","isNaN","failCount","passCount","statusBar","statusText","CancelButton","enableFlip","charAt","toUpperCase","available","style","margin","unavailable","ExclamationCircleIcon","console","log","no_executor","no_source","no_receptor","no_rhc","no_smart_management","loading","SyncIcon","asyncActions","a","k","SEARCH_DEBOUNCE_DELAY","WarningModal","onModalCancel","onConfirmCancel","header","hideTitle","cancelWarningVisible","setcancelWarningVisible","dismissDelay","dismissable","cancelRun","callbacks","cb","identity","fn","add","f1","f2","assertId","defaultSortBy","defaultSortDir","setSortBy","setSortDir","direction","onSort","onValueChange","debounce","onFilterChange","setPage","setPageDebounced","setPageSize","perPage","onSetPage","tagName","onPerPageSelect","onSelectOne","onSelectAll","rowToId","rowIds","row","mapValues","Object","prototype","hasOwnProperty","call","possibleIds","keys","pickBy","intersection","unused","tbodyProps","onRowClick","middleware","getRegistry","notificationsMiddleware","errorTitleKey","errorDescriptionKey","item","reducers","notifications","notificationsReducer","RebootColumn","Icon","RedoIcon","TimesIcon","issueType","advisor","vulnerabilities","IssuesColumn","sortByConfig","setSortByConfig","StatusIcon","CheckIcon","sortedIssues","sortIssue","reverse","transforms","sortable","cellWidth","issuesToSystemsIds","uniq","computeRebootStats","stats","systemsWithReboot","systemsWithoutReboot","LOAD_ENTITIES_FULFILLED","applyReducerHash","set","selectedRow","clear","columns","renderFunc","width","cell","isStatic","selectedRemediationStatus","inventoryEntitiesReducer","urlBuilder","generateStatus","playbookActivityIntentory","fqdn","col","playbookRuns","playbookRun","playbookRunSystems","playbookRunSystemDetails","executable"],"mappings":"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","file":"js/22.b8cd2f8ccbdacc2d26e1.js","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport {\n  Badge,\n  Card,\n  CardBody,\n  CardHeader,\n  CardActions,\n  CardTitle,\n  Dropdown,\n  DropdownItem,\n  KebabToggle,\n  Progress,\n  ProgressMeasureLocation,\n  ProgressVariant,\n  Split,\n  SplitItem,\n  Stack,\n  StackItem,\n} from '@patternfly/react-core';\nimport { CheckCircleIcon } from '@patternfly/react-icons';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/DateFormat';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { Link } from 'react-router-dom';\nimport { PropTypes } from 'prop-types';\nimport { patchRemediation } from '../actions.js';\nimport { generateUniqueId } from './Alerts/PlaybookToastAlerts';\nimport './PlaybookCard.scss';\n\nfunction buildName(name, id) {\n  return (\n    <Link to={`/${id}`} className=\"ins-c-playbook-card__header--name\">\n      {name}\n    </Link>\n  );\n}\n\nfunction actionWrapper(actionsList, callback, dispatch) {\n  Promise.all(\n    actionsList.map((event) => {\n      dispatch(event);\n      return event.payload;\n    })\n  ).then(callback);\n}\n\nconst PlaybookCardHeader = ({\n  remediation,\n  remediationIdx,\n  archived,\n  selector,\n  setExecuteOpen,\n  update,\n  loadRemediation,\n  getConnectionStatus,\n  downloadPlaybook,\n  permission,\n  setActiveAlert,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isArchived, setIsArchived] = useState(archived);\n  const dispatch = useDispatch();\n  const dropdownItems = [];\n\n  const archiveHandler = () => {\n    actionWrapper(\n      [patchRemediation(remediation.id, { archived: !isArchived })],\n      () => {\n        setIsArchived(!isArchived);\n        update(true);\n      },\n      dispatch\n    );\n  };\n\n  dropdownItems.push(\n    <DropdownItem\n      key=\"execute\"\n      id=\"execute\"\n      isDisabled={!permission.isReceptorConfigured || isArchived}\n      className={`${\n        (!permission.hasSmartManagement || !permission.permissions.execute) &&\n        'ins-m-not-entitled'\n      }`}\n      onClick={() => {\n        setExecuteOpen(false);\n        actionWrapper(\n          [\n            loadRemediation(remediation.id),\n            getConnectionStatus(remediation.id),\n          ],\n          () => {\n            setExecuteOpen(true);\n            setIsOpen(false);\n          },\n          dispatch\n        );\n      }}\n    >\n      Execute playbook\n    </DropdownItem>\n  );\n\n  dropdownItems.push(\n    <DropdownItem\n      key=\"download\"\n      onClick={() => {\n        downloadPlaybook(remediation.id);\n        setIsOpen(false);\n        setActiveAlert({\n          key: generateUniqueId(),\n          title: `Preparing playbook for download`,\n          description: 'Once complete, your download will start automatically.',\n          variant: 'info',\n        });\n      }}\n    >\n      Download playbook\n    </DropdownItem>\n  );\n\n  isArchived\n    ? dropdownItems.push(\n        <DropdownItem\n          key=\"restore\"\n          onClick={() => {\n            archiveHandler();\n            setIsOpen(false);\n            dispatch(\n              addNotification({\n                variant: 'info',\n                title: `Restored playbook ${remediation.name}`,\n              })\n            );\n          }}\n        >\n          Restore playbook\n        </DropdownItem>\n      )\n    : dropdownItems.push(\n        <DropdownItem\n          key=\"archive\"\n          onClick={() => {\n            archiveHandler();\n            setIsOpen(false);\n            dispatch(\n              addNotification({\n                variant: 'info',\n                title: `Archived playbook ${remediation.name}`,\n              })\n            );\n          }}\n        >\n          Archive playbook\n        </DropdownItem>\n      );\n\n  return (\n    <CardHeader className=\"ins-c-playbook-card__header\">\n      <CardActions>\n        <Dropdown\n          key=\"dropdown\"\n          id={`${remediation.id}-dropdown`}\n          isOpen={isOpen}\n          isPlain\n          onSelect={(f) => f}\n          toggle={\n            <KebabToggle\n              id={`${remediation.id}-toggle`}\n              onToggle={(isOpen) => setIsOpen(isOpen)}\n            />\n          }\n          dropdownItems={dropdownItems}\n          position={'right'}\n        />\n        <input\n          type=\"checkbox\"\n          name={`${remediation.id}-checkbox`}\n          checked={selector.getSelectedIds().includes(remediation.id)}\n          onChange={(e) => {\n            selector.props.onSelect(e, e.target.checked, remediationIdx);\n          }}\n          aria-label={`${remediation.id}-checkbox`}\n        />\n      </CardActions>\n      <CardTitle>\n        <Stack hasGutter>\n          <StackItem className=\"ins-c-playbook-card__header--title\">\n            {isArchived && (\n              <Badge isRead className=\"ins-c-playbook-card__header--badge\">\n                Archived\n              </Badge>\n            )}\n            {buildName(remediation.name, remediation.id)}\n          </StackItem>\n          <StackItem className=\"ins-c-playbook-card__header--last-modified\">\n            Last modified: <DateFormat date={remediation.updated_at} />\n          </StackItem>\n        </Stack>\n      </CardTitle>\n    </CardHeader>\n  );\n};\n\nPlaybookCardHeader.propTypes = {\n  remediation: PropTypes.object.isRequired,\n  remediationIdx: PropTypes.number.isRequired,\n  archived: PropTypes.bool.isRequired,\n  selector: PropTypes.object.isRequired,\n  setExecuteOpen: PropTypes.func.isRequired,\n  update: PropTypes.func.isRequired,\n  loadRemediation: PropTypes.func.isRequired,\n  getConnectionStatus: PropTypes.func.isRequired,\n  downloadPlaybook: PropTypes.func.isRequired,\n  permission: PropTypes.object.isRequired,\n  setActiveAlert: PropTypes.func.isRequired,\n};\n\nconst renderActionStatus = (complete, total) => {\n  return complete === total && complete !== 0 ? (\n    <div>\n      <CheckCircleIcon className=\"ins-c-remediations-success\" /> {complete} of\n      &nbsp;{total}\n    </div>\n  ) : (\n    `${complete} of ${total}`\n  );\n};\n\nconst renderProgress = (complete, total) => {\n  return complete === total && complete !== 0 ? (\n    <Progress\n      className=\"ins-c-playbook-card__progress ins-c-playbook-card__progress--success\"\n      value={100}\n      measureLocation={ProgressMeasureLocation.none}\n      variant={ProgressVariant.success}\n    />\n  ) : (\n    <Progress\n      className=\"ins-c-playbook-card__progress\"\n      value={(complete / total) * 100}\n      measureLocation={ProgressMeasureLocation.none}\n    />\n  );\n};\n\nexport const PlaybookCard = ({\n  remediation,\n  remediationIdx,\n  archived,\n  selector,\n  setExecuteOpen,\n  //executeOpen,\n  update,\n  loadRemediation,\n  getConnectionStatus,\n  downloadPlaybook,\n  permission,\n  setActiveAlert,\n}) => {\n  // const [ poll, setPoll ] = useState(executeOpen => !executeOpen);\n  // const [ curResolved, setCurResolved ] = useState(remediation.resolved_count);\n  // const selected = reduxSelector(state => state.selectedRemediation);\n  // const [ loaded, setLoaded ] = useState(false);\n  // const dispatch = useDispatch();\n\n  // useEffect(() => {\n  //     if (poll && !archived) {\n  //         const interval = setInterval(() => {\n  //             if (poll) {\n  //                 actionWrapper([\n  //                     loadRemediation(remediation.id)\n  //                 ], () => { setLoaded(true); }, dispatch);\n  //             }\n  //         }, 15000);\n  //         return () => clearInterval(interval);\n  //     }\n  // }, [ poll ]);\n\n  // useEffect(() => {\n  //     if (loaded) {\n  //         if (curResolved !== selected.remediation.resolved_count) {\n  //             setCurResolved(selected.remediation.resolved_count);\n  //         }\n  //     }\n  // }, [ loaded ]);\n\n  // useEffect(() => {\n  //     if (executeOpen) {\n  //         setPoll(false);\n  //     } else {\n  //         setPoll(true);\n  //     }\n  // }, [ executeOpen ]);\n\n  return (\n    <Card className=\"ins-c-playbook-card\" isCompact>\n      <PlaybookCardHeader\n        remediation={remediation}\n        remediationIdx={remediationIdx}\n        archived={archived}\n        selector={selector}\n        setExecuteOpen={setExecuteOpen}\n        update={update}\n        loadRemediation={loadRemediation}\n        getConnectionStatus={getConnectionStatus}\n        downloadPlaybook={downloadPlaybook}\n        permission={permission}\n        setActiveAlert={setActiveAlert}\n      />\n      <CardBody className=\"ins-c-playbook-card__body\">\n        <Split hasGutter className=\"ins-c-playbook-card__body--split\">\n          <SplitItem>\n            <Stack>\n              <StackItem className=\"ins-c-playbook-card__body--titles\">\n                Systems\n              </StackItem>\n              <StackItem className=\"ins-c-playbook-card__body--values\">\n                {remediation.system_count}\n              </StackItem>\n            </Stack>\n          </SplitItem>\n          <SplitItem>\n            <Stack>\n              <StackItem className=\"ins-c-playbook-card__body--titles\">\n                Complete actions\n              </StackItem>\n              <StackItem className=\"ins-c-playbook-card__body--values\">\n                {renderActionStatus(\n                  remediation.resolved_count,\n                  remediation.issue_count\n                )}\n              </StackItem>\n            </Stack>\n          </SplitItem>\n        </Split>\n      </CardBody>\n      {renderProgress(remediation.resolved_count, remediation.issue_count)}\n    </Card>\n  );\n};\n\nPlaybookCard.propTypes = {\n  remediation: PropTypes.object.isRequired,\n  remediationIdx: PropTypes.number.isRequired,\n  archived: PropTypes.bool.isRequired,\n  selector: PropTypes.object.isRequired,\n  setExecuteOpen: PropTypes.func.isRequired,\n  executeOpen: PropTypes.bool.isRequired,\n  update: PropTypes.func.isRequired,\n  loadRemediation: PropTypes.func.isRequired,\n  getConnectionStatus: PropTypes.func.isRequired,\n  downloadPlaybook: PropTypes.func.isRequired,\n  permission: PropTypes.object.isRequired,\n  setActiveAlert: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport {\n  Bullseye,\n  Button,\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateIcon,\n  Title,\n} from '@patternfly/react-core';\nimport PropTypes from 'prop-types';\nimport { WrenchIcon } from '@patternfly/react-icons';\nimport { appUrl } from '../../Utilities/urls';\n\nimport './EmptyRemediations.scss';\n\nexport const EmptyRemediations = ({ archivedCount, setShowArchived }) => {\n  return (\n    <Bullseye className=\"ins-c-no-remediations\">\n      <EmptyState>\n        <EmptyStateIcon icon={WrenchIcon} size=\"sm\" />\n        <Title size=\"lg\" headingLevel=\"h5\">\n          No remediation playbooks\n        </Title>\n        <EmptyStateBody>\n          Create an Ansible Playbook to remediate or mitigate vulnerabilities or\n          configuration issues.\n          <br />\n          <br />\n          To create a new remediation Playbook, select issues identified in\n          <br />\n          <a href={appUrl('advisor').toString()}>Recommendations</a>,&nbsp;\n          <a href={appUrl('compliance').toString()}>Compliance</a> or&nbsp;\n          <a href={appUrl('vulnerabilities').toString()}>Vulnerability</a>&nbsp;\n          and select\n          <br />\n          <strong>Remediate with Ansible.</strong>\n        </EmptyStateBody>\n        <br />\n        {archivedCount > 0 && (\n          <Button\n            variant=\"link\"\n            onClick={() => setShowArchived(true)}\n            ouiaId=\"show-archived-playbooks\"\n          >\n            Show {archivedCount} archived playbooks\n          </Button>\n        )}\n      </EmptyState>\n    </Bullseye>\n  );\n};\n\nEmptyRemediations.propTypes = {\n  archivedCount: PropTypes.number.isRequired,\n  setShowArchived: PropTypes.func.isRequired,\n};\n","import React, { useEffect, useContext, useState } from 'react';\nimport { useDispatch, useSelector as reduxSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Grid, GridItem, Stack, StackItem } from '@patternfly/react-core';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { Spinner } from '@redhat-cloud-services/frontend-components/Spinner';\nimport { downloadPlaybook } from '../api';\nimport {\n  getConnectionStatus,\n  runRemediation,\n  setEtag,\n  getPlaybookRuns,\n  loadRemediation,\n  getEndpoint,\n} from '../actions';\nimport { PermissionContext } from '../App';\nimport { ExecuteModal } from './Modals/ExecuteModal';\nimport { PlaybookCard } from './PlaybookCard';\nimport { EmptyRemediations } from './EmptyStates/EmptyRemediations';\nimport PlaybookToastAlerts from './Alerts/PlaybookToastAlerts';\nimport './RemediationTable.scss';\n\nfunction skeleton() {\n  return (\n    <React.Fragment>\n      <Main>\n        <Spinner centered />\n      </Main>\n    </React.Fragment>\n  );\n}\n\nconst SORTING_ITERATEES = [\n  null,\n  'name',\n  'system_count',\n  'issue_count',\n  'updated_at',\n];\n\nfunction RemediationTable({\n  remediations,\n  loadRemediations,\n  sorter,\n  filter,\n  selector,\n  pagination,\n  shouldUpdateGrid,\n  setShouldUpdateGrid,\n  setRemediationCount,\n  showArchived,\n  setShowArchived,\n}) {\n  const { value, status } = remediations;\n  let cards = [];\n\n  const permission = useContext(PermissionContext);\n  const [executeOpen, setExecuteOpen] = useState(false);\n  const [showRefreshMessage, setShowRefreshMessage] = useState(false);\n  const [activeToastAlert, setActiveToastAlert] = useState({\n    key: '',\n    title: '',\n    description: '',\n    variant: '',\n  });\n  const selectedRemediation = reduxSelector(\n    (state) => state.selectedRemediation\n  );\n  const connectionStatus = reduxSelector((state) => state.connectionStatus);\n  const runningRemediation = reduxSelector((state) => state.runRemediation);\n  const sources = reduxSelector((state) => state.sources);\n  const dispatch = useDispatch();\n\n  function load() {\n    const column = SORTING_ITERATEES[sorter.sortBy];\n    if (showArchived) {\n      loadRemediations(\n        column,\n        sorter.sortDir,\n        filter.value,\n        pagination.pageSize,\n        pagination.offset\n      );\n    } else {\n      const hideArchived = true;\n      loadRemediations(\n        column,\n        sorter.sortDir,\n        filter.value,\n        pagination.pageSize,\n        pagination.offset,\n        undefined,\n        hideArchived\n      );\n    }\n  }\n\n  useEffect(() => {\n    if (shouldUpdateGrid === true) {\n      setShouldUpdateGrid(false);\n      load();\n    }\n  }, [shouldUpdateGrid]);\n\n  useEffect(() => {\n    if (runningRemediation.status === 'changed') {\n      getConnectionStatus(selectedRemediation.remediation.id);\n      setShowRefreshMessage(true);\n    } else if (runningRemediation.status === 'fulfilled') {\n      setExecuteOpen(false);\n    }\n  }, [runningRemediation.status]);\n\n  useEffect(() => {\n    if (remediations.value) {\n      setRemediationCount(value.meta.total);\n    }\n  }, [remediations]);\n\n  // Skeleton Loading\n  if (status !== 'fulfilled') {\n    return skeleton();\n  }\n\n  if (!showArchived) {\n    cards = value?.data?.reduce((result, remediation) => {\n      if (remediation.archived !== true) {\n        result.push(remediation);\n      }\n\n      return result;\n    }, []);\n  } else {\n    cards = value?.data?.map((remediation) => remediation);\n  }\n\n  if (cards.length === 0) {\n    return (\n      <EmptyRemediations\n        archivedCount={value.data.length}\n        setShowArchived={setShowArchived}\n      />\n    );\n  }\n\n  selector.register(cards);\n\n  return (\n    <React.Fragment>\n      <Stack hasGutter>\n        <StackItem>\n          {executeOpen && (\n            <ExecuteModal\n              isOpen={executeOpen}\n              onClose={() => {\n                setShowRefreshMessage(false);\n                setExecuteOpen(false);\n              }}\n              showRefresh={showRefreshMessage}\n              remediationId={selectedRemediation.remediation.id}\n              data={connectionStatus.data}\n              etag={connectionStatus.etag}\n              isLoading={connectionStatus.status !== 'fulfilled'}\n              issueCount={selectedRemediation.remediation.issues.length}\n              remediationStatus={runningRemediation.status}\n              runRemediation={(id, etag) => {\n                dispatch(runRemediation(id, etag)).then(() =>\n                  dispatch(getPlaybookRuns(id))\n                );\n              }}\n              setEtag={(etag) => {\n                dispatch(setEtag(etag));\n              }}\n              getEndpoint={(id) => {\n                dispatch(getEndpoint(id));\n              }}\n              sources={sources}\n              activeAlert={activeToastAlert}\n              setActiveAlert={setActiveToastAlert}\n            />\n          )}\n        </StackItem>\n        <StackItem>\n          {activeToastAlert.title && (\n            <PlaybookToastAlerts\n              key={activeToastAlert.key}\n              title={activeToastAlert.title}\n              description={activeToastAlert.description}\n              variant={activeToastAlert.variant}\n            />\n          )}\n          <Grid sm={12} md={6} lg={4} hasGutter>\n            {cards.map((remediation, idx) => {\n              return (\n                <GridItem key={remediation.id}>\n                  <PlaybookCard\n                    remediation={remediation}\n                    remediationIdx={idx}\n                    archived={remediation.archived}\n                    selector={selector}\n                    setExecuteOpen={setExecuteOpen}\n                    executeOpen={executeOpen}\n                    update={setShouldUpdateGrid}\n                    loadRemediation={loadRemediation}\n                    getConnectionStatus={getConnectionStatus}\n                    downloadPlaybook={downloadPlaybook}\n                    permission={permission}\n                    setActiveAlert={setActiveToastAlert}\n                  />\n                </GridItem>\n              );\n            })}\n          </Grid>\n        </StackItem>\n      </Stack>\n    </React.Fragment>\n  );\n}\n\nRemediationTable.propTypes = {\n  remediations: PropTypes.object.isRequired,\n  loadRemediations: PropTypes.func.isRequired,\n  sorter: PropTypes.object.isRequired,\n  filter: PropTypes.object.isRequired,\n  selector: PropTypes.object.isRequired,\n  pagination: PropTypes.object.isRequired,\n  shouldUpdateGrid: PropTypes.bool.isRequired,\n  setShouldUpdateGrid: PropTypes.func.isRequired,\n  setRemediationCount: PropTypes.func.isRequired,\n  showArchived: PropTypes.bool.isRequired,\n  setShowArchived: PropTypes.func.isRequired,\n};\n\nexport default RemediationTable;\n","import React from 'react';\n\nimport { Split, SplitItem, Stack, StackItem } from '@patternfly/react-core';\nimport RemediationButton from '@redhat-cloud-services/frontend-components-remediations/RemediationButton/';\n\nimport propTypes from 'prop-types';\n\nimport { getHosts } from '../api';\n\nclass TestButtons extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allHosts: false,\n    };\n  }\n\n  isEnabled = () => localStorage.getItem('remediations:debug') === 'true';\n\n  dataProviderPing = () => ({\n    issues: [\n      {\n        id: 'test:ping',\n        description: 'Ansible ping',\n      },\n    ],\n    systems: this.state.allHosts,\n  });\n\n  dataProviderA1 = () => ({\n    issues: [\n      {\n        id: 'vulnerabilities:CVE-2019-3815',\n        description: 'CVE-2019-3815',\n      },\n    ],\n    systems: this.state.allHosts,\n  });\n\n  dataProviderA2 = () => ({\n    issues: [\n      {\n        id: 'advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE',\n        description:\n          'Bonding will not fail over to the backup link when bonding options are partially read',\n        systems: this.state.allHosts.slice(0, 5),\n      },\n    ],\n  });\n\n  dataProviderC1 = () => ({\n    issues: [\n      {\n        id: 'vulnerabilities:CVE-2019-3815',\n        description: 'CVE-2019-3815',\n      },\n      {\n        id: 'vulnerabilities:CVE-2018-16865',\n        description: 'CVE-2018-16865',\n      },\n      {\n        id: 'vulnerabilities:CVE-2017-17712',\n        description: 'CVE-2017-17712',\n      },\n    ],\n    systems: this.state.allHosts.slice(-1),\n  });\n\n  dataProviderC2 = () => ({\n    issues: [\n      {\n        id: 'advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE',\n        description:\n          'Bonding will not fail over to the backup link when bonding options are partially read',\n      },\n      {\n        id: 'advisor:rhnsd_pid_world_write|RHNSD_PID_WORLD_WRITABLE',\n        description:\n          'Code injection risk or wrong pid altering when rhnsd daemon file rhnsd.pid is world writable, due to a bug in rhnsd',\n      },\n    ],\n    systems: this.state.allHosts.slice(-1),\n  });\n\n  dataProviderC3 = () => ({\n    issues: [...this.dataProviderC1().issues, ...this.dataProviderC2().issues],\n    systems: this.state.allHosts.slice(-1),\n  });\n\n  dataProviderC4 = () => ({\n    issues: [\n      {\n        id: 'advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE',\n        description:\n          'Bonding will not fail over to the backup link when bonding options are partially read',\n      },\n      {\n        id: 'advisor:corosync_enable_rt_schedule|COROSYNC_NOT_ENABLE_RT',\n        description:\n          'Cluster nodes are frequently fenced as realtime is not enabled in corosync',\n      },\n      {\n        id: 'advisor:CVE_2017_6074_kernel|KERNEL_CVE_2017_6074',\n        description:\n          'Kernel vulnerable to local privilege escalation via DCCP module (CVE-2017-6074)',\n      },\n    ],\n    systems: this.state.allHosts.slice(-1),\n  });\n\n  dataProviderC5 = () => ({\n    issues: [\n      {\n        id: 'advisor:unsupported',\n        description: 'Unsupported issue',\n      },\n      {\n        id: 'vulnerabilities:CVE-2019-999999',\n        description: 'Unsupported issue',\n      },\n      {\n        id: 'advisor:CVE_2017_6074_kernel|KERNEL_CVE_2017_6074',\n        description:\n          'Kernel vulnerable to local privilege escalation via DCCP module (CVE-2017-6074)',\n      },\n    ],\n    systems: this.state.allHosts.slice(-1),\n  });\n\n  dataProviderD1 = () => ({\n    issues: [\n      {\n        id: 'vulnerabilities:CVE-2019-3815',\n        description: 'CVE-2019-3815',\n        systems: this.state.allHosts.slice(0, 1),\n      },\n      {\n        id: 'vulnerabilities:CVE-2018-16865',\n        description: 'CVE-2018-16865',\n        systems:\n          this.state.allHosts.length > 1\n            ? this.state.allHosts.slice(1, 2)\n            : this.state.allHosts.slice(0, 1),\n      },\n      {\n        id: 'vulnerabilities:CVE-2017-17712',\n        description: 'CVE-2017-17712',\n      },\n    ],\n    systems: this.state.allHosts,\n  });\n\n  dataProviderD2 = () => ({\n    issues: [\n      {\n        id: 'advisor:network_bond_opts_config_issue|NETWORK_BONDING_OPTS_DOUBLE_QUOTES_ISSUE',\n        description:\n          'Bonding will not fail over to the backup link when bonding options are partially read',\n        systems: this.state.allHosts.slice(0, 1),\n      },\n      {\n        id: 'advisor:rhnsd_pid_world_write|RHNSD_PID_WORLD_WRITABLE',\n        description:\n          'Code injection risk or wrong pid altering when rhnsd daemon file rhnsd.pid is world writable, due to a bug in rhnsd',\n        systems: this.state.allHosts.slice(1),\n      },\n    ],\n  });\n\n  async componentDidMount() {\n    if (this.isEnabled()) {\n      await window.insights.chrome.auth.getUser();\n      getHosts().then((hosts) =>\n        this.setState({\n          allHosts: hosts.results.map((result) => result.id),\n        })\n      );\n    }\n  }\n\n  render() {\n    if (!this.isEnabled()) {\n      return null;\n    }\n\n    const { allHosts } = this.state;\n\n    const RemediationBtn = ({ dataProvider, children, ...props }) => (\n      <SplitItem>\n        <RemediationButton\n          dataProvider={dataProvider}\n          isDisabled={!allHosts || !allHosts.length}\n          onRemediationCreated={this.props.onRemediationCreated}\n          {...props}\n        >\n          {children}\n        </RemediationButton>\n      </SplitItem>\n    );\n\n    return (\n      <React.Fragment>\n        <Stack hasGutter>\n          <StackItem>\n            <Split hasGutter>\n              {[\n                'ping',\n                'alwaysFail',\n                'failHalfTheTime',\n                'pause1m',\n                'pause5m',\n                'pause15m',\n                'pauseRandom15m',\n                'pause1h',\n                'pause6h',\n              ].map((name) => (\n                <RemediationBtn\n                  key={name}\n                  dataProvider={() => ({\n                    issues: [\n                      {\n                        id: `test:${name}`,\n                        description: `Ansible ${name} test playbook`,\n                      },\n                    ],\n                    systems: this.state.allHosts,\n                  })}\n                >\n                  {name}\n                </RemediationBtn>\n              ))}\n            </Split>\n          </StackItem>\n\n          <StackItem>\n            <Split hasGutter>\n              <RemediationBtn dataProvider={this.dataProviderA1}>\n                A1\n              </RemediationBtn>\n              <RemediationBtn dataProvider={this.dataProviderA2}>\n                A2\n              </RemediationBtn>\n\n              <RemediationBtn dataProvider={this.dataProviderC1}>\n                C1\n              </RemediationBtn>\n              <RemediationBtn dataProvider={this.dataProviderC2}>\n                C2\n              </RemediationBtn>\n              <RemediationBtn dataProvider={this.dataProviderC3}>\n                C3\n              </RemediationBtn>\n              <RemediationBtn dataProvider={this.dataProviderC4}>\n                C4 (multires)\n              </RemediationBtn>\n              <RemediationBtn dataProvider={this.dataProviderC5}>\n                C5 (unsupported)\n              </RemediationBtn>\n\n              <RemediationBtn dataProvider={this.dataProviderD1}>\n                D1\n              </RemediationBtn>\n              <RemediationBtn dataProvider={this.dataProviderD2}>\n                D2\n              </RemediationBtn>\n            </Split>\n          </StackItem>\n        </Stack>\n      </React.Fragment>\n    );\n  }\n}\n\nTestButtons.propTypes = {\n  onRemediationCreated: propTypes.func,\n};\n\nTestButtons.defaultProps = {\n  onRemediationCreated: (f) => f,\n};\n\nexport default TestButtons;\n","import React, { Component } from 'react';\n\nimport { Form, FormGroup, TextInput } from '@patternfly/react-core';\n\nclass PlanName extends Component {\n  constructor() {\n    super();\n    this.state = {\n      value: '',\n    };\n  }\n\n  handleTextInputChange = (value) => {\n    this.setState({ value });\n  };\n\n  render() {\n    const { value } = this.state;\n\n    return (\n      <React.Fragment>\n        <h2> Name your plan </h2>\n        <Form>\n          <FormGroup label=\"Plan Name\" isRequired fieldId=\"plan-name\">\n            <TextInput\n              isRequired\n              type=\"text\"\n              value={value}\n              onChange={this.handleTextInputChange}\n              placeholder=\"What do you want to call your grand plan?\"\n              aria-label=\"Name your plan\"\n              autoFocus\n            />\n          </FormGroup>\n        </Form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PlanName;\n","import React, { Component } from 'react';\n\nimport {\n  Form,\n  FormGroup,\n  Radio,\n  Select,\n  SelectOption,\n} from '@patternfly/react-core';\n\nimport './PlanSystems.scss';\n\nclass PlanSystems extends Component {\n  constructor() {\n    super();\n    this.state = {\n      systemValue: 'Select a System',\n      groupValue: 'Select a System',\n    };\n    this.onChangeSystemOptions = this.onChangeSystemOptions.bind(this);\n    this.onChangeSystemGroup = this.onChangeSystemGroup.bind(this);\n\n    // TODO: Change these to actual system groups\n    this.systemOptions = [\n      { value: 'Select a System', label: 'Select a System', disabled: true },\n      { value: 'System 1', label: 'System 1', disabled: false },\n      { value: 'System 2', label: 'System 2', disabled: false },\n    ];\n    this.groupOptions = [\n      {\n        value: 'Select a System',\n        label: 'Select a System Group',\n        disabled: true,\n      },\n      { value: 'Group 1', label: 'Group 1', disabled: false },\n      { value: 'Group 2', label: 'Group 2', disabled: false },\n    ];\n  }\n\n  onChangeSystemOptions(systemValue) {\n    this.setState({ systemValue });\n  }\n\n  onChangeSystemGroup(groupValue) {\n    this.setState({ groupValue });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <h2> Select the system(s) for the plan </h2>\n        <Form className=\"select-systems-form\">\n          <FormGroup isRequired fieldId=\"select-systems\">\n            <Radio\n              id=\"one-system\"\n              name=\"select-systems\"\n              label=\"A System\"\n              aria-label=\"A System\"\n            />\n            <Select\n              value={this.state.systemValue}\n              onChange={this.onChangeSystemOptions}\n              aria-label=\"Select Input\"\n              ouiaId=\"select\"\n            >\n              {this.systemOptions.map((option, index) => (\n                <SelectOption\n                  isDisabled={option.disabled}\n                  key={index}\n                  value={option.value}\n                  label={option.label}\n                />\n              ))}\n            </Select>\n\n            <Radio\n              id=\"system-group\"\n              name=\"select-systems\"\n              label=\"System Group\"\n              aria-label=\"System Group\"\n            />\n            <Select\n              value={this.state.groupValue}\n              onChange={this.onChangeSystemGroup}\n              aria-label=\"Select Input\"\n            >\n              {this.groupOptions.map((option, index) => (\n                <SelectOption\n                  isDisabled={option.disabled}\n                  key={index}\n                  value={option.value}\n                  label={option.label}\n                />\n              ))}\n            </Select>\n\n            <Radio\n              id=\"all-systems\"\n              name=\"select-systems\"\n              label=\"All Systems (x)\"\n              aria-label=\"All Systems\"\n            />\n          </FormGroup>\n        </Form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PlanSystems;\n","import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector as reduxSelector } from 'react-redux';\nimport { StackItem, Stack } from '@patternfly/react-core';\n\nimport * as actions from '../actions';\nimport { downloadPlaybook } from '../api';\n\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { PrimaryToolbar } from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\nimport { Wizard } from '@redhat-cloud-services/frontend-components/Wizard';\nimport RemediationTable from '../components/RemediationTable';\nimport TestButtons from '../components/TestButtons';\n\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\n\n// Wizard Steps\nimport PlanName from '../components/CreatePlanModal/ModalSteps/PlanName';\nimport PlanSystems from '../components/CreatePlanModal/ModalSteps/PlanSystems';\n\nimport './Home.scss';\n\nimport { PermissionContext } from '../App';\nimport DeniedState from '../components/DeniedState';\nimport NoReceptorBanner from '../components/Alerts/NoReceptorBanner';\nimport {\n  useFilter,\n  usePagination,\n  useSelector,\n  useSorter,\n} from '../hooks/table';\nimport ConfirmationDialog from '../components/ConfirmationDialog';\nimport keyBy from 'lodash/keyBy';\n\nfunction verifyDownload(selectedIds, data) {\n  let valid = [];\n  const byId = keyBy(data, (r) => r.id);\n\n  valid = selectedIds.reduce((result, id) => {\n    const remediation = byId[id];\n\n    if (remediation && remediation.issue_count > 0) {\n      result.push(remediation.id);\n    }\n\n    return result;\n  }, []);\n\n  return valid;\n}\n\nfunction download(selectedIds, data, dispatch) {\n  const valid = verifyDownload(selectedIds, data);\n\n  if (valid.length === 0) {\n    dispatch(\n      addNotification({\n        variant: 'danger',\n        title: `No playbooks downloaded.`,\n        description:\n          selectedIds.length > 1\n            ? 'Selected remediations do not contain any issues to remediate.'\n            : 'Selected remediation does not contain any issues to remediate.',\n      })\n    );\n  } else if (valid.length < selectedIds.length) {\n    downloadPlaybook(valid);\n    dispatch(\n      addNotification({\n        variant: 'success',\n        title:\n          valid.length > 1 ? `Downloading playbooks` : `Downloading playbook`,\n        description:\n          selectedIds.length - valid.length > 1\n            ? `${\n                selectedIds.length - valid.length\n              } remediations with no issues were not downloaded.`\n            : `1 remediation with no issues was not downloaded.`,\n      })\n    );\n  } else {\n    downloadPlaybook(valid);\n    dispatch(\n      addNotification({\n        variant: 'success',\n        title:\n          valid.length > 1 ? `Downloading playbooks` : `Downloading playbook`,\n      })\n    );\n  }\n}\n\nconst SORTING_ITERATEES = [\n  null,\n  'name',\n  'system_count',\n  'issue_count',\n  'updated_at',\n];\n\nfunction Home() {\n  document.title = 'Remediations | Red Hat Insights';\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [noReceptorBannerVisible, setNoReceptorBannerVisible] = useState(\n    localStorage.getItem('remediations:receptorBannerStatus') !== 'dismissed'\n  );\n  const sorter = useSorter(4, 'desc');\n  const filter = useFilter();\n  const selector = useSelector();\n  const pagination = usePagination();\n  const [remediationCount, setRemediationCount] = useState(0);\n  const [filterText, setFilterText] = useState('');\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [showArchived, setShowArchived] = useState(\n    false || localStorage.getItem('remediations:showArchived') === 'true'\n  );\n  const [shouldUpdateGrid, setShouldUpdateGrid] = useState(false);\n  const remediations = reduxSelector((state) => state.remediations);\n  const dispatch = useDispatch();\n  const loadRemediations = (...args) =>\n    dispatch(actions.loadRemediations(...args));\n  const deleteRemediation = (id) => dispatch(actions.deleteRemediation(id));\n\n  function load() {\n    const column = SORTING_ITERATEES[sorter.sortBy];\n    if (showArchived) {\n      loadRemediations(\n        column,\n        sorter.sortDir,\n        filter.value,\n        pagination.pageSize,\n        pagination.offset\n      );\n    } else {\n      const hideArchived = true;\n      loadRemediations(\n        column,\n        sorter.sortDir,\n        filter.value,\n        pagination.pageSize,\n        pagination.offset,\n        undefined,\n        hideArchived\n      );\n    }\n  }\n\n  useEffect(load, []);\n\n  useEffect(() => {\n    if (remediations.status === 'fulfilled' && filter.value === filterText) {\n      setShouldUpdateGrid(true);\n    }\n  }, [\n    sorter.sortBy,\n    sorter.sortDir,\n    filter.value,\n    pagination.pageSize,\n    pagination.pageDebounced,\n    showArchived,\n  ]);\n\n  useEffect(() => {\n    filter.setValue(filterText);\n  }, [filterText]);\n\n  filter.onChange(pagination.reset);\n  sorter.onChange(pagination.reset);\n\n  const selectedIds = selector.getSelectedIds();\n\n  const handleNoReceptorToggle = () => {\n    setNoReceptorBannerVisible(false);\n    localStorage.setItem('remediations:receptorBannerStatus', 'dismissed');\n  };\n\n  const sendNotification = (data) => {\n    dispatch(addNotification(data));\n  };\n\n  // const openModal = () => setIsModalOpen(true);\n\n  const onClose = (submitted) => {\n    setIsModalOpen(false);\n\n    if (submitted) {\n      sendNotification({\n        variant: 'success',\n        title: 'Wizard completed',\n        description:\n          'Congratulations! You successfully clicked through the temporary wizard placeholder!',\n      });\n    }\n  };\n\n  const onRemediationCreated = (result) => {\n    sendNotification(result.getNotification());\n    dispatch(actions.loadRemediations());\n  };\n\n  // Wizard Content\n  const ModalStepContent = [\n    <PlanName key=\"PlanName\" />,\n    <PlanSystems key=\"PlanSystems\" />,\n  ];\n\n  const activeFiltersConfig = {\n    filters: filterText.length\n      ? [{ category: 'Name', chips: [{ name: filterText }] }]\n      : [],\n    onDelete: () => {\n      setFilterText('');\n      filter.setValue('');\n    },\n  };\n\n  return (\n    <div className=\"page__remediations\">\n      <PermissionContext.Consumer>\n        {(permission) =>\n          permission.permissions.read === false ? (\n            <DeniedState />\n          ) : (\n            <React.Fragment>\n              <PageHeader>\n                <PageHeaderTitle title=\"Remediations\" />\n                <TestButtons onRemediationCreated={onRemediationCreated} />\n              </PageHeader>\n              <PrimaryToolbar\n                filterConfig={{\n                  items: [\n                    {\n                      label: 'Search playbooks',\n                      type: 'text',\n                      filterValues: {\n                        id: 'filter-by-string',\n                        key: 'filter-by-string',\n                        placeholder: 'Search playbooks',\n                        value: filterText,\n                        onChange: (_e, value) => {\n                          setFilterText(value);\n                        },\n                      },\n                    },\n                  ],\n                }}\n                bulkSelect={{\n                  items: [\n                    {\n                      title: 'Select all',\n                      onClick: (e) => selector.props.onSelect(e, true, -1),\n                    },\n                  ],\n                  checked:\n                    selectedIds.length && remediationCount > selectedIds.length\n                      ? null\n                      : selectedIds.length,\n                  count: selectedIds.length,\n                  onSelect: (isSelected, e) =>\n                    selector.props.onSelect(e, isSelected, -1),\n                }}\n                actionsConfig={{\n                  actions: [\n                    {\n                      label:\n                        selectedIds.length > 1\n                          ? 'Download playbooks'\n                          : 'Download playbook',\n                      props: {\n                        variant: 'secondary',\n                        isDisabled: !selectedIds.length,\n                      },\n                      onClick: () =>\n                        download(\n                          selectedIds,\n                          remediations.value.data,\n                          dispatch\n                        ), // TODO state for downloads?\n                    },\n                    {\n                      label: 'Delete playbooks',\n                      props: {\n                        isDisabled:\n                          !permission.permissions.write || !selectedIds.length,\n                      },\n                      onClick: () => setDialogOpen(true),\n                    },\n                    {\n                      label: showArchived\n                        ? 'Hide archived playbooks'\n                        : 'Show archived playbooks',\n                      onClick: showArchived\n                        ? () => {\n                            setShowArchived(false);\n                            selector.reset();\n                            localStorage.setItem(\n                              'remediations:showArchived',\n                              'false'\n                            );\n                          }\n                        : () => {\n                            setShowArchived(true);\n                            selector.reset();\n                            localStorage.setItem(\n                              'remediations:showArchived',\n                              'true'\n                            );\n                          },\n                    },\n                  ],\n                }}\n                pagination={{\n                  ...pagination.props,\n                  itemCount: remediationCount,\n                }}\n                activeFiltersConfig={activeFiltersConfig}\n              />\n              <Main>\n                <Stack hasGutter>\n                  {permission.hasSmartManagement &&\n                    !permission.isReceptorConfigured &&\n                    noReceptorBannerVisible && (\n                      <StackItem>\n                        <NoReceptorBanner\n                          onClose={() => handleNoReceptorToggle()}\n                        />\n                      </StackItem>\n                    )}\n                  {dialogOpen && (\n                    <ConfirmationDialog\n                      title={\n                        selectedIds.length === 1\n                          ? 'Remove playbook'\n                          : 'Remove playbooks'\n                      }\n                      text={`${selectedIds.length} ${\n                        selectedIds.length > 1 ? 'playbooks' : 'playbook'\n                      } \n                                            will be removed from Remediations. This is permanent and cannot be undone.`}\n                      confirmText={'Remove'}\n                      onClose={async (del) => {\n                        setDialogOpen(false);\n                        if (del) {\n                          await Promise.all(\n                            selectedIds.map((r) => deleteRemediation(r))\n                          );\n                          loadRemediations();\n                          selector.reset();\n                        }\n                      }}\n                    />\n                  )}\n                  <StackItem>\n                    <RemediationTable\n                      remediations={remediations}\n                      loadRemediations={loadRemediations}\n                      sorter={sorter}\n                      filter={filter}\n                      selector={selector}\n                      pagination={pagination}\n                      shouldUpdateGrid={shouldUpdateGrid}\n                      setShouldUpdateGrid={setShouldUpdateGrid}\n                      setRemediationCount={setRemediationCount}\n                      showArchived={showArchived}\n                      setShowArchived={setShowArchived}\n                    />\n                  </StackItem>\n                </Stack>\n              </Main>\n\n              <Wizard\n                isLarge\n                title=\"Create Plan\"\n                className=\"ins-c-plan-modal\"\n                onClose={onClose}\n                isOpen={isModalOpen}\n                content={ModalStepContent}\n              />\n            </React.Fragment>\n          )\n        }\n      </PermissionContext.Consumer>\n    </div>\n  );\n}\n\nexport default Home;\n","import { Switch, Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, lazy, Suspense } from 'react';\nimport Home from './routes/Home';\nconst RemediationDetails = lazy(() =>\n  import(\n    /* webpackChunkName: \"RemediationDetails\" */ './routes/RemediationDetails'\n  )\n);\nconst ActivityDetails = lazy(() =>\n  import(\n    /* webpackChunkName: \"ActivityDetails\" */ './components/ActivityDetails'\n  )\n);\nconst ExecutorDetails = lazy(() =>\n  import(\n    /* webpackChunkName: \"ExecutorDetails\" */ './components/ExecutorDetails'\n  )\n);\n\nexport const routes = {\n  home: '/',\n  details: '/:id',\n  runDetails: '/:id/:run_id',\n  executorDetails: '/:id/:run_id/:executor_id',\n};\n\nexport const Routes = () => (\n  <Suspense fallback={<Fragment />}>\n    <Switch>\n      <Route exact path={routes.home} component={Home} />\n      <Route exact path={routes.details} component={RemediationDetails} />\n      <Route\n        exact\n        path={routes.runDetails}\n        render={(props) => <ActivityDetails remediation={{}} {...props} />}\n      />\n      <Route\n        exact\n        path={routes.executorDetails}\n        render={(props) => <ExecutorDetails {...props} />}\n      />\n      <Redirect path=\"*\" to={routes.home} push />\n    </Switch>\n  </Suspense>\n);\n\nRoutes.propTypes = {\n  childProps: PropTypes.shape({\n    history: PropTypes.shape({\n      push: PropTypes.func,\n    }),\n  }),\n};\n","import React from 'react';\n\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { Spinner } from '@redhat-cloud-services/frontend-components/Spinner';\n\nconst GlobalSkeleton = () => (\n  <React.Fragment>\n    <PageHeader className=\"ins-remediations__skeleton\">\n      <PageHeaderTitle className=\"ins-s-page-header\" title=\"Remediations\" />\n    </PageHeader>\n    <Main>\n      <Spinner centered />\n    </Main>\n  </React.Fragment>\n);\n\nexport default GlobalSkeleton;\n","import PropTypes from 'prop-types';\nimport React, { createContext, Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Routes } from './Routes';\nimport './App.scss';\nimport GlobalSkeleton from './skeletons/GlobalSkeleton';\n\nimport { getIsReceptorConfigured } from './api';\n\n// Notifications\nimport NotificationsPortal from '@redhat-cloud-services/frontend-components-notifications/NotificationPortal';\n\nexport const PermissionContext = createContext();\n\nclass App extends Component {\n  unregister;\n  constructor() {\n    super();\n    this.state = {\n      readPermission: undefined,\n      writePermission: undefined,\n      executePermission: undefined,\n      isReceptorConfigured: undefined,\n      arePermissionLoaded: false,\n      hasSmartManagement: undefined,\n    };\n  }\n\n  handlePermissionUpdate = (hasRead, hasWrite, hasExecute) =>\n    this.setState({\n      readPermission: hasRead,\n      writePermission: hasWrite,\n      executePermission: hasExecute,\n      arePermissionLoaded: true,\n    });\n\n  componentWillUnmount() {\n    if (typeof this.unregister === 'function') {\n      this.unregister();\n    }\n  }\n  async componentDidMount() {\n    insights.chrome.init();\n    insights.chrome?.hideGlobalFilter?.();\n    insights.chrome.identifyApp('remediations');\n    // wait for auth first, otherwise the call to RBAC may 401\n    await window.insights.chrome.auth.getUser().then((user) =>\n      this.setState({\n        hasSmartManagement: user.entitlements.smart_management.is_entitled,\n      })\n    );\n    getIsReceptorConfigured().then((isConfigured) =>\n      this.setState({\n        isReceptorConfigured: isConfigured.data.length > 0,\n      })\n    );\n    this.unregister = insights.chrome.on('APP_NAVIGATION', (event) => {\n      if (typeof event?.domEvent?.href === 'string') {\n        this.props.history.push(\n          event.domEvent.href.replace(this.props.basename, '')\n        );\n      }\n    });\n    window.insights.chrome\n      .getUserPermissions('remediations')\n      .then((remediationsPermissions) => {\n        const permissionList = remediationsPermissions.map(\n          (permissions) => permissions.permission\n        );\n        if (\n          permissionList.includes(\n            'remediations:*:*' || 'remediations:remediation:*'\n          )\n        ) {\n          this.handlePermissionUpdate(true, true, true);\n        } else {\n          this.handlePermissionUpdate(\n            permissionList.includes(\n              'remediations:remediation:read' || 'remediations:*:read'\n            ),\n            permissionList.includes(\n              'remediations:remediation:write' || 'remediations:*:write'\n            ),\n            permissionList.includes(\n              'remediations:remediation:execute' || 'remediations:*:execute'\n            )\n          );\n        }\n      });\n  }\n\n  render() {\n    const {\n      readPermission,\n      writePermission,\n      executePermission,\n      arePermissionLoaded,\n      isReceptorConfigured,\n      hasSmartManagement,\n    } = this.state;\n\n    return arePermissionLoaded ? (\n      <PermissionContext.Provider\n        value={{\n          permissions: {\n            read: readPermission,\n            write: writePermission,\n            execute: executePermission,\n          },\n          isReceptorConfigured,\n          hasSmartManagement,\n        }}\n      >\n        <NotificationsPortal />\n        <Routes childProps={this.props} />\n      </PermissionContext.Provider>\n    ) : (\n      <GlobalSkeleton />\n    );\n  }\n}\n\nApp.propTypes = {\n  history: PropTypes.object,\n  basename: PropTypes.string.isRequired,\n};\n\n/**\n * withRouter: https://reacttraining.com/react-router/web/api/withRouter\n * connect: https://github.com/reactjs/react-redux/blob/master/docs/api.md\n *          https://reactjs.org/docs/higher-order-components.html\n */\nexport default withRouter(connect()(App));\n","export function getIssuePrefix(id) {\n  return id.split(':')[0];\n}\n\nexport function getIssueApplication({ id }) {\n  switch (getIssuePrefix(id)) {\n    case 'advisor':\n      return 'Advisor';\n    case 'ssg':\n      return 'Compliance';\n    case 'vulnerabilities':\n      return 'Vulnerability';\n    case 'patch-advisory':\n      return 'Patch';\n    default:\n      return 'Unknown';\n  }\n}\n\n/* eslint-disable camelcase */\nexport function getSystemName({ display_name, hostname, id }) {\n  if (display_name) {\n    return display_name;\n  }\n\n  if (hostname) {\n    return hostname;\n  }\n\n  return id;\n}\n\nexport function formatUser(user) {\n  return `${user.first_name} ${user.last_name}`;\n}\n\nexport function includesIgnoreCase(text, included) {\n  return text.toLowerCase().includes(included.toLowerCase());\n}\n\nexport const DATE_FORMAT = 'DD MMM YYYY, hh:mm UTC';\n","import urijs from 'urijs';\nimport { getIssuePrefix } from './model';\n\n// Get the current group since we can be mounted at two urls\nexport function getGroup() {\n  const pathName = window.location.pathname.split('/');\n\n  if (pathName[1] === 'beta') {\n    return pathName[2];\n  }\n\n  return pathName[1];\n}\n\nexport function buildInventoryUrl(systemId, tab) {\n  return appUrl('inventory').segment(systemId).segment(tab).toString();\n}\n\nexport function getInventoryTabForIssue({ id }) {\n  switch (getIssuePrefix(id)) {\n    case 'advisor':\n      return 'advisor';\n    case 'vulnerabilities':\n      return 'vulnerabilities';\n    case 'ssg':\n      return 'compliance';\n    case 'patch-advisory':\n      return 'patch';\n    default:\n      return 'general_information';\n  }\n}\n\nexport function inventoryUrlBuilder(issue) {\n  const tab = getInventoryTabForIssue(issue);\n  const base = appUrl('inventory').toString();\n\n  // intentionally not using urijs here to optimize for large number of systems\n  return (systemId) => `${base}/${systemId}?appName=${tab}`;\n}\n\nexport function buildIssueUrl(id) {\n  const parts = id.split(':');\n\n  switch (parts[0]) {\n    case 'advisor':\n      return appUrl(parts[0])\n        .segment('recommendations')\n        .segment(parts[1])\n        .toString();\n    case 'vulnerabilities':\n      return appUrl(parts[0]).segment('cves').segment(parts[1]).toString();\n    case 'patch-advisory':\n      return appUrl(parts[0])\n        .segment('advisories')\n        .segment(parts[1] + ':' + parts[2])\n        .toString();\n    default:\n      return null;\n  }\n}\n\nexport function appUrl(app) {\n  switch (app) {\n    case 'advisor':\n      return urijs(document.baseURI).segment('insights').segment('advisor');\n    case 'vulnerabilities':\n      return urijs(document.baseURI)\n        .segment('insights')\n        .segment('vulnerability');\n    case 'compliance':\n    case 'ssg':\n      return urijs(document.baseURI).segment('insights').segment('compliance');\n    case 'inventory':\n      return urijs(document.baseURI).segment(getGroup()).segment('inventory');\n    case 'patch-advisory':\n      return urijs(document.baseURI).segment('insights').segment('patch');\n    default:\n      throw new Error(`Unknown app: ${app}`);\n  }\n}\n","import { ACTION_TYPES } from './constants';\nimport {\n  remediations,\n  resolutions,\n  getRemediationStatus,\n  sources,\n  deleteSystemsFromRemediation,\n} from './api';\n\nexport const loadRemediations = (\n  sortBy = 'updated_at',\n  sortDir = 'desc',\n  filter,\n  limit,\n  offset,\n  system,\n  hideArchived\n) => ({\n  type: ACTION_TYPES.LOAD_REMEDIATIONS,\n  payload: remediations.getRemediations(\n    `${sortDir === 'desc' ? '-' : ''}${sortBy}`,\n    filter,\n    limit,\n    offset,\n    system,\n    hideArchived\n  ),\n});\n\nexport const loadRemediation = (id) => ({\n  type: ACTION_TYPES.LOAD_REMEDIATION,\n  payload: remediations.getRemediation(id),\n});\n\nexport const loadRemediationStatus = (id) => ({\n  type: ACTION_TYPES.LOAD_REMEDIATION_STATUS,\n  payload: getRemediationStatus(id), // TODO\n});\n\nexport const refreshRemediation = (id) => ({\n  type: ACTION_TYPES.REFRESH_REMEDIATION,\n  payload: remediations.getRemediation(id),\n});\n\nexport const createRemediation = (data) => ({\n  type: ACTION_TYPES.CREATE_REMEDIATIONS,\n  payload: remediations.createRemediation(data),\n});\n\nexport const patchRemediation = (id, data) => ({\n  type: ACTION_TYPES.PATCH_REMEDIATION,\n  payload: remediations.updateRemediation(id, data).then(() => data),\n});\n\nexport const deleteRemediation = (id) => ({\n  type: ACTION_TYPES.DELETE_REMEDIATION,\n  payload: remediations.deleteRemediation(id),\n});\n\nexport const deleteRemediationIssue = (id, issueId) => ({\n  type: ACTION_TYPES.DELETE_REMEDIATION_ISSUE,\n  payload: remediations\n    .deleteRemediationIssue(id, issueId)\n    .then(() => ({ id, issueId })),\n});\n\nexport const deleteRemediationIssueSystem = (id, issue, system) => ({\n  type: ACTION_TYPES.DELETE_REMEDIATION_ISSUE_SYSTEM,\n  payload: remediations\n    .deleteRemediationIssueSystem(id, issue, system)\n    .then(() => ({ id, issue, system })),\n});\n\nexport const patchRemediationIssue = (id, issue, resolution) => ({\n  type: ACTION_TYPES.PATCH_REMEDIATION_ISSUE,\n  payload: remediations.updateRemediationIssue(id, issue, { resolution }),\n});\n\nexport const getResolutions = (ruleId) => ({\n  type: ACTION_TYPES.GET_RESOLUTIONS,\n  payload: resolutions.getResolutionsForIssue(ruleId),\n});\n\nexport const getConnectionStatus = (id) => {\n  return {\n    type: ACTION_TYPES.GET_CONNECTION_STATUS,\n    payload: remediations.getRemediationConnectionStatus(id),\n  };\n};\n\nexport const runRemediation = (id, etag, exclude) => {\n  return {\n    type: ACTION_TYPES.RUN_REMEDIATION,\n    payload: remediations.runRemediation(id, {\n      headers: { 'If-Match': etag },\n      data: { exclude },\n    }),\n  };\n};\n\nexport const setEtag = (etag) => ({\n  type: ACTION_TYPES.SET_ETAG,\n  payload: { etag },\n});\n\nexport const getPlaybookRuns = (remediationId) => ({\n  type: ACTION_TYPES.GET_PLAYBOOK_RUNS,\n  payload: remediations.listPlaybookRuns(remediationId),\n});\n\nexport const cancelPlaybookRuns = (remediationId, runId) => ({\n  type: ACTION_TYPES.CANCEL_PLAYBOOK_RUNS,\n  payload: remediations.cancelPlaybookRuns(remediationId, runId),\n});\n\nexport const getPlaybookRun = (remediationId, runId) => ({\n  type: ACTION_TYPES.GET_PLAYBOOK_RUN,\n  payload: remediations.getPlaybookRunDetails(remediationId, runId),\n});\n\nexport const getPlaybookRunSystems = (\n  remediationId,\n  runId,\n  executorId,\n  limit = 50,\n  offset = 0,\n  ansibleHost\n) => ({\n  type: ACTION_TYPES.GET_PLAYBOOK_RUN_SYSTEMS,\n  payload: remediations.getPlaybookRunSystems(\n    remediationId,\n    runId,\n    executorId,\n    limit,\n    offset,\n    ansibleHost\n  ),\n});\n\nexport const getPlaybookRunSystemDetails = (\n  remediationId,\n  runId,\n  systemId\n) => ({\n  type: ACTION_TYPES.GET_PLAYBOOK_RUN_SYSTEM_DETAILS,\n  payload: remediations.getPlaybookRunSystemDetails(\n    remediationId,\n    runId,\n    systemId\n  ),\n});\n\nexport const expandInventoryTable = (id, isOpen) => ({\n  type: ACTION_TYPES.EXPAND_INVENTORY_TABLE,\n  payload: {\n    id,\n    isOpen,\n  },\n});\n\nexport const getEndpoint = (id, options = {}) => ({\n  type: ACTION_TYPES.GET_ENDPOINT,\n  payload: sources.showEndpoint(id, options),\n});\n// payload: sources.listEndpoints(id, options)\n\nexport const selectEntity = (id, selected) => ({\n  type: ACTION_TYPES.SELECT_ENTITY,\n  payload: {\n    id,\n    selected,\n  },\n});\n\nexport const deleteSystems = (systems, remediation) => ({\n  type: ACTION_TYPES.DELTE_SYSTEMS,\n  payload: deleteSystemsFromRemediation(systems, remediation),\n});\n\nexport const checkExecutable = (id) => ({\n  type: ACTION_TYPES.CHECK_EXECUTABLE,\n  payload: remediations.checkExecutable(id),\n});\n","const HEADERS = {\n  'Content-Type': 'application/json; charset=utf-8',\n};\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function checkResponse(r) {\n  if (r.ok) {\n    return r;\n  }\n\n  if (r.status === 401) {\n    window.insights.chrome.auth.logout();\n    return;\n  }\n\n  if (r.headers.get('content-type').includes('application/json')) {\n    // let's try to extract some more info\n    let data = false;\n    try {\n      data = await r.json();\n    } catch (e) {} // eslint-disable-line no-empty\n\n    if (data.errors && data.errors.length) {\n      const error = data.errors[0];\n\n      if (error.details && error.details.name) {\n        throw new HttpError(`${error.title} (${error.details.name})`);\n      }\n\n      throw new HttpError(error.title);\n    }\n  }\n\n  throw new HttpError(`Unexpected response code ${r.status}`);\n}\n\nasync function json(r) {\n  if (!r) {\n    return;\n  }\n\n  const type = r.headers.get('content-type');\n  if (!type.includes('application/json')) {\n    throw new HttpError(`Unexpected response type (${type}) returned`);\n  }\n\n  return r.json();\n}\n\nfunction doFetch(\n  uri,\n  method = 'GET',\n  data = false,\n  headers = false,\n  options = {}\n) {\n  const opts = {\n    credentials: 'same-origin',\n    method,\n    ...options,\n  };\n\n  if (headers) {\n    opts.headers = headers;\n  }\n\n  if (data) {\n    opts.body = JSON.stringify(data);\n  }\n\n  return fetch(uri, opts);\n}\n\nexport function doGet(uri) {\n  return doFetch(uri.toString()).then(checkResponse).then(json);\n}\n\nexport function doPost(uri, data) {\n  return doFetch(uri, 'POST', data, HEADERS).then(checkResponse).then(json);\n}\n\nexport function doPatch(uri, data) {\n  return doFetch(uri, 'PATCH', data, HEADERS).then(checkResponse);\n}\n\nexport function doDelete(uri) {\n  return doFetch(uri, 'DELETE').then(checkResponse);\n}\n","import { API_BASE, SOURCES_BASE } from './config';\n\nimport axios from 'axios';\nimport {\n  RemediationsApi,\n  ResolutionsApi,\n  RemediationsApiAxiosParamCreator,\n} from '@redhat-cloud-services/remediations-client';\nimport { DefaultApi } from '@redhat-cloud-services/sources-client';\n\n/*\n * TODO: replace these with generated clients\n */\nimport { doGet } from './Utilities/http';\nimport urijs from 'urijs';\n\nfunction url(...args) {\n  const url = urijs(API_BASE).segment('remediations');\n  args.forEach((segment) => url.segment(segment));\n  return url;\n}\n\nexport const getRemediationStatus = (id) => doGet(url(id, 'status'));\nexport function getHosts() {\n  return doGet('/api/inventory/v1/hosts');\n}\n/*\n * end of TODO\n */\n\nclass HttpError extends Error {\n  constructor(description) {\n    super('Error communicating with the server');\n    this.description = description;\n  }\n}\n\nasync function authInterceptor(config) {\n  await window.insights.chrome.auth.getUser();\n  return config;\n}\n\nfunction responseDataInterceptor(response) {\n  if (response.data) {\n    return { ...response.data, etag: response.headers.etag };\n  }\n\n  return response;\n}\n\nfunction interceptor401(err) {\n  if (!err) {\n    return;\n  }\n\n  if (err.response && err.response.status === 401) {\n    window.insights.chrome.auth.logout();\n    return false;\n  }\n\n  throw err;\n}\n\nfunction errorInterceptor(err) {\n  if (!err) {\n    return;\n  }\n\n  if (\n    err.response &&\n    err.response.data &&\n    err.response.data.errors &&\n    err.response.data.errors.length\n  ) {\n    const error = err.response.data.errors[0];\n\n    if (error.details && error.details.name) {\n      throw new HttpError(`${error.title} (${error.details.name})`);\n    }\n\n    throw new HttpError(error.title);\n  }\n\n  throw err;\n}\n\nconst instance = axios.create();\ninstance.interceptors.request.use(authInterceptor);\ninstance.interceptors.response.use(responseDataInterceptor);\ninstance.interceptors.response.use(null, interceptor401);\ninstance.interceptors.response.use(null, errorInterceptor);\n\nexport const remediations = new RemediationsApi(undefined, API_BASE, instance);\nexport const resolutions = new ResolutionsApi(undefined, API_BASE, instance);\nexport const sources = new DefaultApi(undefined, SOURCES_BASE, instance);\n\nexport function downloadPlaybook(selectedIds) {\n  return new Promise((resolve, reject) => {\n    const tab =\n      selectedIds.length > 1\n        ? new RemediationsApiAxiosParamCreator()\n            .downloadPlaybooks(selectedIds)\n            .then((value) => window.open(API_BASE + value.url))\n        : new RemediationsApiAxiosParamCreator()\n            .getRemediationPlaybook(selectedIds[0])\n            .then((value) => window.open(API_BASE + value.url));\n\n    if (!tab) {\n      return reject();\n    }\n\n    const handle = setInterval(() => {\n      if (tab.closed) {\n        clearInterval(handle);\n        resolve();\n      }\n    }, 500);\n  });\n}\n\nexport function getIsReceptorConfigured() {\n  return doGet(\n    `${window.location.origin}/api/sources/v2.0/endpoints?filter[receptor_node][not_nil]`\n  );\n}\n\nexport function deleteSystemsFromRemediation(systems, remediation) {\n  return Promise.all(\n    systems.flatMap((system) =>\n      system.issues.map((issue) =>\n        remediations.deleteRemediationIssueSystem(\n          remediation.id,\n          issue.id,\n          system.id\n        )\n      )\n    )\n  );\n}\n","import React from 'react';\nimport propTypes from 'prop-types';\n\nimport {\n  Alert,\n  AlertActionCloseButton,\n  Stack,\n  StackItem,\n} from '@patternfly/react-core';\n\nconst NoReceptorBanner = ({ onClose, ...props }) => {\n  return (\n    <Alert\n      variant=\"info\"\n      isInline\n      title=\"Do more with your Find it Fix it capabilities\"\n      actionClose={<AlertActionCloseButton onClose={onClose} />}\n      {...props}\n    >\n      <Stack hasGutter>\n        <StackItem>\n          Configure your systems with Cloud Connector to fix systems across all\n          your Satellite instances.\n        </StackItem>\n        <StackItem>\n          {/* eslint-disable-next-line max-len */}\n          <a href=\"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-10/html/using_cloud_connector_to_remediate_issues_across_your_red_hat_satellite_infrastructure/index\">\n            Learn how to configure\n          </a>\n        </StackItem>\n      </Stack>\n    </Alert>\n  );\n};\n\nexport default NoReceptorBanner;\n\nNoReceptorBanner.propTypes = {\n  onClose: propTypes.func,\n};\n\n/* eslint-disable no-console */\nNoReceptorBanner.defaultProps = {\n  onClose: () => undefined,\n};\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Alert,\n  AlertGroup,\n  AlertActionCloseButton,\n} from '@patternfly/react-core';\n\nconst PlaybookToastAlerts = ({\n  key,\n  title,\n  description = '',\n  variant = 'success',\n}) => {\n  const [activeAlerts, setActiveAlerts] = useState([]);\n\n  useEffect(() => {\n    addActiveAlert(key, title, description, variant);\n  }, [key]);\n\n  const removeAlert = (key) => {\n    setActiveAlerts((previousAlerts) => [\n      previousAlerts.filter((alert) => alert.key !== key),\n    ]);\n  };\n\n  const addActiveAlert = (key, title, description, variant) => {\n    setActiveAlerts((activeAlerts) => [\n      ...activeAlerts,\n      { key: key, title: title, description: description, variant: variant },\n    ]);\n  };\n\n  return (\n    <div>\n      <AlertGroup isToast>\n        {activeAlerts.map(({ key, title, description, variant }) => (\n          <Alert\n            timeout\n            isLiveRegion\n            key={key}\n            variant={variant}\n            title={title}\n            onTimeout={() => removeAlert(key)}\n            actionClose={\n              <AlertActionCloseButton\n                title={title}\n                onClose={() => removeAlert(key)}\n              />\n            }\n          >\n            {description}\n          </Alert>\n        ))}\n      </AlertGroup>\n    </div>\n  );\n};\n\nPlaybookToastAlerts.propTypes = {\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  variant: PropTypes.string,\n  key: PropTypes.string,\n};\n\nexport const generateUniqueId = () => new Date().getTime();\n\nexport default PlaybookToastAlerts;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Button, Modal, ModalVariant } from '@patternfly/react-core';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport './ConfirmationDialog.scss';\n\nexport default function ConfirmationDialog({\n  isOpen = true,\n  title = 'Remove system?',\n  text = 'This action cannot be undone',\n  confirmText = 'Remove system',\n  onClose = (f) => f,\n}) {\n  return (\n    <Modal\n      title={\n        <div>\n          <ExclamationTriangleIcon className=\"ins-m-alert ins-c-remediation__delete-icon\" />\n          {title}\n        </div>\n      }\n      className=\"remediations ins-c-dialog\"\n      variant={ModalVariant.small}\n      isOpen={isOpen}\n      onClose={() => onClose(false)}\n      isFooterLeftAligned\n      actions={[\n        <Button\n          key=\"confirm\"\n          variant=\"danger\"\n          ouiaId=\"confirm\"\n          onClick={() => onClose(true)}\n        >\n          {confirmText}\n        </Button>,\n        <Button\n          key=\"cancel\"\n          variant=\"link\"\n          ouiaId=\"cancel\"\n          onClick={() => onClose(false)}\n        >\n          Cancel\n        </Button>,\n      ]}\n    >\n      <h2>{text}</h2>\n    </Modal>\n  );\n}\n\nConfirmationDialog.propTypes = {\n  isOpen: PropTypes.bool,\n  title: PropTypes.string,\n  text: PropTypes.string,\n  confirmText: PropTypes.string,\n  onClose: PropTypes.func,\n};\n","import React from 'react';\n\nimport {\n  Title,\n  Button,\n  EmptyState,\n  EmptyStateVariant,\n  EmptyStateIcon,\n  EmptyStateBody,\n} from '@patternfly/react-core';\n\nimport { LockIcon } from '@patternfly/react-icons';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\n\nconst DeniedState = () => {\n  return (\n    <React.Fragment>\n      <PageHeader>\n        <PageHeaderTitle title=\"Remediations\" />\n      </PageHeader>\n      <Main>\n        <EmptyState\n          variant={EmptyStateVariant.full}\n          className=\"ins-c-remediaitions-denied-state\"\n        >\n          <EmptyStateIcon icon={LockIcon} />\n          <Title headingLevel=\"h5\" size=\"lg\">\n            You do not have access to Remediations\n          </Title>\n          <EmptyStateBody>\n            Contact your organization administrator(s) for more information.\n          </EmptyStateBody>\n          {document.referrer ? (\n            <Button variant=\"primary\" onClick={() => history.back()}>\n              Return to previous page\n            </Button>\n          ) : (\n            <Button variant=\"primary\" component=\"a\" href=\".\">\n              Go to landing page\n            </Button>\n          )}\n        </EmptyState>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nexport default DeniedState;\n","import React from 'react';\nimport {\n  Title,\n  EmptyState,\n  EmptyStateIcon,\n  EmptyStateBody,\n} from '@patternfly/react-core';\nimport DesktopIcon from '@patternfly/react-icons/dist/js/icons/desktop-icon';\nimport PropTypes from 'prop-types';\n\nconst EmptyExecutePlaybookState = () => {\n  return (\n    <EmptyState>\n      <EmptyStateIcon icon={DesktopIcon} />\n      <Title headingLevel=\"h4\" size=\"lg\">\n        This playbook has no systems associated with it.\n      </Title>\n      <EmptyStateBody>\n        Add at least one system and action to this playbook to use remote\n        execution.\n      </EmptyStateBody>\n    </EmptyState>\n  );\n};\n\nexport default EmptyExecutePlaybookState;\n\nEmptyExecutePlaybookState.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","/* eslint-disable camelcase */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button,\n  Modal,\n  ModalVariant,\n  TextContent,\n  Text,\n  TextVariants,\n  Alert,\n  Tooltip,\n  ExpandableSection,\n  List,\n  ListItem,\n} from '@patternfly/react-core';\nimport { downloadPlaybook } from '../../api';\nimport { styledConnectionStatus } from '../statusHelper';\nimport {\n  TableHeader,\n  Table,\n  TableBody,\n  TableVariant,\n} from '@patternfly/react-table';\nimport { generateUniqueId } from '../Alerts/PlaybookToastAlerts';\nimport { Skeleton } from '@redhat-cloud-services/frontend-components/Skeleton';\nimport { ExternalLinkAltIcon } from '@patternfly/react-icons';\nimport './ExecuteModal.scss';\nimport EmptyExecutePlaybookState from '../EmptyExecutePlaybookState';\n\nexport const ExecuteModal = ({\n  isOpen,\n  onClose,\n  showRefresh,\n  isLoading,\n  data,\n  remediationId,\n  remediationName,\n  issueCount,\n  runRemediation,\n  etag,\n  getEndpoint,\n  sources,\n  setEtag,\n  setActiveAlert,\n}) => {\n  const [isUserEntitled, setIsUserEntitled] = useState(false);\n  const [connected, setConnected] = useState([]);\n  const [disconnected, setDisconnected] = useState([]);\n  const isDebug = () => localStorage.getItem('remediations:debug') === 'true';\n\n  useEffect(() => {\n    window.insights.chrome.auth\n      .getUser()\n      .then((user) =>\n        setIsUserEntitled(user.entitlements.smart_management.is_entitled)\n      );\n  }, []);\n\n  const combineStatuses = (status, availability) =>\n    status === 'connected'\n      ? availability\n        ? availability.availability_status\n        : 'loading'\n      : status;\n\n  useEffect(() => {\n    const [con, dis] = data.reduce(\n      ([pass, fail], e) =>\n        e && e.connection_status === 'connected'\n          ? [[...pass, { ...e }], fail]\n          : [pass, [...fail, e]],\n      [[], []]\n    );\n    setConnected(con);\n    setDisconnected(dis);\n    con.map((c) => c.endpoint_id && getEndpoint(c.endpoint_id));\n  }, [data]);\n\n  useEffect(() => {\n    const isAvailable = (connectionStatus, sourcesStatus, data) =>\n      combineStatuses(\n        connectionStatus,\n        sourcesStatus === 'fulfilled' && data\n      ) === 'available';\n\n    const updatedData = data.map((e) => ({\n      ...e,\n      connection_status: combineStatuses(\n        e.connection_status,\n        sources.status === 'fulfilled' && sources.data[`${e.endpoint_id}`]\n      ),\n    }));\n\n    if (sources.status === 'fulfilled') {\n      const [con, dis] = updatedData.reduce(\n        ([pass, fail], e) =>\n          isAvailable(\n            e.connection_status,\n            sources.status,\n            sources.data[`${e.endpoint_id}`]\n          )\n            ? [[...pass, { ...e }], fail]\n            : [pass, [...fail, { ...e }]],\n        [[], []]\n      );\n      setConnected(con);\n      setDisconnected(dis);\n    }\n  }, [sources]);\n\n  const generateRowsStatus = (con) => {\n    return styledConnectionStatus(\n      con.connection_status,\n      sources.status === 'fulfilled' &&\n        sources.data[`${con.endpoint_id}`] &&\n        sources.data[`${con.endpoint_id}`].availability_status_error\n    );\n  };\n\n  const rows = [...connected, ...disconnected].map((con) => ({\n    cells: [\n      {\n        title: con.executor_name ? (\n          <Tooltip content={`${con.executor_name}`}>\n            <span>\n              {con.executor_name.length > 25\n                ? `${con.executor_name.slice(0, 22)}...`\n                : con.executor_name}\n            </span>\n          </Tooltip>\n        ) : (\n          'Direct connection'\n        ),\n      },\n      con.system_count,\n      isUserEntitled && {\n        title: generateRowsStatus(con),\n      },\n    ],\n  }));\n  const connectedCount = connected.reduce((acc, e) => e.system_count + acc, 0);\n  const systemCount = data.reduce((acc, e) => e.system_count + acc, 0);\n\n  const pluralize = (number, str) =>\n    number > 1 ? `${number} ${str}s` : `${number} ${str}`;\n\n  return (\n    <Modal\n      className=\"remediations ins-c-execute-modal\"\n      variant={isDebug() ? ModalVariant.large : ModalVariant.small}\n      title={'Execute playbook'}\n      isOpen={isOpen}\n      onClose={onClose}\n      isFooterLeftAligned\n      actions={\n        systemCount !== 0\n          ? [\n              <Button\n                key=\"confirm\"\n                variant=\"primary\"\n                ouiaId=\"etag\"\n                isDisabled={connected.length === 0}\n                onClick={() => {\n                  runRemediation(\n                    remediationId,\n                    etag,\n                    disconnected.map((e) => e.executor_id).filter((e) => e)\n                  );\n                  setActiveAlert({\n                    key: generateUniqueId(),\n                    title: `Executing playbook ${remediationName}`,\n                    description: `View results in the <b>Activity tab</b>`,\n                    variant: 'success',\n                  });\n                }}\n              >\n                {isLoading\n                  ? 'Execute playbook'\n                  : `Execute playbook on ${pluralize(\n                      connectedCount,\n                      'system'\n                    )}`}\n              </Button>,\n              <Button\n                key=\"download\"\n                variant=\"secondary\"\n                ouiaId=\"download-playbook\"\n                onClick={() => {\n                  downloadPlaybook(remediationId);\n                  setActiveAlert({\n                    key: generateUniqueId(),\n                    title: 'Preparing playbook for download',\n                    description:\n                      'Once complete, your download will start automatically.',\n                    variant: 'info',\n                  });\n                }}\n              >\n                Download playbook\n              </Button>,\n              isDebug() ? (\n                <Button\n                  key=\"reset-etag\"\n                  onClick={() => setEtag('test')}\n                  ouiaId=\"reset-etag\"\n                >\n                  Reset etag\n                </Button>\n              ) : null,\n            ]\n          : [\n              <Button\n                key=\"close-modal\"\n                onClick={() => onClose()}\n                variant=\"primary\"\n              >\n                Close\n              </Button>,\n            ]\n      }\n    >\n      <div className=\"ins-c-execute-modal__body\">\n        {showRefresh ? (\n          <Alert\n            variant=\"warning\"\n            isInline\n            title=\"The connection status of systems associated with this Playbook has changed. Please review again.\"\n          />\n        ) : null}\n        <TextContent>\n          {isLoading ? (\n            <Skeleton size=\"lg\" />\n          ) : (\n            <Text component={TextVariants.p}>\n              Playbook contains <b>{`${pluralize(issueCount, 'action')}`}</b>\n              &nbsp;affecting\n              <b> {`${pluralize(systemCount, 'system')}.`} </b>\n            </Text>\n          )}\n          <Text>\n            <ExpandableSection toggleText=\"About remote execution with Cloud connector\">\n              Playbooks can be executed on systems which:\n              <List>\n                <ListItem>\n                  Are connected to Insights via a Satellite instance which has\n                  Receptor/Cloud Connector enabled, or <br />\n                  <Button\n                    className=\"pf-u-p-0\"\n                    key=\"download\"\n                    variant=\"link\"\n                    isInline\n                    component=\"span\"\n                    // eslint-disable-next-line max-len\n                    href=\"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-10/html/remediating_issues_across_your_red_hat_satellite_infrastructure_using_red_hat_insights/configuring-your-satellite-infrastructure-to-communicate-with-insights\"\n                    rel=\"noreferrer\"\n                    target=\"_blank\"\n                  >\n                    How to configure Receptor/Cloud Connector on Red Hat\n                    Satellite &nbsp;\n                    <ExternalLinkAltIcon />\n                  </Button>\n                </ListItem>\n                <ListItem>\n                  Are directly connected to Insights via Red Hat connector, and\n                  Cloud Connector is enabled <br />\n                  <Button\n                    className=\"pf-u-p-0\"\n                    key=\"configure\"\n                    variant=\"link\"\n                    isInline\n                    component=\"span\"\n                    // eslint-disable-next-line max-len\n                    href=\"#\"\n                    rel=\"noreferrer\"\n                    target=\"_blank\"\n                  >\n                    How to enable Cloud Connector with Red Hat connect &nbsp;\n                    <ExternalLinkAltIcon />\n                  </Button>\n                </ListItem>\n              </List>\n            </ExpandableSection>\n          </Text>\n          <Text component={TextVariants.p}>\n            Executed Ansible Playbooks run on eligible systems with Cloud\n            Connector. The playbook will be pushed immediately after selecting\n            “Execute playbook”. If the playbook has “Auto reboot” on, systems\n            requiring reboot to complete an action will reboot.\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"configure\"\n            variant=\"link\"\n            isInline\n            component=\"span\"\n            // eslint-disable-next-line max-len\n            href=\"#\"\n            rel=\"noreferrer\"\n            target=\"_blank\"\n          >\n            Learn more about Cloud Connector &nbsp;\n            <ExternalLinkAltIcon />\n          </Button>\n          {rows.length !== 0 && (\n            <Text component={TextVariants.h4}>\n              Connection status of systems\n            </Text>\n          )}\n        </TextContent>\n        {isLoading && <Skeleton size=\"lg\" />}\n        {!isLoading && systemCount !== 0 && (\n          <Table\n            variant={TableVariant.compact}\n            aria-label=\"Systems\"\n            cells={[\n              {\n                title: 'Connection type',\n                value: 'type',\n              },\n              {\n                title: 'Systems',\n                value: 'count',\n              },\n              isUserEntitled && {\n                title: 'Connection status',\n                value: 'status',\n              },\n            ]}\n            rows={rows}\n          >\n            <TableHeader />\n            <TableBody />\n          </Table>\n        )}\n        {!isLoading && systemCount === 0 && <EmptyExecutePlaybookState />}\n      </div>\n    </Modal>\n  );\n};\n\nExecuteModal.propTypes = {\n  isOpen: PropTypes.bool,\n  onClose: PropTypes.func,\n  showRefresh: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  data: PropTypes.array,\n  remediationId: PropTypes.string,\n  remediationName: PropTypes.string,\n  issueCount: PropTypes.number,\n  runRemediation: PropTypes.func,\n  etag: PropTypes.string,\n  setEtag: PropTypes.func,\n  getEndpoint: PropTypes.func,\n  sources: PropTypes.object,\n  setActiveAlert: PropTypes.func,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button,\n  Modal,\n  ModalVariant,\n  Split,\n  SplitItem,\n  Stack,\n  StackItem,\n} from '@patternfly/react-core';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { pluralize } from '../statusHelper';\n\nconst RemoveSystemModal = ({\n  isOpen,\n  selected,\n  onConfirm,\n  onClose,\n  remediationName,\n}) => (\n  <Modal\n    variant={ModalVariant.medium}\n    title={`Remove selected systems from ${remediationName}`}\n    isOpen={isOpen}\n    onClose={onClose}\n    appendTo={document.getElementsByClassName('remediations')[0]}\n    actions={[\n      <Button\n        key=\"remove-confirm\"\n        variant=\"danger\"\n        onClick={onConfirm}\n        ouiaId=\"confirm-delete\"\n      >\n        Remove\n      </Button>,\n      <Button key=\"remove-cancel\" variant=\"link\" onClick={onClose}>\n        Cancel\n      </Button>,\n    ]}\n  >\n    <Split hasGutter>\n      <SplitItem>\n        <ExclamationTriangleIcon size=\"xl\" className=\"ins-m-alert\" />\n      </SplitItem>\n      <SplitItem isFilled>\n        <Stack hasGutter>\n          <StackItem>\n            This action will remove{' '}\n            <b>\n              {selected.length === 1\n                ? selected[0]?.display_name\n                : selected.length}\n            </b>{' '}\n            {pluralize(selected.length, 'system')} from <b>{remediationName}</b>{' '}\n            Remediation.\n          </StackItem>\n          <StackItem>\n            Removing {pluralize(selected.length, 'system')} from this\n            Remediation will remove it from all associated issues in{' '}\n            <b>{remediationName}</b> Remediation. Be careful as you can end up\n            with Remediation without any systems.\n          </StackItem>\n        </Stack>\n      </SplitItem>\n    </Split>\n  </Modal>\n);\n\nRemoveSystemModal.propTypes = {\n  selected: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string,\n      display_name: PropTypes.string,\n    })\n  ).isRequired,\n  remediationName: PropTypes.string.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default RemoveSystemModal;\n","export const calculateChecked = (rows = [], selected) =>\n  rows.every(({ id }) => selected?.has(id))\n    ? rows.length > 0\n    : rows.some(({ id }) => selected?.has(id)) && null;\n\nexport const calculateSystems = (remediation) =>\n  remediation?.issues?.reduce((acc, curr) => {\n    curr?.systems?.forEach((host) => {\n      const found = acc.find(({ id }) => host.id === id);\n      const issue = {\n        id: curr.id,\n        resolution: curr.resolution,\n        description: curr.description,\n      };\n      if (found) {\n        found.issues = [\n          ...found.issues,\n          { ...issue, resolved: found.resolved },\n        ];\n        found.rebootRequired = found.issues.some(\n          ({ resolution }) => resolution?.needs_reboot\n        );\n      } else {\n        acc.push({\n          ...host,\n          issues: [{ ...issue, resolved: host.resolved }],\n          rebootRequired: curr?.resolution?.needs_reboot,\n        });\n      }\n    });\n    return acc;\n  }, []) || [];\n\nexport const fetchInventoryData = async (\n  { page = 0, ...config } = {},\n  systems,\n  getEntities\n) => {\n  const currSystems = systems.filter(({ display_name }) =>\n    config.filters?.hostnameOrId\n      ? display_name.includes(config.filters.hostnameOrId)\n      : true\n  );\n  const data = await getEntities(\n    currSystems\n      .slice((page - 1) * config.per_page, page * config.per_page)\n      .map(({ id }) => id),\n    { ...config, hasItems: true },\n    true\n  );\n  return {\n    ...data,\n    page,\n    results: data.results.map((host) => ({\n      ...currSystems.find(({ id }) => id === host.id),\n      ...host,\n    })),\n    total: currSystems.length,\n  };\n};\n","import React, { useEffect, useRef, useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/Inventory';\nimport { remediationSystems } from '../../store/reducers';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport ReducerRegistry from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport { Provider, useSelector, useDispatch } from 'react-redux';\nimport { Button } from '@patternfly/react-core';\nimport { deleteSystems, selectEntity, loadRemediation } from '../../actions';\nimport './SystemsTable.scss';\nimport RemoveSystemModal from './RemoveSystemModal';\nimport { generateUniqueId } from '../Alerts/PlaybookToastAlerts';\nimport {\n  calculateChecked,\n  calculateSystems,\n  fetchInventoryData,\n} from './helpers';\n\nconst SystemsTableWrapper = ({\n  remediation,\n  registry,\n  refreshRemediation,\n  setActiveAlert,\n}) => {\n  const [isOpen, setIsOpen] = useState();\n  const systemsRef = useRef();\n  const getEntitiesRef = useRef(() => undefined);\n  const activeSystem = useRef(undefined);\n  const dispatch = useDispatch();\n  const selected = useSelector(\n    ({ entities }) => entities?.selected || new Map()\n  );\n  const loaded = useSelector(({ entities }) => entities?.loaded);\n  const rows = useSelector(({ entities }) => entities?.rows);\n\n  const onConfirm = () => {\n    (async () => {\n      const selectedSystems =\n        selected.size > 0\n          ? Array.from(selected, ([, value]) => value)\n          : [\n              {\n                ...activeSystem.current,\n              },\n            ];\n      const action = deleteSystems(selectedSystems, remediation);\n      dispatch(action);\n      await action.payload;\n      refreshRemediation();\n    })();\n    activeSystem.current = undefined;\n    setActiveAlert({\n      key: generateUniqueId(),\n      title: `Removed ${selected.size} ${\n        selected.size > 1 ? 'systems' : 'system'\n      } from playbook`,\n      description: '',\n      variant: 'success',\n    });\n    setIsOpen(false);\n  };\n\n  useEffect(() => {\n    systemsRef.current = calculateSystems(remediation);\n  }, [remediation.id]);\n\n  return (\n    <InventoryTable\n      variant=\"compact\"\n      showTags\n      noDetail\n      hideFilters={{\n        all: true,\n        name: false,\n      }}\n      tableProps={{\n        canSelectAll: false,\n      }}\n      bulkSelect={{\n        count: selected ? selected.size : 0,\n        items: [\n          {\n            title: 'Select none (0)',\n            onClick: () => {\n              dispatch(selectEntity(-1, false));\n            },\n          },\n          {\n            ...(loaded && rows && rows.length > 0\n              ? {\n                  title: `Select page (${rows.length})`,\n                  onClick: () => {\n                    dispatch(selectEntity(0, true));\n                  },\n                }\n              : {}),\n          },\n        ],\n        checked: calculateChecked(rows, selected),\n        onSelect: (value) => {\n          dispatch(selectEntity(0, value));\n        },\n      }}\n      getEntities={async (_i, config) =>\n        fetchInventoryData(config, systemsRef.current, getEntitiesRef.current)\n      }\n      onLoad={({ INVENTORY_ACTION_TYPES, mergeWithEntities, api }) => {\n        getEntitiesRef.current = api?.getEntities;\n        registry?.register?.({\n          ...mergeWithEntities(remediationSystems(INVENTORY_ACTION_TYPES)),\n        });\n      }}\n      actions={[\n        {\n          title: 'Remove system',\n          onClick: (_event, _index, { id, display_name: displayName }) => {\n            activeSystem.current = {\n              id,\n              displayName,\n              issues: remediation.issues.filter((issue) =>\n                issue.systems.find(({ id: systemId }) => systemId === id)\n              ),\n            };\n            setIsOpen(true);\n          },\n        },\n      ]}\n    >\n      {loaded && (\n        <Button\n          variant=\"secondary\"\n          onClick={() => setIsOpen(true)}\n          isDisabled={selected.size === 0}\n        >\n          Remove system\n        </Button>\n      )}\n      <RemoveSystemModal\n        isOpen={isOpen}\n        onConfirm={onConfirm}\n        selected={\n          selected.size > 0\n            ? Array.from(selected, ([, value]) => value)\n            : [activeSystem.current]\n        }\n        onClose={() => {\n          activeSystem.current = undefined;\n          setIsOpen(false);\n        }}\n        remediationName={remediation.name}\n      />\n    </InventoryTable>\n  );\n};\n\nconst SystemsTable = (props) => {\n  const dispatch = useDispatch();\n  const [registry, setRegistry] = useState();\n  useEffect(() => {\n    setRegistry(\n      new ReducerRegistry(\n        {\n          selected: new Map(),\n        },\n        [promiseMiddleware]\n      )\n    );\n  }, []);\n\n  return registry ? (\n    <Provider store={registry.store}>\n      <SystemsTableWrapper\n        registry={registry}\n        refreshRemediation={() =>\n          dispatch(loadRemediation(props.remediation.id))\n        }\n        setActiveAlert={props.setActiveAlert}\n        {...props}\n      />\n    </Provider>\n  ) : (\n    <Fragment />\n  );\n};\n\nSystemsTable.propTypes = {\n  remediation: PropTypes.shape({\n    id: PropTypes.string,\n    issues: PropTypes.arrayOf(\n      PropTypes.shape({\n        systems: PropTypes.arrayOf(\n          PropTypes.shape({\n            id: PropTypes.string,\n            display_name: PropTypes.string,\n            resolved: PropTypes.bool,\n          })\n        ),\n      })\n    ),\n  }),\n};\n\nSystemsTableWrapper.propTypes = {\n  ...SystemsTable.propTypes,\n  registry: PropTypes.shape({\n    register: PropTypes.func,\n  }),\n  refreshRemediation: PropTypes.func,\n  setActiveAlert: PropTypes.func,\n};\n\nexport default SystemsTable;\n","import React from 'react';\n\nimport {\n  CheckCircleIcon,\n  ExclamationCircleIcon,\n  ExternalLinkAltIcon,\n  TimesCircleIcon,\n  InProgressIcon,\n  SyncIcon,\n} from '@patternfly/react-icons';\nimport {\n  Button,\n  Flex,\n  FlexItem,\n  TextContent,\n  Text,\n  TextVariants,\n  Tooltip,\n} from '@patternfly/react-core';\n\nimport { CancelButton } from '../containers/CancelButton';\n\nimport { capitalize } from '../Utilities/utils';\n\nconst connectorUrl = () =>\n  insights.chrome.isBeta()\n    ? `${window.location.origin}/beta/settings/connector`\n    : `${window.location.origin}/settings/connector`;\n\nexport const normalizeStatus = (status) =>\n  ({\n    running: 'running',\n    pending: 'running',\n    acked: 'running',\n    failure: 'failure',\n    canceled: 'canceled',\n    success: 'success',\n  }[status]);\n\nexport const renderStatusIcon = (status) =>\n  ({\n    running: (\n      <InProgressIcon\n        className=\"ins-c-remediations-running\"\n        aria-label=\"connection status\"\n      />\n    ),\n    success: (\n      <CheckCircleIcon\n        className=\"ins-c-remediations-success\"\n        aria-label=\"connection status\"\n      />\n    ),\n    failure: (\n      <TimesCircleIcon\n        className=\"ins-c-remediations-failure\"\n        aria-label=\"connection status\"\n      />\n    ),\n    canceled: (\n      <TimesCircleIcon\n        className=\"ins-c-remediations-canceled\"\n        aria-label=\"connection status\"\n      />\n    ),\n  }[status]);\n\nexport const renderStatus = (status, text) =>\n  ({\n    running: (\n      <Flex\n        className=\"ins-c-remediations-running\"\n        spacer={{ default: 'space-items-sm' }}\n      >\n        <FlexItem>\n          <b>{text || 'Running'}</b>\n        </FlexItem>\n        <FlexItem>\n          <InProgressIcon aria-label=\"connection status: running\" />\n        </FlexItem>\n      </Flex>\n    ),\n    success: (\n      <Flex\n        className=\"ins-c-remediations-success\"\n        spacer={{ default: 'space-items-sm' }}\n      >\n        <FlexItem>\n          <b>{text || 'Success'}</b>\n        </FlexItem>\n        <FlexItem>\n          <CheckCircleIcon aria-label=\"connection status: success\" />\n        </FlexItem>\n      </Flex>\n    ),\n    failure: (\n      <Flex\n        className=\"ins-c-remediations-failure\"\n        spacer={{ default: 'space-items-sm' }}\n      >\n        <FlexItem>\n          <b>{text || 'Failed'}</b>\n        </FlexItem>\n        <FlexItem>\n          <TimesCircleIcon aria-label=\"connection status: failed\" />\n        </FlexItem>\n      </Flex>\n    ),\n    canceled: (\n      <Flex\n        className=\"ins-c-remediations-canceled\"\n        spacer={{ default: 'space-items-sm' }}\n      >\n        <FlexItem>\n          <b>{text || 'Canceled'}</b>\n        </FlexItem>\n        <FlexItem>\n          <TimesCircleIcon aria-label=\"connection status: canceled\" />\n        </FlexItem>\n      </Flex>\n    ),\n  }[status]);\n\nconst statusTextClass = 'ins-c-remediations-status-text';\nexport const statusText = (executorStatus) =>\n  ({\n    running: (\n      <b className={`${statusTextClass} ins-c-remediations-running`}>Running</b>\n    ),\n    pending: (\n      <b className={`${statusTextClass} ins-c-remediations-running`}>Pending</b>\n    ),\n    acked: (\n      <b className={`${statusTextClass} ins-c-remediations-running`}> Acked </b>\n    ),\n    success: (\n      <b className={`${statusTextClass} ins-c-remediations-success`}>\n        Succeeded\n      </b>\n    ),\n    failure: (\n      <b className={`${statusTextClass} ins-c-remediations-failure`}>Failed</b>\n    ),\n    canceled: (\n      <b className={`${statusTextClass} ins-c-remediations-canceled`}>\n        Canceled\n      </b>\n    ),\n  }[executorStatus]);\n\nexport const pluralize = (number, str) =>\n  number === 1 ? `${number} ${str}` : `${number} ${str}s`;\n\nexport const StatusSummary = ({\n  executorStatus,\n  permission,\n  hasCancel,\n  counts,\n  remediationName,\n  remediationId,\n  playbookId,\n}) => {\n  const runningCount =\n    counts.acked && !counts.acked.isNaN()\n      ? counts.running + counts.pending + counts.acked\n      : counts.running + counts.pending;\n  const failCount = counts.failure + counts.canceled;\n  const passCount = counts.success;\n  const isDebug = () => localStorage.getItem('remediations:debug') === 'true';\n\n  const statusBar = (\n    <Flex className=\"ins-c-remediations-status-bar\">\n      {executorStatus && <FlexItem>{statusText(executorStatus)}</FlexItem>}\n      <FlexItem>{renderStatus('success', `${passCount}`)}</FlexItem>\n      <FlexItem>{renderStatus('failure', `${failCount}`)}</FlexItem>\n      <FlexItem>{renderStatus('running', `${runningCount}`)}</FlexItem>\n      {isDebug() &&\n        hasCancel &&\n        permission.permissions.execute &&\n        executorStatus &&\n        normalizeStatus(executorStatus) === 'running' && (\n          <FlexItem>\n            <CancelButton\n              remediationName={remediationName}\n              remediationId={remediationId}\n              playbookId={playbookId}\n            />\n          </FlexItem>\n        )}\n    </Flex>\n  );\n\n  if (executorStatus) {\n    return (\n      <Tooltip\n        position=\"right\"\n        className=\"ins-c-status-tooltip\"\n        enableFlip\n        content={\n          <div>\n            Run: {capitalize(executorStatus)} <br />\n            Success: {pluralize(counts.success, 'system')} <br />\n            Failed: {pluralize(counts.failure, 'system')} <br />\n            Canceled: {pluralize(counts.canceled, 'system')} <br />\n            {counts.acked && !counts.acked.isNaN()\n              ? `Pending, Running, Acked: ${pluralize(\n                  counts.pending + counts.running + counts.acked,\n                  'system'\n                )}`\n              : `Pending, Running: ${pluralize(\n                  counts.pending + counts.running,\n                  'system'\n                )}`}\n          </div>\n        }\n      >\n        {statusBar}\n      </Tooltip>\n    );\n  }\n\n  return statusBar;\n};\n\nexport const styledConnectionStatus = (status, err) =>\n  ({\n    connected: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          <CheckCircleIcon\n            className=\"ins-c-remediations-reboot-check-circle ins-c-remediations-connection-status\"\n            aria-label=\"connection status\"\n          />\n          Ready\n        </Text>\n      </TextContent>\n    ),\n    // TODO: delete?\n    available: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          <CheckCircleIcon\n            className=\"ins-c-remediations-reboot-check-circle ins-c-remediations-connection-status\"\n            aria-label=\"connection status\"\n          />\n          Ready\n        </Text>\n      </TextContent>\n    ),\n    disconnected: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          Connection issue\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Receptor not responding\n          </Text>\n          {/* <Button\n                    style={ { padding: '0px' } }\n                    key=\"troubleshoot\"\n                    // eslint-disable-next-line no-console\n                    variant='link' onClick={ () => console.log('TODO: add link') }>\n                    Troubleshoot\n                </Button> */}\n        </Text>\n      </TextContent>\n    ),\n    // TODO: delete?\n    unavailable: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          <ExclamationCircleIcon\n            className=\"ins-c-remediations-failure ins-c-remediations-connection-status\"\n            aria-label=\"connection status\"\n          />\n          Connection issue\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            {err ? err : 'Cloud Connector not responding'}\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"troubleshoot\"\n            // eslint-disable-next-line no-console\n            variant=\"link\"\n            onClick={() => console.log('TODO: add link')}\n          >\n            Troubleshoot\n          </Button>\n        </Text>\n      </TextContent>\n    ),\n    // eslint-disable-next-line camelcase\n    no_executor: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          Cannot remediate - Direct connection.\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Connect your systems to Satellite to automatically remediate.\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"download\"\n            variant=\"link\"\n            component=\"a\"\n            // eslint-disable-next-line max-len\n            href=\"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-10/html/remediating_issues_across_your_red_hat_satellite_infrastructure_using_red_hat_insights/configuring-your-satellite-infrastructure-to-communicate-with-insights\"\n          >\n            Learn how to connect &nbsp;\n            <ExternalLinkAltIcon />\n          </Button>\n        </Text>\n      </TextContent>\n    ),\n    // eslint-disable-next-line camelcase\n    no_source: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          Cannot remediate - Satellite not configured\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Satellite not registered for Playbook execution\n          </Text>\n          {/* <Button\n                    style={ { padding: '0px' } }\n                    key=\"configure\"\n                    // eslint-disable-next-line no-console\n                    variant='link' onClick={ () => console.log('TODO: add link') }>\n                    Learn how to register Satellite\n                </Button> */}\n        </Text>\n      </TextContent>\n    ),\n    // eslint-disable-next-line camelcase\n    no_receptor: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          <ExclamationCircleIcon\n            className=\"ins-c-remediations-failure ins-c-remediations-connection-status\"\n            aria-label=\"connection status\"\n          />\n          Cannot remediate - Cloud connector not defined\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Configure Cloud connector to automatically remediate\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"configure\"\n            variant=\"link\"\n            component=\"a\"\n            // eslint-disable-next-line max-len\n            href=\"https://access.redhat.com/documentation/en-us/red_hat_insights/2020-10/html/remediating_issues_across_your_red_hat_satellite_infrastructure_using_red_hat_insights/configuring-your-satellite-infrastructure-to-communicate-with-insights\"\n          >\n            Learn how to configure &nbsp;\n            <ExternalLinkAltIcon />\n          </Button>\n        </Text>\n      </TextContent>\n    ),\n    no_rhc: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          Cannot remediate - Cloud connector not defined\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Remediation from Insights requires Cloud connector. Cloud connector\n            can be enabled via Satelite, or through &nbsp;\n            <Button\n              className=\"pf-u-p-0\"\n              key=\"configure\"\n              variant=\"link\"\n              component=\"a\"\n              // eslint-disable-next-line max-len\n              href={connectorUrl()}\n            >\n              RHC (Red Hat connector)\n            </Button>\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"download\"\n            variant=\"link\"\n            component=\"a\"\n            // eslint-disable-next-line max-len\n            href=\"https://access.redhat.com/documentation/en-us/red_hat_insights/2021/html/red_hat_connector_configuration_guide/index\"\n          >\n            Learn how to configure &nbsp;\n            <ExternalLinkAltIcon />\n          </Button>\n        </Text>\n      </TextContent>\n    ),\n    no_smart_management: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          Cannot remediate - Not entitled\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Remediation from Insights is supported only for systems with Cloud\n            connector, a feature of Smart Management\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"download\"\n            variant=\"link\"\n            component=\"a\"\n            // eslint-disable-next-line max-len\n            href=\"#\"\n          >\n            Learn about Smart Management &nbsp;\n            <ExternalLinkAltIcon />\n          </Button>\n        </Text>\n      </TextContent>\n    ),\n    disabled: (\n      <TextContent>\n        <Text component={TextVariants.p}>\n          Cannot remediate - Cloud connector not defined\n          <Text component={TextVariants.small} style={{ margin: '0px' }}>\n            Remediation from Insights requires Cloud connector. Cloud connector\n            can be enabled via Satelite, or through &nbsp;\n            <Button\n              className=\"pf-u-p-0\"\n              key=\"configure\"\n              variant=\"link\"\n              component=\"a\"\n              // eslint-disable-next-line max-len\n              href={connectorUrl()}\n            >\n              RHC (Red Hat connector)\n            </Button>\n          </Text>\n          <Button\n            className=\"pf-u-p-0\"\n            key=\"download\"\n            variant=\"link\"\n            component=\"a\"\n            // eslint-disable-next-line max-len\n            href=\"https://access.redhat.com/documentation/en-us/red_hat_insights/2021/html/red_hat_connector_configuration_guide/index\"\n          >\n            Learn how to configure &nbsp;\n            <ExternalLinkAltIcon />\n          </Button>\n        </Text>\n      </TextContent>\n    ),\n    loading: (\n      <TextContent>\n        <Text component={TextVariants.small}>\n          <SyncIcon\n            className=\"ins-c-remediations-connection-status\"\n            aria-label=\"connection status\"\n          />\n          Checking\n        </Text>\n      </TextContent>\n    ),\n  }[status]);\n","export function capitalize(string) {\n  return `${string.charAt(0).toUpperCase() + string.slice(1)}`;\n}\n","export const API_BASE = '/api/remediations/v1';\nexport const SOURCES_BASE = '/api/sources/v2.0';\n","import keyBy from 'lodash/keyBy';\nimport flatMap from 'lodash/flatMap';\n\nconst asyncActions = flatMap(\n  [\n    'LOAD_REMEDIATIONS',\n    'CREATE_REMEDIATIONS',\n    'LOAD_REMEDIATION',\n    'LOAD_REMEDIATION_STATUS',\n    'REFRESH_REMEDIATION',\n    'PATCH_REMEDIATION',\n    'DELETE_REMEDIATION',\n    'DELETE_REMEDIATION_ISSUE',\n    'DELETE_REMEDIATION_ISSUE_SYSTEM',\n    'PATCH_REMEDIATION_ISSUE',\n    'GET_RESOLUTIONS',\n    'GET_CONNECTION_STATUS',\n    'RUN_REMEDIATION',\n    'EXECUTE_PLAYBOOK_BANNER',\n    'RUN_REMEDIATION',\n    'GET_PLAYBOOK_RUNS',\n    'GET_PLAYBOOK_RUN',\n    'GET_PLAYBOOK_RUN_SYSTEMS',\n    'GET_PLAYBOOK_RUN_SYSTEM_DETAILS',\n    'CANCEL_PLAYBOOK_RUNS',\n    'GET_ENDPOINT',\n    'CHECK_EXECUTABLE',\n  ],\n  (a) => [a, `${a}_PENDING`, `${a}_FULFILLED`, `${a}_REJECTED`]\n);\n\nconst actions = ['SET_ETAG', 'EXPAND_INVENTORY_TABLE', 'SELECT_ENTITY'];\nexport const ACTION_TYPES = keyBy([...asyncActions, ...actions], (k) => k);\n\nexport const SEARCH_DEBOUNCE_DELAY = 500;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalVariant, Button, Title } from '@patternfly/react-core';\nimport { ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport './WarningModal.scss';\n\nexport const WarningModal = ({ isOpen, onModalCancel, onConfirmCancel }) => (\n  <Modal\n    header={\n      <Title\n        headingLevel=\"h1\"\n        size=\"2xl\"\n        className=\"ins-c-modal__cancel-run-warning-header\"\n      >\n        <ExclamationTriangleIcon\n          size=\"md\"\n          className=\"ins-c-modal__cancel-run-warning-header--icon\"\n        />\n        Cancel remediation process\n      </Title>\n    }\n    title=\"Cancel remediation process\"\n    hideTitle\n    variant={ModalVariant.small}\n    className=\"ins-c-modal__cancel-run-warning\"\n    isOpen={isOpen}\n    onClose={onModalCancel}\n    actions={[\n      <Button\n        key=\"confirm\"\n        variant=\"danger\"\n        ouiaId=\"cancel_playbook\"\n        onClick={onConfirmCancel}\n      >\n        Cancel playbook process\n      </Button>,\n      <Button\n        key=\"cancel\"\n        variant=\"link\"\n        ouiaId=\"cancel\"\n        onClick={onModalCancel}\n      >\n        Cancel\n      </Button>,\n    ]}\n    isFooterLeftAligned\n  >\n    <span>\n      Canceling a running playbook process only affects pending and running\n      tasks. It does not affect any previously succeeded or failed tasks that\n      have already run.\n    </span>\n  </Modal>\n);\n\nWarningModal.propTypes = {\n  type: PropTypes.string,\n  isOpen: PropTypes.bool,\n  onModalCancel: PropTypes.func,\n  onConfirmCancel: PropTypes.func,\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Button } from '@patternfly/react-core';\nimport { WarningModal } from '../components/Modals/WarningModal';\n\nimport { useDispatch } from 'react-redux';\nimport { cancelPlaybookRuns } from '../actions';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\n\nexport const CancelButton = ({\n  remediationName,\n  remediationId,\n  playbookId,\n}) => {\n  const [cancelWarningVisible, setcancelWarningVisible] = useState(false);\n  const dispatch = useDispatch();\n\n  const cancelRun = (remediationName, remediationId, playbookId) => {\n    dispatch(cancelPlaybookRuns(remediationId, playbookId));\n    dispatch(\n      addNotification({\n        variant: 'success',\n        title: `Canceling playbook ${remediationName} successful`,\n        dismissDelay: 8000,\n        dismissable: false,\n      })\n    );\n    setcancelWarningVisible(false);\n  };\n\n  return (\n    <React.Fragment>\n      <Button variant=\"link\" onClick={() => setcancelWarningVisible(true)}>\n        Cancel process\n      </Button>\n      <WarningModal\n        isOpen={cancelWarningVisible}\n        onModalCancel={() => setcancelWarningVisible(false)}\n        onConfirmCancel={() =>\n          cancelRun(remediationName, remediationId, playbookId)\n        }\n      />\n    </React.Fragment>\n  );\n};\n\nCancelButton.propTypes = {\n  remediationName: PropTypes.string,\n  remediationId: PropTypes.string,\n  playbookId: PropTypes.string,\n};\n","import { useState } from 'react';\nimport debounce from 'lodash/debounce';\nimport filter from 'lodash/filter';\nimport pickBy from 'lodash/pickBy';\nimport keys from 'lodash/keys';\nimport keyBy from 'lodash/keyBy';\nimport mapValues from 'lodash/mapValues';\nimport identity from 'lodash/identity';\nimport intersection from 'lodash/intersection';\n\nimport { SEARCH_DEBOUNCE_DELAY } from '../constants';\n\nconst chain =\n  (f1, f2) =>\n  (...args) => {\n    f1(...args);\n    f2(...args);\n  };\n\n/**\n * Returns a function f that, when called, invokes a sequence of callback functions.\n *\n * By default, this sequence only contains the identity function.\n * Additional callback functions can be added to the sequence by calling f.add().\n * When the function is called with parameters, e.g. f(1, 2), these parameters are passed to callback functions.\n * Callback functions may return a promise however these will *not* be awaited.\n * If a callback function throws an exception any following callback functions will *not* be invoked.\n *\n * Usage:\n * const f = callbacks();\n *\n * f.add(value => console.log(value));\n * f.add(value => console.log(value + 1));\n * f.add(value => console.log(value + 2));\n *\n * f(5); // prints 5 6 7\n */\nfunction callbacks() {\n  let cb = identity;\n  const fn = (...args) => cb(...args);\n  fn.add = (f) => (cb = chain(cb, f));\n  return fn;\n}\n\nfunction assertId(id) {\n  if (id === undefined) {\n    throw new Error('row does not define id!');\n  }\n}\n\nexport function useSorter(defaultSortBy = 2, defaultSortDir = 'asc') {\n  const [sortBy, setSortBy] = useState(defaultSortBy);\n  const [sortDir, setSortDir] = useState(defaultSortDir);\n\n  const cb = callbacks();\n\n  return {\n    sortBy,\n    sortDir,\n    onChange: cb.add,\n    props: {\n      sortBy: {\n        index: sortBy,\n        direction: sortDir,\n      },\n      onSort(event, sortBy, sortDir) {\n        cb(sortBy, sortDir);\n        setSortBy(sortBy);\n        setSortDir(sortDir);\n      },\n    },\n  };\n}\n\nexport function useFilter() {\n  const [value, setValue] = useState('');\n\n  const cb = callbacks();\n\n  const onValueChange = debounce((value) => {\n    cb(value);\n    setValue(value);\n  }, SEARCH_DEBOUNCE_DELAY);\n\n  return {\n    value,\n    setValue: onValueChange,\n    onChange: cb.add,\n    props: {\n      onFilterChange: onValueChange,\n    },\n  };\n}\n\nexport function useExpander(rowToId = (row) => row.id) {\n  const [value, setValue] = useState(false);\n  let rows = false;\n\n  return {\n    value,\n    register: (r) => {\n      rows = r;\n      rows.forEach((row) => {\n        if (rowToId(row) === value) {\n          row.isOpen = true;\n        }\n      });\n    },\n    props: {\n      onCollapse(event, index, value) {\n        if (!rows) {\n          throw new Error('register() not called on useExpander()');\n        }\n\n        const id = rowToId(rows[index]);\n        assertId(id);\n\n        setValue(value ? id : false);\n      },\n    },\n  };\n}\n\nexport function usePagination() {\n  const [page, setPage] = useState(1);\n  const [pageDebounced, setPageDebounced] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n\n  const reset = () => setPage(1);\n  const cb = callbacks();\n\n  return {\n    page,\n    pageDebounced,\n    offset: (page - 1) * pageSize,\n    pageSize,\n    setPage,\n    onChange: cb.add,\n    reset,\n    props: {\n      page,\n      perPage: pageSize,\n      onSetPage(event, value) {\n        setPage(value);\n        event.target.tagName === 'INPUT'\n          ? debounce(setPageDebounced, SEARCH_DEBOUNCE_DELAY)(value)\n          : setPageDebounced(value);\n        cb(value, pageSize);\n      },\n      onPerPageSelect(event, value) {\n        cb(page, value);\n        reset();\n        setPageSize(value);\n      },\n    },\n  };\n}\n\nfunction onSelectOne(selected, isSelected, id) {\n  assertId(id);\n\n  const result = {\n    ...selected,\n    [id]: isSelected,\n  };\n\n  return result;\n}\n\nfunction onSelectAll(rows, value, isSelected, rowToId) {\n  const rowIds = keyBy(\n    filter(rows, (row) => rowToId(row)),\n    rowToId\n  );\n\n  return {\n    ...value,\n    ...mapValues(rowIds, () => isSelected),\n  };\n}\n\nfunction isSelected(value, id) {\n  return Object.prototype.hasOwnProperty.call(value, id) ? value[id] : false;\n}\n\nexport function useSelector(rowToId = (row) => row.id) {\n  const [value, setValue] = useState({});\n  let rows = false;\n\n  return {\n    getSelectedIds(possibleIds) {\n      const selected = keys(pickBy(value, identity));\n      if (possibleIds) {\n        return intersection(selected, possibleIds);\n      }\n\n      return selected;\n    },\n    register: (r) => {\n      rows = r;\n      rows.forEach((row) => (row.selected = value[rowToId(row)] === true));\n    },\n    reset: () => setValue({}),\n    props: {\n      onSelect: (unused, isSelected, index) => {\n        if (!rows) {\n          throw new Error('register() not called on useSelector()');\n        }\n\n        setValue((value) =>\n          index === -1\n            ? onSelectAll(rows, value, isSelected, rowToId)\n            : onSelectOne(value, isSelected, rowToId(rows[index]))\n        );\n      },\n    },\n    tbodyProps: {\n      onRowClick(event, row) {\n        if (['A', 'BUTTON', 'INPUT'].includes(event.target.tagName)) {\n          return;\n        }\n\n        const id = rowToId(row);\n        assertId(id);\n        setValue((value) => ({\n          ...value,\n          [id]: !isSelected(value, id),\n        }));\n      },\n    },\n  };\n}\n","import { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/Registry';\nimport { notificationsReducer } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport notificationsMiddleware from '@redhat-cloud-services/frontend-components-notifications/notificationsMiddleware';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport reducers from './reducers';\n\nlet registry;\n\nexport function init(...middleware) {\n  registry = getRegistry({}, [\n    promiseMiddleware,\n    notificationsMiddleware({\n      errorTitleKey: 'message',\n      errorDescriptionKey: 'description',\n    }),\n    ...middleware.filter((item) => typeof item !== 'undefined'),\n  ]);\n\n  registry.register(reducers);\n  registry.register({ notifications: notificationsReducer });\n\n  return registry;\n}\n\nexport function getStore() {\n  return registry.getStore();\n}\n\nexport function register(...args) {\n  return registry.register(...args);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { RedoIcon, TimesIcon } from '@patternfly/react-icons';\nimport { Fragment } from 'react';\n\nconst RebootColumn = ({ rebootRequired }) => {\n  const Icon = rebootRequired ? RedoIcon : TimesIcon;\n  return (\n    <Fragment>\n      <span>\n        <Icon /> {rebootRequired ? 'Yes' : 'No'}\n      </span>\n    </Fragment>\n  );\n};\n\nRebootColumn.propTypes = {\n  rebootRequired: PropTypes.bool,\n};\n\nexport default RebootColumn;\n","import React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalVariant } from '@patternfly/react-core';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  cellWidth,\n  sortable,\n} from '@patternfly/react-table';\nimport RebootColumn from './RebootColumn';\nimport { CheckIcon, TimesIcon } from '@patternfly/react-icons';\nimport { buildIssueUrl } from '../../Utilities/urls';\nimport sortBy from 'lodash/sortBy';\n\nconst issueType = {\n  advisor: 'Advisor recommendation',\n  vulnerabilities: 'Vulnerability',\n  'patch-advisory': 'Patch advisory',\n};\n\nconst sortByIndex = (issue) => [\n  issue.description,\n  issue.resolution.needs_reboot,\n  issueType?.[issue.id.split(':')[0]],\n  issue.resolved,\n];\n\nconst IssuesColumn = ({ issues, status, displayName }) => {\n  const [sortByConfig, setSortByConfig] = useState({\n    index: 0,\n    direction: 'asc',\n  });\n  const [isOpen, setIsOpen] = useState();\n  const StatusIcon = status ? CheckIcon : TimesIcon;\n  const sortedIssues = sortBy(\n    issues,\n    (sortIssue) => sortByIndex(sortIssue)[sortByConfig.index]\n  );\n  return (\n    <Fragment>\n      <Button variant=\"link\" isInline onClick={() => setIsOpen(true)}>\n        {issues.length}\n      </Button>\n      <Modal\n        variant={ModalVariant.medium}\n        title={`Actions for system ${displayName}`}\n        isOpen={isOpen}\n        onClose={() => setIsOpen(false)}\n      >\n        <Table\n          variant=\"compact\"\n          aria-label={`Issues table for ${displayName}`}\n          rows={(sortByConfig.direction === 'asc'\n            ? sortedIssues\n            : sortedIssues.reverse()\n          ).map((issue) => [\n            {\n              title: (\n                <Fragment>\n                  <div>\n                    <a variant=\"link\" isInline href={buildIssueUrl(issue.id)}>\n                      {issue.description}\n                    </a>\n                  </div>\n                  <div>{issue.resolution.description}</div>\n                </Fragment>\n              ),\n            },\n            {\n              title: (\n                <Fragment>\n                  <RebootColumn\n                    rebootRequired={issue.resolution.needs_reboot}\n                  />\n                </Fragment>\n              ),\n            },\n            issueType?.[issue.id.split(':')[0]] || 'Unknown',\n            {\n              title: (\n                <Fragment>\n                  <StatusIcon />{' '}\n                  {issue.resolved ? 'Remediated' : 'Not remediated'}\n                </Fragment>\n              ),\n            },\n          ])}\n          cells={[\n            {\n              title: 'Action',\n              transforms: [sortable],\n            },\n            {\n              title: 'Reboot required',\n              transforms: [sortable, cellWidth(20)],\n            },\n            {\n              title: 'Type',\n              transforms: [sortable, cellWidth(15)],\n            },\n            {\n              title: 'Status',\n              transforms: [sortable, cellWidth(20)],\n            },\n          ]}\n          sortBy={sortByConfig}\n          onSort={(_e, index, direction) =>\n            setSortByConfig({ index, direction })\n          }\n        >\n          <TableHeader />\n          <TableBody />\n        </Table>\n      </Modal>\n    </Fragment>\n  );\n};\n\nIssuesColumn.propTypes = {\n  issues: PropTypes.arrayOf(PropTypes.shape()),\n  rebootRequired: PropTypes.bool,\n  status: PropTypes.bool,\n  displayName: PropTypes.string,\n};\n\nexport default IssuesColumn;\n","import React from 'react';\n\nimport { ACTION_TYPES } from '../constants';\nimport { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport flatMap from 'lodash/flatMap';\nimport uniq from 'lodash/uniq';\nimport { RebootColumn, IssuesColumn } from '../components/SystemsTable';\n\nfunction issuesToSystemsIds(issues) {\n  return uniq(\n    flatMap(issues, (issue) => issue.systems.map((system) => system.id))\n  );\n}\n\nfunction computeRebootStats(remediation) {\n  const systems = issuesToSystemsIds(remediation.issues);\n  const rebootRequired = issuesToSystemsIds(\n    remediation.issues.filter((issue) => issue.resolution.needs_reboot)\n  );\n\n  return {\n    ...remediation,\n    stats: {\n      systemsWithReboot: rebootRequired.length,\n      systemsWithoutReboot: systems.length - rebootRequired.length,\n    },\n  };\n}\n\nexport const remediationSystems = ({ LOAD_ENTITIES_FULFILLED }) =>\n  applyReducerHash({\n    [ACTION_TYPES.SELECT_ENTITY]: (state, { payload }) => {\n      const selected = state.selected || new Map();\n      if (payload.selected) {\n        if (payload.id === 0) {\n          state?.rows?.forEach((row) => selected.set(row?.id, row));\n        } else {\n          const selectedRow = state?.rows?.find(\n            ({ id } = {}) => id === payload.id\n          );\n          selected.set(payload.id, { ...(selectedRow || {}), id: payload.id });\n        }\n      } else {\n        if (payload.id === 0) {\n          state.rows.forEach((row) => selected.delete(row.id));\n        } else if (payload.id === -1) {\n          selected.clear();\n        } else {\n          selected.delete(payload.id);\n        }\n      }\n\n      return {\n        ...state,\n        selected: new Map(selected),\n      };\n    },\n    [`${LOAD_ENTITIES_FULFILLED}`]: (state) => {\n      return {\n        ...state,\n        rows: state.rows.map(({ id, ...row }) => ({\n          id,\n          ...row,\n          selected: !!state.selected?.get(id),\n        })),\n        columns: [\n          ...state.columns.filter(({ key }) =>\n            ['display_name', 'tags'].includes(key)\n          ),\n          {\n            key: 'issues',\n            title: 'Issues',\n            // eslint-disable-next-line react/display-name\n            renderFunc: (issues, id, { display_name }) => (\n              <IssuesColumn\n                issues={issues}\n                id={id}\n                displayName={display_name}\n              />\n            ),\n            props: { width: 15 },\n          },\n          {\n            key: 'rebootRequired',\n            title: 'Reboot required',\n            // eslint-disable-next-line react/display-name\n            renderFunc: (rebootRequired) => (\n              <RebootColumn rebootRequired={rebootRequired} />\n            ),\n            props: { width: 15 },\n          },\n        ].map((cell) => ({\n          ...cell,\n          props: {\n            ...(cell.props || {}),\n            isStatic: true,\n          },\n        })),\n      };\n    },\n  });\n\nconst reducers = {\n  remediations: applyReducerHash(\n    {\n      [ACTION_TYPES.LOAD_REMEDIATIONS_PENDING]: () => ({\n        status: 'pending',\n      }),\n      [ACTION_TYPES.LOAD_REMEDIATIONS_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        value: action.payload,\n      }),\n      [ACTION_TYPES.LOAD_REMEDIATIONS_REJECTED]: () => ({\n        status: 'rejected',\n      }),\n    },\n    {\n      status: 'initial',\n    }\n  ),\n\n  selectedRemediation: applyReducerHash(\n    {\n      [ACTION_TYPES.LOAD_REMEDIATION_PENDING]: () => ({\n        status: 'pending',\n      }),\n      [ACTION_TYPES.LOAD_REMEDIATION_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        remediation: computeRebootStats(action.payload),\n      }),\n      [ACTION_TYPES.REFRESH_REMEDIATION_FULFILLED]: (state, action) => {\n        if (action.payload.id === state.remediation.id) {\n          return {\n            status: 'fulfilled',\n            remediation: computeRebootStats(action.payload),\n          };\n        }\n\n        return state;\n      },\n      [ACTION_TYPES.LOAD_REMEDIATION_REJECTED]: () => ({\n        status: 'rejected',\n      }),\n      [ACTION_TYPES.PATCH_REMEDIATION_FULFILLED]: (\n        { status, remediation },\n        action\n      ) => {\n        return {\n          status,\n          remediation: {\n            ...remediation,\n            ...action.payload,\n          },\n        };\n      },\n      [ACTION_TYPES.DELETE_REMEDIATION_ISSUE_FULFILLED]: (state, action) => {\n        const issues = state.remediation.issues.filter(\n          (issue) => issue.id !== action.payload.issueId\n        );\n        if (action.payload.id === state.remediation.id) {\n          return {\n            status: 'fulfilled',\n            remediation: computeRebootStats({\n              ...state.remediation,\n              issues,\n              needs_reboot: issues.some(\n                (issue) => issue.resolution.needs_reboot\n              ), // eslint-disable-line camelcase\n            }),\n          };\n        }\n\n        return state;\n      },\n      [ACTION_TYPES.DELETE_REMEDIATION_ISSUE_SYSTEM_FULFILLED]: (\n        state,\n        action\n      ) => {\n        if (action.payload.id !== state.remediation.id) {\n          return state;\n        }\n\n        const issues = state.remediation.issues.filter((issue) => {\n          if (issue.id !== action.payload.issue) {\n            return true;\n          }\n\n          // if the action only had 1 systems, which is now gone, remove the action also\n          issue.systems = issue.systems.filter(\n            (system) => system.id !== action.payload.system\n          );\n          return issue.systems.length > 0;\n        });\n\n        return {\n          status: 'fulfilled',\n          remediation: computeRebootStats({\n            ...state.remediation,\n            issues,\n            needs_reboot: issues.some((issue) => issue.resolution.needs_reboot), // eslint-disable-line camelcase\n          }),\n        };\n      },\n    },\n    {\n      status: 'initial',\n    }\n  ),\n\n  selectedRemediationStatus: applyReducerHash(\n    {\n      [ACTION_TYPES.LOAD_REMEDIATION_STATUS_PENDING]: () => ({\n        status: 'pending',\n      }),\n      [ACTION_TYPES.LOAD_REMEDIATION_STATUS_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        data: action.payload,\n      }),\n      [ACTION_TYPES.LOAD_REMEDIATION_STATUS_REJECTED]: () => ({\n        status: 'rejected',\n      }),\n    },\n    {\n      status: 'initial',\n    }\n  ),\n\n  connectionStatus: applyReducerHash(\n    {\n      [ACTION_TYPES.GET_CONNECTION_STATUS_PENDING]: () => ({\n        status: 'pending',\n      }),\n      [ACTION_TYPES.GET_CONNECTION_STATUS_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        data: action.payload.data,\n        etag: action.payload.etag,\n      }),\n      [ACTION_TYPES.GET_CONNECTION_STATUS_REJECTED]: () => ({\n        status: 'rejected',\n        data: [],\n      }),\n      [ACTION_TYPES.SET_ETAG]: (state, action) => ({\n        ...state,\n        etag: action.etag,\n      }),\n    },\n    {\n      status: 'initial',\n    }\n  ),\n\n  inventoryEntitiesReducer:\n    (props = { INVENTORY_ACTION_TYPES: {} }) =>\n    () =>\n      applyReducerHash({\n        [props.INVENTORY_ACTION_TYPES.LOAD_ENTITIES_FULFILLED]: (state) => {\n          return {\n            ...state,\n            columns: [\n              {\n                key: 'display_name',\n                title: 'Name',\n                // eslint-disable-next-line\n                renderFunc: (name, id, { display_name }) => <div><a href={props.urlBuilder(id)}>{display_name}</a></div>\n              },\n              {\n                key: 'system_status',\n                title: 'Status',\n                // eslint-disable-next-line\n                        renderFunc: (name, id) => <div>{props.generateStatus(id)}</div>\n              },\n            ],\n          };\n        },\n      }),\n\n  playbookActivityIntentory: (props) => () =>\n    applyReducerHash({\n      [props.INVENTORY_ACTION_TYPES.LOAD_ENTITIES_FULFILLED]: (state) => {\n        return {\n          ...state,\n          columns: [\n            {\n              key: 'display_name',\n              title: 'Name',\n              // eslint-disable-next-line\n              renderFunc: (name, id, { fqdn }) => <div><a href={props.urlBuilder(id)}>{fqdn || name || id}</a></div>\n            },\n            state.columns.find((col) => col.key === 'tags'),\n            {\n              key: 'status',\n              title: 'Status',\n              renderFunc: (status) => props.renderStatus(status),\n            },\n          ],\n        };\n      },\n\n      [ACTION_TYPES.EXPAND_INVENTORY_TABLE]: (state, action) => {\n        return {\n          ...state,\n          rows: state.rows.map((row) => ({\n            ...row,\n            isOpen:\n              row.id === action.payload.id ? action.payload.isOpen : false,\n          })),\n        };\n      },\n    }),\n\n  playbookRuns: applyReducerHash({\n    [ACTION_TYPES.GET_PLAYBOOK_RUNS_FULFILLED]: (state, action) => ({\n      status: 'fulfilled',\n      data: action.payload.data,\n      meta: action.payload.meta,\n    }),\n  }),\n\n  cancelPlaybookRuns: applyReducerHash(\n    {\n      [ACTION_TYPES.CANCEL_PLAYBOOK_RUNS_PENDING]: () => ({\n        status: 'pending',\n      }),\n      [ACTION_TYPES.CANCEL_PLAYBOOK_RUNS_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        value: action.payload,\n      }),\n      [ACTION_TYPES.CANCEL_PLAYBOOK_RUNS_REJECTED]: () => ({\n        status: 'rejected',\n      }),\n    },\n    {\n      status: 'initial',\n    }\n  ),\n\n  playbookRun: applyReducerHash({\n    [ACTION_TYPES.GET_PLAYBOOK_RUN_FULFILLED]: (state, action) => ({\n      data: action.payload,\n    }),\n  }),\n\n  playbookRunSystems: applyReducerHash(\n    {\n      [ACTION_TYPES.GET_PLAYBOOK_RUN_SYSTEMS_FULFILLED]: (state, action) => ({\n        ...action.payload,\n      }),\n      [ACTION_TYPES.GET_PLAYBOOK_RUN_SYSTEMS_PENDING]: (state) => ({\n        ...state,\n        status: 'pending',\n      }),\n      [ACTION_TYPES.GET_PLAYBOOK_RUN_SYSTEMS_REJECTED]: (state) => ({\n        ...state,\n        data: [],\n        status: 'rejected',\n      }),\n    },\n    {\n      data: [],\n      meta: {},\n    }\n  ),\n\n  playbookRunSystemDetails: applyReducerHash({\n    [ACTION_TYPES.GET_PLAYBOOK_RUN_SYSTEM_DETAILS_FULFILLED]: (\n      state,\n      action\n    ) => ({\n      ...action.payload,\n    }),\n  }),\n\n  runRemediation: applyReducerHash(\n    {\n      [ACTION_TYPES.RUN_REMEDIATION_PENDING]: () => ({\n        status: 'pending',\n      }),\n      [ACTION_TYPES.RUN_REMEDIATION_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        data: action.payload.data,\n      }),\n      [ACTION_TYPES.RUN_REMEDIATION_REJECTED]: (state, action) => ({\n        status: action.payload.response.status === 412 ? 'changed' : 'rejected',\n      }),\n    },\n    {\n      status: 'initial',\n    }\n  ),\n\n  sources: applyReducerHash(\n    {\n      [ACTION_TYPES.GET_ENDPOINT_FULFILLED]: (state, action) => ({\n        status: 'fulfilled',\n        data: {\n          ...state.data,\n          [action.payload.id]: action.payload,\n        },\n      }),\n    },\n    {\n      status: 'initial',\n    }\n  ),\n  executable: applyReducerHash(\n    {\n      [ACTION_TYPES.CHECK_EXECUTABLE_REJECTED]: () => false,\n      [ACTION_TYPES.CHECK_EXECUTABLE_FULFILLED]: () => true,\n    },\n    false\n  ),\n};\n\nexport default reducers;\n"],"sourceRoot":""}